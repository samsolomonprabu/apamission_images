var tvs = [
     { src: '<iframe width="560" height="315" src="https://www.youtube.com/embed/3aihJuJIUMo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>', name: 'Salvation TV', img: 'salvation-tv.png' },
     { src: '<iframe src="https://www.yupptv.com/yupptvnew/channels/hosanna/live/embed" frameborder="0" width="560" height="315" gesture="media" allow="encrypted-media" allowfullscreen></iframe>', name: 'Hosanna TV', img: 'hosanna-tv.png' },
     { src: '<iframe src="//iframe.dacast.com/b/120994/c/488485" width="560" height="315" frameborder="0" scrolling="no" allow="autoplay" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" oallowfullscreen="" msallowfullscreen=""></iframe>', name: 'Holy God TV', img: 'holy-god-tv.png' },
     { src: '<iframe width="560" height="315" src="https://www.youtube.com/embed/5rw14OPXyF8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>', name: 'Jesus Redeems TV', img: 'jesus-redeems-tv.png' },
     { src: '<iframe src="//www.christianworldmedia.com/3069-3015-/embed-html5/f7/livestream.html" width="520" height="292" scrolling="no" frameborder="0" allowtransparency="true" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true" allow="autoplay; fullscreen"></iframe>', name: 'Lord TV', img: 'lord-tv.png' },
     { src: '<iframe src="https://flowplayer.com/e/?t=Home%20%3A%20Nambikkai%20Television&c=eyJkZWJ1ZyI6ZmFsc2UsImRpc2FibGVkIjpmYWxzZSwiZnVsbHNjcmVlbiI6dHJ1ZSwia2V5Ym9hcmQiOnRydWUsInJhdGlvIjowLjU2MjUsImFkYXB0aXZlUmF0aW8iOmZhbHNlLCJydG1wIjowLCJwcm94eSI6ImJlc3QiLCJobHNRdWFsaXRpZXMiOnRydWUsInNlZWtTdGVwIjpmYWxzZSwic3BsYXNoIjpmYWxzZSwibGl2ZSI6ZmFsc2UsImxpdmVQb3NpdGlvbk9mZnNldCI6MTIwLCJzd2YiOiIvL3JlbGVhc2VzLmZsb3dwbGF5ZXIub3JnLzcuMi42L2Zsb3dwbGF5ZXIuc3dmIiwic3dmSGxzIjoiLy9yZWxlYXNlcy5mbG93cGxheWVyLm9yZy83LjIuNi9mbG93cGxheWVyaGxzLnN3ZiIsInNwZWVkcyI6WzAuMjUsMC41LDEsMS41LDJdLCJ0b29sdGlwIjp0cnVlLCJtb3VzZW91dFRpbWVvdXQiOjUwMDAsIm11dGVkQXV0b3BsYXkiOnRydWUsImNsaWNrVG9Vbk11dGUiOnRydWUsInZvbHVtZSI6IjAuNjQ5ODMyNTg5Mjg1NzE0MyIsImVycm9ycyI6WyIiLCJWaWRlbyBsb2FkaW5nIGFib3J0ZWQiLCJOZXR3b3JrIGVycm9yIiwiVmlkZW8gbm90IHByb3Blcmx5IGVuY29kZWQiLCJWaWRlbyBmaWxlIG5vdCBmb3VuZCIsIlVuc3VwcG9ydGVkIHZpZGVvIiwiU2tpbiBub3QgZm91bmQiLCJTV0YgZmlsZSBub3QgZm91bmQiLCJTdWJ0aXRsZXMgbm90IGZvdW5kIiwiSW52YWxpZCBSVE1QIFVSTCIsIlVuc3VwcG9ydGVkIHZpZGVvIGZvcm1hdC4gVHJ5IGluc3RhbGxpbmcgQWRvYmUgRmxhc2guIl0sImVycm9yVXJscyI6WyIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCJodHRwOi8vZ2V0LmFkb2JlLmNvbS9mbGFzaHBsYXllci8iXSwicGxheWxpc3QiOltdLCJobHNGaXgiOmZhbHNlLCJkaXNhYmxlSW5saW5lIjpmYWxzZSwiYXV0b3BsYXkiOiJhdXRvcGxheSIsImNsaXAiOnsic3VidGl0bGVzIjpbXSwic291cmNlcyI6W3sic3JjIjoiaHR0cDovL2xpdmUud21uY2RuLm5ldC9uYW1iaWtrYWl0di9saXZlLnN0cmVhbS9pbmRleC5tM3U4Iiwic3VmZml4IjoibTN1OCIsInR5cGUiOiJhcHBsaWNhdGlvbi94LW1wZWd1cmwifV19LCJob3N0bmFtZSI6Ind3dy5uYW1iaWtrYWl0di5jb20iLCJvcmlnaW4iOiJodHRwczovL3d3dy5uYW1iaWtrYWl0di5jb20vIiwianMiOltdLCJjc3MiOltdfQ%3D%3D&r=https%3A%2F%2Fwww.nambikkaitv.com%2F" allowfullscreen style="border:none;position:absolute;top:0;left:0;width:100%;height:100%;"></iframe>', name: 'Nambikkai TV', img: 'nambikkai-tv.png' },
     { src: '<iframe src="//players.brightcove.net/753071706001/Syx1Jqya2b_default/index.html?videoId=4434490521001" allowfullscreen webkitallowfullscreen mozallowfullscreen style="position: absolute; top: 0px; right: 0px; bottom: 0px; left: 0px; width: 100%; height: 100%;"></iframe>', name: 'Hope TV', img: 'hope-tv.png' },
     { src: '<iframe src="https://swf.livestreamingcdn.com/iframe/jesuslivetv/index.php" frameborder="0" scrolling="no" allowfullscreen="true" webkitallowfullscreen="true" align="middle" width="640" height="360"></iframe>', name: 'Jesus Live TV', img: 'jesus-live-tv.png' },
     { src: '<iframe src="https://www.yupptv.com/yupptvnew/channels/angel-tv/live/embed" frameborder="0" width="560" height="315" gesture="media" allow="encrypted-media" allowfullscreen></iframe>', name: 'Angel TV', img: 'angel-tv.png' },
     { src: '<video id="myvideo" controls="" style="width:100%;background:rgba(0,0,0,1);" src="blob:http://www.blessingtv.tv/fcfa2c7d-5705-4a68-b1c4-0edfda87fdb3"></video><script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script><script type="text/javascript">if(Hls.isSupported()) {var video = document.getElementById("myvideo");var hls = new Hls();hls.loadSource("http://199.168.96.106:1935/blessingtv-tamillive/mystream/playlist.m3u8");hls.attachMedia(video);hls.on(Hls.Events.MANIFEST_PARSED,function() {video.play(); }); }</script>', name: 'Blessing TV', img: 'blessing-tv.png' },
     { src: '<iframe src="https://account12.livebox.co.in:3210/?url=https://account12.livebox.co.in/sjmhsshls/live.m3u8"></iframe>', name: 'Thoodhu TV', img: 'thoodhu-tv.png' },
     { src: '<iframe src="//app.viloud.tv/player/embed/channel/a909b63d9bded6eb1ebcf51381898f72?autoplay=1&volume=1&controls=1&title=0&share=0&random=1" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" frameborder="0" allowfullscreen></iframe>', name: 'Uthamiyae TV', img: 'uthamiya-tv.png' }
];

jQuery(function() {
     tvContainer = jQuery('#tvContainer');
     tvTitle = jQuery('#tvTitle');
     mediaContainer = jQuery('#mediaShows');
     tvTemplate = jQuery('#tvTemplate');
     construct();
});

var adIndex = 0;

function construct() {
     var hash = window.location.hash.split('#')[1];
     mediaContainer.html('');
     var count = 0;
     tvs.forEach(function(item, index) {

          if(index != 0 && count % 4 == 0) {
               insertAd();
          }
          count++;

          var tv = tvTemplate.clone(true);
          tv.attr('id', md5(index));

          var imgEl = tv.find('img');
          imgEl.attr('src', imgEl.attr('src') + item.img);
          imgEl.attr('alt', item.name);

          tv.find('.card-text').text(item.name);

          if(hash === md5(index)) {
               tv.find('.card').addClass('bg-dark');
               tv.find('a').attr('href', '#' + md5(index)).text('Currently Watching');
               tvContainer.show().html(item.src);
               tvTitle.text(item.name);
               document.title = item.name + ' | ' + document.title;
               window.scroll({ top: tvTitle.scrollTop, behavior: 'smooth' });
          } else {
               tv.find('a').attr('href', '#' + md5(index)).text('Watch Now');
          }

          tv.show();
          mediaContainer.append(tv);
     });
};

function changeTV() {
     construct();
};

function insertAd() {
     var tv = tvTemplate.clone(true);
     tv.attr('id', md5('ad' + adIndex));
     tv.html(getAdSnippet(adIndex));
     tv.show();
     mediaContainer.append(tv);
     adIndex++;
};

window.onhashchange = changeTV;