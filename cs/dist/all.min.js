
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});if(typeof jQuery==='undefined'){throw new Error('Bootstrap\'s JavaScript requires jQuery')}
+function($){'use strict';function transitionEnd(){var el=document.createElement('bootstrap')
var transEndEventNames={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd otransitionend','transition':'transitionend'}
for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}
return false}
$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this
$(this).one($.support.transition.end,function(){called=true})
var callback=function(){if(!called)$($el).trigger($.support.transition.end)}
setTimeout(callback,duration)
return this}
$(function(){$.support.transition=transitionEnd()})}(jQuery);+function($){'use strict';var dismiss='[data-dismiss="alert"]'
var Alert=function(el){$(el).on('click',dismiss,this.close)}
Alert.prototype.close=function(e){var $this=$(this)
var selector=$this.attr('data-target')
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
var $parent=$(selector)
if(e)e.preventDefault()
if(!$parent.length){$parent=$this.hasClass('alert')?$this:$this.parent()}
$parent.trigger(e=$.Event('close.bs.alert'))
if(e.isDefaultPrevented())return
$parent.removeClass('in')
function removeElement(){$parent.trigger('closed.bs.alert').remove()}
$.support.transition&&$parent.hasClass('fade')?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement()}
var old=$.fn.alert
$.fn.alert=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.alert')
if(!data)$this.data('bs.alert',(data=new Alert(this)))
if(typeof option=='string')data[option].call($this)})}
$.fn.alert.Constructor=Alert
$.fn.alert.noConflict=function(){$.fn.alert=old
return this}
$(document).on('click.bs.alert.data-api',dismiss,Alert.prototype.close)}(jQuery);+function($){'use strict';var Button=function(element,options){this.$element=$(element)
this.options=$.extend({},Button.DEFAULTS,options)
this.isLoading=false}
Button.DEFAULTS={loadingText:'loading...'}
Button.prototype.setState=function(state){var d='disabled'
var $el=this.$element
var val=$el.is('input')?'val':'html'
var data=$el.data()
state=state+'Text'
if(!data.resetText)$el.data('resetText',$el[val]())
$el[val](data[state]||this.options[state])
setTimeout($.proxy(function(){if(state=='loadingText'){this.isLoading=true
$el.addClass(d).attr(d,d)}else if(this.isLoading){this.isLoading=false
$el.removeClass(d).removeAttr(d)}},this),0)}
Button.prototype.toggle=function(){var changed=true
var $parent=this.$element.closest('[data-toggle="buttons"]')
if($parent.length){var $input=this.$element.find('input')
if($input.prop('type')=='radio'){if($input.prop('checked')&&this.$element.hasClass('active'))changed=false
else $parent.find('.active').removeClass('active')}
if(changed)$input.prop('checked',!this.$element.hasClass('active')).trigger('change')}
if(changed)this.$element.toggleClass('active')}
var old=$.fn.button
$.fn.button=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.button')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.button',(data=new Button(this,options)))
if(option=='toggle')data.toggle()
else if(option)data.setState(option)})}
$.fn.button.Constructor=Button
$.fn.button.noConflict=function(){$.fn.button=old
return this}
$(document).on('click.bs.button.data-api','[data-toggle^=button]',function(e){var $btn=$(e.target)
if(!$btn.hasClass('btn'))$btn=$btn.closest('.btn')
$btn.button('toggle')
e.preventDefault()})}(jQuery);+function($){'use strict';var Carousel=function(element,options){this.$element=$(element)
this.$indicators=this.$element.find('.carousel-indicators')
this.options=options
this.paused=this.sliding=this.interval=this.$active=this.$items=null
this.options.pause=='hover'&&this.$element.on('mouseenter',$.proxy(this.pause,this)).on('mouseleave',$.proxy(this.cycle,this))}
Carousel.DEFAULTS={interval:5000,pause:'hover',wrap:true}
Carousel.prototype.cycle=function(e){e||(this.paused=false)
this.interval&&clearInterval(this.interval)
this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval))
return this}
Carousel.prototype.getActiveIndex=function(){this.$active=this.$element.find('.item.active')
this.$items=this.$active.parent().children()
return this.$items.index(this.$active)}
Carousel.prototype.to=function(pos){var that=this
var activeIndex=this.getActiveIndex()
if(pos>(this.$items.length-1)||pos<0)return
if(this.sliding)return this.$element.one('slid.bs.carousel',function(){that.to(pos)})
if(activeIndex==pos)return this.pause().cycle()
return this.slide(pos>activeIndex?'next':'prev',$(this.$items[pos]))}
Carousel.prototype.pause=function(e){e||(this.paused=true)
if(this.$element.find('.next, .prev').length&&$.support.transition){this.$element.trigger($.support.transition.end)
this.cycle(true)}
this.interval=clearInterval(this.interval)
return this}
Carousel.prototype.next=function(){if(this.sliding)return
return this.slide('next')}
Carousel.prototype.prev=function(){if(this.sliding)return
return this.slide('prev')}
Carousel.prototype.slide=function(type,next){var $active=this.$element.find('.item.active')
var $next=next||$active[type]()
var isCycling=this.interval
var direction=type=='next'?'left':'right'
var fallback=type=='next'?'first':'last'
var that=this
if(!$next.length){if(!this.options.wrap)return
$next=this.$element.find('.item')[fallback]()}
if($next.hasClass('active'))return this.sliding=false
var e=$.Event('slide.bs.carousel',{relatedTarget:$next[0],direction:direction})
this.$element.trigger(e)
if(e.isDefaultPrevented())return
this.sliding=true
isCycling&&this.pause()
if(this.$indicators.length){this.$indicators.find('.active').removeClass('active')
this.$element.one('slid.bs.carousel',function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()])
$nextIndicator&&$nextIndicator.addClass('active')})}
if($.support.transition&&this.$element.hasClass('slide')){$next.addClass(type)
$next[0].offsetWidth
$active.addClass(direction)
$next.addClass(direction)
$active.one($.support.transition.end,function(){$next.removeClass([type,direction].join(' ')).addClass('active')
$active.removeClass(['active',direction].join(' '))
that.sliding=false
setTimeout(function(){that.$element.trigger('slid.bs.carousel')},0)}).emulateTransitionEnd($active.css('transition-duration').slice(0,-1)*1000)}else{$active.removeClass('active')
$next.addClass('active')
this.sliding=false
this.$element.trigger('slid.bs.carousel')}
isCycling&&this.cycle()
return this}
var old=$.fn.carousel
$.fn.carousel=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.carousel')
var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=='object'&&option)
var action=typeof option=='string'?option:options.slide
if(!data)$this.data('bs.carousel',(data=new Carousel(this,options)))
if(typeof option=='number')data.to(option)
else if(action)data[action]()
else if(options.interval)data.pause().cycle()})}
$.fn.carousel.Constructor=Carousel
$.fn.carousel.noConflict=function(){$.fn.carousel=old
return this}
$(document).on('click.bs.carousel.data-api','[data-slide], [data-slide-to]',function(e){var $this=$(this),href
var $target=$($this.attr('data-target')||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''))
var options=$.extend({},$target.data(),$this.data())
var slideIndex=$this.attr('data-slide-to')
if(slideIndex)options.interval=false
$target.carousel(options)
if(slideIndex=$this.attr('data-slide-to')){$target.data('bs.carousel').to(slideIndex)}
e.preventDefault()})
$(window).on('load',function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this)
$carousel.carousel($carousel.data())})})}(jQuery);+function($){'use strict';var Collapse=function(element,options){this.$element=$(element)
this.options=$.extend({},Collapse.DEFAULTS,options)
this.transitioning=null
if(this.options.parent)this.$parent=$(this.options.parent)
if(this.options.toggle)this.toggle()}
Collapse.DEFAULTS={toggle:true}
Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass('width')
return hasWidth?'width':'height'}
Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass('in'))return
var startEvent=$.Event('show.bs.collapse')
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
var actives=this.$parent&&this.$parent.find('> .panel > .in')
if(actives&&actives.length){var hasData=actives.data('bs.collapse')
if(hasData&&hasData.transitioning)return
actives.collapse('hide')
hasData||actives.data('bs.collapse',null)}
var dimension=this.dimension()
this.$element.removeClass('collapse').addClass('collapsing')
[dimension](0)
this.transitioning=1
var complete=function(){this.$element.removeClass('collapsing').addClass('collapse in')
[dimension]('auto')
this.transitioning=0
this.$element.trigger('shown.bs.collapse')}
if(!$.support.transition)return complete.call(this)
var scrollSize=$.camelCase(['scroll',dimension].join('-'))
this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)
[dimension](this.$element[0][scrollSize])}
Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass('in'))return
var startEvent=$.Event('hide.bs.collapse')
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
var dimension=this.dimension()
this.$element
[dimension](this.$element[dimension]())
[0].offsetHeight
this.$element.addClass('collapsing').removeClass('collapse').removeClass('in')
this.transitioning=1
var complete=function(){this.transitioning=0
this.$element.trigger('hidden.bs.collapse').removeClass('collapsing').addClass('collapse')}
if(!$.support.transition)return complete.call(this)
this.$element
[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)}
Collapse.prototype.toggle=function(){this[this.$element.hasClass('in')?'hide':'show']()}
var old=$.fn.collapse
$.fn.collapse=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.collapse')
var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data&&options.toggle&&option=='show')option=!option
if(!data)$this.data('bs.collapse',(data=new Collapse(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.collapse.Constructor=Collapse
$.fn.collapse.noConflict=function(){$.fn.collapse=old
return this}
$(document).on('click.bs.collapse.data-api','[data-toggle=collapse]',function(e){var $this=$(this),href
var target=$this.attr('data-target')||e.preventDefault()||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,'')
var $target=$(target)
var data=$target.data('bs.collapse')
var option=data?'toggle':$this.data()
var parent=$this.attr('data-parent')
var $parent=parent&&$(parent)
if(!data||!data.transitioning){if($parent)$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass('collapsed')
$this[$target.hasClass('in')?'addClass':'removeClass']('collapsed')}
$target.collapse(option)})}(jQuery);+function($){'use strict';var backdrop='.dropdown-backdrop'
var toggle='[data-toggle=dropdown]'
var Dropdown=function(element){$(element).on('click.bs.dropdown',this.toggle)}
Dropdown.prototype.toggle=function(e){var $this=$(this)
if($this.is('.disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('open')
clearMenus()
if(!isActive){if('ontouchstart'in document.documentElement&&!$parent.closest('.navbar-nav').length){$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on('click',clearMenus)}
var relatedTarget={relatedTarget:this}
$parent.trigger(e=$.Event('show.bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$parent.toggleClass('open').trigger('shown.bs.dropdown',relatedTarget)
$this.focus()}
return false}
Dropdown.prototype.keydown=function(e){if(!/(38|40|27)/.test(e.keyCode))return
var $this=$(this)
e.preventDefault()
e.stopPropagation()
if($this.is('.disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('open')
if(!isActive||(isActive&&e.keyCode==27)){if(e.which==27)$parent.find(toggle).focus()
return $this.click()}
var desc=' li:not(.divider):visible a'
var $items=$parent.find('[role=menu]'+desc+', [role=listbox]'+desc)
if(!$items.length)return
var index=$items.index($items.filter(':focus'))
if(e.keyCode==38&&index>0)index--
if(e.keyCode==40&&index<$items.length-1)index++
if(!~index)index=0
$items.eq(index).focus()}
function clearMenus(e){$(backdrop).remove()
$(toggle).each(function(){var $parent=getParent($(this))
var relatedTarget={relatedTarget:this}
if(!$parent.hasClass('open'))return
$parent.trigger(e=$.Event('hide.bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$parent.removeClass('open').trigger('hidden.bs.dropdown',relatedTarget)})}
function getParent($this){var selector=$this.attr('data-target')
if(!selector){selector=$this.attr('href')
selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'')}
var $parent=selector&&$(selector)
return $parent&&$parent.length?$parent:$this.parent()}
var old=$.fn.dropdown
$.fn.dropdown=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.dropdown')
if(!data)$this.data('bs.dropdown',(data=new Dropdown(this)))
if(typeof option=='string')data[option].call($this)})}
$.fn.dropdown.Constructor=Dropdown
$.fn.dropdown.noConflict=function(){$.fn.dropdown=old
return this}
$(document).on('click.bs.dropdown.data-api',clearMenus).on('click.bs.dropdown.data-api','.dropdown form',function(e){e.stopPropagation()}).on('click.bs.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.bs.dropdown.data-api',toggle+', [role=menu], [role=listbox]',Dropdown.prototype.keydown)}(jQuery);+function($){'use strict';var Modal=function(element,options){this.options=options
this.$element=$(element)
this.$backdrop=this.isShown=null
if(this.options.remote){this.$element.find('.modal-content').load(this.options.remote,$.proxy(function(){this.$element.trigger('loaded.bs.modal')},this))}}
Modal.DEFAULTS={backdrop:true,keyboard:true,show:true}
Modal.prototype.toggle=function(_relatedTarget){return this[!this.isShown?'show':'hide'](_relatedTarget)}
Modal.prototype.show=function(_relatedTarget){var that=this
var e=$.Event('show.bs.modal',{relatedTarget:_relatedTarget})
this.$element.trigger(e)
if(this.isShown||e.isDefaultPrevented())return
this.isShown=true
this.escape()
this.$element.on('click.dismiss.bs.modal','[data-dismiss="modal"]',$.proxy(this.hide,this))
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass('fade')
if(!that.$element.parent().length){that.$element.appendTo(document.body)}
that.$element.show().scrollTop(0)
if(transition){that.$element[0].offsetWidth}
that.$element.addClass('in').attr('aria-hidden',false)
that.enforceFocus()
var e=$.Event('shown.bs.modal',{relatedTarget:_relatedTarget})
transition?that.$element.find('.modal-dialog').one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)})}
Modal.prototype.hide=function(e){if(e)e.preventDefault()
e=$.Event('hide.bs.modal')
this.$element.trigger(e)
if(!this.isShown||e.isDefaultPrevented())return
this.isShown=false
this.escape()
$(document).off('focusin.bs.modal')
this.$element.removeClass('in').attr('aria-hidden',true).off('click.dismiss.bs.modal')
$.support.transition&&this.$element.hasClass('fade')?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}
Modal.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal').on('focusin.bs.modal',$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.focus()}},this))}
Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on('keyup.dismiss.bs.modal',$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off('keyup.dismiss.bs.modal')}}
Modal.prototype.hideModal=function(){var that=this
this.$element.hide()
this.backdrop(function(){that.removeBackdrop()
that.$element.trigger('hidden.bs.modal')})}
Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove()
this.$backdrop=null}
Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass('fade')?'fade':''
if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate
this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body)
this.$element.on('click.dismiss.bs.modal',$.proxy(function(e){if(e.target!==e.currentTarget)return
this.options.backdrop=='static'?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this))
if(doAnimate)this.$backdrop[0].offsetWidth
this.$backdrop.addClass('in')
if(!callback)return
doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in')
$.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else if(callback){callback()}}
var old=$.fn.modal
$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this)
var data=$this.data('bs.modal')
var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('bs.modal',(data=new Modal(this,options)))
if(typeof option=='string')data[option](_relatedTarget)
else if(options.show)data.show(_relatedTarget)})}
$.fn.modal.Constructor=Modal
$.fn.modal.noConflict=function(){$.fn.modal=old
return this}
$(document).on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this)
var href=$this.attr('href')
var $target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')))
var option=$target.data('bs.modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data())
if($this.is('a'))e.preventDefault()
$target.modal(option,this).one('hide',function(){$this.is(':visible')&&$this.focus()})})
$(document).on('show.bs.modal','.modal',function(){$(document.body).addClass('modal-open')}).on('hidden.bs.modal','.modal',function(){$(document.body).removeClass('modal-open')})}(jQuery);+function($){'use strict';var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null
this.init('tooltip',element,options)}
Tooltip.DEFAULTS={animation:true,placement:'top',selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover focus',title:'',delay:0,html:false,container:false}
Tooltip.prototype.init=function(type,element,options){this.enabled=true
this.type=type
this.$element=$(element)
this.options=this.getOptions(options)
var triggers=this.options.trigger.split(' ')
for(var i=triggers.length;i--;){var trigger=triggers[i]
if(trigger=='click'){this.$element.on('click.'+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!='manual'){var eventIn=trigger=='hover'?'mouseenter':'focusin'
var eventOut=trigger=='hover'?'mouseleave':'focusout'
this.$element.on(eventIn+'.'+this.type,this.options.selector,$.proxy(this.enter,this))
this.$element.on(eventOut+'.'+this.type,this.options.selector,$.proxy(this.leave,this))}}
this.options.selector?(this._options=$.extend({},this.options,{trigger:'manual',selector:''})):this.fixTitle()}
Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS}
Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options)
if(options.delay&&typeof options.delay=='number'){options.delay={show:options.delay,hide:options.delay}}
return options}
Tooltip.prototype.getDelegateOptions=function(){var options={}
var defaults=this.getDefaults()
this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value})
return options}
Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type)
clearTimeout(self.timeout)
self.hoverState='in'
if(!self.options.delay||!self.options.delay.show)return self.show()
self.timeout=setTimeout(function(){if(self.hoverState=='in')self.show()},self.options.delay.show)}
Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type)
clearTimeout(self.timeout)
self.hoverState='out'
if(!self.options.delay||!self.options.delay.hide)return self.hide()
self.timeout=setTimeout(function(){if(self.hoverState=='out')self.hide()},self.options.delay.hide)}
Tooltip.prototype.show=function(){var e=$.Event('show.bs.'+this.type)
if(this.hasContent()&&this.enabled){this.$element.trigger(e)
if(e.isDefaultPrevented())return
var that=this;var $tip=this.tip()
this.setContent()
if(this.options.animation)$tip.addClass('fade')
var placement=typeof this.options.placement=='function'?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement
var autoToken=/\s?auto?\s?/i
var autoPlace=autoToken.test(placement)
if(autoPlace)placement=placement.replace(autoToken,'')||'top'
$tip.detach().css({top:0,left:0,display:'block'}).addClass(placement)
this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element)
var pos=this.getPosition()
var actualWidth=$tip[0].offsetWidth
var actualHeight=$tip[0].offsetHeight
if(autoPlace){var $parent=this.$element.parent()
var orgPlacement=placement
var docScroll=document.documentElement.scrollTop||document.body.scrollTop
var parentWidth=this.options.container=='body'?window.innerWidth:$parent.outerWidth()
var parentHeight=this.options.container=='body'?window.innerHeight:$parent.outerHeight()
var parentLeft=this.options.container=='body'?0:$parent.offset().left
placement=placement=='bottom'&&pos.top+pos.height+actualHeight-docScroll>parentHeight?'top':placement=='top'&&pos.top-docScroll-actualHeight<0?'bottom':placement=='right'&&pos.right+actualWidth>parentWidth?'left':placement=='left'&&pos.left-actualWidth<parentLeft?'right':placement
$tip.removeClass(orgPlacement).addClass(placement)}
var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight)
this.applyPlacement(calculatedOffset,placement)
this.hoverState=null
var complete=function(){that.$element.trigger('shown.bs.'+that.type)}
$.support.transition&&this.$tip.hasClass('fade')?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete()}}
Tooltip.prototype.applyPlacement=function(offset,placement){var replace
var $tip=this.tip()
var width=$tip[0].offsetWidth
var height=$tip[0].offsetHeight
var marginTop=parseInt($tip.css('margin-top'),10)
var marginLeft=parseInt($tip.css('margin-left'),10)
if(isNaN(marginTop))marginTop=0
if(isNaN(marginLeft))marginLeft=0
offset.top=offset.top+marginTop
offset.left=offset.left+marginLeft
$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0)
$tip.addClass('in')
var actualWidth=$tip[0].offsetWidth
var actualHeight=$tip[0].offsetHeight
if(placement=='top'&&actualHeight!=height){replace=true
offset.top=offset.top+height-actualHeight}
if(/bottom|top/.test(placement)){var delta=0
if(offset.left<0){delta=offset.left* -2
offset.left=0
$tip.offset(offset)
actualWidth=$tip[0].offsetWidth
actualHeight=$tip[0].offsetHeight}
this.replaceArrow(delta-width+actualWidth,actualWidth,'left')}else{this.replaceArrow(actualHeight-height,actualHeight,'top')}
if(replace)$tip.offset(offset)}
Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?(50*(1-delta/dimension)+'%'):'')}
Tooltip.prototype.setContent=function(){var $tip=this.tip()
var title=this.getTitle()
$tip.find('.tooltip-inner')[this.options.html?'html':'text'](title)
$tip.removeClass('fade in top bottom left right')}
Tooltip.prototype.hide=function(){var that=this
var $tip=this.tip()
var e=$.Event('hide.bs.'+this.type)
function complete(){if(that.hoverState!='in')$tip.detach()
that.$element.trigger('hidden.bs.'+that.type)}
this.$element.trigger(e)
if(e.isDefaultPrevented())return
$tip.removeClass('in')
$.support.transition&&this.$tip.hasClass('fade')?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete()
this.hoverState=null
return this}
Tooltip.prototype.fixTitle=function(){var $e=this.$element
if($e.attr('title')||typeof($e.attr('data-original-title'))!='string'){$e.attr('data-original-title',$e.attr('title')||'').attr('title','')}}
Tooltip.prototype.hasContent=function(){return this.getTitle()}
Tooltip.prototype.getPosition=function(){var el=this.$element[0]
return $.extend({},(typeof el.getBoundingClientRect=='function')?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())}
Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=='bottom'?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=='top'?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=='left'?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}
Tooltip.prototype.getTitle=function(){var title
var $e=this.$element
var o=this.options
title=$e.attr('data-original-title')||(typeof o.title=='function'?o.title.call($e[0]):o.title)
return title}
Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)}
Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find('.tooltip-arrow')}
Tooltip.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide()
this.$element=null
this.options=null}}
Tooltip.prototype.enable=function(){this.enabled=true}
Tooltip.prototype.disable=function(){this.enabled=false}
Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled}
Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type):this
self.tip().hasClass('in')?self.leave(self):self.enter(self)}
Tooltip.prototype.destroy=function(){clearTimeout(this.timeout)
this.hide().$element.off('.'+this.type).removeData('bs.'+this.type)}
var old=$.fn.tooltip
$.fn.tooltip=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.tooltip')
var options=typeof option=='object'&&option
if(!data&&option=='destroy')return
if(!data)$this.data('bs.tooltip',(data=new Tooltip(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.tooltip.Constructor=Tooltip
$.fn.tooltip.noConflict=function(){$.fn.tooltip=old
return this}}(jQuery);+function($){'use strict';var Popover=function(element,options){this.init('popover',element,options)}
if(!$.fn.tooltip)throw new Error('Popover requires tooltip.js')
Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:'right',trigger:'click',content:'',template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'})
Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype)
Popover.prototype.constructor=Popover
Popover.prototype.getDefaults=function(){return Popover.DEFAULTS}
Popover.prototype.setContent=function(){var $tip=this.tip()
var title=this.getTitle()
var content=this.getContent()
$tip.find('.popover-title')[this.options.html?'html':'text'](title)
$tip.find('.popover-content')[this.options.html?(typeof content=='string'?'html':'append'):'text'](content)
$tip.removeClass('fade top bottom left right in')
if(!$tip.find('.popover-title').html())$tip.find('.popover-title').hide()}
Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()}
Popover.prototype.getContent=function(){var $e=this.$element
var o=this.options
return $e.attr('data-content')||(typeof o.content=='function'?o.content.call($e[0]):o.content)}
Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find('.arrow')}
Popover.prototype.tip=function(){if(!this.$tip)this.$tip=$(this.options.template)
return this.$tip}
var old=$.fn.popover
$.fn.popover=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.popover')
var options=typeof option=='object'&&option
if(!data&&option=='destroy')return
if(!data)$this.data('bs.popover',(data=new Popover(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.popover.Constructor=Popover
$.fn.popover.noConflict=function(){$.fn.popover=old
return this}}(jQuery);+function($){'use strict';function ScrollSpy(element,options){var href
var process=$.proxy(this.process,this)
this.$element=$(element).is('body')?$(window):$(element)
this.$body=$('body')
this.$scrollElement=this.$element.on('scroll.bs.scroll-spy.data-api',process)
this.options=$.extend({},ScrollSpy.DEFAULTS,options)
this.selector=(this.options.target||((href=$(element).attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''))||'')+' .nav li > a'
this.offsets=$([])
this.targets=$([])
this.activeTarget=null
this.refresh()
this.process()}
ScrollSpy.DEFAULTS={offset:10}
ScrollSpy.prototype.refresh=function(){var offsetMethod=this.$element[0]==window?'offset':'position'
this.offsets=$([])
this.targets=$([])
var self=this
var $targets=this.$body.find(this.selector).map(function(){var $el=$(this)
var href=$el.data('target')||$el.attr('href')
var $href=/^#./.test(href)&&$(href)
return($href&&$href.length&&$href.is(':visible')&&[[$href[offsetMethod]().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]])||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0])
self.targets.push(this[1])})}
ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset
var scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight
var maxScroll=scrollHeight-this.$scrollElement.height()
var offsets=this.offsets
var targets=this.targets
var activeTarget=this.activeTarget
var i
if(scrollTop>=maxScroll){return activeTarget!=(i=targets.last()[0])&&this.activate(i)}
if(activeTarget&&scrollTop<=offsets[0]){return activeTarget!=(i=targets[0])&&this.activate(i)}
for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])}}
ScrollSpy.prototype.activate=function(target){this.activeTarget=target
$(this.selector).parentsUntil(this.options.target,'.active').removeClass('active')
var selector=this.selector+'[data-target="'+target+'"],'+
this.selector+'[href="'+target+'"]'
var active=$(selector).parents('li').addClass('active')
if(active.parent('.dropdown-menu').length){active=active.closest('li.dropdown').addClass('active')}
active.trigger('activate.bs.scrollspy')}
var old=$.fn.scrollspy
$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.scrollspy')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.scrollspy',(data=new ScrollSpy(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.scrollspy.Constructor=ScrollSpy
$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old
return this}
$(window).on('load',function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this)
$spy.scrollspy($spy.data())})})}(jQuery);+function($){'use strict';var Tab=function(element){this.element=$(element)}
Tab.prototype.show=function(){var $this=this.element
var $ul=$this.closest('ul:not(.dropdown-menu)')
var selector=$this.data('target')
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
if($this.parent('li').hasClass('active'))return
var previous=$ul.find('.active:last a')[0]
var e=$.Event('show.bs.tab',{relatedTarget:previous})
$this.trigger(e)
if(e.isDefaultPrevented())return
var $target=$(selector)
this.activate($this.parent('li'),$ul)
this.activate($target,$target.parent(),function(){$this.trigger({type:'shown.bs.tab',relatedTarget:previous})})}
Tab.prototype.activate=function(element,container,callback){var $active=container.find('> .active')
var transition=callback&&$.support.transition&&$active.hasClass('fade')
function next(){$active.removeClass('active').find('> .dropdown-menu > .active').removeClass('active')
element.addClass('active')
if(transition){element[0].offsetWidth
element.addClass('in')}else{element.removeClass('fade')}
if(element.parent('.dropdown-menu')){element.closest('li.dropdown').addClass('active')}
callback&&callback()}
transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next()
$active.removeClass('in')}
var old=$.fn.tab
$.fn.tab=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.tab')
if(!data)$this.data('bs.tab',(data=new Tab(this)))
if(typeof option=='string')data[option]()})}
$.fn.tab.Constructor=Tab
$.fn.tab.noConflict=function(){$.fn.tab=old
return this}
$(document).on('click.bs.tab.data-api','[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault()
$(this).tab('show')})}(jQuery);+function($){'use strict';var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options)
this.$window=$(window).on('scroll.bs.affix.data-api',$.proxy(this.checkPosition,this)).on('click.bs.affix.data-api',$.proxy(this.checkPositionWithEventLoop,this))
this.$element=$(element)
this.affixed=this.unpin=this.pinnedOffset=null
this.checkPosition()}
Affix.RESET='affix affix-top affix-bottom'
Affix.DEFAULTS={offset:0}
Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset
this.$element.removeClass(Affix.RESET).addClass('affix')
var scrollTop=this.$window.scrollTop()
var position=this.$element.offset()
return(this.pinnedOffset=position.top-scrollTop)}
Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)}
Affix.prototype.checkPosition=function(){if(!this.$element.is(':visible'))return
var scrollHeight=$(document).height()
var scrollTop=this.$window.scrollTop()
var position=this.$element.offset()
var offset=this.options.offset
var offsetTop=offset.top
var offsetBottom=offset.bottom
if(this.affixed=='top')position.top+=scrollTop
if(typeof offset!='object')offsetBottom=offsetTop=offset
if(typeof offsetTop=='function')offsetTop=offset.top(this.$element)
if(typeof offsetBottom=='function')offsetBottom=offset.bottom(this.$element)
var affix=this.unpin!=null&&(scrollTop+this.unpin<=position.top)?false:offsetBottom!=null&&(position.top+this.$element.height()>=scrollHeight-offsetBottom)?'bottom':offsetTop!=null&&(scrollTop<=offsetTop)?'top':false
if(this.affixed===affix)return
if(this.unpin)this.$element.css('top','')
var affixType='affix'+(affix?'-'+affix:'')
var e=$.Event(affixType+'.bs.affix')
this.$element.trigger(e)
if(e.isDefaultPrevented())return
this.affixed=affix
this.unpin=affix=='bottom'?this.getPinnedOffset():null
this.$element.removeClass(Affix.RESET).addClass(affixType).trigger($.Event(affixType.replace('affix','affixed')))
if(affix=='bottom'){this.$element.offset({top:scrollHeight-offsetBottom-this.$element.height()})}}
var old=$.fn.affix
$.fn.affix=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bs.affix')
var options=typeof option=='object'&&option
if(!data)$this.data('bs.affix',(data=new Affix(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.affix.Constructor=Affix
$.fn.affix.noConflict=function(){$.fn.affix=old
return this}
$(window).on('load',function(){$('[data-spy="affix"]').each(function(){var $spy=$(this)
var data=$spy.data()
data.offset=data.offset||{}
if(data.offsetBottom)data.offset.bottom=data.offsetBottom
if(data.offsetTop)data.offset.top=data.offsetTop
$spy.affix(data)})})}(jQuery);;(function(h,j,e){var a="placeholder"in j.createElement("input");var f="placeholder"in j.createElement("textarea");var k=e.fn;var d=e.valHooks;var b=e.propHooks;var m;var l;if(a&&f){l=k.placeholder=function(){return this};l.input=l.textarea=true}else{l=k.placeholder=function(){var n=this;n.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":c,"blur.placeholder":g}).data("placeholder-enabled",true).trigger("blur.placeholder");return n};l.input=a;l.textarea=f;m={get:function(o){var n=e(o);var p=n.data("placeholder-password");if(p){return p[0].value}return n.data("placeholder-enabled")&&n.hasClass("placeholder")?"":o.value},set:function(o,q){var n=e(o);var p=n.data("placeholder-password");if(p){return p[0].value=q}if(!n.data("placeholder-enabled")){return o.value=q}if(q==""){o.value=q;if(o!=j.activeElement){g.call(o)}}else{if(n.hasClass("placeholder")){c.call(o,true,q)||(o.value=q)}else{o.value=q}}return n}};if(!a){d.input=m;b.value=m}if(!f){d.textarea=m;b.value=m}e(function(){e(j).delegate("form","submit.placeholder",function(){var n=e(".placeholder",this).each(c);setTimeout(function(){n.each(g)},10)})});e(h).bind("beforeunload.placeholder",function(){e(".placeholder").each(function(){this.value=""})})}function i(o){var n={};var p=/^jQuery\d+$/;e.each(o.attributes,function(r,q){if(q.specified&&!p.test(q.name)){n[q.name]=q.value}});return n}function c(o,p){var n=this;var q=e(n);if(n.value==q.attr("placeholder")&&q.hasClass("placeholder")){if(q.data("placeholder-password")){q=q.hide().next().show().attr("id",q.removeAttr("id").data("placeholder-id"));if(o===true){return q[0].value=p}q.focus()}else{n.value="";q.removeClass("placeholder");n==j.activeElement&&n.select()}}}function g(){var r;var n=this;var q=e(n);var p=this.id;if(n.value==""){if(n.type=="password"){if(!q.data("placeholder-textinput")){try{r=q.clone().attr({type:"text"})}catch(o){r=e("<input>").attr(e.extend(i(this),{type:"text"}))}r.removeAttr("name").data({"placeholder-password":q,"placeholder-id":p}).bind("focus.placeholder",c);q.data({"placeholder-textinput":r,"placeholder-id":p}).before(r)}q=q.removeAttr("id").hide().prev().attr("id",p).show()}q.addClass("placeholder");q[0].value=q.attr("placeholder")}else{q.removeClass("placeholder")}}}(this,document,jQuery));;window.Modernizr=function(a,b,c){function w(a){j.cssText=a}function x(a,b){return w(m.join(a+";")+(b||""))}function y(a,b){return typeof a===b}function z(a,b){return!!~(""+a).indexOf(b)}function A(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:y(f,"function")?f.bind(d||b):f}return!1}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n={},o={},p={},q=[],r=q.slice,s,t=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},u={}.hasOwnProperty,v;!y(u,"undefined")&&!y(u.call,"undefined")?v=function(a,b){return u.call(a,b)}:v=function(a,b){return b in a&&y(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=r.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(r.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(r.call(arguments)))};return e}),n.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:t(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c};for(var B in n)v(n,B)&&(s=B.toLowerCase(),e[s]=n[B](),q.push((e[s]?"":"no-")+s));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)v(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},w(""),i=k=null,e._version=d,e._prefixes=m,e.testStyles=t,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+q.join(" "):""),e}(this,this.document);Modernizr.addTest('android',function(){return!!navigator.userAgent.match(/Android/i)});Modernizr.addTest('chrome',function(){return!!navigator.userAgent.match(/Chrome/i)});Modernizr.addTest('firefox',function(){return!!navigator.userAgent.match(/Firefox/i)});Modernizr.addTest('iemobile',function(){return!!navigator.userAgent.match(/IEMobile/i)});Modernizr.addTest('ie',function(){return!!navigator.userAgent.match(/MSIE/i)});Modernizr.addTest('ie8',function(){return!!navigator.userAgent.match(/MSIE 8/i)});Modernizr.addTest('ie10',function(){return!!navigator.userAgent.match(/MSIE 10/i)});Modernizr.addTest('ie11',function(){return!!navigator.userAgent.match(/Trident.*rv:11\./)});Modernizr.addTest('ios',function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)});Modernizr.addTest('ios7 ipad',function(){return!!navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)});(function(a,b){"use strict";var c="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,d=function(){for(var a,c,d=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"]],e=0,f=d.length,g={};f>e;e++)if(a=d[e],a&&a[1]in b){for(e=0,c=a.length;c>e;e++)g[d[0][e]]=a[e];return g}return!1}(),e={request:function(a){var e=d.requestFullscreen;a=a||b.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?a[e]():a[e](c&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){b[d.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(){},onerror:function(){},raw:d};return d?(Object.defineProperties(e,{isFullscreen:{get:function(){return!!b[d.fullscreenElement]}},element:{enumerable:!0,get:function(){return b[d.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!b[d.fullscreenEnabled]}}}),b.addEventListener(d.fullscreenchange,function(a){e.onchange.call(e,a)}),b.addEventListener(d.fullscreenerror,function(a){e.onerror.call(e,a)}),a.screenfull=e,void 0):a.screenfull=!1})(window,document);+function($){"use strict";var Shift=function(element){this.$element=$(element)
this.$prev=this.$element.prev()
!this.$prev.length&&(this.$parent=this.$element.parent())}
Shift.prototype={constructor:Shift,init:function(){var $el=this.$element,method=$el.data()['toggle'].split(':')[1],$target=$el.data('target')
$el.hasClass('in')||$el[method]($target).addClass('in')},reset:function(){this.$parent&&this.$parent['prepend'](this.$element)
!this.$parent&&this.$element['insertAfter'](this.$prev)
this.$element.removeClass('in')}}
$.fn.shift=function(option){return this.each(function(){var $this=$(this),data=$this.data('shift')
if(!data)$this.data('shift',(data=new Shift(this)))
if(typeof option=='string')data[option]()})}
$.fn.shift.Constructor=Shift}(jQuery);+function($){"use strict";var Bjax=function(element,options){this.options=options
this.$element=$(this.options.target||'html');this.start()}
Bjax.DEFAULTS={backdrop:true,url:''}
Bjax.prototype.start=function(){var that=this;this.backdrop();$.ajax(this.options.url).done(function(r){that.$content=r;that.complete();});}
Bjax.prototype.complete=function(){var that=this;if(this.$element.is('html')||(this.options.replace)){try{window.history.pushState({},'',this.options.url);}catch(e){window.location.replace(this.options.url)}}
this.updateBar(100);}
Bjax.prototype.backdrop=function(){this.$element.css('position','relative')
this.$backdrop=$('<div class="backdrop fade bg-white"></div>').appendTo(this.$element);if(!this.options.backdrop)this.$backdrop.css('height','2');this.$backdrop[0].offsetWidth;this.$backdrop.addClass('in');this.$bar=$('<div class="bar b-t b-2x b-info"></div>').width(0).appendTo(this.$backdrop);}
Bjax.prototype.update=function(){this.$element.css('position','');if(!this.$element.is('html')){if(this.options.el){this.$content=$(this.$content).find(this.options.el);}
this.$element.html(this.$content);}
if(this.$element.is('html')){if($('.ie').length){location.reload();return;}
document.open();document.write(this.$content);document.close();}}
Bjax.prototype.updateBar=function(per){var that=this;this.$bar.stop().animate({width:per+'%'},500,'linear',function(){if(per==100)that.update();});}
Bjax.prototype.enable=function(e){var link=e.currentTarget;if(location.protocol!==link.protocol||location.hostname!==link.hostname)
return false
if(link.hash&&link.href.replace(link.hash,'')===location.href.replace(location.hash,''))
return false
if(link.href===location.href+'#'||link.href===location.href)
return false
if(link.protocol.indexOf('http')==-1)
return false
return true;}
$.fn.bjax=function(option){return this.each(function(){var $this=$(this);var data=$this.data('app.bjax');var options=$.extend({},Bjax.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('app.bjax',(data=new Bjax(this,options)))
if(data)data['start']()
if(typeof option=='string')data[option]()})}
$.fn.bjax.Constructor=Bjax
$(window).on("popstate",function(e){if(e.originalEvent.state!==null){window.location.reload(true);}
e.preventDefault();});$(document).on('click.app.bjax.data-api','[data-bjax], .nav-primary a',function(e){if(!Bjax.prototype.enable(e))return;$(this).bjax({url:$(this).attr('href')||$(this).attr('data-url')});e.preventDefault();})}(jQuery);Date.now=Date.now||function(){return+new Date;};+function($){$(function(){$(document).on('click',"[data-toggle=fullscreen]",function(e){e.preventDefault();if(screenfull.enabled){screenfull.request();}});$('input[placeholder], textarea[placeholder]').placeholder();$("[data-toggle=popover]").popover();$(document).on('click','.popover-title .close',function(e){var $target=$(e.target),$popover=$target.closest('.popover').prev();$popover&&$popover.popover('hide');});$(document).on('click','[data-toggle="ajaxModal"]',function(e){$('#ajaxModal').remove();e.preventDefault();var $this=$(this),$remote=$this.data('remote')||$this.attr('href'),$modal=$('<div class="modal fade" id="ajaxModal"><div class="modal-body"></div></div>');$('body').append($modal);$modal.modal();$modal.load($remote);});$.fn.dropdown.Constructor.prototype.change=function(e){e.preventDefault();var $item=$(e.target),$select,$checked=false,$menu,$label;!$item.is('a')&&($item=$item.closest('a'));$menu=$item.closest('.dropdown-menu');$label=$menu.parent().find('.dropdown-label');$labelHolder=$label.text();$select=$item.parent().find('input');$checked=$select.is(':checked');if($select.is(':disabled'))return;if($select.attr('type')=='radio'&&$checked)return;if($select.attr('type')=='radio')$menu.find('li').removeClass('active');$item.parent().removeClass('active');!$checked&&$item.parent().addClass('active');$select.prop("checked",!$select.prop("checked"));$items=$menu.find('li > input:checked');if($items.length){$text=[];$items.each(function(){var $str=$(this).parent().text();$str&&$text.push($.trim($str));});$text=$text.length<4?$text.join(', '):$text.length+' selected';$label.html($text);}else{$label.html($label.data('placeholder'));}}
$(document).on('click.dropdown-menu','.dropdown-select > li > a',$.fn.dropdown.Constructor.prototype.change);$("[data-toggle=tooltip]").tooltip();$(document).on('click','[data-toggle^="class"]',function(e){e&&e.preventDefault();var $this=$(e.target),$class,$target,$tmp,$classes,$targets;!$this.data('toggle')&&($this=$this.closest('[data-toggle^="class"]'));$class=$this.data()['toggle'];$target=$this.data('target')||$this.attr('href');$class&&($tmp=$class.split(':')[1])&&($classes=$tmp.split(','));$target&&($targets=$target.split(','));$classes&&$classes.length&&$.each($targets,function(index,value){if($classes[index].indexOf('*')!==-1){var patt=new RegExp('\\s'+
$classes[index].replace(/\*/g,'[A-Za-z0-9-_]+').split(' ').join('\\s|\\s')+'\\s','g');$($this).each(function(i,it){var cn=' '+it.className+' ';while(patt.test(cn)){cn=cn.replace(patt,' ');}
it.className=$.trim(cn);});}
($targets[index]!='#')&&$($targets[index]).toggleClass($classes[index])||$this.toggleClass($classes[index]);});$this.toggleClass('active');});$(document).on('click','.panel-toggle',function(e){e&&e.preventDefault();var $this=$(e.target),$class='collapse',$target;if(!$this.is('a'))$this=$this.closest('a');$target=$this.closest('.panel');$target.find('.panel-body').toggleClass($class);$this.toggleClass('active');});$('.carousel.auto').carousel();$(document).on('click.button.data-api','[data-loading-text]',function(e){var $this=$(e.target);$this.is('i')&&($this=$this.parent());$this.button('loading');});var $window=$(window);var mobile=function(option){if(option=='reset'){$('[data-toggle^="shift"]').shift('reset');return true;}
$('[data-toggle^="shift"]').shift('init');return true;};$window.width()<768&&mobile();var $resize,$width=$window.width();$window.resize(function(){if($width!==$window.width()){clearTimeout($resize);$resize=setTimeout(function(){setHeight();$window.width()<768&&mobile();$window.width()>=768&&mobile('reset')&&fixVbox();$width=$window.width();},500);}});var setHeight=function(){$('.app-fluid #nav > *').css('min-height',$(window).height()-60);return true;}
setHeight();var fixVbox=function(){$('.ie11 .vbox').each(function(){$(this).height($(this).parent().height());});return true;}
fixVbox();$(document).on('click','[data-ride="collapse"] a',function(e){var $this=$(e.target),$active;$this.is('a')||($this=$this.closest('a'));$active=$this.parent().siblings(".active");$active&&$active.toggleClass('active').find('> ul:visible').slideUp(200);($this.parent().hasClass('active')&&$this.next().slideUp(200))||$this.next().slideDown(200);$this.parent().toggleClass('active');$this.next().is('ul')&&e.preventDefault();setTimeout(function(){$(document).trigger('updateNav');},300);});$(document).on('click.bs.dropdown.data-api','.dropdown .on, .dropup .on, .open .on',function(e){e.stopPropagation()});});}(jQuery);(function(f){jQuery.fn.extend({slimScroll:function(h){var a=f.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},h);this.each(function(){function r(d){if(s){d=d||window.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function m(d,f,h){k=!1;var e=d,g=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),g),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+"px"}));l=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight());e=l*(b[0].scrollHeight-b.outerHeight());h&&(e=d,d=e/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),g),c.css({top:d+"px"}));b.scrollTop(e);b.trigger("slimscrolling",~~e);v();p()}function C(){window.addEventListener?(this.addEventListener("DOMMouseScroll",r,!1),this.addEventListener("mousewheel",r,!1),this.addEventListener("MozMousePixelScroll",r,!1)):document.attachEvent("onmousewheel",r)}function w(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),D);c.css({height:u+"px"});var a=u==b.outerHeight()?"none":"block";c.css({display:a})}function v(){w();clearTimeout(A);l==~~l?(k=a.allowPageScroll,B!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1;B=l;u>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&g.stop(!0,!0).fadeIn("fast"))}function p(){a.alwaysVisible||(A=setTimeout(function(){a.disableFadeOut&&s||(x||y)||(c.fadeOut("slow"),g.fadeOut("slow"))},1E3))}var s,x,y,A,z,u,l,B,D=30,k=!1,b=f(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),c=b.parent().find("."+a.barClass),g=b.parent().find("."+a.railClass);w();if(f.isPlainObject(h)){if("height"in h&&"auto"==h.height){b.parent().css("height","auto");b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",q);b.css("height",q)}if("scrollTo"in h)n=parseInt(a.scrollTo);else if("scrollBy"in h)n+=parseInt(a.scrollBy);else if("destroy"in h){c.remove();g.remove();b.unwrap();return}m(n,!1,!0)}}else{a.height="auto"==a.height?b.parent().height():a.height;n=f("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var g=f("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?{right:a.distance}:{left:a.distance};g.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(g);a.railDraggable&&c.bind("mousedown",function(a){var b=f(document);y=!0;t=parseFloat(c.css("top"));pageY=a.pageY;b.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;c.css("top",currTop);m(0,c.position().top,!1)});b.bind("mouseup.slimscroll",function(a){y=!1;p();b.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});g.hover(function(){v()},function(){p()});c.hover(function(){x=!0},function(){x=!1});b.hover(function(){s=!0;v();p()},function(){s=!1;p()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(z=a.originalEvent.touches[0].pageY)});b.bind("touchmove",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&(m((z-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),z=b.originalEvent.touches[0].pageY)});w();"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):"top"!==a.start&&(m(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());C()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);+function($){"use strict";$(function(){var sr,sparkline=function($re){$(".sparkline").each(function(){var $data=$(this).data();if($re&&!$data.resize)return;($data.type=='pie')&&$data.sliceColors&&($data.sliceColors=eval($data.sliceColors));($data.type=='bar')&&$data.stackedBarColor&&($data.stackedBarColor=eval($data.stackedBarColor));$data.valueSpots={'0:':$data.spotColor};$(this).sparkline('html',$data);});};$(window).resize(function(e){clearTimeout(sr);sr=setTimeout(function(){sparkline(true)},500);});sparkline(false);var easypie=function(){$('.easypiechart').each(function(){var $this=$(this),$data=$this.data(),$step=$this.find('.step'),$target_value=parseInt($($data.target).text()),$value=0;$data.barColor||($data.barColor=function($percent){$percent/=100;return"rgb("+Math.round(200*$percent)+", 200, "+Math.round(200*(1-$percent))+")";});$data.onStep=function(value){$value=value;$step.text(parseInt(value));$data.target&&$($data.target).text(parseInt(value)+$target_value);}
$data.onStop=function(){$target_value=parseInt($($data.target).text());$data.update&&setTimeout(function(){$this.data('easyPieChart').update(100-$value);},$data.update);}
$(this).easyPieChart($data);});};easypie();$(".datepicker-input").each(function(){$(this).datepicker();});$('.dropfile').each(function(){var $dropbox=$(this);if(typeof window.FileReader==='undefined'){$('small',this).html('File API & FileReader API not supported').addClass('text-danger');return;}
this.ondragover=function(){$dropbox.addClass('hover');return false;};this.ondragend=function(){$dropbox.removeClass('hover');return false;};this.ondrop=function(e){e.preventDefault();$dropbox.removeClass('hover').html('');var file=e.dataTransfer.files[0],reader=new FileReader();reader.onload=function(event){$dropbox.append($('<img>').attr('src',event.target.result));};reader.readAsDataURL(file);return false;};});$('.slider').each(function(){$(this).slider();});if($.fn.sortable){$('.sortable').sortable();}
$('.no-touch .slim-scroll').each(function(){var $self=$(this),$data=$self.data(),$slimResize;$self.slimScroll($data);$(window).resize(function(e){clearTimeout($slimResize);$slimResize=setTimeout(function(){$self.slimScroll($data);},500);});$(document).on('updateNav',function(){$self.slimScroll($data);});});$('.portlet').each(function(){$(".portlet").sortable({connectWith:'.portlet',iframeFix:false,items:'.portlet-item',opacity:0.8,helper:'original',revert:true,forceHelperSize:true,placeholder:'sortable-box-placeholder round-all',forcePlaceholderSize:true,tolerance:'pointer'});});$('#docs pre code').each(function(){var $this=$(this);var t=$this.html();$this.html(t.replace(/</g,'&lt;').replace(/>/g,'&gt;'));});$(document).on('change','table thead [type="checkbox"]',function(e){e&&e.preventDefault();var $table=$(e.target).closest('table'),$checked=$(e.target).is(':checked');$('tbody [type="checkbox"]',$table).prop('checked',$checked);});$(document).on('click','[data-toggle^="progress"]',function(e){e&&e.preventDefault();var $el=$(e.target),$target=$($el.data('target'));$('.progress',$target).each(function(){var $max=50,$data,$ps=$('.progress-bar',this).last();($(this).hasClass('progress-xs')||$(this).hasClass('progress-sm'))&&($max=100);$data=Math.floor(Math.random()*$max)+'%';$ps.css('width',$data).attr('data-original-title',$data);});});function addMsg($msg){var $el=$('.nav-user'),$n=$('.count:first',$el),$v=parseInt($n.text());$('.count',$el).fadeOut().fadeIn().text($v+1);$($msg).hide().prependTo($el.find('.list-group')).slideDown().css('display','block');}
var $msg='<a href="#" class="media list-group-item">'+'<span class="pull-left thumb-sm text-center">'+'<i class="fa fa-envelope-o fa-2x text-success"></i>'+'</span>'+'<span class="media-body block m-b-none">'+'Sophi sent you a email<br>'+'<small class="text-muted">1 minutes ago</small>'+'</span>'+'</a>';setTimeout(function(){addMsg($msg);},1500);$(".chosen-select").length&&$(".chosen-select").chosen();});}(window.jQuery);(function(b,f){"function"===typeof define&&define.amd?define(["jquery"],f):b.jQuery?f(b.jQuery):f(b.Zepto)})(this,function(b,f){b.fn.jPlayer=function(a){var c="string"===typeof a,d=Array.prototype.slice.call(arguments,1),e=this;a=!c&&d.length?b.extend.apply(null,[!0,a].concat(d)):a;if(c&&"_"===a.charAt(0))return e;c?this.each(function(){var c=b(this).data("jPlayer"),h=c&&b.isFunction(c[a])?c[a].apply(c,d):c;if(h!==c&&h!==f)return e=h,!1}):this.each(function(){var c=b(this).data("jPlayer");c?c.option(a||{}):b(this).data("jPlayer",new b.jPlayer(a,this))});return e};b.jPlayer=function(a,c){if(arguments.length){this.element=b(c);this.options=b.extend(!0,{},this.options,a);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()});this._init()}};"function"!==typeof b.fn.stop&&(b.fn.stop=function(){});b.jPlayer.emulateMethods="load play pause";b.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";b.jPlayer.emulateOptions="muted volume";b.jPlayer.reservedEvent="ready flashreset resize repeat error warning";b.jPlayer.event={};b.each("ready setmedia flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){b.jPlayer.event[this]="jPlayer_"+this});b.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough".split(" ");b.jPlayer.pause=function(){b.each(b.jPlayer.prototype.instances,function(a,c){c.data("jPlayer").status.srcSet&&c.jPlayer("pause")})};b.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var l=function(){this.init()};l.prototype={init:function(){this.options={timeFormat:b.jPlayer.timeFormat}},time:function(a){var c=new Date(1E3*(a&&"number"===typeof a?a:0)),b=c.getUTCHours();a=this.options.timeFormat.showHour?c.getUTCMinutes():c.getUTCMinutes()+
60*b;c=this.options.timeFormat.showMin?c.getUTCSeconds():c.getUTCSeconds()+60*a;b=this.options.timeFormat.padHour&&10>b?"0"+b:b;a=this.options.timeFormat.padMin&&10>a?"0"+a:a;c=this.options.timeFormat.padSec&&10>c?"0"+c:c;b=""+(this.options.timeFormat.showHour?b+this.options.timeFormat.sepHour:"");b+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"";return b+=this.options.timeFormat.showSec?c+this.options.timeFormat.sepSec:""}};var n=new l;b.jPlayer.convertTime=function(a){return n.time(a)};b.jPlayer.uaBrowser=function(a){a=a.toLowerCase();var c=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,e=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||c.exec(a)||b.exec(a)||0>a.indexOf("compatible")&&e.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};b.jPlayer.uaPlatform=function(a){var c=a.toLowerCase(),b=/(android)/,e=/(mobile)/;a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(c)||[];c=/(ipad|playbook)/.exec(c)||!e.exec(c)&&b.exec(c)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||"",tablet:c[1]||""}};b.jPlayer.browser={};b.jPlayer.platform={};var k=b.jPlayer.uaBrowser(navigator.userAgent);k.browser&&(b.jPlayer.browser[k.browser]=!0,b.jPlayer.browser.version=k.version);k=b.jPlayer.uaPlatform(navigator.userAgent);k.platform&&(b.jPlayer.platform[k.platform]=!0,b.jPlayer.platform.mobile=!k.tablet,b.jPlayer.platform.tablet=!!k.tablet);b.jPlayer.getDocMode=function(){var a;b.jPlayer.browser.msie&&(document.documentMode?a=document.documentMode:(a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7)));return a};b.jPlayer.browser.documentMode=b.jPlayer.getDocMode();b.jPlayer.nativeFeatures={init:function(){var a=document,c=a.createElement("video"),b={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" ")},e=["w3c","moz","webkit","webkitVideo"],g,h;this.fullscreen=c={support:{w3c:!!a[b.w3c[0]],moz:!!a[b.moz[0]],webkit:"function"===typeof a[b.webkit[3]],webkitVideo:"function"===typeof c[b.webkitVideo[2]]},used:{}};g=0;for(h=e.length;g<h;g++){var f=e[g];if(c.support[f]){c.spec=f;c.used[f]=!0;break}}if(c.spec){var m=b[c.spec];c.api={fullscreenEnabled:!0,fullscreenElement:function(c){c=c?c:a;return c[m[1]]},requestFullscreen:function(a){return a[m[2]]()},exitFullscreen:function(c){c=c?c:a;return c[m[3]]()}};c.event={fullscreenchange:m[4],fullscreenerror:m[5]}}else c.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},c.event={}}};b.jPlayer.nativeFeatures.init();b.jPlayer.focus=null;b.jPlayer.keyIgnoreElementNames="INPUT TEXTAREA";var p=function(a){var c=b.jPlayer.focus,d;c&&(b.each(b.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(c,b){if(a.target.nodeName.toUpperCase()===b.toUpperCase())return d=!0,!1}),d||b.each(c.options.keyBindings,function(d,g){if(g&&a.which===g.key&&b.isFunction(g.fn))return a.preventDefault(),g.fn(c),!1}))};b.jPlayer.keys=function(a){b(document.documentElement).unbind("keydown.jPlayer");a&&b(document.documentElement).bind("keydown.jPlayer",p)};b.jPlayer.keys(!0);b.jPlayer.prototype={count:0,version:{script:"2.6.0",needFlash:"2.6.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:!1,remainingDuration:!1,toggleDuration:!1,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:0.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1E3},loop:!1,repeat:function(a){a.jPlayer.options.loop?b(this).unbind(".jPlayerRepeat").bind(b.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){b(this).jPlayer("play")}):b(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:32,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:13,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:8,fn:function(a){a._muted(!a.options.muted)}},volumeUp:{key:38,fn:function(a){a.volume(a.options.volume+0.1)}},volumeDown:{key:40,fn:function(a){a.volume(a.options.volume-0.1)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var a=this;this.element.empty();this.status=b.extend({},this.status);this.internal=b.extend({},this.internal);this.options.timeFormat=b.extend({},b.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=b.jPlayer.platform.ipad||b.jPlayer.platform.iphone||b.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);this.options.keyEnabled&&!b.jPlayer.focus&&(b.jPlayer.focus=this);this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN};b.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto");this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=this._limitValue(this.options.volume,0,1);b.each(this.options.supplied.toLowerCase().split(","),function(c,d){var e=d.replace(/^\s+|\s+$/g,"");if(a.format[e]){var f=!1;b.each(a.formats,function(a,c){if(e===c)return f=!0,!1});f||a.formats.push(e)}});b.each(this.options.solution.toLowerCase().split(","),function(c,d){var e=d.replace(/^\s+|\s+$/g,"");if(a.solution[e]){var f=!1;b.each(a.solutions,function(a,c){if(e===c)return f=!0,!1});f||a.solutions.push(e)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=b.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=b.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:f});this.internal.video=b.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:f});this.internal.flash=b.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:f,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf":"")});this.internal.poster=b.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:f});b.each(b.jPlayer.event,function(c,b){a.options[c]!==f&&(a.element.bind(b+".jPlayer",a.options[c]),a.options[c]=f)});this.require.audio=!1;this.require.video=!1;b.each(this.formats,function(c,b){a.require[a.format[b].media]=!0});this.options=this.require.video?b.extend(!0,{},this.optionsVideo,this.options):b.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);b.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){a.status.video&&!a.status.waitForPlay||a.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=b("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){a._trigger(b.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.flash.canPlay={};b.each(this.formats,function(c,b){a.html.canPlay[b]=a.html[a.format[b].media].available&&""!==a.htmlElement[a.format[b].media].canPlayType(a.format[b].codec);a.flash.canPlay[b]=a.format[b].flashCanPlay&&a.flash.available});this.html.desired=!1;this.flash.desired=!1;b.each(this.solutions,function(c,d){if(0===c)a[d].desired=!0;else{var e=!1,f=!1;b.each(a.formats,function(c,b){a[a.solutions[0]].canPlay[b]&&("video"===a.format[b].media?f=!0:e=!0)});a[d].desired=a.require.audio&&!e||a.require.video&&!f}});this.html.support={};this.flash.support={};b.each(this.formats,function(c,b){a.html.support[b]=a.html.canPlay[b]&&a.html.desired;a.flash.support[b]=a.flash.canPlay[b]&&a.flash.desired});this.html.used=!1;this.flash.used=!1;b.each(this.solutions,function(c,d){b.each(a.formats,function(c,b){if(a[d].support[b])return a[d].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:b.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SOLUTION,hint:b.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());if(this.flash.used){var c,d="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(b.jPlayer.browser.msie&&(9>Number(b.jPlayer.browser.version)||9>b.jPlayer.browser.documentMode)){d=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+d+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];c=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var e=0;e<d.length;e++)c.appendChild(document.createElement(d[e]))}else e=function(a,c,b){var d=document.createElement("param");d.setAttribute("name",c);d.setAttribute("value",b);a.appendChild(d)},c=document.createElement("object"),c.setAttribute("id",this.internal.flash.id),c.setAttribute("name",this.internal.flash.id),c.setAttribute("data",this.internal.flash.swf),c.setAttribute("type","application/x-shockwave-flash"),c.setAttribute("width","1"),c.setAttribute("height","1"),c.setAttribute("tabindex","-1"),e(c,"flashvars",d),e(c,"allowscriptaccess","always"),e(c,"bgcolor",this.options.backgroundColor),e(c,"wmode",this.options.wmode);this.element.append(c);this.internal.flash.jq=b(c)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1;this._updatePlaybackRate();this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=b("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=b("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){a._trigger(b.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();this.html.used&&!this.flash.used&&setTimeout(function(){a.internal.ready=!0;a.version.flash="n/a";a._trigger(b.jPlayer.event.repeat);a._trigger(b.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();b.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");b.each(this.css.jq,function(a,c){c.length&&c.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===b.jPlayer.focus&&(b.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(c){return!1}},_testPlaybackRate:function(a){a=document.createElement("string"===typeof a?a:"audio");try{return"playbackRate"in a?(a.playbackRate=0.5,0.5===a.playbackRate):!1}catch(c){return!1}},_uaBlocklist:function(a){var c=navigator.userAgent.toLowerCase(),d=!1;b.each(a,function(a,b){if(b&&b.test(c))return d=!0,!1});return d},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(a,c){var d=this;a.preload=this.options.preload;a.muted=this.options.muted;a.volume=this.options.volume;this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate);a.addEventListener("progress",function(){c.gate&&(d.internal.cmdsIgnored&&0<this.readyState&&(d.internal.cmdsIgnored=!1),d.androidFix.setMedia=!1,d.androidFix.play&&(d.androidFix.play=!1,d.play(d.androidFix.time)),d.androidFix.pause&&(d.androidFix.pause=!1,d.pause(d.androidFix.time)),d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.progress))},!1);a.addEventListener("timeupdate",function(){c.gate&&(d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.timeupdate))},!1);a.addEventListener("durationchange",function(){c.gate&&(d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.durationchange))},!1);a.addEventListener("play",function(){c.gate&&(d._updateButtons(!0),d._html_checkWaitForPlay(),d._trigger(b.jPlayer.event.play))},!1);a.addEventListener("playing",function(){c.gate&&(d._updateButtons(!0),d._seeked(),d._trigger(b.jPlayer.event.playing))},!1);a.addEventListener("pause",function(){c.gate&&(d._updateButtons(!1),d._trigger(b.jPlayer.event.pause))},!1);a.addEventListener("waiting",function(){c.gate&&(d._seeking(),d._trigger(b.jPlayer.event.waiting))},!1);a.addEventListener("seeking",function(){c.gate&&(d._seeking(),d._trigger(b.jPlayer.event.seeking))},!1);a.addEventListener("seeked",function(){c.gate&&(d._seeked(),d._trigger(b.jPlayer.event.seeked))},!1);a.addEventListener("volumechange",function(){c.gate&&(d.options.volume=a.volume,d.options.muted=a.muted,d._updateMute(),d._updateVolume(),d._trigger(b.jPlayer.event.volumechange))},!1);a.addEventListener("ratechange",function(){c.gate&&(d.options.defaultPlaybackRate=a.defaultPlaybackRate,d.options.playbackRate=a.playbackRate,d._updatePlaybackRate(),d._trigger(b.jPlayer.event.ratechange))},!1);a.addEventListener("suspend",function(){c.gate&&(d._seeked(),d._trigger(b.jPlayer.event.suspend))},!1);a.addEventListener("ended",function(){c.gate&&(b.jPlayer.browser.webkit||(d.htmlElement.media.currentTime=0),d.htmlElement.media.pause(),d._updateButtons(!1),d._getHtmlStatus(a,!0),d._updateInterface(),d._trigger(b.jPlayer.event.ended))},!1);a.addEventListener("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(clearTimeout(d.internal.htmlDlyCmdId),d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:b.jPlayer.error.URL,context:d.status.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL})))},!1);b.each(b.jPlayer.htmlEvent,function(e,g){a.addEventListener(this,function(){c.gate&&d._trigger(b.jPlayer.event[g])},!1)})},_getHtmlStatus:function(a,c){var b=0,e=0,g=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration);b=a.currentTime;e=0<this.status.duration?100*b/this.status.duration:0;"object"===typeof a.seekable&&0<a.seekable.length?(g=0<this.status.duration?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100,f=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(g=100,f=e);c&&(e=f=b=0);this.status.seekPercent=g;this.status.currentPercentRelative=f;this.status.currentPercentAbsolute=e;this.status.currentTime=b;this.status.remaining=this.status.duration-this.status.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=a.ended},_resetStatus:function(){this.status=b.extend({},this.status,b.jPlayer.prototype.status)},_trigger:function(a,c,d){a=b.Event(a);a.jPlayer={};a.jPlayer.version=b.extend({},this.version);a.jPlayer.options=b.extend(!0,{},this.options);a.jPlayer.status=b.extend(!0,{},this.status);a.jPlayer.html=b.extend(!0,{},this.html);a.jPlayer.flash=b.extend(!0,{},this.flash);c&&(a.jPlayer.error=b.extend({},c));d&&(a.jPlayer.warning=b.extend({},d));this.element.trigger(a)},jPlayerFlashEvent:function(a,c){if(a===b.jPlayer.event.ready)if(!this.internal.ready)this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:b.jPlayer.error.VERSION,context:this.version.flash,message:b.jPlayer.errorMsg.VERSION+this.version.flash,hint:b.jPlayer.errorHint.VERSION}),this._trigger(b.jPlayer.event.repeat),this._trigger(a);else if(this.flash.gate){if(this.status.srcSet){var d=this.status.currentTime,e=this.status.paused;this.setMedia(this.status.media);this.volumeWorker(this.options.volume);0<d&&(e?this.pause(d):this.play(d))}this._trigger(b.jPlayer.event.flashreset)}if(this.flash.gate)switch(a){case b.jPlayer.event.progress:this._getFlashStatus(c);this._updateInterface();this._trigger(a);break;case b.jPlayer.event.timeupdate:this._getFlashStatus(c);this._updateInterface();this._trigger(a);break;case b.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(a);break;case b.jPlayer.event.pause:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.ended:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.click:this._trigger(a);break;case b.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:b.jPlayer.error.URL,context:c.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL});break;case b.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case b.jPlayer.event.seeked:this._seeked();this._trigger(a);break;case b.jPlayer.event.ready:break;default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.remaining=a.duration-a.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_updateButtons:function(a){a===f?a=!this.status.paused:this.status.paused=!a;this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var a="";this.css.jq.currentTime.length&&(a=this._convertTime(this.status.currentTime),a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var a="",a=this.status.duration,c=this.status.remaining;this.css.jq.duration.length&&("string"===typeof this.status.media.duration?a=this.status.media.duration:("number"===typeof this.status.media.duration&&(a=this.status.media.duration,c=a-this.status.currentTime),a=this.options.remainingDuration?(0<c?"-":"")+this._convertTime(c):this._convertTime(a)),a!==this.css.jq.duration.text()&&this.css.jq.duration.text(a))},_convertTime:l.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var c=document.createElement("div");c.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>';return c.firstChild.href},_absoluteMediaUrls:function(a){var c=this;b.each(a,function(b,e){e&&c.format[b]&&(a[b]=c._qualifyURL(e))});return a},setMedia:function(a){var c=this,d=!1,e=this.status.media.poster!==a.poster;this._resetMedia();this._resetGate();this._resetActive();this.androidFix.setMedia=!1;this.androidFix.play=!1;this.androidFix.pause=!1;a=this._absoluteMediaUrls(a);b.each(this.formats,function(e,f){var k="video"===c.format[f].media;b.each(c.solutions,function(e,g){if(c[g].support[f]&&c._validString(a[f])){var l="html"===g;k?(l?(c.html.video.gate=!0,c._html_setVideo(a),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c.status.video=!0):(l?(c.html.audio.gate=!0,c._html_setAudio(a),c.html.active=!0,b.jPlayer.platform.android&&(c.androidFix.setMedia=!0)):(c.flash.gate=!0,c._flash_setAudio(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1);d=!0;return!1}});if(d)return!1});d?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(a.poster)||(e?this.htmlElement.poster.src=a.poster:this.internal.poster.jq.show()),this.css.jq.title.length&&"string"===typeof a.title&&(this.css.jq.title.html(a.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",a.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",a.title)),this.status.srcSet=!0,this.status.media=b.extend({},a),this._updateButtons(!1),this._updateInterface(),this._trigger(b.jPlayer.event.setmedia)):this._error({type:b.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SUPPORT,hint:b.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(b.jPlayer.focus=this)},play:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?(this.focus(),this.html.active?this._html_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(a,c){var d=this,e="function"===typeof c,g=Array.prototype.slice.call(arguments);"string"===typeof a&&(e&&g.splice(1,1),b.each(this.instances,function(){d.element!==this&&(e&&!c.call(this.data("jPlayer"),d)||this.jPlayer.apply(this,g))}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);this.status.srcSet?this.html.active?this._html_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a);this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(a){this.options.muted=a;this.html.used&&this._html_setProperty("muted",a);this.flash.used&&this._flash_mute(a);this.html.video.gate||this.html.audio.gate||(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(b.jPlayer.event.volumechange))},mute:function(a){a=a===f?!0:!!a;this._muted(a)},unmute:function(a){a=a===f?!0:!!a;this._muted(!a)},_updateMute:function(a){a===f&&(a=this.options.muted);this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a);this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(a){a=this._limitValue(a,0,1);this.options.volume=a;this.html.used&&this._html_setProperty("volume",a);this.flash.used&&this._flash_volume(a);this.html.video.gate||this.html.audio.gate||(this._updateVolume(a),this._trigger(b.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var c=b(a.currentTarget),d=c.offset(),e=a.pageX-d.left,g=c.width();a=c.height()-a.pageY+d.top;c=c.height();this.options.verticalVolume?this.volume(a/c):this.volume(e/g)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===f&&(a=this.options.volume);a=this.options.muted?0:a;this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var c=this;this.options.cssSelectorAncestor=a;this._removeUiClass();this.ancestorJq=a?b(a):[];a&&1!==this.ancestorJq.length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();b.each(this.options.cssSelector,function(a,b){c._cssSelector(a,b)});this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(a,c){var d=this;"string"===typeof c?b.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=c,this.css.cs[a]=this.options.cssSelectorAncestor+" "+c,this.css.jq[a]=c?b(this.css.cs[a]):[],this.css.jq[a].length&&this[a]&&this.css.jq[a].bind("click.jPlayer",function(c){c.preventDefault();d[a](c);b(this).blur()}),c&&1!==this.css.jq[a].length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+
this.css.jq[a].length+" found for "+a+" method.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:b.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_STRING,context:c,message:b.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:b.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&this._setOption("remainingDuration",!this.options.remainingDuration)},seekBar:function(a){if(this.css.jq.seekBar.length){var c=b(a.currentTarget),d=c.offset();a=a.pageX-d.left;c=c.width();this.playHead(100*a/c)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(a){if(this.css.jq.playbackRateBar.length){var c=b(a.currentTarget),d=c.offset(),e=a.pageX-d.left,g=c.width();a=c.height()-a.pageY+d.top;c=c.height();this.playbackRate((this.options.verticalPlaybackRate?a/c:e/g)*(this.options.maxPlaybackRate-
this.options.minPlaybackRate)+this.options.minPlaybackRate)}},_updatePlaybackRate:function(){var a=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*a+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(){this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==a&&(this.options.loop=a,this._updateButtons(),this._trigger(b.jPlayer.event.repeat))},option:function(a,c){var d=a;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"===typeof a){var e=a.split(".");if(c===f){for(var d=b.extend(!0,{},this.options),g=0;g<e.length;g++)if(d[e[g]]!==f)d=d[e[g]];else return this._warning({type:b.jPlayer.warning.OPTION_KEY,context:a,message:b.jPlayer.warningMsg.OPTION_KEY,hint:b.jPlayer.warningHint.OPTION_KEY}),f;return d}for(var g=d={},h=0;h<e.length;h++)h<e.length-1?(g[e[h]]={},g=g[e[h]]):g[e[h]]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,c){var d=this;switch(a){case"volume":this.volume(c);break;case"muted":this._muted(c);break;case"globalVolume":this.options[a]=c;break;case"cssSelectorAncestor":this._cssSelectorAncestor(c);break;case"cssSelector":b.each(c,function(a,c){d._cssSelector(a,c)});break;case"playbackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("playbackRate",c);this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("defaultPlaybackRate",c);this._updatePlaybackRate();break;case"minPlaybackRate":this.options[a]=c=this._limitValue(c,0.1,this.options.maxPlaybackRate-0.1);this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate+0.1,16);this._updatePlaybackRate();break;case"fullScreen":if(this.options[a]!==c){var e=b.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!e||e&&!this.status.waitForPlay)e||(this.options[a]=c),c?this._requestFullscreen():this._exitFullscreen(),e||this._setOption("fullWindow",c)}break;case"fullWindow":this.options[a]!==c&&(this._removeUiClass(),this.options[a]=c,this._refreshSize());break;case"size":this.options.fullWindow||this.options[a].cssClass===c.cssClass||this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[a].cssClass!==c.cssClass&&this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case"autohide":this.options[a]=b.extend({},this.options[a],c);this._updateAutohide();break;case"loop":this._loop(c);break;case"remainingDuration":this.options[a]=c;this._updateInterface();break;case"toggleDuration":this.options[a]=c;break;case"nativeVideoControls":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case"noFullWindow":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();break;case"noVolume":this.options[a]=b.extend({},this.options[a],c);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case"emulateHtml":this.options[a]!==c&&((this.options[a]=c)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[a]=b.extend({},this.options[a],c);break;case"keyEnabled":this.options[a]=c;c||this!==b.jPlayer.focus||(b.jPlayer.focus=null);break;case"keyBindings":this.options[a]=b.extend(!0,{},this.options[a],c);break;case"audioFullScreen":this.options[a]=c}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(b.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,c=function(){a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var a=this,c=b.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=b.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(a.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!b.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],c=b.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(a=this.htmlElement.video);c.api.fullscreenEnabled&&c.api.requestFullscreen(a)},_exitFullscreen:function(){var a=b.jPlayer.nativeFeatures.fullscreen,c;a.used.webkitVideo&&(c=this.htmlElement.video);a.api.fullscreenEnabled&&a.api.exitFullscreen(c)},_html_initMedia:function(a){var c=b(this.htmlElement.media).empty();b.each(a.track||[],function(a,b){var g=document.createElement("track");g.setAttribute("kind",b.kind?b.kind:"");g.setAttribute("src",b.src?b.src:"");g.setAttribute("srclang",b.srclang?b.srclang:"");g.setAttribute("label",b.label?b.label:"");b.def&&g.setAttribute("default",b.def);c.append(g)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&this._html_load();this._trigger(b.jPlayer.event.timeupdate)},_html_setFormat:function(a){var c=this;b.each(this.formats,function(b,e){if(c.html.support[e]&&a[e])return c.status.src=a[e],c.status.format[e]=!0,c.status.formatType=e,!1})},_html_setAudio:function(a){this._html_setFormat(a);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?a.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,d=this.htmlElement.media;this.androidFix.pause=!1;this._html_load();if(this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))d.play();else{this.internal.cmdsIgnored&&d.play();try{if(!d.seekable||"object"===typeof d.seekable&&0<d.seekable.length)d.currentTime=a,d.play();else throw 1;}catch(e){this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250);return}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,d=this.htmlElement.media;this.androidFix.play=!1;0<a?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);d.pause();if(this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(!d.seekable||"object"===typeof d.seekable&&0<d.seekable.length)d.currentTime=a;else throw 1;}catch(e){this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250);return}0<a&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this,d=this.htmlElement.media;this._html_load();try{if("object"===typeof d.seekable&&0<d.seekable.length)d.currentTime=a*d.seekable.end(d.seekable.length-
1)/100;else if(0<d.duration&&!isNaN(d.duration))d.currentTime=a*d.duration/100;else throw"e";}catch(e){this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,b){this.html.audio.available&&(this.htmlElement.audio[a]=b);this.html.video.available&&(this.htmlElement.video[a]=b)},_flash_setAudio:function(a){var c=this;try{b.each(this.formats,function(b,d){if(c.flash.support[d]&&a[d]){switch(d){case"m4a":case"fla":c._getMovie().fl_setAudio_m4a(a[d]);break;case"mp3":c._getMovie().fl_setAudio_mp3(a[d]);break;case"rtmpa":c._getMovie().fl_setAudio_rtmp(a[d])}c.status.src=a[d];c.status.format[d]=!0;c.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_setVideo:function(a){var c=this;try{b.each(this.formats,function(b,d){if(c.flash.support[d]&&a[d]){switch(d){case"m4v":case"flv":c._getMovie().fl_setVideo_m4v(a[d]);break;case"rtmpv":c._getMovie().fl_setVideo_rtmp(a[d])}c.status.src=a[d];c.status.format[d]=!0;c.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=!1;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}0<a&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a=0,b;if(window.ActiveXObject)try{if(b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var d=b.GetVariable("$version");d&&(d=d.split(" ")[1].split(","),a=parseInt(d[0],10)+"."+parseInt(d[1],10))}}catch(e){}else navigator.plugins&&0<navigator.mimeTypes.length&&(b=navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var b=!1;this._getFlashPluginVersion()>=a&&(b=!0);return b},_validString:function(a){return a&&"string"===typeof a},_limitValue:function(a,b,d){return a<b?b:a>d?d:a},_urlNotSetError:function(a){this._error({type:b.jPlayer.error.URL_NOT_SET,context:a,message:b.jPlayer.errorMsg.URL_NOT_SET,hint:b.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var c;c=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:b.jPlayer.error[c],context:this.internal.flash.swf,message:b.jPlayer.errorMsg[c]+a.message,hint:b.jPlayer.errorHint[c]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(b.jPlayer.event.error,a);this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_warning:function(a){this._trigger(b.jPlayer.event.warning,f,a);this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_alert:function(a){a="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(a):alert(a)},_emulateHtmlBridge:function(){var a=this;b.each(b.jPlayer.emulateMethods.split(/\s+/g),function(b,d){a.internal.domNode[d]=function(b){a[d](b)}});b.each(b.jPlayer.event,function(c,d){var e=!0;b.each(b.jPlayer.reservedEvent.split(/\s+/g),function(a,b){if(b===c)return e=!1});e&&a.element.bind(d+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var b=document.createEvent("Event");b.initEvent(c,!1,!0);a.internal.domNode.dispatchEvent(b)})})},_emulateHtmlUpdate:function(){var a=this;b.each(b.jPlayer.emulateStatus.split(/\s+/g),function(b,d){a.internal.domNode[d]=a.status[d]});b.each(b.jPlayer.emulateOptions.split(/\s+/g),function(b,d){a.internal.domNode[d]=a.options[d]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml");b.each((b.jPlayer.emulateMethods+" "+b.jPlayer.emulateStatus+" "+b.jPlayer.emulateOptions).split(/\s+/g),function(b,d){delete a.internal.domNode[d]})}};b.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};b.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+b.jPlayer.prototype.version.script+" needs Jplayer.swf version "+b.jPlayer.prototype.version.needFlash+" but found "};b.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};b.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};b.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};b.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});(function(b,f){jPlayerPlaylist=function(a,c,d){var e=this;this.current=0;this.removing=this.shuffled=this.loop=!1;this.cssSelector=b.extend({},this._cssSelector,a);this.options=b.extend(!0,{keyBindings:{next:{key:39,fn:function(){e.next()}},previous:{key:37,fn:function(){e.previous()}}}},this._options,d);this.playlist=[];this.original=[];this._initPlaylist(c);this.cssSelector.title=this.cssSelector.cssSelectorAncestor+" .jp-title";this.cssSelector.playlist=this.cssSelector.cssSelectorAncestor+" .jp-playlist";this.cssSelector.next=this.cssSelector.cssSelectorAncestor+" .jp-next";this.cssSelector.previous=this.cssSelector.cssSelectorAncestor+" .jp-previous";this.cssSelector.shuffle=this.cssSelector.cssSelectorAncestor+" .jp-shuffle";this.cssSelector.shuffleOff=this.cssSelector.cssSelectorAncestor+" .jp-shuffle-off";this.options.cssSelectorAncestor=this.cssSelector.cssSelectorAncestor;this.options.repeat=function(a){e.loop=a.jPlayer.options.loop};b(this.cssSelector.jPlayer).bind(b.jPlayer.event.ready,function(){e._init()});b(this.cssSelector.jPlayer).bind(b.jPlayer.event.ended,function(){e.next()});b(this.cssSelector.jPlayer).bind(b.jPlayer.event.play,function(){b(this).jPlayer("pauseOthers")});b(this.cssSelector.jPlayer).bind(b.jPlayer.event.resize,function(a){a.jPlayer.options.fullScreen?b(e.cssSelector.title).show():b(e.cssSelector.title).hide()});b(this.cssSelector.previous).click(function(){e.previous();b(this).blur();return!1});b(this.cssSelector.next).click(function(){e.next();b(this).blur();return!1});b(this.cssSelector.shuffle).click(function(){e.shuffle(!0);return!1});b(this.cssSelector.shuffleOff).click(function(){e.shuffle(!1);return!1}).hide();this.options.fullScreen||b(this.cssSelector.title).hide();b(this.cssSelector.playlist+" ul").empty();this._createItemHandlers();b(this.cssSelector.jPlayer).jPlayer(this.options)};jPlayerPlaylist.prototype={_cssSelector:{jPlayer:"#jquery_jplayer_1",cssSelectorAncestor:"#jp_container_1"},_options:{playlistOptions:{autoPlay:!1,loopOnPrevious:!1,shuffleOnLoop:!0,enableRemoveControls:!1,displayTime:"slow",addTime:"fast",removeTime:"fast",shuffleTime:"slow",itemClass:"jp-playlist-item",freeGroupClass:"jp-free-media",freeItemClass:"jp-playlist-item-free",removeItemClass:"jp-playlist-item-remove"}},option:function(a,b){if(b===f)return this.options.playlistOptions[a];this.options.playlistOptions[a]=b;switch(a){case"enableRemoveControls":this._updateControls();break;case"itemClass":case"freeGroupClass":case"freeItemClass":case"removeItemClass":this._refresh(!0),this._createItemHandlers()}return this},_init:function(){var a=this;this._refresh(function(){a.options.playlistOptions.autoPlay?a.play(a.current):a.select(a.current)})},_initPlaylist:function(a){this.current=0;this.removing=this.shuffled=!1;this.original=b.extend(!0,[],a);this._originalPlaylist()},_originalPlaylist:function(){var a=this;this.playlist=[];b.each(this.original,function(b){a.playlist[b]=a.original[b]})},_refresh:function(a){var c=this;if(a&&!b.isFunction(a))b(this.cssSelector.playlist+" ul").empty(),b.each(this.playlist,function(a){b(c.cssSelector.playlist+" ul").append(c._createListItem(c.playlist[a]))}),this._updateControls();else{var d=b(this.cssSelector.playlist+" ul").children().length?this.options.playlistOptions.displayTime:0;b(this.cssSelector.playlist+" ul").slideUp(d,function(){var d=b(this);b(this).empty();b.each(c.playlist,function(a){d.append(c._createListItem(c.playlist[a]))});c._updateControls();b.isFunction(a)&&a();c.playlist.length?b(this).slideDown(c.options.playlistOptions.displayTime):b(this).show()})}},_createListItem:function(a){var c=this,d="<li><div>",d=d+("<a href='javascript:;' class='"+this.options.playlistOptions.removeItemClass+"'>&times;</a>");if(a.free){var e=!0,d=d+("<span class='"+this.options.playlistOptions.freeGroupClass+"'>(");b.each(a,function(a,f){b.jPlayer.prototype.format[a]&&(e?e=!1:d+=" | ",d+="<a class='"+c.options.playlistOptions.freeItemClass+"' href='"+f+"' tabindex='1'>"+a+"</a>")});d+=")</span>"}d+="<a href='javascript:;' class='"+this.options.playlistOptions.itemClass+"' tabindex='1'>"+a.title+(a.artist?" <span class='jp-artist'>by "+a.artist+"</span>":"")+"</a>";return d+="</div></li>"},_createItemHandlers:function(){var a=this;b(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.itemClass).on("click","a."+this.options.playlistOptions.itemClass,function(){var c=b(this).parent().parent().index();a.current!==c?a.play(c):b(a.cssSelector.jPlayer).jPlayer("play");b(this).blur();return!1});b(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.freeItemClass).on("click","a."+this.options.playlistOptions.freeItemClass,function(){b(this).parent().parent().find("."+a.options.playlistOptions.itemClass).click();b(this).blur();return!1});b(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.removeItemClass).on("click","a."+this.options.playlistOptions.removeItemClass,function(){var c=b(this).parent().parent().index();a.remove(c);b(this).blur();return!1})},_updateControls:function(){this.options.playlistOptions.enableRemoveControls?b(this.cssSelector.playlist+" ."+this.options.playlistOptions.removeItemClass).show():b(this.cssSelector.playlist+" ."+this.options.playlistOptions.removeItemClass).hide();this.shuffled?(b(this.cssSelector.shuffleOff).show(),b(this.cssSelector.shuffle).hide()):(b(this.cssSelector.shuffleOff).hide(),b(this.cssSelector.shuffle).show())},_highlight:function(a){this.playlist.length&&a!==f&&(b(this.cssSelector.playlist+" .jp-playlist-current").removeClass("jp-playlist-current"),b(this.cssSelector.playlist+" li:nth-child("+(a+1)+")").addClass("jp-playlist-current").find(".jp-playlist-item").addClass("jp-playlist-current"),b(this.cssSelector.title+" li").html(this.playlist[a].title+(this.playlist[a].artist?" <span class='jp-artist'>by "+this.playlist[a].artist+"</span>":"")))},setPlaylist:function(a){this._initPlaylist(a);this._init()},add:function(a,c){b(this.cssSelector.playlist+" ul").append(this._createListItem(a)).find("li:last-child").hide().slideDown(this.options.playlistOptions.addTime);this._updateControls();this.original.push(a);this.playlist.push(a);c?this.play(this.playlist.length-1):1===this.original.length&&this.select(0)},remove:function(a){var c=this;if(a===f)return this._initPlaylist([]),this._refresh(function(){b(c.cssSelector.jPlayer).jPlayer("clearMedia")}),!0;if(this.removing)return!1;a=0>a?c.original.length+a:a;0<=a&&a<this.playlist.length&&(this.removing=!0,b(this.cssSelector.playlist+" li:nth-child("+(a+1)+")").slideUp(this.options.playlistOptions.removeTime,function(){b(this).remove();if(c.shuffled){var d=c.playlist[a];b.each(c.original,function(a){if(c.original[a]===d)return c.original.splice(a,1),!1})}else c.original.splice(a,1);c.playlist.splice(a,1);c.original.length?a===c.current?(c.current=a<c.original.length?c.current:c.original.length-1,c.select(c.current)):a<c.current&&c.current--:(b(c.cssSelector.jPlayer).jPlayer("clearMedia"),c.current=0,c.shuffled=!1,c._updateControls());c.removing=!1}));return!0},select:function(a){a=0>a?this.original.length+a:a;0<=a&&a<this.playlist.length?(this.current=a,this._highlight(a),b(this.cssSelector.jPlayer).jPlayer("setMedia",this.playlist[this.current])):this.current=0},play:function(a){a=0>a?this.original.length+a:a;0<=a&&a<this.playlist.length?this.playlist.length&&(this.select(a),b(this.cssSelector.jPlayer).jPlayer("play")):a===f&&b(this.cssSelector.jPlayer).jPlayer("play")},pause:function(){b(this.cssSelector.jPlayer).jPlayer("pause")},next:function(){var a=this.current+1<this.playlist.length?this.current+1:0;this.loop?0===a&&this.shuffled&&this.options.playlistOptions.shuffleOnLoop&&1<this.playlist.length?this.shuffle(!0,!0):this.play(a):0<a&&this.play(a)},previous:function(){var a=0<=this.current-1?this.current-1:this.playlist.length-1;(this.loop&&this.options.playlistOptions.loopOnPrevious||a<this.playlist.length-1)&&this.play(a)},shuffle:function(a,c){var d=this;a===f&&(a=!this.shuffled);(a||a!==this.shuffled)&&b(this.cssSelector.playlist+" ul").slideUp(this.options.playlistOptions.shuffleTime,function(){(d.shuffled=a)?d.playlist.sort(function(){return 0.5-Math.random()}):d._originalPlaylist();d._refresh(!0);c||!b(d.cssSelector.jPlayer).data("jPlayer").status.paused?d.play(0):d.select(0);b(this).slideDown(d.options.playlistOptions.shuffleTime)})}}})(jQuery);$(document).ready(function(){});var TextToCanvas=new function()
{var self=this;var canvasContainer;var context;var DEF_FONT_FAMILY;var DEF_FONT_SIZE=18;var fontSize=localStorage.getItem('DEF_FONT_SIZE')?parseInt(localStorage.getItem('DEF_FONT_SIZE')):DEF_FONT_SIZE;var x=0;var y=0;var canvasHeight;self.init=function(parent,content,options)
{var css=document.createElement("style");css.id="canvas_css";css.innerHTML=self.css;document.head.appendChild(css);var canvasTools=document.createElement("div");canvasTools.className="canvas-tools";var span=document.createElement("span");span.textContent="Font Size: ";canvasTools.appendChild(span);var btnGroup=document.createElement('div');btnGroup.classList.add('btn-group');var decreaseBtn=document.createElement("button");decreaseBtn.className='btn btn-default';decreaseBtn.textContent="-";decreaseBtn.addEventListener("click",self.decreaseSize);btnGroup.appendChild(decreaseBtn);var resetBtn=document.createElement("button");resetBtn.className='btn btn-default';resetBtn.textContent="Reset";resetBtn.addEventListener("click",self.resetSize);btnGroup.appendChild(resetBtn);var increaseBtn=document.createElement("button");increaseBtn.className='btn btn-default';increaseBtn.textContent="+";increaseBtn.addEventListener("click",self.increaseSize);btnGroup.appendChild(increaseBtn);canvasTools.appendChild(btnGroup);parent.appendChild(canvasTools);canvasContainer=document.createElement("canvas");canvasContainer.className="canvas-container";canvasContainer.width=parent.offsetWidth;canvasContainer.height=100;parent.appendChild(canvasContainer);context=canvasContainer.getContext("2d");DEF_FONT_FAMILY=parent.style.fontFamily||"sans-serif";canvasHeight=canvasContainer.height;if(options){x=options.x||0;y=options.y||0;if(options.styles){for(var key in options.styles){canvasContainer.style[key]=options.styles[key];}}}
self.content=content;self.display();jQuery('#downloadOptions').show();};self.display=function(){self.draw(x,y);canvasContainer.height=canvasHeight;self.draw(x,y);};self.draw=function(x,y){context.clearRect(0,0,canvasContainer.width,canvasContainer.height);context.font=fontSize+"px "+DEF_FONT_FAMILY;context.textBaseline="top";var words=self.content.split('\n');var line='';for(var n=0;n<words.length;n++){line=words[n];var textWidth=context.measureText(line).width;if(textWidth>canvasContainer.width){self.wrapText(line,x,y);y+=(fontSize+fontSize/2);}else{context.fillText(line,x,y);}
y+=(fontSize+fontSize/2);}
canvasHeight=y;};self.wrapText=function(longLine,x,y)
{var words=longLine.split(' ');var line='';for(var n=0;n<words.length;n++){var text=line+words[n]+' ';var textWidth=context.measureText(text).width;if(textWidth>canvasContainer.width&&n>0){context.fillText(line,x,y);line=words[n]+' ';y+=(fontSize+fontSize/4);}else{line=text;}}
context.fillText(line,x,y);};self.decreaseSize=function()
{fontSize-=2;localStorage.setItem('DEF_FONT_SIZE',fontSize);self.display();};self.increaseSize=function()
{fontSize+=2;localStorage.setItem('DEF_FONT_SIZE',fontSize);self.display();};self.resetSize=function()
{fontSize=DEF_FONT_SIZE;localStorage.setItem('DEF_FONT_SIZE',fontSize);self.display();};};!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Fuse",[],t):"object"==typeof exports?exports.Fuse=t():e.Fuse=t()}(this,function(){return function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),J=n(8),E=n(0),o=function(){function $(e,t){var n=t.location,r=void 0===n?0:n,o=t.distance,i=void 0===o?100:o,a=t.threshold,s=void 0===a?.6:a,c=t.maxPatternLength,h=void 0===c?32:c,l=t.caseSensitive,u=void 0!==l&&l,f=t.tokenSeparator,d=void 0===f?/ +/g:f,v=t.findAllMatches,p=void 0!==v&&v,g=t.minMatchCharLength,y=void 0===g?1:g,m=t.id,k=void 0===m?null:m,S=t.keys,x=void 0===S?[]:S,b=t.shouldSort,M=void 0===b||b,_=t.getFn,L=void 0===_?J:_,w=t.sortFn,A=void 0===w?function(e,t){return e.score-t.score}:w,C=t.tokenize,I=void 0!==C&&C,O=t.matchAllTokens,j=void 0!==O&&O,P=t.includeMatches,F=void 0!==P&&P,T=t.includeScore,z=void 0!==T&&T,E=t.verbose,K=void 0!==E&&E;!function(e,t){if(!(e instanceof $))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:r,distance:i,threshold:s,maxPatternLength:h,isCaseSensitive:u,tokenSeparator:d,findAllMatches:p,minMatchCharLength:y,id:k,keys:x,includeMatches:F,includeScore:z,shouldSort:M,getFn:L,sortFn:A,verbose:K,tokenize:I,matchAllTokens:j},this.setCollection(e)}return r($.prototype,[{key:"setCollection",value:function(e){return this.list=e}},{key:"search",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,o=n.fullSearcher,i=this._search(r,o),a=i.weights,s=i.results;return this._computeScore(a,s),this.options.shouldSort&&this._sort(s),t.limit&&"number"==typeof t.limit&&(s=s.slice(0,t.limit)),this._format(s)}},{key:"_prepareSearchers",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)t.push(new i(n[r],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=this.list,r={},o=[];if("string"==typeof n[0]){for(var i=0,a=n.length;i<a;i+=1)this._analyze({key:"",value:n[i],record:i,index:i},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t});return{weights:null,results:o}}for(var s={},c=0,h=n.length;c<h;c+=1)for(var l=n[c],u=0,f=this.options.keys.length;u<f;u+=1){var d=this.options.keys[u];if("string"!=typeof d){if(s[d.name]={weight:1-d.weight||1},d.weight<=0||1<d.weight)throw new Error("Key weight has to be > 0 and <= 1");d=d.name}else s[d]={weight:1};this._analyze({key:d,value:this.options.getFn(l,d),record:l,index:c},{resultMap:r,results:o,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:o}}},{key:"_analyze",value:function(e,t){var n=e.key,r=e.arrayIndex,o=void 0===r?-1:r,i=e.value,a=e.record,s=e.index,c=t.tokenSearchers,h=void 0===c?[]:c,l=t.fullSearcher,u=void 0===l?[]:l,f=t.resultMap,d=void 0===f?{}:f,v=t.results,p=void 0===v?[]:v;if(null!=i){var g=!1,y=-1,m=0;if("string"==typeof i){this._log("\nKey: ".concat(""===n?"-":n));var k=u.search(i);if(this._log('Full text: "'.concat(i,'", score: ').concat(k.score)),this.options.tokenize){for(var S=i.split(this.options.tokenSeparator),x=[],b=0;b<h.length;b+=1){var M=h[b];this._log('\nPattern: "'.concat(M.pattern,'"'));for(var _=!1,L=0;L<S.length;L+=1){var w=S[L],A=M.search(w),C={};A.isMatch?(C[w]=A.score,_=g=!0,x.push(A.score)):(C[w]=1,this.options.matchAllTokens||x.push(1)),this._log('Token: "'.concat(w,'", score: ').concat(C[w]))}_&&(m+=1)}y=x[0];for(var I=x.length,O=1;O<I;O+=1)y+=x[O];y/=I,this._log("Token score average:",y)}var j=k.score;-1<y&&(j=(j+y)/2),this._log("Score average:",j);var P=!this.options.tokenize||!this.options.matchAllTokens||m>=h.length;if(this._log("\nCheck Matches: ".concat(P)),(g||k.isMatch)&&P){var F=d[s];F?F.output.push({key:n,arrayIndex:o,value:i,score:j,matchedIndices:k.matchedIndices}):(d[s]={item:a,output:[{key:n,arrayIndex:o,value:i,score:j,matchedIndices:k.matchedIndices}]},p.push(d[s]))}}else if(E(i))for(var T=0,z=i.length;T<z;T+=1)this._analyze({key:n,arrayIndex:T,value:i[T],record:a,index:s},{resultMap:d,results:p,tokenSearchers:h,fullSearcher:u})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var n=0,r=t.length;n<r;n+=1){for(var o=t[n].output,i=o.length,a=1,s=1,c=0;c<i;c+=1){var h=e?e[o[c].key].weight:1,l=(1===h?o[c].score:o[c].score||.001)*h;1!==h?s=Math.min(s,l):a*=o[c].nScore=l}t[n].score=1===s?a:s,this._log(t[n])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,function(e,t){if("object"===l(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t})),n=null}var r=[];this.options.includeMatches&&r.push(function(e,t){var n=e.output;t.matches=[];for(var r=0,o=n.length;r<o;r+=1){var i=n[r];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty("arrayIndex")&&-1<i.arrayIndex&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}}),this.options.includeScore&&r.push(function(e,t){t.score=e.score});for(var o=0,i=e.length;o<i;o+=1){var a=e[o];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),r.length){for(var s={item:a.item},c=0,h=r.length;c<h;c+=1)r[c](a,s);t.push(s)}else t.push(a.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}]),$}();e.exports=o},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=n(3),u=n(4),k=n(7),o=function(){function m(e,t){var n=t.location,r=void 0===n?0:n,o=t.distance,i=void 0===o?100:o,a=t.threshold,s=void 0===a?.6:a,c=t.maxPatternLength,h=void 0===c?32:c,l=t.isCaseSensitive,u=void 0!==l&&l,f=t.tokenSeparator,d=void 0===f?/ +/g:f,v=t.findAllMatches,p=void 0!==v&&v,g=t.minMatchCharLength,y=void 0===g?1:g;!function(e,t){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:r,distance:i,threshold:s,maxPatternLength:h,isCaseSensitive:u,tokenSeparator:d,findAllMatches:p,minMatchCharLength:y},this.pattern=this.options.isCaseSensitive?e:e.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=k(this.pattern))}return r(m.prototype,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return l(e,this.pattern,r);var o=this.options,i=o.location,a=o.distance,s=o.threshold,c=o.findAllMatches,h=o.minMatchCharLength;return u(e,this.pattern,this.patternAlphabet,{location:i,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:h})}}]),m}();e.exports=o},function(e,t){var l=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,r=new RegExp(t.replace(l,"\\$&").replace(n,"|")),o=e.match(r),i=!!o,a=[];if(i)for(var s=0,c=o.length;s<c;s+=1){var h=o[s];a.push([e.indexOf(h),h.length-1])}return{score:i?.5:1,isMatch:i,matchedIndices:a}}},function(e,t,n){var E=n(5),K=n(6);e.exports=function(e,t,n,r){for(var o=r.location,i=void 0===o?0:o,a=r.distance,s=void 0===a?100:a,c=r.threshold,h=void 0===c?.6:c,l=r.findAllMatches,u=void 0!==l&&l,f=r.minMatchCharLength,d=void 0===f?1:f,v=i,p=e.length,g=h,y=e.indexOf(t,v),m=t.length,k=[],S=0;S<p;S+=1)k[S]=0;if(-1!==y){var x=E(t,{errors:0,currentLocation:y,expectedLocation:v,distance:s});if(g=Math.min(x,g),-1!==(y=e.lastIndexOf(t,v+m))){var b=E(t,{errors:0,currentLocation:y,expectedLocation:v,distance:s});g=Math.min(b,g)}}y=-1;for(var M=[],_=1,L=m+p,w=1<<m-1,A=0;A<m;A+=1){for(var C=0,I=L;C<I;)E(t,{errors:A,currentLocation:v+I,expectedLocation:v,distance:s})<=g?C=I:L=I,I=Math.floor((L-C)/2+C);L=I;var O=Math.max(1,v-I+1),j=u?p:Math.min(v+I,p)+m,P=Array(j+2);P[j+1]=(1<<A)-1;for(var F=j;O<=F;F-=1){var T=F-1,z=n[e.charAt(T)];if(z&&(k[T]=1),P[F]=(P[F+1]<<1|1)&z,0!==A&&(P[F]|=(M[F+1]|M[F])<<1|1|M[F+1]),P[F]&w&&(_=E(t,{errors:A,currentLocation:T,expectedLocation:v,distance:s}))<=g){if(g=_,(y=T)<=v)break;O=Math.max(1,2*v-y)}}if(E(t,{errors:A+1,currentLocation:v,expectedLocation:v,distance:s})>g)break;M=P}return{isMatch:0<=y,score:0===_?.001:_,matchedIndices:K(k,d)}}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,o=t.currentLocation,i=void 0===o?0:o,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,h=void 0===c?100:c,l=r/e.length,u=Math.abs(s-i);return h?l+u/h:u?1:l}},function(e,t){e.exports=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=-1,i=0,a=e.length;i<a;i+=1){var s=e[i];s&&-1===r?r=i:s||-1===r||((o=i-1)-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&t<=i-r&&n.push([r,i-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var o=0;o<n;o+=1)t[e.charAt(o)]|=1<<n-o-1;return t}},function(e,t,n){var l=n(0);e.exports=function(e,t){return function e(t,n,r){if(n){var o=n.indexOf("."),i=n,a=null;-1!==o&&(i=n.slice(0,o),a=n.slice(o+1));var s=t[i];if(null!=s)if(a||"string"!=typeof s&&"number"!=typeof s)if(l(s))for(var c=0,h=s.length;c<h;c+=1)e(s[c],a,r);else a&&e(s,a,r);else r.push(s.toString())}else r.push(t);return r}(e,t,[])}}])});!function(n){"use strict";function t(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(n,t){return n<<t|n>>>32-t}function e(n,e,o,u,c,f){return t(r(t(t(e,n),t(u,f)),c),o)}function o(n,t,r,o,u,c,f){return e(t&r|~t&o,n,t,u,c,f)}function u(n,t,r,o,u,c,f){return e(t&o|r&~o,n,t,u,c,f)}function c(n,t,r,o,u,c,f){return e(t^r^o,n,t,u,c,f)}function f(n,t,r,o,u,c,f){return e(r^(t|~o),n,t,u,c,f)}function i(n,r){n[r>>5]|=128<<r%32,n[14+(r+64>>>9<<4)]=r;var e,i,a,d,h,l=1732584193,g=-271733879,v=-1732584194,m=271733878;for(e=0;e<n.length;e+=16)i=l,a=g,d=v,h=m,g=f(g=f(g=f(g=f(g=c(g=c(g=c(g=c(g=u(g=u(g=u(g=u(g=o(g=o(g=o(g=o(g,v=o(v,m=o(m,l=o(l,g,v,m,n[e],7,-680876936),g,v,n[e+1],12,-389564586),l,g,n[e+2],17,606105819),m,l,n[e+3],22,-1044525330),v=o(v,m=o(m,l=o(l,g,v,m,n[e+4],7,-176418897),g,v,n[e+5],12,1200080426),l,g,n[e+6],17,-1473231341),m,l,n[e+7],22,-45705983),v=o(v,m=o(m,l=o(l,g,v,m,n[e+8],7,1770035416),g,v,n[e+9],12,-1958414417),l,g,n[e+10],17,-42063),m,l,n[e+11],22,-1990404162),v=o(v,m=o(m,l=o(l,g,v,m,n[e+12],7,1804603682),g,v,n[e+13],12,-40341101),l,g,n[e+14],17,-1502002290),m,l,n[e+15],22,1236535329),v=u(v,m=u(m,l=u(l,g,v,m,n[e+1],5,-165796510),g,v,n[e+6],9,-1069501632),l,g,n[e+11],14,643717713),m,l,n[e],20,-373897302),v=u(v,m=u(m,l=u(l,g,v,m,n[e+5],5,-701558691),g,v,n[e+10],9,38016083),l,g,n[e+15],14,-660478335),m,l,n[e+4],20,-405537848),v=u(v,m=u(m,l=u(l,g,v,m,n[e+9],5,568446438),g,v,n[e+14],9,-1019803690),l,g,n[e+3],14,-187363961),m,l,n[e+8],20,1163531501),v=u(v,m=u(m,l=u(l,g,v,m,n[e+13],5,-1444681467),g,v,n[e+2],9,-51403784),l,g,n[e+7],14,1735328473),m,l,n[e+12],20,-1926607734),v=c(v,m=c(m,l=c(l,g,v,m,n[e+5],4,-378558),g,v,n[e+8],11,-2022574463),l,g,n[e+11],16,1839030562),m,l,n[e+14],23,-35309556),v=c(v,m=c(m,l=c(l,g,v,m,n[e+1],4,-1530992060),g,v,n[e+4],11,1272893353),l,g,n[e+7],16,-155497632),m,l,n[e+10],23,-1094730640),v=c(v,m=c(m,l=c(l,g,v,m,n[e+13],4,681279174),g,v,n[e],11,-358537222),l,g,n[e+3],16,-722521979),m,l,n[e+6],23,76029189),v=c(v,m=c(m,l=c(l,g,v,m,n[e+9],4,-640364487),g,v,n[e+12],11,-421815835),l,g,n[e+15],16,530742520),m,l,n[e+2],23,-995338651),v=f(v,m=f(m,l=f(l,g,v,m,n[e],6,-198630844),g,v,n[e+7],10,1126891415),l,g,n[e+14],15,-1416354905),m,l,n[e+5],21,-57434055),v=f(v,m=f(m,l=f(l,g,v,m,n[e+12],6,1700485571),g,v,n[e+3],10,-1894986606),l,g,n[e+10],15,-1051523),m,l,n[e+1],21,-2054922799),v=f(v,m=f(m,l=f(l,g,v,m,n[e+8],6,1873313359),g,v,n[e+15],10,-30611744),l,g,n[e+6],15,-1560198380),m,l,n[e+13],21,1309151649),v=f(v,m=f(m,l=f(l,g,v,m,n[e+4],6,-145523070),g,v,n[e+11],10,-1120210379),l,g,n[e+2],15,718787259),m,l,n[e+9],21,-343485551),l=t(l,i),g=t(g,a),v=t(v,d),m=t(m,h);return[l,g,v,m]}function a(n){var t,r="",e=32*n.length;for(t=0;t<e;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function d(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var e=8*n.length;for(t=0;t<e;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function h(n){return a(i(d(n),8*n.length))}function l(n,t){var r,e,o=d(n),u=[],c=[];for(u[15]=c[15]=void 0,o.length>16&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(d(t)),512+8*t.length),a(i(c.concat(e),640))}function g(n){var t,r,e="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),e+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return e}function v(n){return unescape(encodeURIComponent(n))}function m(n){return h(v(n))}function p(n){return g(m(n))}function s(n,t){return l(v(n),v(t))}function C(n,t){return g(s(n,t))}function A(n,t,r){return t?r?s(t,n):C(t,n):r?m(n):p(n)}"function"==typeof define&&define.amd?define(function(){return A}):"object"==typeof module&&module.exports?module.exports=A:n.md5=A}(this);(function(){var componentHandler={upgradeDom:function(optJsClass,optCssClass){},upgradeElement:function(element,optJsClass){},upgradeElements:function(elements){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(jsClass,callback){},register:function(config){},downgradeElements:function(nodes){}};componentHandler=function(){var registeredComponents_=[];var createdComponents_=[];var componentConfigProperty_="mdlComponentConfigInternal_";function findRegisteredClass_(name,optReplace){for(var i=0;i<registeredComponents_.length;i++)if(registeredComponents_[i].className===name){if(typeof optReplace!=="undefined")registeredComponents_[i]=optReplace;return registeredComponents_[i]}return false}function getUpgradedListOfElement_(element){var dataUpgraded=element.getAttribute("data-upgraded");return dataUpgraded===null?[""]:dataUpgraded.split(",")}function isElementUpgraded_(element,jsClass){var upgradedList=getUpgradedListOfElement_(element);return upgradedList.indexOf(jsClass)!==-1}function createEvent_(eventType,bubbles,cancelable){if("CustomEvent"in window&&typeof window.CustomEvent==="function")return new CustomEvent(eventType,{bubbles:bubbles,cancelable:cancelable});else{var ev=document.createEvent("Events");ev.initEvent(eventType,bubbles,cancelable);return ev}}function upgradeDomInternal(optJsClass,optCssClass){if(typeof optJsClass==="undefined"&&typeof optCssClass==="undefined")for(var i=0;i<registeredComponents_.length;i++)upgradeDomInternal(registeredComponents_[i].className,registeredComponents_[i].cssClass);else{var jsClass=optJsClass;if(typeof optCssClass==="undefined"){var registeredClass=findRegisteredClass_(jsClass);if(registeredClass)optCssClass=registeredClass.cssClass}var elements=document.querySelectorAll("."+optCssClass);for(var n=0;n<elements.length;n++)upgradeElementInternal(elements[n],jsClass)}}function upgradeElementInternal(element,optJsClass){if(!(typeof element==="object"&&element instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var upgradingEv=createEvent_("mdl-componentupgrading",true,true);element.dispatchEvent(upgradingEv);if(upgradingEv.defaultPrevented)return;var upgradedList=getUpgradedListOfElement_(element);var classesToUpgrade=[];if(!optJsClass){var classList=element.classList;registeredComponents_.forEach(function(component){if(classList.contains(component.cssClass)&&classesToUpgrade.indexOf(component)===-1&&!isElementUpgraded_(element,component.className))classesToUpgrade.push(component)})}else if(!isElementUpgraded_(element,optJsClass))classesToUpgrade.push(findRegisteredClass_(optJsClass));for(var i=0,n=classesToUpgrade.length,registeredClass;i<n;i++){registeredClass=classesToUpgrade[i];if(registeredClass){upgradedList.push(registeredClass.className);element.setAttribute("data-upgraded",upgradedList.join(","));var instance=new registeredClass.classConstructor(element);instance[componentConfigProperty_]=registeredClass;createdComponents_.push(instance);for(var j=0,m=registeredClass.callbacks.length;j<m;j++)registeredClass.callbacks[j](element);if(registeredClass.widget)element[registeredClass.className]=instance}else throw new Error("Unable to find a registered component for the given class.");var upgradedEv=createEvent_("mdl-componentupgraded",true,false);element.dispatchEvent(upgradedEv)}}function upgradeElementsInternal(elements){if(!Array.isArray(elements))if(elements instanceof
Element)elements=[elements];else elements=Array.prototype.slice.call(elements);for(var i=0,n=elements.length,element;i<n;i++){element=elements[i];if(element instanceof HTMLElement){upgradeElementInternal(element);if(element.children.length>0)upgradeElementsInternal(element.children)}}}function registerInternal(config){var widgetMissing=typeof config.widget==="undefined"&&typeof config["widget"]==="undefined";var widget=true;if(!widgetMissing)widget=config.widget||config["widget"];var newConfig={classConstructor:config.constructor||config["constructor"],className:config.classAsString||config["classAsString"],cssClass:config.cssClass||config["cssClass"],widget:widget,callbacks:[]};registeredComponents_.forEach(function(item){if(item.cssClass===newConfig.cssClass)throw new Error("The provided cssClass has already been registered: "+item.cssClass);if(item.className===newConfig.className)throw new Error("The provided className has already been registered");});if(config.constructor.prototype.hasOwnProperty(componentConfigProperty_))throw new Error("MDL component classes must not have "+
componentConfigProperty_+" defined as a property.");var found=findRegisteredClass_(config.classAsString,newConfig);if(!found)registeredComponents_.push(newConfig)}function registerUpgradedCallbackInternal(jsClass,callback){var regClass=findRegisteredClass_(jsClass);if(regClass)regClass.callbacks.push(callback)}function upgradeAllRegisteredInternal(){for(var n=0;n<registeredComponents_.length;n++)upgradeDomInternal(registeredComponents_[n].className)}function deconstructComponentInternal(component){if(component){var componentIndex=createdComponents_.indexOf(component);createdComponents_.splice(componentIndex,1);var upgrades=component.element_.getAttribute("data-upgraded").split(",");var componentPlace=upgrades.indexOf(component[componentConfigProperty_].classAsString);upgrades.splice(componentPlace,1);component.element_.setAttribute("data-upgraded",upgrades.join(","));var ev=createEvent_("mdl-componentdowngraded",true,false);component.element_.dispatchEvent(ev)}}function downgradeNodesInternal(nodes){var downgradeNode=function(node){createdComponents_.filter(function(item){return item.element_===node}).forEach(deconstructComponentInternal)};if(nodes instanceof Array||nodes instanceof NodeList)for(var n=0;n<nodes.length;n++)downgradeNode(nodes[n]);else if(nodes instanceof Node)downgradeNode(nodes);else throw new Error("Invalid argument provided to downgrade MDL nodes.");}return{upgradeDom:upgradeDomInternal,upgradeElement:upgradeElementInternal,upgradeElements:upgradeElementsInternal,upgradeAllRegistered:upgradeAllRegisteredInternal,registerUpgradedCallback:registerUpgradedCallbackInternal,register:registerInternal,downgradeElements:downgradeNodesInternal}}();componentHandler.ComponentConfigPublic;componentHandler.ComponentConfig;componentHandler.Component;componentHandler["upgradeDom"]=componentHandler.upgradeDom;componentHandler["upgradeElement"]=componentHandler.upgradeElement;componentHandler["upgradeElements"]=componentHandler.upgradeElements;componentHandler["upgradeAllRegistered"]=componentHandler.upgradeAllRegistered;componentHandler["registerUpgradedCallback"]=componentHandler.registerUpgradedCallback;componentHandler["register"]=componentHandler.register;componentHandler["downgradeElements"]=componentHandler.downgradeElements;window.componentHandler=componentHandler;window["componentHandler"]=componentHandler;window.addEventListener("load",function(){if("classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach){document.documentElement.classList.add("mdl-js");componentHandler.upgradeAllRegistered()}else{componentHandler.upgradeElement=function(){};componentHandler.register=function(){}}});(function(){var MaterialButton=function MaterialButton(element){this.element_=element;this.init()};window["MaterialButton"]=MaterialButton;MaterialButton.prototype.Constant_={};MaterialButton.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"};MaterialButton.prototype.blurHandler_=function(event){if(event)this.element_.blur()};MaterialButton.prototype.disable=function(){this.element_.disabled=true};MaterialButton.prototype["disable"]=MaterialButton.prototype.disable;MaterialButton.prototype.enable=function(){this.element_.disabled=false};MaterialButton.prototype["enable"]=MaterialButton.prototype.enable;MaterialButton.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var rippleContainer=document.createElement("span");rippleContainer.classList.add(this.CssClasses_.RIPPLE_CONTAINER);this.rippleElement_=document.createElement("span");this.rippleElement_.classList.add(this.CssClasses_.RIPPLE);rippleContainer.appendChild(this.rippleElement_);this.boundRippleBlurHandler=this.blurHandler_.bind(this);this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler);this.element_.appendChild(rippleContainer)}this.boundButtonBlurHandler=this.blurHandler_.bind(this);this.element_.addEventListener("mouseup",this.boundButtonBlurHandler);this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}};componentHandler.register({constructor:MaterialButton,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:true})})();(function(){var MaterialProgress=function MaterialProgress(element){this.element_=element;this.init()};window["MaterialProgress"]=MaterialProgress;MaterialProgress.prototype.Constant_={};MaterialProgress.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"};MaterialProgress.prototype.setProgress=function(p){if(this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS))return;this.progressbar_.style.width=p+"%"};MaterialProgress.prototype["setProgress"]=MaterialProgress.prototype.setProgress;MaterialProgress.prototype.setBuffer=function(p){this.bufferbar_.style.width=p+"%";this.auxbar_.style.width=100-p+"%"};MaterialProgress.prototype["setBuffer"]=MaterialProgress.prototype.setBuffer;MaterialProgress.prototype.init=function(){if(this.element_){var el=document.createElement("div");el.className="progressbar bar bar1";this.element_.appendChild(el);this.progressbar_=el;el=document.createElement("div");el.className="bufferbar bar bar2";this.element_.appendChild(el);this.bufferbar_=el;el=document.createElement("div");el.className="auxbar bar bar3";this.element_.appendChild(el);this.auxbar_=el;this.progressbar_.style.width="0%";this.bufferbar_.style.width="100%";this.auxbar_.style.width="0%";this.element_.classList.add("is-upgraded")}};componentHandler.register({constructor:MaterialProgress,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:true})})();(function(){var MaterialSpinner=function MaterialSpinner(element){this.element_=element;this.init()};window["MaterialSpinner"]=MaterialSpinner;MaterialSpinner.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4};MaterialSpinner.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"};MaterialSpinner.prototype.createLayer=function(index){var layer=document.createElement("div");layer.classList.add(this.CssClasses_.MDL_SPINNER_LAYER);layer.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+index);var leftClipper=document.createElement("div");leftClipper.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER);leftClipper.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var gapPatch=document.createElement("div");gapPatch.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var rightClipper=document.createElement("div");rightClipper.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER);rightClipper.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);var circleOwners=[leftClipper,gapPatch,rightClipper];for(var i=0;i<circleOwners.length;i++){var circle=document.createElement("div");circle.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE);circleOwners[i].appendChild(circle)}layer.appendChild(leftClipper);layer.appendChild(gapPatch);layer.appendChild(rightClipper);this.element_.appendChild(layer)};MaterialSpinner.prototype["createLayer"]=MaterialSpinner.prototype.createLayer;MaterialSpinner.prototype.stop=function(){this.element_.classList.remove("is-active")};MaterialSpinner.prototype["stop"]=MaterialSpinner.prototype.stop;MaterialSpinner.prototype.start=function(){this.element_.classList.add("is-active")};MaterialSpinner.prototype["start"]=MaterialSpinner.prototype.start;MaterialSpinner.prototype.init=function(){if(this.element_){for(var i=1;i<=this.Constant_.MDL_SPINNER_LAYER_COUNT;i++)this.createLayer(i);this.element_.classList.add("is-upgraded")}};componentHandler.register({constructor:MaterialSpinner,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:true})})();(function(){var MaterialTextfield=function MaterialTextfield(element){this.element_=element;this.maxRows=this.Constant_.NO_MAX_ROWS;this.init()};window["MaterialTextfield"]=MaterialTextfield;MaterialTextfield.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"};MaterialTextfield.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"};MaterialTextfield.prototype.onKeyDown_=function(event){var currentRowCount=event.target.value.split("\n").length;if(event.keyCode===13)if(currentRowCount>=this.maxRows)event.preventDefault()};MaterialTextfield.prototype.onFocus_=function(event){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)};MaterialTextfield.prototype.onBlur_=function(event){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)};MaterialTextfield.prototype.onReset_=function(event){this.updateClasses_()};MaterialTextfield.prototype.updateClasses_=function(){this.checkDisabled();this.checkValidity();this.checkDirty();this.checkFocus()};MaterialTextfield.prototype.checkDisabled=function(){if(this.input_.disabled)this.element_.classList.add(this.CssClasses_.IS_DISABLED);else this.element_.classList.remove(this.CssClasses_.IS_DISABLED)};MaterialTextfield.prototype["checkDisabled"]=MaterialTextfield.prototype.checkDisabled;MaterialTextfield.prototype.checkFocus=function(){if(Boolean(this.element_.querySelector(":focus")))this.element_.classList.add(this.CssClasses_.IS_FOCUSED);else this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)};MaterialTextfield.prototype["checkFocus"]=MaterialTextfield.prototype.checkFocus;MaterialTextfield.prototype.checkValidity=function(){if(this.input_.validity)if(this.input_.validity.valid)this.element_.classList.remove(this.CssClasses_.IS_INVALID);else this.element_.classList.add(this.CssClasses_.IS_INVALID)};MaterialTextfield.prototype["checkValidity"]=MaterialTextfield.prototype.checkValidity;MaterialTextfield.prototype.checkDirty=function(){if(this.input_.value&&this.input_.value.length>0)this.element_.classList.add(this.CssClasses_.IS_DIRTY);else this.element_.classList.remove(this.CssClasses_.IS_DIRTY)};MaterialTextfield.prototype["checkDirty"]=MaterialTextfield.prototype.checkDirty;MaterialTextfield.prototype.disable=function(){this.input_.disabled=true;this.updateClasses_()};MaterialTextfield.prototype["disable"]=MaterialTextfield.prototype.disable;MaterialTextfield.prototype.enable=function(){this.input_.disabled=false;this.updateClasses_()};MaterialTextfield.prototype["enable"]=MaterialTextfield.prototype.enable;MaterialTextfield.prototype.change=function(value){this.input_.value=value||"";this.updateClasses_()};MaterialTextfield.prototype["change"]=MaterialTextfield.prototype.change;MaterialTextfield.prototype.init=function(){if(this.element_){this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL);this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT);if(this.input_){if(this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)){this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10);if(isNaN(this.maxRows))this.maxRows=this.Constant_.NO_MAX_ROWS}if(this.input_.hasAttribute("placeholder"))this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER);this.boundUpdateClassesHandler=this.updateClasses_.bind(this);this.boundFocusHandler=this.onFocus_.bind(this);this.boundBlurHandler=this.onBlur_.bind(this);this.boundResetHandler=this.onReset_.bind(this);this.input_.addEventListener("input",this.boundUpdateClassesHandler);this.input_.addEventListener("focus",this.boundFocusHandler);this.input_.addEventListener("blur",this.boundBlurHandler);this.input_.addEventListener("reset",this.boundResetHandler);if(this.maxRows!==this.Constant_.NO_MAX_ROWS){this.boundKeyDownHandler=this.onKeyDown_.bind(this);this.input_.addEventListener("keydown",this.boundKeyDownHandler)}var invalid=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_();this.element_.classList.add(this.CssClasses_.IS_UPGRADED);if(invalid)this.element_.classList.add(this.CssClasses_.IS_INVALID);if(this.input_.hasAttribute("autofocus")){this.element_.focus();this.checkFocus()}}}};componentHandler.register({constructor:MaterialTextfield,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:true})})();(function(){var supportCustomEvent=window.CustomEvent;if(!supportCustomEvent||typeof supportCustomEvent==="object"){supportCustomEvent=function CustomEvent(event,x){x=x||{};var ev=document.createEvent("CustomEvent");ev.initCustomEvent(event,!!x.bubbles,!!x.cancelable,x.detail||null);return ev};supportCustomEvent.prototype=window.Event.prototype}function createsStackingContext(el){while(el&&el!==document.body){var s=window.getComputedStyle(el);var invalid=function(k,ok){return!(s[k]===undefined||s[k]===ok)};if(s.opacity<1||invalid("zIndex","auto")||invalid("transform","none")||invalid("mixBlendMode","normal")||invalid("filter","none")||invalid("perspective","none")||s["isolation"]==="isolate"||s.position==="fixed"||s.webkitOverflowScrolling==="touch")return true;el=el.parentElement}return false}function findNearestDialog(el){while(el){if(el.localName==="dialog")return el;el=el.parentElement}return null}function safeBlur(el){if(el&&el.blur&&el!==document.body)el.blur()}function inNodeList(nodeList,node){for(var i=0;i<nodeList.length;++i)if(nodeList[i]===node)return true;return false}function isFormMethodDialog(el){if(!el||!el.hasAttribute("method"))return false;return el.getAttribute("method").toLowerCase()==="dialog"}function dialogPolyfillInfo(dialog){this.dialog_=dialog;this.replacedStyleTop_=false;this.openAsModal_=false;if(!dialog.hasAttribute("role"))dialog.setAttribute("role","dialog");dialog.show=this.show.bind(this);dialog.showModal=this.showModal.bind(this);dialog.close=this.close.bind(this);if(!("returnValue"in dialog))dialog.returnValue="";if("MutationObserver"in window){var mo=new MutationObserver(this.maybeHideModal.bind(this));mo.observe(dialog,{attributes:true,attributeFilter:["open"]})}else{var removed=false;var cb=function(){removed?this.downgradeModal():this.maybeHideModal();removed=false}.bind(this);var timeout;var delayModel=function(ev){if(ev.target!==dialog)return;var cand="DOMNodeRemoved";removed|=ev.type.substr(0,cand.length)===cand;window.clearTimeout(timeout);timeout=window.setTimeout(cb,0)};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(name){dialog.addEventListener(name,delayModel)})}Object.defineProperty(dialog,"open",{set:this.setOpen.bind(this),get:dialog.hasAttribute.bind(dialog,"open")});this.backdrop_=document.createElement("div");this.backdrop_.className="backdrop";this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}dialogPolyfillInfo.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){if(this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_))return;this.downgradeModal()},downgradeModal:function(){if(!this.openAsModal_)return;this.openAsModal_=false;this.dialog_.style.zIndex="";if(this.replacedStyleTop_){this.dialog_.style.top="";this.replacedStyleTop_=false}this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_);dialogPolyfill.dm.removeDialog(this)},setOpen:function(value){if(value)this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open","");else{this.dialog_.removeAttribute("open");this.maybeHideModal()}},backdropClick_:function(e){if(!this.dialog_.hasAttribute("tabindex")){var fake=document.createElement("div");this.dialog_.insertBefore(fake,this.dialog_.firstChild);fake.tabIndex=-1;fake.focus();this.dialog_.removeChild(fake)}else this.dialog_.focus();var redirectedEvent=document.createEvent("MouseEvents");redirectedEvent.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);this.dialog_.dispatchEvent(redirectedEvent);e.stopPropagation()},focus_:function(){var target=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!target&&this.dialog_.tabIndex>=0)target=this.dialog_;if(!target){var opts=["button","input","keygen","select","textarea"];var query=opts.map(function(el){return el+":not([disabled])"});query.push('[tabindex]:not([disabled]):not([tabindex=""])');target=this.dialog_.querySelector(query.join(", "))}safeBlur(document.activeElement);target&&target.focus()},updateZIndex:function(dialogZ,backdropZ){if(dialogZ<backdropZ)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=dialogZ;this.backdrop_.style.zIndex=backdropZ},show:function(){if(!this.dialog_.open){this.setOpen(true);this.focus_()}},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!dialogPolyfill.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");if(createsStackingContext(this.dialog_.parentElement))console.warn("A dialog is being shown inside a stacking context. "+"This may cause it to be unusable. For more information, see this link: "+"https://github.com/GoogleChrome/dialog-polyfill/#stacking-context");this.setOpen(true);this.openAsModal_=true;if(dialogPolyfill.needsCentering(this.dialog_)){dialogPolyfill.reposition(this.dialog_);this.replacedStyleTop_=true}else this.replacedStyleTop_=false;this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling);this.focus_()},close:function(opt_returnValue){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(false);if(opt_returnValue!==undefined)this.dialog_.returnValue=opt_returnValue;var closeEvent=new supportCustomEvent("close",{bubbles:false,cancelable:false});this.dialog_.dispatchEvent(closeEvent)}};var dialogPolyfill={};dialogPolyfill.reposition=function(element){var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;var topValue=scrollTop+(window.innerHeight-element.offsetHeight)/2;element.style.top=Math.max(scrollTop,topValue)+"px"};dialogPolyfill.isInlinePositionSetByStylesheet=function(element){for(var i=0;i<document.styleSheets.length;++i){var styleSheet=document.styleSheets[i];var cssRules=null;try{cssRules=styleSheet.cssRules}catch(e){}if(!cssRules)continue;for(var j=0;j<cssRules.length;++j){var rule=cssRules[j];var selectedNodes=null;try{selectedNodes=document.querySelectorAll(rule.selectorText)}catch(e$0){}if(!selectedNodes||!inNodeList(selectedNodes,element))continue;var cssTop=rule.style.getPropertyValue("top");var cssBottom=rule.style.getPropertyValue("bottom");if(cssTop&&cssTop!=="auto"||cssBottom&&cssBottom!=="auto")return true}}return false};dialogPolyfill.needsCentering=function(dialog){var computedStyle=window.getComputedStyle(dialog);if(computedStyle.position!=="absolute")return false;if(dialog.style.top!=="auto"&&dialog.style.top!==""||dialog.style.bottom!=="auto"&&dialog.style.bottom!=="")return false;return!dialogPolyfill.isInlinePositionSetByStylesheet(dialog)};dialogPolyfill.forceRegisterDialog=function(element){if(window.HTMLDialogElement||element.showModal)console.warn("This browser already supports <dialog>, the polyfill "+"may not work correctly",element);if(element.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new dialogPolyfillInfo(element)};dialogPolyfill.registerDialog=function(element){if(!element.showModal)dialogPolyfill.forceRegisterDialog(element)};dialogPolyfill.DialogManager=function(){this.pendingDialogStack=[];var checkDOM=this.checkDOM_.bind(this);this.overlay=document.createElement("div");this.overlay.className="_dialog_overlay";this.overlay.addEventListener("click",function(e){this.forwardTab_=undefined;e.stopPropagation();checkDOM([])}.bind(this));this.handleKey_=this.handleKey_.bind(this);this.handleFocus_=this.handleFocus_.bind(this);this.zIndexLow_=1E5;this.zIndexHigh_=1E5+150;this.forwardTab_=undefined;if("MutationObserver"in window)this.mo_=new MutationObserver(function(records){var removed=[];records.forEach(function(rec){for(var i=0,c;c=rec.removedNodes[i];++i){if(!(c instanceof Element))continue;else if(c.localName==="dialog")removed.push(c);removed=removed.concat(c.querySelectorAll("dialog"))}});removed.length&&checkDOM(removed)})};dialogPolyfill.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,true);document.addEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.observe(document,{childList:true,subtree:true})};dialogPolyfill.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,true);document.removeEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.disconnect()};dialogPolyfill.DialogManager.prototype.updateStacking=function(){var zIndex=this.zIndexHigh_;for(var i=0,dpi;dpi=this.pendingDialogStack[i];++i){dpi.updateZIndex(--zIndex,--zIndex);if(i===0)this.overlay.style.zIndex=--zIndex}var last=this.pendingDialogStack[0];if(last){var p=last.dialog.parentNode||document.body;p.appendChild(this.overlay)}else if(this.overlay.parentNode)this.overlay.parentNode.removeChild(this.overlay)};dialogPolyfill.DialogManager.prototype.containedByTopDialog_=function(candidate){while(candidate=findNearestDialog(candidate)){for(var i=0,dpi;dpi=this.pendingDialogStack[i];++i)if(dpi.dialog===candidate)return i===0;candidate=candidate.parentElement}return false};dialogPolyfill.DialogManager.prototype.handleFocus_=function(event){if(this.containedByTopDialog_(event.target))return;event.preventDefault();event.stopPropagation();safeBlur(event.target);if(this.forwardTab_===undefined)return;var dpi=this.pendingDialogStack[0];var dialog=dpi.dialog;var position=dialog.compareDocumentPosition(event.target);if(position&Node.DOCUMENT_POSITION_PRECEDING)if(this.forwardTab_)dpi.focus_();else document.documentElement.focus();else;return false};dialogPolyfill.DialogManager.prototype.handleKey_=function(event){this.forwardTab_=undefined;if(event.keyCode===27){event.preventDefault();event.stopPropagation();var cancelEvent=new supportCustomEvent("cancel",{bubbles:false,cancelable:true});var dpi=this.pendingDialogStack[0];if(dpi&&dpi.dialog.dispatchEvent(cancelEvent))dpi.dialog.close()}else if(event.keyCode===9)this.forwardTab_=!event.shiftKey};dialogPolyfill.DialogManager.prototype.checkDOM_=function(removed){var clone=this.pendingDialogStack.slice();clone.forEach(function(dpi){if(removed.indexOf(dpi.dialog)!==-1)dpi.downgradeModal();else dpi.maybeHideModal()})};dialogPolyfill.DialogManager.prototype.pushDialog=function(dpi){var allowed=(this.zIndexHigh_-this.zIndexLow_)/2-1;if(this.pendingDialogStack.length>=allowed)return false;if(this.pendingDialogStack.unshift(dpi)===1)this.blockDocument();this.updateStacking();return true};dialogPolyfill.DialogManager.prototype.removeDialog=function(dpi){var index=this.pendingDialogStack.indexOf(dpi);if(index===-1)return;this.pendingDialogStack.splice(index,1);if(this.pendingDialogStack.length===0)this.unblockDocument();this.updateStacking()};dialogPolyfill.dm=new dialogPolyfill.DialogManager;dialogPolyfill.formSubmitter=null;dialogPolyfill.useValue=null;if(window.HTMLDialogElement===undefined){var testForm=document.createElement("form");testForm.setAttribute("method","dialog");if(testForm.method!=="dialog"){var methodDescriptor=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(methodDescriptor){var realGet=methodDescriptor.get;methodDescriptor.get=function(){if(isFormMethodDialog(this))return"dialog";return realGet.call(this)};var realSet=methodDescriptor.set;methodDescriptor.set=function(v){if(typeof v==="string"&&v.toLowerCase()==="dialog")return this.setAttribute("method",v);return realSet.call(this,v)};Object.defineProperty(HTMLFormElement.prototype,"method",methodDescriptor)}}document.addEventListener("click",function(ev){dialogPolyfill.formSubmitter=null;dialogPolyfill.useValue=null;if(ev.defaultPrevented)return;var target=ev.target;if(!target||!isFormMethodDialog(target.form))return;var valid=target.type==="submit"&&["button","input"].indexOf(target.localName)>-1;if(!valid){if(!(target.localName==="input"&&target.type==="image"))return;dialogPolyfill.useValue=ev.offsetX+","+ev.offsetY}var dialog=findNearestDialog(target);if(!dialog)return;dialogPolyfill.formSubmitter=target},false);var nativeFormSubmit=HTMLFormElement.prototype.submit;var replacementFormSubmit=function(){if(!isFormMethodDialog(this))return nativeFormSubmit.call(this);var dialog=findNearestDialog(this);dialog&&dialog.close()};HTMLFormElement.prototype.submit=replacementFormSubmit;document.addEventListener("submit",function(ev){var form=ev.target;if(!isFormMethodDialog(form))return;ev.preventDefault();var dialog=findNearestDialog(form);if(!dialog)return;var s=dialogPolyfill.formSubmitter;if(s&&s.form===form)dialog.close(dialogPolyfill.useValue||s.value);else dialog.close();dialogPolyfill.formSubmitter=null},true)}dialogPolyfill["forceRegisterDialog"]=dialogPolyfill.forceRegisterDialog;dialogPolyfill["registerDialog"]=dialogPolyfill.registerDialog;if(typeof define==="function"&&"amd"in define)define(function(){return dialogPolyfill});else if(typeof module==="object"&&typeof module["exports"]==="object")module["exports"]=dialogPolyfill;else window["dialogPolyfill"]=dialogPolyfill})();(function(){var k,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a){if(a){for(var b=ba,c=["Promise"],d=0;d<c.length-1;d++){var e=c[d];e in b||(b[e]={});b=b[e]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&aa(b,c,{configurable:!0,writable:!0,value:a})}}function da(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ea(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:da(a)}}ca(function(a){function b(a){this.g=0;this.h=void 0;this.a=[];var b=this.j();try{a(b.resolve,b.reject)}catch(n){b.reject(n)}}function c(){this.a=null}function d(a){return a instanceof b?a:new b(function(b){b(a)})}if(a)return a;c.prototype.g=function(a){null==this.a&&(this.a=[],this.j());this.a.push(a)};c.prototype.j=function(){var a=this;this.h(function(){a.u()})};var e=ba.setTimeout;c.prototype.h=function(a){e(a,0)};c.prototype.u=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(y){this.i(y)}}}this.a=null};c.prototype.i=function(a){this.h(function(){throw a;})};b.prototype.j=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.F),reject:a(this.i)}};b.prototype.F=function(a){if(a===this)this.i(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.J(a);else{a:switch(typeof a){case"object":var c=null!=a;break a;case"function":c=!0;break a;default:c=!1}c?this.D(a):this.u(a)}};b.prototype.D=function(a){var b=void 0;try{b=a.then}catch(n){this.i(n);return}"function"==typeof b?this.N(b,a):this.u(a)};b.prototype.i=function(a){this.w(2,a)};b.prototype.u=function(a){this.w(1,a)};b.prototype.w=function(a,b){if(0!=this.g)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.g);this.g=a;this.h=b;this.B()};b.prototype.B=function(){if(null!=this.a){for(var a=0;a<this.a.length;++a)f.g(this.a[a]);this.a=null}};var f=new c;b.prototype.J=function(a){var b=this.j();a.Ba(b.resolve,b.reject)};b.prototype.N=function(a,b){var c=this.j();try{a.call(b,c.resolve,c.reject)}catch(y){c.reject(y)}};b.prototype.then=function(a,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(Qk){f(Qk)}}:b}var e,f,g=new b(function(a,b){e=a;f=b});this.Ba(d(a,e),d(c,f));return g};b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.Ba=function(a,b){function c(){switch(d.g){case 1:a(d.h);break;case 2:b(d.h);break;default:throw Error("Unexpected state: "+d.g);}}var d=this;null==this.a?f.g(c):this.a.push(c)};b.resolve=d;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,c){for(var e=ea(a),f=e.next();!f.done;f=e.next())d(f.value).Ba(b,c)})};b.all=function(a){var c=ea(a),e=c.next();return e.done?d([]):new b(function(a,b){function f(b){return function(c){g[b]=c;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,d(e.value).Ba(f(g.length-1),b),e=c.next();while(!e.done)})};return b});var l=this;function fa(a){return void 0!==a}function m(a){return"string"==typeof a}var ha=/^[\w+/_-]+[=]{0,2}$/,ia=null;function ja(){}function ka(a){a.U=void 0;a.Pa=function(){return a.U?a.U:a.U=new a}}function la(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ma(a){return null!=a}function oa(a){return"array"==la(a)}function pa(a){var b=la(a);return"array"==b||"object"==b&&"number"==typeof a.length}function qa(a){return"function"==la(a)}function ra(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var sa="closure_uid_"+(1E9*Math.random()>>>0),ta=0;function ua(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p=ua:p=va;return p.apply(null,arguments)}function wa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){for(var c in b)a[c]=b[c]}var xa=Date.now||function(){return+new Date};function ya(a,b){a=a.split(".");var c=l;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&fa(b)?c[d]=b:c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}}function r(a,b){function c(){}c.prototype=b.prototype;a.o=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.$b=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}}function za(a){if(Error.captureStackTrace)Error.captureStackTrace(this,za);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}
r(za,Error);za.prototype.name="CustomError";var Aa;function Ba(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");za.call(this,c+a[d])}r(Ba,za);Ba.prototype.name="AssertionError";function Ca(a,b){throw new Ba("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));}var Da=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(m(a))return m(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in
a&&a[c]===b)return c;return-1},Ea=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Fa(a,b){var c=a.length,d=m(a)?a.split(""):a;for(--c;0<=c;--c)c in d&&b.call(void 0,d[c],c,a)}var Ga=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=[],e=0,f=m(a)?a.split(""):a,g=0;g<c;g++)if(g in f){var h=f[g];b.call(void 0,h,g,a)&&(d[e++]=h)}return d},Ha=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=Array(c),e=m(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},Ia=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=m(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};function Ja(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ka(a,b){return 0<=Da(a,b)}function La(a,b){b=Da(a,b);var c;(c=0<=b)&&Ma(a,b);return c}function Ma(a,b){return 1==Array.prototype.splice.call(a,b,1).length}function Na(a,b){b=Ja(a,b,void 0);0<=b&&Ma(a,b)}function Oa(a,b){var c=0;Fa(a,function(d,e){b.call(void 0,d,e,a)&&Ma(a,e)&&c++})}function Pa(a){return Array.prototype.concat.apply([],arguments)}function Qa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ra(a,b,c,d){return Array.prototype.splice.apply(a,Sa(arguments,1))}function Sa(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}var Ta=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Ua(a){if(!Va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Za,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace($a,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(ab,"&#0;"));return a}var Wa=/&/g,Xa=/</g,Ya=/>/g,Za=/"/g,$a=/'/g,ab=/\x00/g,Va=/[\x00&<>"']/;function bb(a,b){return a<b?-1:a>b?1:0}var cb;a:{var db=l.navigator;if(db){var eb=db.userAgent;if(eb){cb=eb;break a}}cb=""}function t(a){return-1!=cb.indexOf(a)}function fb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function gb(a){var b={},c;for(c in a)b[c]=a[c];return b}var hb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ib(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<hb.length;f++)c=hb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function jb(){return(t("Chrome")||t("CriOS"))&&!t("Edge")}function kb(a){kb[" "](a);return a}kb[" "]=ja;function lb(a,b){var c=mb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)}var nb=t("Opera"),u=t("Trident")||t("MSIE"),ob=t("Edge"),pb=ob||u,qb=t("Gecko")&&!(-1!=cb.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),rb=-1!=cb.toLowerCase().indexOf("webkit")&&!t("Edge"),sb=rb&&t("Mobile"),tb=t("Macintosh");function ub(){var a=l.document;return a?a.documentMode:void 0}var vb;a:{var wb="",xb=function(){var a=cb;if(qb)return/rv:([^\);]+)(\)|;)/.exec(a);if(ob)return/Edge\/([\d\.]+)/.exec(a);if(u)return/\b(?:MSIE|rv)[:]([^\);]+)(\)|;)/.exec(a);if(rb)return/WebKit\/(\S+)/.exec(a);if(nb)return/(?:Version)[\/]?(\S+)/.exec(a)}();xb&&(wb=xb?xb[1]:"");if(u){var yb=ub();if(null!=yb&&yb>parseFloat(wb)){vb=String(yb);break a}}vb=wb}var mb={};function zb(a){return lb(a,function(){for(var b=0,c=Ta(String(vb)).split("."),d=Ta(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"";do{g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==g[0].length&&0==h[0].length)break;b=bb(0==g[1].length?0:parseInt(g[1],10),0==h[1].length?0:parseInt(h[1],10))||bb(0==g[2].length,0==h[2].length)||bb(g[2],h[2]);g=g[3];h=h[3]}while(0==b)}return 0<=b})}var Ab;var Bb=l.document;Ab=Bb&&u?ub()||("CSS1Compat"==Bb.compatMode?parseInt(vb,10):5):void 0;function Cb(a,b){this.a=a===Db&&b||"";this.g=Eb}Cb.prototype.na=!0;Cb.prototype.ka=function(){return this.a};Cb.prototype.toString=function(){return"Const{"+this.a+"}"};function Fb(a){if(a instanceof Cb&&a.constructor===Cb&&a.g===Eb)return a.a;Ca("expected object of type Const, got '"+a+"'");return"type_error:Const"}var Eb={},Db={};function Gb(){this.a="";this.h=Hb}
Gb.prototype.na=!0;Gb.prototype.ka=function(){return this.a};Gb.prototype.g=function(){return 1};Gb.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function Ib(a){if(a instanceof Gb&&a.constructor===Gb&&a.h===Hb)return a.a;Ca("expected object of type TrustedResourceUrl, got '"+a+"' of type "+la(a));return"type_error:TrustedResourceUrl"}var Hb={};function Jb(a){var b=new Gb;b.a=a;return b}function Kb(){this.a="";this.h=Lb}Kb.prototype.na=!0;Kb.prototype.ka=function(){return this.a};Kb.prototype.g=function(){return 1};Kb.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Mb(a){if(a instanceof Kb&&a.constructor===Kb&&a.h===Lb)return a.a;Ca("expected object of type SafeUrl, got '"+a+"' of type "+la(a));return"type_error:SafeUrl"}var Nb=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ob(a){if(a instanceof Kb)return a;a="object"==typeof a&&a.na?a.ka():String(a);Nb.test(a)||(a="about:invalid#zClosurez");return Pb(a)}var Lb={};function Pb(a){var b=new Kb;b.a=a;return b}Pb("about:blank");function Qb(){this.a="";this.j=Rb;this.h=null}Qb.prototype.g=function(){return this.h};Qb.prototype.na=!0;Qb.prototype.ka=function(){return this.a};Qb.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function Sb(a){if(a instanceof Qb&&a.constructor===Qb&&a.j===Rb)return a.a;Ca("expected object of type SafeHtml, got '"+a+"' of type "+la(a));return"type_error:SafeHtml"}var Rb={};function Tb(a,b){var c=new Qb;c.a=a;c.h=b;return c}Tb("<!DOCTYPE html>",0);Tb("",0);Tb("<br>",0);var Ub=function(a){var b=!1,c;return function(){b||(c=a(),b=!0);return c}}(function(){if("undefined"===typeof document)return!1;var a=document.createElement("div");a.innerHTML="<div><div></div></div>";if(!a.firstChild)return!1;var b=a.firstChild.firstChild;a.innerHTML="";return!b.parentElement});function Vb(a,b){a.src=Ib(b);if(null===ia){a:{b=l.document;if((b=b.querySelector&&b.querySelector("script[nonce]"))&&(b=b.nonce||b.getAttribute("nonce"))&&ha.test(b))break a;b=null}ia=b||""}(b=ia)&&a.setAttribute("nonce",b)}function Wb(a,b){this.a=fa(a)?a:0;this.g=fa(b)?b:0}Wb.prototype.toString=function(){return"("+this.a+", "+this.g+")"};Wb.prototype.ceil=function(){this.a=Math.ceil(this.a);this.g=Math.ceil(this.g);return this};Wb.prototype.floor=function(){this.a=Math.floor(this.a);this.g=Math.floor(this.g);return this};Wb.prototype.round=function(){this.a=Math.round(this.a);this.g=Math.round(this.g);return this};function Xb(a,b){this.width=a;this.height=b}k=Xb.prototype;k.toString=function(){return"("+this.width+" x "+this.height+")"};k.aspectRatio=function(){return this.width/this.height};k.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};k.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};k.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Yb(a){return a?new Zb($b(a)):Aa||(Aa=new Zb)}function ac(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):bc(document,a,b)}function cc(a,b){var c=b||document;if(c.getElementsByClassName)a=c.getElementsByClassName(a)[0];else{c=document;var d=b||c;a=d.querySelectorAll&&d.querySelector&&a?d.querySelector(a?"."+a:""):bc(c,a,b)[0]||null}return a||null}function bc(a,b,c){var d;a=c||a;if(a.querySelectorAll&&a.querySelector&&b)return a.querySelectorAll(b?"."+b:"");if(b&&a.getElementsByClassName){var e=a.getElementsByClassName(b);return e}e=a.getElementsByTagName("*");if(b){var f={};for(c=d=0;a=e[c];c++){var g=a.className;"function"==typeof g.split&&Ka(g.split(/\s+/),b)&&(f[d++]=a)}f.length=d;return f}return e}function dc(a,b){fb(b,function(b,d){b&&"object"==typeof b&&b.na&&(b=b.ka());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:ec.hasOwnProperty(d)?a.setAttribute(ec[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var ec={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fc(a){return a.scrollingElement?a.scrollingElement:rb||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function gc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function $b(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function hc(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild($b(a).createTextNode(String(b)))}}function ic(a,b){return b?jc(a,function(a){return!b||m(a.className)&&Ka(a.className.split(/\s+/),b)}):null}function jc(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Zb(a){this.a=a||l.document||document}Zb.prototype.M=function(){return m(void 0)?this.a.getElementById(void 0):void 0};var kc="StopIteration"in l?l.StopIteration:{message:"StopIteration",stack:""};function lc(){}lc.prototype.next=function(){throw kc;};lc.prototype.da=function(){return this};function mc(a){if(a instanceof lc)return a;if("function"==typeof a.da)return a.da(!1);if(pa(a)){var b=0,c=new lc;c.next=function(){for(;;){if(b>=a.length)throw kc;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}function nc(a,b){if(pa(a))try{Ea(a,b,void 0)}catch(c){if(c!==kc)throw c;}else{a=mc(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c$1){if(c$1!==kc)throw c$1;}}}function oc(a){if(pa(a))return Qa(a);a=mc(a);var b=[];nc(a,function(a){b.push(a)});return b}function pc(a,b){this.g={};this.a=[];this.j=this.h=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof pc)for(c=a.ga(),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}k=pc.prototype;k.ha=function(){qc(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.g[this.a[b]]);return a};k.ga=function(){qc(this);return this.a.concat()};k.clear=function(){this.g={};this.j=this.h=this.a.length=0};function qc(a){if(a.h!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];rc(a.g,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.h!=a.a.length){var e={};for(c=b=0;b<a.a.length;)d=a.a[b],rc(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}k.get=function(a,b){return rc(this.g,a)?this.g[a]:b};k.set=function(a,b){rc(this.g,a)||(this.h++,this.a.push(a),this.j++);this.g[a]=b};k.forEach=function(a,b){for(var c=this.ga(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};k.da=function(a){qc(this);var b=0,c=this.j,d=this,e=new lc;e.next=function(){if(c!=d.j)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw kc;var e=d.a[b++];return a?e:d.g[e]};return e};function rc(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var sc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tc(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}}function uc(a,b,c,d){for(var e=c.length;0<=(b=a.indexOf(c,b))&&b<d;){var f=a.charCodeAt(b-1);if(38==f||63==f)if(f=a.charCodeAt(b+e),!f||61==f||38==f||35==f)return b;b+=e+1}return-1}var vc=/#|$/;function wc(a,b){var c=a.search(vc),d=uc(a,0,b,c);if(0>d)return null;var e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return decodeURIComponent(a.substr(d,e-d).replace(/\+/g," "))}var yc=/[?&]($|#)/;function zc(a,b){this.h=this.w=this.j="";this.B=null;this.i=this.g="";this.u=!1;var c;a instanceof zc?(this.u=fa(b)?b:a.u,Ac(this,a.j),this.w=a.w,this.h=a.h,Bc(this,a.B),this.g=a.g,Cc(this,Dc(a.a)),this.i=a.i):a&&(c=String(a).match(sc))?(this.u=!!b,Ac(this,c[1]||"",!0),this.w=Ec(c[2]||""),this.h=Ec(c[3]||"",!0),Bc(this,c[4]),this.g=Ec(c[5]||"",!0),Cc(this,c[6]||"",!0),this.i=Ec(c[7]||"")):(this.u=!!b,this.a=new Fc(null,this.u))}zc.prototype.toString=function(){var a=[],b=this.j;b&&a.push(Gc(b,Hc,!0),":");var c=this.h;if(c||"file"==b)a.push("//"),(b=this.w)&&a.push(Gc(b,Hc,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.B,null!=c&&a.push(":",String(c));if(c=this.g)this.h&&"/"!=c.charAt(0)&&a.push("/"),a.push(Gc(c,"/"==c.charAt(0)?Ic:Jc,!0));(c=this.a.toString())&&a.push("?",c);(c=this.i)&&a.push("#",Gc(c,Kc));return a.join("")};zc.prototype.resolve=function(a){var b=new zc(this),c=!!a.j;c?Ac(b,a.j):c=!!a.w;c?b.w=a.w:c=!!a.h;c?b.h=a.h:c=null!=a.B;var d=a.g;if(c)Bc(b,a.B);else if(c=!!a.g){if("/"!=d.charAt(0))if(this.h&&!this.g)d="/"+d;else{var e=b.g.lastIndexOf("/");-1!=e&&(d=b.g.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){d=0==e.lastIndexOf("/",0);e=e.split("/");for(var f=[],g=0;g<e.length;){var h=e[g++];"."==h?d&&g==e.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(h),d=!0)}d=f.join("/")}else d=e}c?b.g=d:c=""!==a.a.toString();c?Cc(b,Dc(a.a)):c=!!a.i;c&&(b.i=a.i);return b};function Ac(a,b,c){a.j=c?Ec(b,!0):b;a.j&&(a.j=a.j.replace(/:$/,""))}function Bc(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.B=b}else a.B=null}function Cc(a,b,c){b instanceof Fc?(a.a=b,Lc(a.a,a.u)):(c||(b=Gc(b,Mc)),a.a=new Fc(b,a.u))}function Nc(a){return a instanceof zc?new zc(a):new zc(a,void 0)}function Oc(a,b){a instanceof zc||(a=Nc(a));b instanceof zc||(b=Nc(b));return a.resolve(b)}function Ec(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gc(a,b,c){return m(a)?(a=encodeURI(a).replace(b,Pc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Pc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Hc=/[#\/\?@]/g,Jc=/[#\?:]/g,Ic=/[#\?]/g,Mc=/[#\?@]/g,Kc=/#/g;function Fc(a,b){this.g=this.a=null;this.h=a||null;this.j=!!b}function Qc(a){a.a||(a.a=new pc,a.g=0,a.h&&tc(a.h,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}k=Fc.prototype;k.add=function(a,b){Qc(this);this.h=null;a=Rc(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.g+=1;return this};function Sc(a,b){Qc(a);b=Rc(a,b);rc(a.a.g,b)&&(a.h=null,a.g-=a.a.get(b).length,a=a.a,rc(a.g,b)&&(delete a.g[b],a.h--,a.j++,a.a.length>2*a.h&&qc(a)))}k.clear=function(){this.a=this.h=null;this.g=0};function Tc(a,b){Qc(a);b=Rc(a,b);return rc(a.a.g,b)}k.forEach=function(a,b){Qc(this);this.a.forEach(function(c,d){Ea(c,function(c){a.call(b,c,d,this)},this)},this)};k.ga=function(){Qc(this);for(var a=this.a.ha(),b=this.a.ga(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};k.ha=function(a){Qc(this);var b=[];if(m(a))Tc(this,a)&&(b=Pa(b,this.a.get(Rc(this,a))));else{a=this.a.ha();for(var c=0;c<a.length;c++)b=Pa(b,a[c])}return b};k.set=function(a,b){Qc(this);this.h=null;a=Rc(this,a);Tc(this,a)&&(this.g-=this.a.get(a).length);this.a.set(a,[b]);this.g+=1;return this};k.get=function(a,b){if(!a)return b;a=this.ha(a);return 0<a.length?String(a[0]):b};k.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var a=[],b=this.a.ga(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.ha(d);for(var f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}}return this.h=a.join("&")};function Dc(a){var b=new Fc;b.h=a.h;a.a&&(b.a=new pc(a.a),b.g=a.g);return b}function Rc(a,b){b=String(b);a.j&&(b=b.toLowerCase());return b}function Lc(a,b){b&&!a.j&&(Qc(a),a.h=null,a.a.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(Sc(this,b),Sc(this,c),0<a.length&&(this.h=null,this.a.set(Rc(this,c),Qa(a)),this.g+=a.length))},a));a.j=b}var Uc={jc:!0},Vc={lc:!0},Wc={kc:!0};function Xc(){throw Error("Do not instantiate directly");}Xc.prototype.ra=null;Xc.prototype.toString=function(){return this.content};function Yc(a,b,c,d){a=a(b||Zc,void 0,c);d=(d||Yb()).a.createElement("DIV");a=$c(a);a.match(ad);if(Ub())for(;d.lastChild;)d.removeChild(d.lastChild);d.innerHTML=a;1==d.childNodes.length&&(a=d.firstChild,1==a.nodeType&&(d=a));return d}function $c(a){if(!ra(a))return String(a);if(a instanceof Xc){if(a.ea===Uc)return a.content;if(a.ea===Wc)return Ua(a.content)}Ca("Soy template output is unsafe for use as HTML: "+a);return"zSoyz"}var ad=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,Zc={};function bd(a){if(null!=a)switch(a.ra){case 1:return 1;case-1:return-1;case 0:return 0}return null}function cd(){Xc.call(this)}r(cd,Xc);cd.prototype.ea=Uc;function v(a){return null!=a&&a.ea===Uc?a:a instanceof Qb?w(Sb(a),a.g()):w(Ua(String(String(a))),bd(a))}function dd(){Xc.call(this)}r(dd,Xc);dd.prototype.ea=Vc;dd.prototype.ra=1;function ed(a,b){this.content=String(a);this.ra=null!=b?b:null}r(ed,Xc);ed.prototype.ea=Wc;function x(a){return new ed(a,void 0)}var w=function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){a=new b(String(a));void 0!==d&&(a.ra=d);return a}}(cd),fd=function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a){return new b(String(a))}}(dd);function gd(a){function b(){}var c={label:z("New password")};b.prototype=a;a=new b;for(var d in c)a[d]=c[d];return a}function z(a){return(a=String(a))?new ed(a,void 0):""}var hd=function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){a=String(a);if(!a)return"";a=new b(a);void 0!==d&&(a.ra=d);return a}}(cd);function id(a){return null!=a&&a.ea===Uc?String(String(a.content).replace(jd,"").replace(kd,"&lt;")).replace(ld,md):Ua(String(a))}function nd(a){null!=a&&a.ea===Vc?a=String(a).replace(od,pd):a instanceof Kb?a=String(Mb(a)).replace(od,pd):(a=String(a),qd.test(a)?a=a.replace(od,pd):(Ca("Bad value `%s` for |filterNormalizeUri",[a]),a="#zSoyz"));return a}var rd={"\x00":"&#0;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function md(a){return rd[a]}var sd={"\x00":"%00","\u0001":"%01","\u0002":"%02","\u0003":"%03","\u0004":"%04","\u0005":"%05","\u0006":"%06","\u0007":"%07","\b":"%08","\t":"%09","\n":"%0A","\x0B":"%0B","\f":"%0C","\r":"%0D","\u000e":"%0E","\u000f":"%0F","\u0010":"%10","\u0011":"%11","\u0012":"%12","\u0013":"%13","\u0014":"%14","\u0015":"%15","\u0016":"%16","\u0017":"%17","\u0018":"%18","\u0019":"%19","\u001a":"%1A","\u001b":"%1B","\u001c":"%1C","\u001d":"%1D","\u001e":"%1E","\u001f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\u007f":"%7F","\u0085":"%C2%85","\u00a0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};function pd(a){return sd[a]}var ld=/[\x00\x22\x27\x3c\x3e]/g,od=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,qd=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,jd=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,kd=/</g;function td(){return x("Enter a valid phone number")}function ud(){return x("Something went wrong. Please try again.")}function vd(){return x("This email already exists without any means of sign-in. Please reset the password to recover.")}function wd(){return x("Please login again to perform this operation")}function xd(a,b,c){this.code=yd+a;if(!(a=b)){a="";switch(this.code){case"firebaseui/merge-conflict":a+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:a+=ud()}a=x(a).toString()}this.message=a||"";this.credential=c||null}r(xd,Error);xd.prototype.ja=function(){return{code:this.code,message:this.message}};xd.prototype.toJSON=function(){return this.ja()};var yd="firebaseui/";function zd(){this.U={}}function Ad(a,b,c){if(b.toLowerCase()in a.U)throw Error("Configuration "+b+" has already been defined.");a.U[b.toLowerCase()]=c}function Bd(a,b,c){if(!(b.toLowerCase()in a.U))throw Error("Configuration "+b+" is not defined.");a.U[b.toLowerCase()]=c}zd.prototype.get=function(a){if(!(a.toLowerCase()in this.U))throw Error("Configuration "+a+" is not defined.");return this.U[a.toLowerCase()]};function Cd(a,b){a=a.get(b);if(!a)throw Error("Configuration "+b+" is required.");return a}function Dd(){this.g=void 0;this.a={}}k=Dd.prototype;k.set=function(a,b){Ed(this,a,b,!1)};k.add=function(a,b){Ed(this,a,b,!0)};function Ed(a,b,c,d){for(var e=0;e<b.length;e++){var f=b.charAt(e);a.a[f]||(a.a[f]=new Dd);a=a.a[f]}if(d&&void 0!==a.g)throw Error('The collection already contains the key "'+
b+'"');a.g=c}k.get=function(a){a:{for(var b=this,c=0;c<a.length;c++)if(b=b.a[a.charAt(c)],!b){a=void 0;break a}a=b}return a?a.g:void 0};k.ha=function(){var a=[];Fd(this,a);return a};function Fd(a,b){void 0!==a.g&&b.push(a.g);for(var c in a.a)Fd(a.a[c],b)}k.ga=function(){var a=[];Gd(this,"",a);return a};function Gd(a,b,c){void 0!==a.g&&c.push(b);for(var d in a.a)Gd(a.a[d],b+d,c)}k.clear=function(){this.a={};this.g=void 0};function Hd(a){this.a=a;this.g=new Dd;for(a=0;a<this.a.length;a++){var b=this.g.get("+"+
this.a[a].b);b?b.push(this.a[a]):this.g.add("+"+this.a[a].b,[this.a[a]])}}function Id(a,b){a=a.g;var c={},d=0;void 0!==a.g&&(c[d]=a.g);for(;d<b.length;d++){var e=b.charAt(d);if(!(e in a.a))break;a=a.a[e];void 0!==a.g&&(c[d]=a.g)}for(var f in c)if(c.hasOwnProperty(f))return c[f];return[]}function Jd(a){for(var b=0;b<Kd.length;b++)if(Kd[b].c===a)return Kd[b];return null}function Ld(a){a=a.toUpperCase();for(var b=[],c=0;c<Kd.length;c++)Kd[c].f===a&&b.push(Kd[c]);return b}function Md(a){if(0<a.length&&"+"==a.charAt(0)){a=a.substring(1);for(var b=[],c=0;c<Kd.length;c++)Kd[c].b==a&&b.push(Kd[c]);a=b}else a=Ld(a);return a}function Nd(a){a.sort(function(a,c){return a.name.localeCompare(c.name,"en")})}var Kd=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"\u00c5land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"C\u00f4te d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Cura\u00e7ao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"R\u00e9union",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barth\u00e9lemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"S\u00e3o Tom\u00e9 and Pr\u00edncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];Nd(Kd);var Od=new Hd(Kd);function Pd(a,b){this.a=a;this.ta=b}function Qd(a){a=Ta(a);var b=Id(Od,a);return 0<b.length?new Pd("1"==b[0].b?"1-US-0":b[0].c,Ta(a.substr(b[0].b.length+1))):null}function Rd(a){var b=Jd(a.a);if(!b)throw Error("Country ID "+a.a+" not found.");return"+"+b.b+a.ta}
function Sd(a){for(var b=0;b<a.length;b++)if(!Ka(Td,a[b]))return a[b];return null}var Td=["emailLink","password","phone"],Ud={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};var Vd=Object.freeze||function(a){return a};function Wd(a,b,c){this.reset(a,b,c,void 0,void 0)}Wd.prototype.a=null;var Xd=0;Wd.prototype.reset=function(a,b,c,d,e){"number"==typeof e||Xd++;this.h=d||xa();this.j=a;this.i=b;this.g=c;delete this.a};function Yd(a){this.i=a;this.a=this.h=this.j=this.g=null}function Zd(a,b){this.name=a;this.value=b}Zd.prototype.toString=function(){return this.name};var $d=new Zd("SHOUT",1200),ae=new Zd("SEVERE",1E3),be=new Zd("WARNING",900),ce=new Zd("CONFIG",700);function de(a){if(a.j)return a.j;if(a.g)return de(a.g);Ca("Root logger has no level set.");return null}Yd.prototype.log=function(a,b,c){if(a.value>=de(this).value)for(qa(b)&&(b=b()),a=new Wd(a,String(b),this.i),c&&(a.a=c),c=this;c;){var d=c,e=a;if(d.a)for(var f=0;b=d.a[f];f++)b(e);c=c.g}};var ee={},fe=null;function ge(){fe||(fe=new Yd(""),ee[""]=fe,fe.j=ce)}function he(a){ge();var b;if(!(b=ee[a])){b=new Yd(a);var c=a.lastIndexOf("."),d=a.substr(c+1);c=he(a.substr(0,c));c.h||(c.h={});c.h[d]=b;b.g=c;ee[a]=b}return b}function ie(){this.a=xa()}var je=null;ie.prototype.set=function(a){this.a=a};ie.prototype.reset=function(){this.set(xa())};ie.prototype.get=function(){return this.a};function ke(a){this.j=a||"";je||(je=new ie);this.i=je}ke.prototype.a=!0;ke.prototype.g=!0;ke.prototype.h=!1;function le(a){return 10>a?"0"+a:String(a)}function me(a,b){a=(a.h-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b}function ne(a){ke.call(this,a)}r(ne,ke);function oe(){this.i=p(this.h,this);this.a=new ne;this.a.g=!1;this.a.h=!1;this.g=this.a.a=!1;this.j={}}oe.prototype.h=function(a){if(!this.j[a.g]){var b=this.a;var c=[];c.push(b.j," ");if(b.g){var d=new Date(a.h);c.push("[",le(d.getFullYear()-2E3)+le(d.getMonth()+1)+le(d.getDate())+" "+le(d.getHours())+":"+le(d.getMinutes())+":"+le(d.getSeconds())+"."+le(Math.floor(d.getMilliseconds()/10)),"] ")}c.push("[",me(a,b.i.get()),"s] ");c.push("[",a.g,"] ");c.push(a.i);b.h&&(d=a.a)&&c.push("\n",d instanceof Error?d.message:d.toString());b.a&&c.push("\n");b=c.join("");if(c=pe)switch(a.j){case $d:qe(c,"info",b);break;case ae:qe(c,"error",b);break;case be:qe(c,"warn",b);break;default:qe(c,"log",b)}}};var pe=l.console;function qe(a,b,c){if(a[b])a[b](c);else a.log(c)}function re(a,b){var c=se;c&&c.log(ae,a,b)}var se;se=he("firebaseui");var te=new oe;if(1!=te.g){var ue;ge();ue=fe;var ve=te.i;ue.a||(ue.a=[]);ue.a.push(ve);te.g=!0}function we(a){var b=se;b&&b.log(be,a,void 0)}function xe(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function ye(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}}function ze(a,b){this.h=a;this.j=b;this.g=0;this.a=null}ze.prototype.get=function(){if(0<this.g){this.g--;var a=this.a;this.a=a.next;a.next=null}else a=this.h();return a};function Be(a,b){a.j(b);100>a.g&&(a.g++,b.next=a.a,a.a=b)}function Ce(){this.g=this.a=null}var Ee=new ze(function(){return new De},function(a){a.reset()});Ce.prototype.add=function(a,b){var c=Ee.get();c.set(a,b);this.g?this.g.next=c:this.a=c;this.g=c};function Fe(){var a=Ge,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.g=null),b.next=null);return b}function De(){this.next=this.g=this.a=null}De.prototype.set=function(a,b){this.a=a;this.g=b;this.next=null};De.prototype.reset=function(){this.next=this.g=this.a=null};function He(a){l.setTimeout(function(){throw a;},0)}var Ie;function Je(){var a=l.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+
Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=p(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(fa(c.next)){c=c.next;var a=c.Za;c.Za=null;a()}};return function(a){d.next={Za:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){l.setTimeout(a,0)}}function Ke(a,b){Le||Me();Ne||(Le(),Ne=!0);Ge.add(a,b)}var Le;function Me(){if(l.Promise&&l.Promise.resolve){var a=l.Promise.resolve(void 0);Le=function(){a.then(Oe)}}else Le=function(){var a=Oe;!qa(l.setImmediate)||l.Window&&l.Window.prototype&&!t("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Ie||(Ie=Je()),Ie(a)):l.setImmediate(a)}}var Ne=!1,Ge=new Ce;function Oe(){for(var a;a=Fe();){try{a.a.call(a.g)}catch(b){He(b)}Be(Ee,a)}Ne=!1}function A(a,b){this.a=Pe;this.w=void 0;this.j=this.g=this.h=null;this.i=this.u=!1;if(a!=ja)try{var c=this;a.call(b,function(a){Qe(c,Re,a)},function(a){if(!(a instanceof Se))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}Qe(c,Te,a)})}catch(d){Qe(this,Te,d)}}var Pe=0,Re=2,Te=3;function Ue(){this.next=this.context=this.g=this.h=this.a=null;this.j=!1}Ue.prototype.reset=function(){this.context=this.g=this.h=this.a=null;this.j=!1};var Ve=new ze(function(){return new Ue},function(a){a.reset()});function We(a,b,c){var d=Ve.get();d.h=a;d.g=b;d.context=c;return d}function B(a){if(a instanceof A)return a;var b=new A(ja);Qe(b,Re,a);return b}function Xe(a){return new A(function(b,c){c(a)})}A.prototype.then=function(a,b,c){return Ye(this,qa(a)?a:null,qa(b)?b:null,c)};xe(A);function Ze(a,b){return Ye(a,null,b,void 0)}A.prototype.cancel=function(a){this.a==Pe&&Ke(function(){var b=new Se(a);$e(this,b)},this)};function $e(a,b){if(a.a==Pe)if(a.h){var c=a.h;if(c.g){for(var d=0,e=null,f=null,g=c.g;g&&(g.j||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==Pe&&1==d?$e(c,b):(f?(d=f,d.next==c.j&&(c.j=d),d.next=d.next.next):af(c),bf(c,e,Te,b)))}a.h=null}else Qe(a,Te,b)}function cf(a,b){a.g||a.a!=Re&&a.a!=Te||df(a);a.j?a.j.next=b:a.g=b;a.j=b}function Ye(a,b,c,d){var e=We(null,null,null);e.a=new A(function(a,g){e.h=b?function(c){try{var e=b.call(d,c);a(e)}catch(y){g(y)}}:a;e.g=c?function(b){try{var e=c.call(d,b);!fa(e)&&b instanceof Se?g(b):a(e)}catch(y){g(y)}}:g});e.a.h=a;cf(a,e);return e.a}A.prototype.D=function(a){this.a=Pe;Qe(this,Re,a)};A.prototype.F=function(a){this.a=Pe;Qe(this,Te,a)};function Qe(a,b,c){if(a.a==Pe){a===c&&(b=Te,c=new TypeError("Promise cannot resolve to itself"));a.a=1;a:{var d=c,e=a.D,f=a.F;if(d instanceof A){cf(d,We(e||ja,f||null,a));var g=!0}else if(ye(d))d.then(e,f,a),g=!0;else{if(ra(d))try{var h=d.then;if(qa(h)){ef(d,h,e,f,a);g=!0;break a}}catch(n){f.call(a,n);g=!0;break a}g=!1}}g||(a.w=c,a.a=b,a.h=null,df(a),b!=Te||c instanceof Se||ff(a,c))}}function ef(a,b,c,d,e){function f(a){h||(h=!0,d.call(e,a))}function g(a){h||(h=!0,c.call(e,a))}var h=!1;try{b.call(a,g,f)}catch(n){f(n)}}function df(a){a.u||(a.u=!0,Ke(a.B,a))}function af(a){var b=null;a.g&&(b=a.g,a.g=b.next,b.next=null);a.g||(a.j=null);return b}A.prototype.B=function(){for(var a;a=af(this);)bf(this,a,this.a,this.w);this.u=!1};function bf(a,b,c,d){if(c==Te&&b.g&&!b.j)for(;a&&a.i;a=a.h)a.i=!1;if(b.a)b.a.h=null,gf(b,c,d);else try{b.j?b.h.call(b.context):gf(b,c,d)}catch(e){hf.call(null,e)}Be(Ve,b)}function gf(a,b,c){b==Re?a.h.call(a.context,c):a.g&&a.g.call(a.context,c)}function ff(a,b){a.i=!0;Ke(function(){a.i&&hf.call(null,b)})}var hf=He;function Se(a){za.call(this,a)}r(Se,za);Se.prototype.name="cancel";var jf=!u||9<=Number(Ab),kf=u&&!zb("9"),lf=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{l.addEventListener("test",ja,b),l.removeEventListener("test",ja,b)}catch(c){}return a}();function mf(){0!=nf&&(of[this[sa]||(this[sa]=++ta)]=this);this.N=this.N;this.B=this.B}var nf=0,of={};mf.prototype.N=!1;mf.prototype.m=function(){if(!this.N&&(this.N=!0,this.l(),0!=nf)){var a=this[sa]||(this[sa]=++ta);if(0!=nf&&this.B&&0<this.B.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete of[a]}};function pf(a,b){a.N?fa(void 0)?b.call(void 0):b():(a.B||(a.B=[]),a.B.push(fa(void 0)?p(b,void 0):b))}mf.prototype.l=function(){if(this.B)for(;this.B.length;)this.B.shift()()};function qf(a){a&&"function"==typeof a.m&&a.m()}function rf(a,b){this.type=a;this.g=this.target=b;this.h=!1;this.eb=!0}rf.prototype.stopPropagation=function(){this.h=!0};rf.prototype.preventDefault=function(){this.eb=!1};function sf(a,b){rf.call(this,a?a.type:"");this.relatedTarget=this.g=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.j=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.a=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.g=b;if(b=a.relatedTarget){if(qb){a:{try{kb(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.j=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=m(a.pointerType)?a.pointerType:tf[a.pointerType]||"";this.a=a;a.defaultPrevented&&this.preventDefault()}}r(sf,rf);var tf=Vd({2:"touch",3:"pen",4:"mouse"});sf.prototype.stopPropagation=function(){sf.o.stopPropagation.call(this);this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0};sf.prototype.preventDefault=function(){sf.o.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,kf)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var uf="closure_listenable_"+(1E6*Math.random()|0),vf=0;function wf(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Da=e;this.key=++vf;this.oa=this.Aa=!1}function xf(a){a.oa=!0;a.listener=null;a.proxy=null;a.src=null;a.Da=null}function yf(a){this.src=a;this.a={};this.g=0}yf.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.g++);var g=zf(a,b,d,e);-1<g?(b=a[g],c||(b.Aa=!1)):(b=new wf(b,this.src,f,!!d,e),b.Aa=c,a.push(b));return b};function Af(a,b){var c=b.type;c in a.a&&La(a.a[c],b)&&(xf(b),0==a.a[c].length&&(delete a.a[c],a.g--))}function zf(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.oa&&f.listener==b&&f.capture==!!c&&f.Da==d)return e}return-1}var Bf="closure_lm_"+(1E6*Math.random()|0),Cf={},Df=0;function Ef(a,b,c,d,e){if(d&&d.once)return Ff(a,b,c,d,e);if(oa(b)){for(var f=0;f<b.length;f++)Ef(a,b[f],c,d,e);return null}c=Gf(c);return a&&a[uf]?a.D.add(String(b),c,!1,ra(d)?!!d.capture:!!d,e):Hf(a,b,c,!1,d,e)}function Hf(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=ra(e)?!!e.capture:!!e,h=If(a);h||(a[Bf]=h=new yf(a));c=h.add(b,c,d,g,f);if(c.proxy)return c;d=Jf();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)lf||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Kf(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Df++;return c}function Jf(){var a=Lf,b=jf?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Ff(a,b,c,d,e){if(oa(b)){for(var f=0;f<b.length;f++)Ff(a,b[f],c,d,e);return null}c=Gf(c);return a&&a[uf]?a.D.add(String(b),c,!0,ra(d)?!!d.capture:!!d,e):Hf(a,b,c,!0,d,e)}function Mf(a,b,c,d,e){if(oa(b))for(var f=0;f<b.length;f++)Mf(a,b[f],c,d,e);else(d=ra(d)?!!d.capture:!!d,c=Gf(c),a&&a[uf])?(a=a.D,b=String(b).toString(),b in a.a&&(f=a.a[b],c=zf(f,c,d,e),-1<c&&(xf(f[c]),Ma(f,c),0==f.length&&(delete a.a[b],a.g--)))):a&&(a=If(a))&&(b=a.a[b.toString()],a=-1,b&&(a=zf(b,c,d,e)),(c=-1<a?b[a]:null)&&Nf(c))}function Nf(a){if("number"!=typeof a&&a&&!a.oa){var b=a.src;if(b&&b[uf])Af(b.D,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Kf(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Df--;(c=If(b))?(Af(c,a),0==c.g&&(c.src=null,b[Bf]=null)):xf(a)}}}function Kf(a){return a in
Cf?Cf[a]:Cf[a]="on"+a}function Of(a,b,c,d){var e=!0;if(a=If(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.oa&&(f=Pf(f,d),e=e&&!1!==f)}return e}function Pf(a,b){var c=a.listener,d=a.Da||a.src;a.Aa&&Nf(a);return c.call(d,b)}function Lf(a,b){if(a.oa)return!0;if(!jf){if(!b)a:{b=["window","event"];for(var c=l,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new sf(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.g;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.h&&0<=e;e--){b.g=d[e];var f=Of(d[e],a,!0,b);c=c&&f}for(e=0;!b.h&&e<d.length;e++)b.g=d[e],f=Of(d[e],a,!1,b),c=c&&f}return c}return Pf(a,new sf(b,this))}function If(a){a=a[Bf];return a instanceof yf?a:null}var Qf="__closure_events_fn_"+(1E9*Math.random()>>>0);function Gf(a){if(qa(a))return a;a[Qf]||(a[Qf]=function(b){return a.handleEvent(b)});return a[Qf]}function Rf(a,b,c){b||(b={});c=c||window;var d=a instanceof Kb?a:Ob("undefined"!=typeof a.href?a.href:String(a));a=b.target||a.target;var e=[];for(f in b)switch(f){case"width":case"height":case"top":case"left":e.push(f+"="+b[f]);break;case"target":case"noopener":case"noreferrer":break;default:e.push(f+"="+(b[f]?1:0))}var f=e.join(",");(t("iPhone")&&!t("iPod")&&!t("iPad")||t("iPad")||t("iPod"))&&c.navigator&&c.navigator.standalone&&a&&"_self"!=a?(f=c.document.createElement("A"),d instanceof Kb||d instanceof
Kb||(d="object"==typeof d&&d.na?d.ka():String(d),Nb.test(d)||(d="about:invalid#zClosurez"),d=Pb(d)),f.href=Mb(d),f.setAttribute("target",a),b.noreferrer&&f.setAttribute("rel","noreferrer"),b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!0,c,1),f.dispatchEvent(b),c={}):b.noreferrer?(c=c.open("",a,f),b=Mb(d),c&&(pb&&-1!=b.indexOf(";")&&(b="'"+b.replace(/'/g,"%27")+"'"),c.opener=null,b='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ua(b)+'">',b=Tb(b,null),c.document.write(Sb(b)),c.document.close())):(c=c.open(Mb(d),a,f))&&b.noopener&&(c.opener=null);return c}function Sf(a){window.location.assign(Mb(Ob(a)))}function Tf(){try{return!!(window.opener&&window.opener.location&&window.opener.location.assign&&window.opener.location.hostname===window.location.hostname&&window.opener.location.protocol===window.location.protocol)}catch(a){}return!1}function Uf(a){Rf(a,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}
function Vf(a){a=ra(a)&&1==a.nodeType?a:document.querySelector(String(a));if(null==a)throw Error("Could not find the FirebaseUI widget element on the page.");return a}function Wf(){return window.location.href}function Xf(){var a=null;return Ze(new A(function(b){"complete"==l.document.readyState?b():(a=function(){b()},Ff(window,"load",a))}),function(b){Mf(window,"load",a);throw b;})}function Yf(){for(var a=32,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}function Zf(){this.a=new zd;Ad(this.a,"acUiConfig");Ad(this.a,"autoUpgradeAnonymousUsers");Ad(this.a,"callbacks");Ad(this.a,"credentialHelper",$f);Ad(this.a,"popupMode",!1);Ad(this.a,"privacyPolicyUrl");Ad(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl");Ad(this.a,"queryParameterForWidgetMode","mode");Ad(this.a,"signInFlow");Ad(this.a,"signInOptions");Ad(this.a,"signInSuccessUrl");Ad(this.a,"siteName");Ad(this.a,"tosUrl");Ad(this.a,"widgetUrl")}
var $f="accountchooser.com",ag={Pb:$f,Sb:"googleyolo",NONE:"none"},bg={Tb:"popup",Vb:"redirect"};function cg(a){return a.a.get("acUiConfig")||null}var dg={Rb:"callback",Ub:"recoverEmail",Wb:"resetPassword",Xb:"select",Yb:"signIn",Zb:"verifyEmail"},eg=["anonymous"],fg=["sitekey","tabindex","callback","expired-callback"];function gg(a){var b=a.a.get("widgetUrl")||Wf();return hg(a,b)}function hg(a,b){a=ig(a);for(var c=b.search(vc),d=0,e,f=[];0<=(e=uc(b,d,a,c));)f.push(b.substring(d,e)),d=Math.min(b.indexOf("&",e)+1||c,c);f.push(b.substr(d));b=f.join("").replace(yc,"$1");c="="+encodeURIComponent("select");(a+=c)?(c=b.indexOf("#"),0>c&&(c=b.length),d=b.indexOf("?"),0>d||d>c?(d=c,e=""):e=b.substring(d+1,c),b=[b.substr(0,d),e,b.substr(c)],c=b[1],b[1]=a?c?c+"&"+a:a:c,a=b[0]+(b[1]?"?"+b[1]:"")+b[2]):a=b;return a}function jg(a){var b=!!a.a.get("autoUpgradeAnonymousUsers");b&&!kg(a)&&re('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0);return b}function lg(a){a=a.a.get("signInOptions")||[];for(var b=[],c=0;c<a.length;c++){var d=a[c];d=ra(d)?d:{provider:d};(Ud[d.provider]||Ka(eg,d.provider))&&b.push(d)}return b}function mg(a,b){a=lg(a);for(var c=0;c<a.length;c++)if(a[c].provider===b)return a[c];return null}function pg(a){return Ha(lg(a),function(a){return a.provider})}function qg(a){var b=[],c=[];Ea(lg(a),function(a){a.authMethod&&(b.push(a.authMethod),a.clientId&&c.push({uri:a.authMethod,clientId:a.clientId}))});var d=null;"googleyolo"===rg(a)&&b.length&&(d={supportedIdTokenProviders:c,supportedAuthMethods:b});return d}function sg(a,b){var c=null;Ea(lg(a),function(a){a.authMethod===b&&(c=a.provider)});return c}function tg(a){var b=null;Ea(lg(a),function(a){a.provider==firebase.auth.PhoneAuthProvider.PROVIDER_ID&&ra(a.recaptchaParameters)&&!oa(a.recaptchaParameters)&&(b=gb(a.recaptchaParameters))});if(b){var c=[];Ea(fg,function(a){"undefined"!==typeof b[a]&&(c.push(a),delete b[a])});c.length&&we('The following provided "recaptchaParameters" keys are not allowed: '+
c.join(", "))}return b}function ug(a,b){a=(a=mg(a,b))&&a.scopes;return oa(a)?a:[]}function vg(a,b){a=(a=mg(a,b))&&a.customParameters;return ra(a)?(a=gb(a),b===firebase.auth.GoogleAuthProvider.PROVIDER_ID&&delete a.login_hint,a):null}function wg(a){a=mg(a,firebase.auth.PhoneAuthProvider.PROVIDER_ID);var b=null;a&&m(a.loginHint)&&(b=Qd(a.loginHint));return a&&a.defaultNationalNumber||b&&b.ta||null}function xg(a){var b=(a=mg(a,firebase.auth.PhoneAuthProvider.PROVIDER_ID))&&a.defaultCountry||null;b=b&&Ld(b);var c=null;a&&m(a.loginHint)&&(c=Qd(a.loginHint));return b&&b[0]||c&&Jd(c.a)||null}function yg(a){a=mg(a,firebase.auth.PhoneAuthProvider.PROVIDER_ID);if(!a)return null;var b=a.whitelistedCountries,c=a.blacklistedCountries;if("undefined"!==typeof b&&(!oa(b)||0==b.length))throw Error("WhitelistedCountries must be a non-empty array.");if("undefined"!==typeof c&&!oa(c))throw Error("BlacklistedCountries must be an array.");if(b&&c)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!b&&!c)return Kd;a=[];if(b){c={};for(var d=0;d<b.length;d++){var e=Md(b[d]);for(var f=0;f<e.length;f++)c[e[f].c]=e[f]}for(var g in c)c.hasOwnProperty(g)&&a.push(c[g])}else{g={};for(d=0;d<c.length;d++)for(e=Md(c[d]),f=0;f<e.length;f++)g[e[f].c]=e[f];for(b=0;b<Kd.length;b++)null!==g&&Kd[b].c in g||a.push(Kd[b])}return a}function ig(a){return Cd(a.a,"queryParameterForWidgetMode")}function C(a){var b=a.a.get("tosUrl")||null;a=a.a.get("privacyPolicyUrl")||null;b&&!a&&we("Privacy Policy URL is missing, the link will not be displayed.");if(b&&a){if(qa(b))return b;if(m(b))return function(){Uf(b)}}return null}function D(a){var b=a.a.get("tosUrl")||null,c=a.a.get("privacyPolicyUrl")||null;c&&!b&&we("Term of Service URL is missing, the link will not be displayed.");if(b&&c){if(qa(c))return c;if(m(c))return function(){Uf(c)}}return null}function zg(a){return(a=mg(a,firebase.auth.EmailAuthProvider.PROVIDER_ID))&&"undefined"!==typeof a.requireDisplayName?!!a.requireDisplayName:!0}function Ag(a){a=mg(a,firebase.auth.EmailAuthProvider.PROVIDER_ID);return!(!a||a.signInMethod!==firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function Bg(a){a=mg(a,firebase.auth.EmailAuthProvider.PROVIDER_ID);return!(!a||!a.forceSameDevice)}function Cg(a){if(Ag(a)){var b={url:Wf(),handleCodeInApp:!0};(a=mg(a,firebase.auth.EmailAuthProvider.PROVIDER_ID))&&"function"===typeof a.emailLinkSignIn&&ib(b,a.emailLinkSignIn());b.url=Oc(Wf(),b.url).toString();return b}return null}function Dg(a){a=a.a.get("signInFlow");for(var b in bg)if(bg[b]==a)return bg[b];return"redirect"}function Eg(a){return Fg(a).uiShown||null}function Gg(a){return Fg(a).signInSuccess||null}function Hg(a){return Fg(a).signInSuccessWithAuthResult||null}function kg(a){return Fg(a).signInFailure||null}function Fg(a){return a.a.get("callbacks")||{}}function rg(a){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return"none";a=a.a.get("credentialHelper");for(var b in ag)if(ag[b]==a)return ag[b];return $f}function Ig(a){this.a=Nc(a)}var E={Ha:"ui_auid",Qb:"apiKey",Ia:"ui_sd",hb:"mode",Ta:"oobCode",PROVIDER_ID:"ui_pid",Ka:"ui_sid"};function Jg(a,b){b?a.a.a.set(E.Ka,b):Sc(a.a.a,E.Ka)}function Kg(a,b){null!==b?a.a.a.set(E.Ia,b?"1":"0"):Sc(a.a.a,E.Ia)}function Lg(a){return a.a.a.get(E.Ha)||null}function Mg(a,b){b?a.a.a.set(E.PROVIDER_ID,b):Sc(a.a.a,E.PROVIDER_ID)}Ig.prototype.toString=function(){return this.a.toString()};function F(){mf.call(this);this.D=new yf(this);this.ib=this;this.za=null}r(F,mf);F.prototype[uf]=!0;F.prototype.Ra=function(a){this.za=a};F.prototype.removeEventListener=function(a,b,c,d){Mf(this,a,b,c,d)};function Ng(a,b){var c,d=a.za;if(d)for(c=[];d;d=d.za)c.push(d);a=a.ib;d=b.type||b;if(m(b))b=new rf(b,a);else if(b instanceof rf)b.target=b.target||a;else{var e=b;b=new rf(d,a);ib(b,e)}e=!0;if(c)for(var f=c.length-1;!b.h&&0<=f;f--){var g=b.g=c[f];e=Og(g,d,!0,b)&&e}b.h||(g=b.g=a,e=Og(g,d,!0,b)&&e,b.h||(e=Og(g,d,!1,b)&&e));if(c)for(f=0;!b.h&&f<c.length;f++)g=b.g=c[f],e=Og(g,d,!1,b)&&e;return e}F.prototype.l=function(){F.o.l.call(this);if(this.D){var a=this.D,b=0,c;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)++b,xf(d[e]);delete a.a[c];a.g--}}this.za=null};function Og(a,b,c,d){b=a.D.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.oa&&g.capture==c){var h=g.listener,n=g.Da||g.src;g.Aa&&Af(a.D,g);e=!1!==h.call(n,d)&&e}}return e&&0!=d.eb}var Pg={},Qg=0;function Rg(a,b){if(!a)throw Error("Event target element must be provided!");a=Sg(a);if(Pg[a]&&Pg[a].length)for(var c=0;c<Pg[a].length;c++)Ng(Pg[a][c],b)}function Tg(a){var b=Sg(a.M());Pg[b]&&Pg[b].length&&(Na(Pg[b],function(b){return b==a}),Pg[b].length||delete Pg[b])}function Sg(a){"undefined"===typeof a.a&&(a.a=Qg,Qg++);return a.a}function Ug(a){if(!a)throw Error("Event target element must be provided!");this.a=a;F.call(this)}r(Ug,F);Ug.prototype.M=function(){return this.a};Ug.prototype.register=function(){var a=Sg(this.M());Pg[a]?Ka(Pg[a],this)||Pg[a].push(this):Pg[a]=[this]};function Vg(a,b){this.i=[];this.N=a;this.J=b||null;this.j=this.a=!1;this.h=void 0;this.D=this.s=this.w=!1;this.u=0;this.g=null;this.B=0}Vg.prototype.cancel=function(a){if(this.a)this.h instanceof Vg&&this.h.cancel();else{if(this.g){var b=this.g;delete this.g;a?b.cancel(a):(b.B--,0>=b.B&&b.cancel())}this.N?this.N.call(this.J,this):this.D=!0;this.a||(a=new Wg(this),Xg(this),Yg(this,!1,a))}};Vg.prototype.F=function(a,b){this.w=!1;Yg(this,a,b)};function Yg(a,b,c){a.a=!0;a.h=c;a.j=!b;Zg(a)}function Xg(a){if(a.a){if(!a.D)throw new $g(a);a.D=!1}}function ah(a,b,c){a.i.push([b,c,void 0]);a.a&&Zg(a)}Vg.prototype.then=function(a,b,c){var d,e,f=new A(function(a,b){d=a;e=b});ah(this,d,function(a){a instanceof Wg?f.cancel():e(a)});return f.then(a,b,c)};xe(Vg);function bh(a){return Ia(a.i,function(a){return qa(a[1])})}function Zg(a){if(a.u&&a.a&&bh(a)){var b=a.u,c=ch[b];c&&(l.clearTimeout(c.a),delete ch[b]);a.u=0}a.g&&(a.g.B--,delete a.g);b=a.h;for(var d=c=!1;a.i.length&&!a.w;){var e=a.i.shift(),f=e[0],g=e[1];e=e[2];if(f=a.j?g:f)try{var h=f.call(e||a.J,b);fa(h)&&(a.j=a.j&&(h==b||h instanceof Error),a.h=b=h);if(ye(b)||"function"===typeof l.Promise&&b instanceof l.Promise)d=!0,a.w=!0}catch(n){b=n,a.j=!0,bh(a)||(c=!0)}}a.h=b;d&&(h=p(a.F,a,!0),d=p(a.F,a,!1),b instanceof Vg?(ah(b,h,d),b.s=!0):b.then(h,d));c&&(b=new dh(b),ch[b.a]=b,a.u=b.a)}function $g(){za.call(this)}r($g,za);$g.prototype.message="Deferred has already fired";$g.prototype.name="AlreadyCalledError";function Wg(){za.call(this)}r(Wg,za);Wg.prototype.message="Deferred was canceled";Wg.prototype.name="CanceledError";function dh(a){this.a=l.setTimeout(p(this.h,this),0);this.g=a}dh.prototype.h=function(){delete ch[this.a];throw this.g;};var ch={};function eh(a){var b={},c=b.document||document,d=Ib(a),e=document.createElement("SCRIPT"),f={fb:e,gb:void 0},g=new Vg(fh,f),h=null,n=null!=b.timeout?b.timeout:5E3;0<n&&(h=window.setTimeout(function(){gh(e,!0);var a=new hh(ih,"Timeout reached for loading script "+d);Xg(g);Yg(g,!1,a)},n),f.gb=h);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(gh(e,b.bc||!1,h),Xg(g),Yg(g,!0,null))};e.onerror=function(){gh(e,!0,h);var a=new hh(jh,"Error while loading script "+d);Xg(g);Yg(g,!1,a)};f=b.attributes||{};ib(f,{type:"text/javascript",charset:"UTF-8"});dc(e,f);Vb(e,a);kh(c).appendChild(e);return g}function kh(a){var b=(a||document).getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement}function fh(){if(this&&this.fb){var a=this.fb;a&&"SCRIPT"==a.tagName&&gh(a,!0,this.gb)}}function gh(a,b,c){null!=c&&l.clearTimeout(c);a.onload=ja;a.onerror=ja;a.onreadystatechange=ja;b&&window.setTimeout(function(){gc(a)},0)}var jh=0,ih=1;function hh(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);za.call(this,c);this.code=a}r(hh,za);function lh(a){this.a=a||l.googleyolo;this.g=null;this.h=!1}ka(lh);var mh=new Cb(Db,"https://smartlock.google.com/client");lh.prototype.cancel=function(){this.a&&this.h&&(this.g=this.a.cancelLastOperation().catch(function(){}))};function nh(a,b,c){if(a.a&&b){var d=function(){a.h=!0;var d=Promise.resolve(null);c||(d=a.a.retrieve(b).catch(function(a){if("userCanceled"===a.type||"illegalConcurrentRequest"===a.type)throw a;return null}));return d.then(function(c){return c?c:a.a.hint(b)}).catch(function(d){if("userCanceled"===d.type)a.g=Promise.resolve();else if("illegalConcurrentRequest"===d.type)return a.cancel(),nh(a,b,c);return null})};return a.g?a.g.then(d):d()}if(b)return d=Ze(oh.Pa().load().then(function(){a.a=l.googleyolo;return nh(a,b,c)}),function(){return null}),Promise.resolve(d);if("undefined"!==typeof Promise)return Promise.resolve(null);throw Error("One-Tap sign in not supported in the current browser!");}function oh(){this.a=null}ka(oh);oh.prototype.load=function(){var a=this;if(this.a)return this.a;var b=Jb(Fb(mh));return l.googleyolo?B():this.a=Xf().then(function(){if(!l.googleyolo)return new A(function(c,d){var e=setTimeout(function(){a.a=null;d(Error("Network error!"))},1E4);l.onGoogleYoloLoad=function(){clearTimeout(e);c()};Ze(B(eh(b)),function(b){clearTimeout(e);a.a=null;d(b)})})})};function ph(a,b){this.a=a;this.g=b||function(a){throw a;}}ph.prototype.confirm=function(a){return Ze(B(this.a.confirm(a)),this.g)};function qh(a,b,c,d){this.a=a;this.h=b||null;this.j=c||null;this.g=d||null}qh.prototype.ja=function(){return{email:this.a,displayName:this.h,photoUrl:this.j,providerId:this.g}};function rh(a){return a.email?new qh(a.email,a.displayName,a.photoUrl,a.providerId):null}function sh(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}k=sh.prototype;k.set=function(a,b,c,d,e,f){if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');fa(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(xa()+1E3*c)).toUTCString();this.a.cookie=a+"="+b+e+d+c+f};k.get=function(a,b){for(var c=a+"=",d=(this.a.cookie||"").split(";"),e=0,f;e<d.length;e++){f=Ta(d[e]);if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};k.ga=function(){return th(this).keys};k.ha=function(){return th(this).values};k.clear=function(){for(var a=th(this).keys,b=a.length-1;0<=b;b--){var c=a[b];this.get(c);this.set(c,"",0,void 0,void 0)}};function th(a){a=(a.a.cookie||"").split(";");for(var b=[],c=[],d,e,f=0;f<a.length;f++)e=Ta(a[f]),d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,values:c}}var uh=new sh;uh.g=3950;function vh(){}function wh(a,b,c,d){this.h="undefined"!==typeof a&&null!==a?a:-1;this.g=b||null;this.a=c||null;this.j=!!d}r(wh,vh);wh.prototype.set=function(a,b){uh.set(a,b,this.h,this.g,this.a,this.j)};wh.prototype.get=function(a){return uh.get(a)||null};wh.prototype.ma=function(a){var b=this.g,c=this.a;uh.get(a);uh.set(a,"",0,b,c)};function xh(a,b){this.g=a;this.a=b||null}xh.prototype.ja=function(){return{email:this.g,credential:this.a&&gb(this.a)}};function yh(a){if(a&&a.email){var b;if(b=a.credential){var c=(b=a.credential)&&b.providerId;b=Ud[c]&&firebase.auth[Ud[c]]?b.secret&&b.accessToken?firebase.auth[Ud[c]].credential(b.accessToken,b.secret):c==firebase.auth.GoogleAuthProvider.PROVIDER_ID?firebase.auth[Ud[c]].credential(b.idToken,b.accessToken):firebase.auth[Ud[c]].credential(b.accessToken):null}return new xh(a.email,b)}return null}function zh(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e&&(b[c++]=e&255,e>>=8);b[c++]=e}return b}function Ah(a){return Ha(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")}function Bh(a){this.u=a;this.g=this.u.length/4;this.j=this.g+6;this.h=[[],[],[],[]];this.i=[[],[],[],[]];this.a=Array(Ch*(this.j+1));for(a=0;a<this.g;a++)this.a[a]=[this.u[4*a],this.u[4*a+1],this.u[4*a+2],this.u[4*a+3]];var b=Array(4);for(a=this.g;a<Ch*(this.j+1);a++){b[0]=this.a[a-1][0];b[1]=this.a[a-1][1];b[2]=this.a[a-1][2];b[3]=this.a[a-1][3];if(0==a%this.g){var c=b,d=c[0];c[0]=c[1];c[1]=c[2];c[2]=c[3];c[3]=d;Dh(b);b[0]^=Eh[a/this.g][0];b[1]^=Eh[a/this.g][1];b[2]^=Eh[a/this.g][2];b[3]^=Eh[a/this.g][3]}else 6<this.g&&4==a%this.g&&Dh(b);this.a[a]=Array(4);this.a[a][0]=this.a[a-this.g][0]^b[0];this.a[a][1]=this.a[a-this.g][1]^b[1];this.a[a][2]=this.a[a-this.g][2]^b[2];this.a[a][3]=this.a[a-this.g][3]^b[3]}}Bh.prototype.w=16;var Ch=Bh.prototype.w/4;function Fh(a,b){for(var c,d=0;d<Ch;d++)for(var e=0;4>e;e++)c=4*e+d,c=b[c],a.h[d][e]=c}function Gh(a){for(var b=[],c=0;c<Ch;c++)for(var d=0;4>d;d++)b[4*d+c]=a.h[c][d];return b}function Hh(a,b){for(var c=0;4>c;c++)for(var d=0;4>d;d++)a.h[c][d]^=a.a[4*b+d][c]}function Ih(a,b){for(var c=0;4>c;c++)for(var d=0;4>d;d++)a.h[c][d]=b[a.h[c][d]]}function Jh(a){for(var b=1;4>b;b++)for(var c=0;4>c;c++)a.i[b][c]=a.h[b][c];for(b=1;4>b;b++)for(c=0;4>c;c++)a.h[b][c]=a.i[b][(c+b)%Ch]}function Kh(a){for(var b=1;4>b;b++)for(var c=0;4>c;c++)a.i[b][(c+b)%Ch]=a.h[b][c];for(b=1;4>b;b++)for(c=0;4>c;c++)a.h[b][c]=a.i[b][c]}function Dh(a){a[0]=Lh[a[0]];a[1]=Lh[a[1]];a[2]=Lh[a[2]];a[3]=Lh[a[3]]}var Lh=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Mh=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Eh=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Nh=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Oh=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],Ph=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Qh=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Rh=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Sh=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Th(a,b){a=new Bh(Uh(a));b=zh(b);for(var c=Ra(b,0,16),d="",e;c.length;){e=16-c.length;for(var f=0;f<e;f++)c.push(0);e=a;Fh(e,c);Hh(e,0);for(c=1;c<e.j;++c){Ih(e,Lh);Jh(e);f=e.h;for(var g=e.i[0],h=0;4>h;h++)g[0]=f[0][h],g[1]=f[1][h],g[2]=f[2][h],g[3]=f[3][h],f[0][h]=Nh[g[0]]^Oh[g[1]]^g[2]^g[3],f[1][h]=g[0]^Nh[g[1]]^Oh[g[2]]^g[3],f[2][h]=g[0]^g[1]^Nh[g[2]]^Oh[g[3]],f[3][h]=Oh[g[0]]^g[1]^g[2]^Nh[g[3]];Hh(e,c)}Ih(e,Lh);Jh(e);Hh(e,e.j);d+=Ah(Gh(e));c=Ra(b,0,16)}return d}function Vh(a,b){a=new Bh(Uh(a));for(var c=[],d=0;d<b.length;d+=2)c.push(parseInt(b.substring(d,d+2),16));var e=Ra(c,0,16);for(b="";e.length;){d=a;Fh(d,e);Hh(d,d.j);for(e=1;e<d.j;++e){Kh(d);Ih(d,Mh);Hh(d,d.j-e);for(var f=d.h,g=d.i[0],h=0;4>h;h++)g[0]=f[0][h],g[1]=f[1][h],g[2]=f[2][h],g[3]=f[3][h],f[0][h]=Sh[g[0]]^Qh[g[1]]^Rh[g[2]]^Ph[g[3]],f[1][h]=Ph[g[0]]^Sh[g[1]]^Qh[g[2]]^Rh[g[3]],f[2][h]=Rh[g[0]]^Ph[g[1]]^Sh[g[2]]^Qh[g[3]],f[3][h]=Qh[g[0]]^Rh[g[1]]^Ph[g[2]]^Sh[g[3]]}Kh(d);Ih(d,Mh);Hh(d,0);d=Gh(d);if(8192>=d.length)d=String.fromCharCode.apply(null,d);else{e="";for(f=0;f<d.length;f+=8192)e+=String.fromCharCode.apply(null,Sa(d,f,f+8192));d=e}b+=d;e=Ra(c,0,16)}return b.replace(/(\x00)+$/,"")}function Uh(a){a=zh(a.substring(0,32));for(var b=32-a.length,c=0;c<b;c++)a.push(0);return a}function Wh(a){var b=[];Xh(new Yh,a,b);return b.join("")}function Yh(){}function Xh(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(oa(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),Xh(a,d[f],c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");e="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(f=b[d],"function"!=typeof f&&(c.push(e),Zh(d,c),c.push(":"),Xh(a,f,c),e=","));c.push("}");return}}switch(typeof b){case"string":Zh(b,c);break;case"number":c.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":c.push(String(b));break;case"function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}}var $h={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ai=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zh(a,b){b.push('"',a.replace(ai,function(a){var b=$h[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),$h[a]=b);return b}),'"')}function bi(a){this.a=a}bi.prototype.set=function(a,b){fa(b)?this.a.set(a,Wh(b)):this.a.ma(a)};bi.prototype.get=function(a){try{var b=this.a.get(a)}catch(c){return}if(null!==b)try{return JSON.parse(b)}catch(c$2){throw"Storage: Invalid value was encountered";}};function ci(){}r(ci,vh);ci.prototype.clear=function(){var a=oc(this.da(!0)),b=this;Ea(a,function(a){b.ma(a)})};function di(a){this.a=a}r(di,ci);function ei(a){if(!a.a)return!1;try{return a.a.setItem("__sak","1"),a.a.removeItem("__sak"),!0}catch(b){return!1}}k=di.prototype;k.set=function(a,b){try{this.a.setItem(a,b)}catch(c){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};k.get=function(a){a=this.a.getItem(a);if(!m(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};k.ma=function(a){this.a.removeItem(a)};k.da=function(a){var b=0,c=this.a,d=new lc;d.next=function(){if(b>=c.length)throw kc;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!m(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};k.clear=function(){this.a.clear()};k.key=function(a){return this.a.key(a)};function fi(){var a=null;try{a=window.localStorage||null}catch(b){}this.a=a}r(fi,di);function gi(){var a=null;try{a=window.sessionStorage||null}catch(b){}this.a=a}r(gi,di);function hi(a,b){this.g=a;this.a=b+"::"}r(hi,ci);hi.prototype.set=function(a,b){this.g.set(this.a+a,b)};hi.prototype.get=function(a){return this.g.get(this.a+a)};hi.prototype.ma=function(a){this.g.ma(this.a+a)};hi.prototype.da=function(a){var b=this.g.da(!0),c=this,d=new lc;d.next=function(){for(var d=b.next();d.substr(0,c.a.length)!=c.a;)d=b.next();return a?d.substr(c.a.length):c.g.get(d)};return d};var ii,ji=new fi;ii=ei(ji)?new hi(ji,"firebaseui"):null;var ki=new bi(ii),li,mi=new gi;li=ei(mi)?new hi(mi,"firebaseui"):null;var ni=new bi(li),oi={name:"pendingEmailCredential",storage:ni},pi={name:"pendingRedirect",storage:ni},qi={name:"redirectUrl",storage:ni},ri={name:"rememberAccount",storage:ni},si={name:"rememberedAccounts",storage:ki},ti={name:"emailForSignIn",storage:new bi(new wh(3600,"/"))},ui={name:"pendingEncryptedCredential",storage:new bi(new wh(3600,"/"))};function vi(a,b){return a.storage.get(b?a.name+":"+b:a.name)}function G(a,b){a.storage.a.ma(b?a.name+":"+b:a.name)}
function wi(a,b,c){a.storage.set(c?a.name+":"+c:a.name,b)}function xi(a){return vi(qi,a)||null}function yi(a,b){wi(qi,a,b)}function zi(a,b){wi(ri,a,b)}function Ai(a){a=vi(si,a)||[];a=Ha(a,function(a){return rh(a)});return Ga(a,ma)}function Bi(a,b){var c=Ai(b),d=Ja(c,function(b){return b.a==a.a&&(b.g||null)==(a.g||null)});-1<d&&Ma(c,d);c.unshift(a);wi(si,Ha(c,function(a){return a.ja()}),b)}function Ci(a){a=vi(oi,a)||null;return yh(a)}function Di(a,b){wi(oi,a.ja(),b)}function Ei(a){wi(pi,"pending",a)}function Fi(a,b){b=vi(ti,b);var c=null;if(b)try{var d=Vh(a,b),e=JSON.parse(d);c=e&&e.email||null}catch(f){}return c}function Gi(a,b){b=vi(ui,b);var c=null;if(b)try{var d=Vh(a,b);c=JSON.parse(d)}catch(e){}return yh(c||null)}function Hi(a,b,c){wi(ui,Th(a,JSON.stringify(b.ja())),c)}var Ii=null;function Ji(a){return!(!a||-32E3!=a.code||"Service unavailable"!=a.message)}function Ki(a,b,c,d){Ii||(a={callbacks:{empty:a,select:function(a,d){a&&a.account&&b?b(rh(a.account)):c&&c(!Ji(d))},store:a,update:a},language:"en",providers:void 0,ui:d},"undefined"!=typeof accountchooser&&accountchooser.Api&&accountchooser.Api.init?Ii=accountchooser.Api.init(a):(Ii=new Li(a),Mi()))}function Ni(a,b,c){function d(){var a=Oc(window.location.href,c).toString();Ii.select(Ha(b||[],function(a){return a.ja()}),{clientCallbackUrl:a})}b&&b.length?d():Ii.checkEmpty(function(b,c){b||c?a(!Ji(c)):d()})}function Li(a){this.a=a;this.a.callbacks=this.a.callbacks||{}}function Mi(){var a=Ii;qa(a.a.callbacks.empty)&&a.a.callbacks.empty()}
var Oi={code:-32E3,message:"Service unavailable",data:"Service is unavailable."};k=Li.prototype;k.store=function(){qa(this.a.callbacks.store)&&this.a.callbacks.store(void 0,Oi)};k.select=function(){qa(this.a.callbacks.select)&&this.a.callbacks.select(void 0,Oi)};k.update=function(){qa(this.a.callbacks.update)&&this.a.callbacks.update(void 0,Oi)};k.checkDisabled=function(a){a(!0)};k.checkEmpty=function(a){a(void 0,Oi)};k.checkAccountExist=function(a,b){b(void 0,Oi)};k.checkShouldUpdate=function(a,b){b(void 0,Oi)};var Pi,Qi,Ri,Si,H={};function I(a,b,c,d){H[a].apply(null,Array.prototype.slice.call(arguments,1))}var Ti=/MSIE ([\d.]+).*Windows NT ([\d.]+)/,Ui=/Firefox\/([\d.]+)/,Vi=/Opera[ \/]([\d.]+)(.*Version\/([\d.]+))?/,Wi=/Chrome\/([\d.]+)/,Xi=/((Windows NT ([\d.]+))|(Mac OS X ([\d_]+))).*Version\/([\d.]+).*Safari/,Yi=/Mac OS X;.*(?!(Version)).*Safari/,Zi=/Android ([\d.]+).*Safari/,$i=/OS ([\d_]+) like Mac OS X.*Mobile.*Safari/,aj=/Konqueror\/([\d.]+)/,bj=/MSIE ([\d.]+).*Windows Phone OS ([\d.]+)/;function cj(a,b){a=a.split(b||".");this.a=[];for(b=0;b<a.length;b++)this.a.push(parseInt(a[b],10))}function dj(a,b){b instanceof cj||(b=new cj(String(b)));for(var c=Math.max(a.a.length,b.a.length),d=0;d<c;d++){var e=a.a[d],f=b.a[d];if(void 0!==e&&void 0!==f&&e!==f)return e-f;if(void 0===e)return-1;if(void 0===f)return 1}return 0}function ej(a,b){return 0<=dj(a,b)}function fj(){var a=window.navigator&&window.navigator.userAgent;if(a){var b;if(b=a.match(Vi)){var c=new cj(b[3]||b[1]);return 0<=a.indexOf("Opera Mini")?!1:0<=a.indexOf("Opera Mobi")?0<=a.indexOf("Android")&&ej(c,"10.1"):ej(c,"8.0")}if(b=a.match(Ui))return ej(new cj(b[1]),"2.0");if(b=a.match(Wi))return ej(new cj(b[1]),"6.0");if(b=a.match(Xi))return c=new cj(b[6]),a=b[3]&&new cj(b[3]),b=b[5]&&new cj(b[5],"_"),(!(!a||!ej(a,"6.0"))||!(!b||!ej(b,"10.5.6")))&&ej(c,"3.0");if(b=a.match(Zi))return ej(new cj(b[1]),"3.0");if(b=a.match($i))return ej(new cj(b[1],"_"),"4.0");if(b=a.match(aj))return ej(new cj(b[1]),"4.7");if(b=a.match(bj))return c=new cj(b[1]),a=new cj(b[2]),ej(c,"7.0")&&ej(a,"7.0");if(b=a.match(Ti))return c=new cj(b[1]),a=new cj(b[2]),ej(c,"7.0")&&ej(a,"6.0");if(a.match(Yi))return!1}return!0}function gj(a){if(a.classList)return a.classList;a=a.className;return m(a)&&a.match(/\S+/g)||[]}function hj(a,b){return a.classList?a.classList.contains(b):Ka(gj(a),b)}function ij(a,b){a.classList?a.classList.add(b):hj(a,b)||(a.className+=0<a.className.length?" "+b:b)}function jj(a,b){a.classList?a.classList.remove(b):hj(a,b)&&(a.className=Ga(gj(a),function(a){return a!=b}).join(" "))}function J(a){var b=a.type;switch(m(b)&&b.toLowerCase()){case"checkbox":case"radio":return a.checked?a.value:null;case"select-one":return b=a.selectedIndex,0<=b?a.options[b].value:null;case"select-multiple":b=[];for(var c,d=0;c=a.options[d];d++)c.selected&&b.push(c.value);return b.length?b:null;default:return null!=a.value?a.value:null}}function kj(a,b){var c=a.type;switch(m(c)&&c.toLowerCase()){case"checkbox":case"radio":a.checked=b;break;case"select-one":a.selectedIndex=-1;if(m(b))for(var d=0;c=a.options[d];d++)if(c.value==b){c.selected=!0;break}break;case"select-multiple":m(b)&&(b=[b]);for(d=0;c=a.options[d];d++)if(c.selected=!1,b)for(var e,f=0;e=b[f];f++)c.value==e&&(c.selected=!0);break;default:a.value=null!=b?b:""}}function lj(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!qb;default:return 166>a.keyCode||183<a.keyCode}}function mj(a,b,c,d,e,f){if(rb&&!zb("525"))return!0;if(tb&&e)return nj(a);if(e&&!d)return!1;if(!qb){"number"==typeof b&&(b=oj(b));var g=17==b||18==b||tb&&91==b;if((!c||tb)&&g||tb&&16==b&&(d||f))return!1}if((rb||ob)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(u&&d&&b==a)return!1;switch(a){case 13:return qb?f||e?!1:!(c&&d):!0;case 27:return!(rb||ob||qb)}return qb&&(d||e||f)?!1:nj(a)}function nj(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(rb||ob)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function oj(a){if(qb)a=pj(a);else if(tb&&rb)switch(a){case 93:a=91}return a}function pj(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}}function qj(a){F.call(this);this.a=a;Ef(a,"keydown",this.g,!1,this);Ef(a,"click",this.h,!1,this)}r(qj,F);qj.prototype.g=function(a){(13==a.keyCode||rb&&3==a.keyCode)&&rj(this,a)};qj.prototype.h=function(a){rj(this,a)};function rj(a,b){var c=new sj(b);if(Ng(a,c)){c=new tj(b);try{Ng(a,c)}finally{b.stopPropagation()}}}qj.prototype.l=function(){qj.o.l.call(this);Mf(this.a,"keydown",this.g,!1,this);Mf(this.a,"click",this.h,!1,this);delete this.a};function tj(a){sf.call(this,a.a);this.type="action"}r(tj,sf);function sj(a){sf.call(this,a.a);this.type="beforeaction"}r(sj,sf);function uj(a){F.call(this);this.a=a;a=u?"focusout":"blur";this.g=Ef(this.a,u?"focusin":"focus",this,!u);this.h=Ef(this.a,a,this,!u)}r(uj,F);uj.prototype.handleEvent=function(a){var b=new sf(a.a);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";Ng(this,b)};uj.prototype.l=function(){uj.o.l.call(this);Nf(this.g);Nf(this.h);delete this.a};function vj(a,b){F.call(this);this.g=a||1;this.a=b||l;this.h=p(this.Lb,this);this.j=xa()}r(vj,F);k=vj.prototype;k.Ca=!1;k.W=null;k.Lb=function(){if(this.Ca){var a=xa()-this.j;0<a&&a<.8*this.g?this.W=this.a.setTimeout(this.h,this.g-a):(this.W&&(this.a.clearTimeout(this.W),this.W=null),Ng(this,"tick"),this.Ca&&(wj(this),this.start()))}};k.start=function(){this.Ca=!0;this.W||(this.W=this.a.setTimeout(this.h,this.g),this.j=xa())};function wj(a){a.Ca=!1;a.W&&(a.a.clearTimeout(a.W),a.W=null)}k.l=function(){vj.o.l.call(this);wj(this);delete this.a};function xj(a,b){if(qa(a))b&&(a=p(a,b));else if(a&&"function"==typeof a.handleEvent)a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(0)?-1:l.setTimeout(a,0)}function yj(a){mf.call(this);this.g=a;this.a={}}r(yj,mf);var zj=[];function Aj(a,b,c,d){oa(c)||(c&&(zj[0]=c.toString()),c=zj);for(var e=0;e<c.length;e++){var f=Ef(b,c[e],d||a.handleEvent,!1,a.g||a);if(!f)break;a.a[f.key]=f}}function Bj(a){fb(a.a,function(a,c){this.a.hasOwnProperty(c)&&Nf(a)},a);a.a={}}yj.prototype.l=function(){yj.o.l.call(this);Bj(this)};yj.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Cj(a){F.call(this);this.a=null;this.g=a;a=u||ob||rb&&!zb("531")&&"TEXTAREA"==a.tagName;this.h=new yj(this);Aj(this.h,this.g,a?["keydown","paste","cut","drop","input"]:"input",this)}r(Cj,F);Cj.prototype.handleEvent=function(a){if("input"==a.type)u&&zb(10)&&0==a.keyCode&&0==a.j||(Dj(this),Ng(this,Ej(a)));else if("keydown"!=a.type||lj(a)){var b="keydown"==a.type?this.g.value:null;u&&229==a.keyCode&&(b=null);var c=Ej(a);Dj(this);this.a=xj(function(){this.a=null;this.g.value!=b&&Ng(this,c)},this)}};function Dj(a){null!=a.a&&(l.clearTimeout(a.a),a.a=null)}function Ej(a){a=new sf(a.a);a.type="input";return a}Cj.prototype.l=function(){Cj.o.l.call(this);this.h.m();Dj(this);delete this.g};function Fj(a,b){F.call(this);a&&(this.Ga&&Gj(this),this.la=a,this.Fa=Ef(this.la,"keypress",this,b),this.Qa=Ef(this.la,"keydown",this.sb,b,this),this.Ga=Ef(this.la,"keyup",this.vb,b,this))}r(Fj,F);k=Fj.prototype;k.la=null;k.Fa=null;k.Qa=null;k.Ga=null;k.R=-1;k.ba=-1;k.Ma=!1;var Hj={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ij={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Jj=!rb||zb("525"),Kj=tb&&qb;k=Fj.prototype;k.sb=function(a){if(rb||ob)if(17==this.R&&!a.ctrlKey||18==this.R&&!a.altKey||tb&&91==this.R&&!a.metaKey)this.ba=this.R=-1;-1==this.R&&(a.ctrlKey&&17!=a.keyCode?this.R=17:a.altKey&&18!=a.keyCode?this.R=18:a.metaKey&&91!=a.keyCode&&(this.R=91));Jj&&!mj(a.keyCode,this.R,a.shiftKey,a.ctrlKey,a.altKey,a.metaKey)?this.handleEvent(a):(this.ba=oj(a.keyCode),Kj&&(this.Ma=a.altKey))};k.vb=function(a){this.ba=this.R=-1;this.Ma=a.altKey};k.handleEvent=function(a){var b=a.a,c=b.altKey;if(u&&"keypress"==a.type){var d=this.ba;var e=13!=d&&27!=d?b.keyCode:0}else(rb||ob)&&"keypress"==a.type?(d=this.ba,e=0<=b.charCode&&63232>b.charCode&&nj(d)?b.charCode:0):nb&&!rb?(d=this.ba,e=nj(d)?b.keyCode:0):(d=b.keyCode||this.ba,e=b.charCode||0,Kj&&"keypress"==a.type&&(c=this.Ma),tb&&63==e&&224==d&&(d=191));var f=d=oj(d);d?63232<=d&&d in Hj?f=Hj[d]:25==d&&a.shiftKey&&(f=9):b.keyIdentifier&&b.keyIdentifier in Ij&&(f=Ij[b.keyIdentifier]);qb&&Jj&&"keypress"==a.type&&!mj(f,this.R,a.shiftKey,a.ctrlKey,c,a.metaKey)||(a=f==this.R,this.R=f,b=new Lj(f,e,a,b),b.altKey=c,Ng(this,b))};k.M=function(){return this.la};function Gj(a){a.Fa&&(Nf(a.Fa),Nf(a.Qa),Nf(a.Ga),a.Fa=null,a.Qa=null,a.Ga=null);a.la=null;a.R=-1;a.ba=-1}k.l=function(){Fj.o.l.call(this);Gj(this)};function Lj(a,b,c,d){sf.call(this,d);this.type="key";this.keyCode=a;this.j=b;this.repeat=c}r(Lj,sf);function Mj(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Mj.prototype.toString=function(){return"("+
this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Mj.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};Mj.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};Mj.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function Nj(a,b){var c=$b(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function Oj(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}u&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Pj(a,b){b=b||fc(document);var c=b||fc(document);var d=Qj(a),e=Qj(c);if(!u||9<=Number(Ab)){g=Nj(c,"borderLeftWidth");var f=Nj(c,"borderRightWidth");h=Nj(c,"borderTopWidth");n=Nj(c,"borderBottomWidth");f=new Mj(parseFloat(h),parseFloat(f),parseFloat(n),parseFloat(g))}else{var g=Rj(c,"borderLeft");f=Rj(c,"borderRight");var h=Rj(c,"borderTop"),n=Rj(c,"borderBottom");f=new Mj(h,f,n,g)}c==fc(document)?(g=d.a-c.scrollLeft,d=d.g-c.scrollTop,!u||10<=Number(Ab)||(g+=f.left,d+=f.top)):(g=d.a-e.a-f.left,d=d.g-e.g-f.top);e=a.offsetWidth;f=a.offsetHeight;h=rb&&!e&&!f;fa(e)&&!h||!a.getBoundingClientRect?a=new Xb(e,f):(a=Oj(a),a=new Xb(a.right-a.left,a.bottom-a.top));e=c.clientHeight-a.height;f=c.scrollLeft;h=c.scrollTop;f+=Math.min(g,Math.max(g-(c.clientWidth-a.width),0));h+=Math.min(d,Math.max(d-e,0));c=new Wb(f,h);b.scrollLeft=c.a;b.scrollTop=c.g}function Qj(a){var b=$b(a),c=new Wb(0,0);var d=b?$b(b):document;d=!u||9<=Number(Ab)||"CSS1Compat"==Yb(d).a.compatMode?d.documentElement:d.body;if(a==d)return c;a=Oj(a);d=Yb(b).a;b=fc(d);d=d.parentWindow||d.defaultView;b=u&&zb("10")&&d.pageYOffset!=b.scrollTop?new Wb(b.scrollLeft,b.scrollTop):new Wb(d.pageXOffset||b.scrollLeft,d.pageYOffset||b.scrollTop);c.a=a.left+b.a;c.g=a.top+b.g;return c}var Sj={thin:2,medium:4,thick:6};function Rj(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;if(c in Sj)a=Sj[c];else if(/^\d+px?$/.test(c))a=parseInt(c,10);else{b=a.style.left;var d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;c=a.style.pixelLeft;a.style.left=b;a.runtimeStyle.left=d;a=+c}return a}function Tj(){}ka(Tj);Tj.prototype.a=0;function Uj(a){F.call(this);this.w=a||Yb();this.Va=null;this.ia=!1;this.j=null;this.F=void 0;this.va=this.xa=this.X=null}r(Uj,F);k=Uj.prototype;k.xb=Tj.Pa();k.M=function(){return this.j};function K(a,b){return a.j?cc(b,a.j||a.w.a):null}function Vj(a){a.F||(a.F=new yj(a));return a.F}k.Ra=function(a){if(this.X&&this.X!=a)throw Error("Method not supported");Uj.o.Ra.call(this,a)};k.bb=function(){this.j=this.w.a.createElement("DIV")};k.render=function(a){if(this.ia)throw Error("Component already rendered");this.j||this.bb();a?a.insertBefore(this.j,null):this.w.a.body.appendChild(this.j);this.X&&!this.X.ia||this.v()};k.v=function(){this.ia=!0;Wj(this,function(a){!a.ia&&a.M()&&a.v()})};k.sa=function(){Wj(this,function(a){a.ia&&a.sa()});this.F&&Bj(this.F);this.ia=!1};k.l=function(){this.ia&&this.sa();this.F&&(this.F.m(),delete this.F);Wj(this,function(a){a.m()});this.j&&gc(this.j);this.X=this.j=this.va=this.xa=null;Uj.o.l.call(this)};function Wj(a,b){a.xa&&Ea(a.xa,b,void 0)}k.removeChild=function(a,b){if(a){var c=m(a)?a:a.Va||(a.Va=":"+(a.xb.a++).toString(36));this.va&&c?(a=this.va,a=(null!==a&&c in a?a[c]:void 0)||null):a=null;if(c&&a){var d=this.va;c in d&&delete d[c];La(this.xa,a);b&&(a.sa(),a.j&&gc(a.j));b=a;if(null==b)throw Error("Unable to set parent component");b.X=null;Uj.o.Ra.call(b,null)}}if(!a)throw Error("Child is not in parent component");return a};function L(a,b){var c=ic(a,"firebaseui-textfield");b?(jj(a,"firebaseui-input-invalid"),ij(a,"firebaseui-input"),c&&jj(c,"firebaseui-textfield-invalid")):(jj(a,"firebaseui-input"),ij(a,"firebaseui-input-invalid"),c&&ij(c,"firebaseui-textfield-invalid"))}function Xj(a,b,c){b=new Cj(b);pf(a,wa(qf,b));Aj(Vj(a),b,"input",c)}function Yj(a,b,c){b=new Fj(b);pf(a,wa(qf,b));Aj(Vj(a),b,"key",function(a){13==a.keyCode&&(a.stopPropagation(),a.preventDefault(),c(a))})}function Zj(a,b,c){b=new uj(b);pf(a,wa(qf,b));Aj(Vj(a),b,"focusin",c)}function ak(a,b,c){b=new uj(b);pf(a,wa(qf,b));Aj(Vj(a),b,"focusout",c)}function M(a,b,c){b=new qj(b);pf(a,wa(qf,b));Aj(Vj(a),b,"action",function(a){a.stopPropagation();a.preventDefault();c(a)})}function bk(a){ij(a,"firebaseui-hidden")}function N(a,b){b&&hc(a,b);jj(a,"firebaseui-hidden")}function ck(a){return!hj(a,"firebaseui-hidden")&&"none"!=a.style.display}function dk(a){a=a||{};var b=a.email,c=a.disabled,d='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="email">';d=a.ac?d+"Enter new email address":d+"Email";d+='</label><input type="email" name="email" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+id(null!=b?b:"")+'"'+(c?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>';return w(d)}function ek(a){a=a||{};a=a.label;var b='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';b=a?b+v(a):b+"Next";return w(b+"</button>")}function fk(){var a=""+ek({label:z("Sign In")});return w(a)}function gk(){var a=""+ek({label:z("Save")});return w(a)}function hk(){var a=""+ek({label:z("Continue")});return w(a)}function ik(a){a=a||{};a=a.label;var b='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="newPassword">';b=a?b+v(a):b+"Choose password";return w(b+'</label><input type="password" name="newPassword" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function jk(){var a={};var b='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="password">';b=a.current?b+"Current password":b+"Password";return w(b+'</label><input type="password" name="password" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}
function kk(){return w('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function lk(a){a=a||{};a=a.label;var b='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';b=a?b+v(a):b+"Cancel";return w(b+"</button>")}function mk(a){var b="";a.H&&a.G&&(b+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>');return w(b)}function nk(a){var b="";a.H&&a.G&&(b+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>');return w(b)}function ok(a){a='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+
v(a.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>';return w(a)}ok.a="firebaseui.auth.soy2.element.infoBar";function pk(a){var b=a.content;a=a.lb;return w('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(a?" "+id(a):"")+'">'+v(b)+"</dialog>")}function qk(a){var b=a.message;return w(pk({content:hd('<div class="firebaseui-dialog-icon-wrapper"><div class="'+id(a.Ea)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+
v(b)+"</div>")}))}qk.a="firebaseui.auth.soy2.element.progressDialog";function rk(a){var b='<div class="firebaseui-list-box-actions">';a=a.items;for(var c=a.length,d=0;d<c;d++){var e=a[d];b+='<button type="button" data-listboxid="'+id(e.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(e.Ea?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+id(e.Ea)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+
v(e.label)+"</div></button>"}b=""+pk({lb:z("firebaseui-list-box-dialog"),content:hd(b+"</div>")});return w(b)}rk.a="firebaseui.auth.soy2.element.listBoxDialog";function sk(a){a=a||{};return w(a.Nb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}sk.a="firebaseui.auth.soy2.element.busyIndicator";function tk(a){a=a||{};var b="";switch(a.providerId){case"google.com":b+="Google";break;case"github.com":b+="GitHub";break;case"facebook.com":b+="Facebook";break;case"twitter.com":b+="Twitter";break;case"anonymous":b+="Guest";break;default:b+="Password"}return x(b)}function uk(a){vk(a,"upgradeElement")}function wk(a){vk(a,"downgradeElements")}var xk=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function vk(a,b){a&&window.componentHandler&&window.componentHandler[b]&&Ea(xk,function(c){if(hj(a,c))window.componentHandler[b](a);Ea(ac(c,a),function(a){window.componentHandler[b](a)})})}function yk(a,b,c){zk.call(this);document.body.appendChild(a);a.showModal||window.dialogPolyfill.registerDialog(a);a.showModal();uk(a);b&&M(this,a,function(b){var c=a.getBoundingClientRect();(b.clientX<c.left||c.left+c.width<b.clientX||b.clientY<c.top||c.top+c.height<b.clientY)&&zk.call(this)});if(!c){var d=this.M().parentElement||this.M().parentNode;if(d){var e=this;this.$=function(){if(a.open){var b=a.getBoundingClientRect().height,c=d.getBoundingClientRect().height,h=d.getBoundingClientRect().top-document.body.getBoundingClientRect().top,n=d.getBoundingClientRect().left-document.body.getBoundingClientRect().left,y=a.getBoundingClientRect().width,na=d.getBoundingClientRect().width;a.style.top=(h+(c-b)/2).toString()+"px";b=n+(na-y)/2;a.style.left=b.toString()+"px";a.style.right=(document.body.getBoundingClientRect().width-b-y).toString()+"px"}else window.removeEventListener("resize",e.$)};this.$();window.addEventListener("resize",this.$,!1)}}}function zk(){var a=Ak.call(this);a&&(wk(a),a.open&&a.close(),gc(a),this.$&&window.removeEventListener("resize",this.$))}function Ak(){return cc("firebaseui-id-dialog")}function Bk(){gc(Ck.call(this))}function Ck(){return K(this,"firebaseui-id-info-bar")}function Dk(){return K(this,"firebaseui-id-dismiss-info-bar")}var Ek={tb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",rb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg",ob:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg",Mb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",yb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",Ab:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",jb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png"};function Fk(a,b,c){rf.call(this,a,b);for(var d in c)this[d]=c[d]}r(Fk,rf);function O(a,b,c,d,e){Uj.call(this,c);this.Ya=a;this.Xa=b;this.ya=!1;this.Wa=d||null;this.u=this.ca=null;this.Y=gb(Ek);ib(this.Y,e||{})}r(O,Uj);k=O.prototype;k.bb=function(){var a=Yc(this.Ya,this.Xa,this.Y,this.w);uk(a);this.j=a};k.v=function(){O.o.v.call(this);Rg(P(this),new Fk("pageEnter",P(this),{pageId:this.Wa}));if(this.Ua()&&this.Y.H){var a=this.Y.H;M(this,this.Ua(),function(){a()})}if(this.Sa()&&this.Y.G){var b=this.Y.G;M(this,this.Sa(),function(){b()})}};k.sa=function(){Rg(P(this),new Fk("pageExit",P(this),{pageId:this.Wa}));O.o.sa.call(this)};k.l=function(){window.clearTimeout(this.ca);this.Xa=this.Ya=this.ca=null;this.ya=!1;this.u=null;wk(this.M());O.o.l.call(this)};function Gk(a){a.ya=!0;var b=hj(a.M(),"firebaseui-use-spinner");a.ca=window.setTimeout(function(){a.M()&&null===a.u&&(a.u=Yc(sk,{Nb:b},null,a.w),a.M().appendChild(a.u),uk(a.u))},500)}k.L=function(a,b,c,d){function e(){if(f.N)return null;f.ya=!1;window.clearTimeout(f.ca);f.ca=null;f.u&&(wk(f.u),gc(f.u),f.u=null)}var f=this;if(f.ya)return null;Gk(f);return a.apply(null,b).then(c,d).then(e,e)};function P(a){return a.M().parentElement||a.M().parentNode}function Hk(a,b,c){Yj(a,b,function(){c.focus()})}function Ik(a,b,c){Yj(a,b,function(){c()})}q(O.prototype,{g:function(a){Bk.call(this);var b=Yc(ok,{message:a},null,this.w);this.M().appendChild(b);M(this,Dk.call(this),function(){gc(b)})},cc:Bk,fc:Ck,ec:Dk,V:function(a,b){a=Yc(qk,{Ea:a,message:b},null,this.w);yk.call(this,a)},h:zk,kb:Ak,hc:function(){return K(this,"firebaseui-tos")},Ua:function(){return K(this,"firebaseui-tos-link")},Sa:function(){return K(this,"firebaseui-pp-link")},ic:function(){return K(this,"firebaseui-tos-list")}});function Jk(a,b,c){a=a||{};b=a.Na;var d=a.fa;a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+dk(a)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(b?lk(null):"")+
ek(null)+'</div></div><div class="firebaseui-card-footer">'+(d?nk(c):mk(c))+"</div></form></div>";return w(a)}Jk.a="firebaseui.auth.soy2.page.signIn";function Kk(a,b,c){a=a||{};b=a.fa;a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+dk(a)+jk()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+
kk()+'</div><div class="firebaseui-form-actions">'+fk()+'</div></div><div class="firebaseui-card-footer">'+(b?nk(c):mk(c))+"</div></form></div>";return w(a)}Kk.a="firebaseui.auth.soy2.page.passwordSignIn";function Lk(a,b,c){a=a||{};var d=a.Cb;b=a.La;var e=a.fa,f='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+
dk(a);d?(a=a||{},a=a.name,a='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="name">First &amp; last name</label><input type="text" name="name" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+id(null!=a?a:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',a=w(a)):a="";c=f+a+ik(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(b?lk(null):"")+gk()+'</div></div><div class="firebaseui-card-footer">'+(e?nk(c):mk(c))+"</div></form></div>";return w(c)}Lk.a="firebaseui.auth.soy2.page.passwordSignUp";function Mk(a,b,c){a=a||{};b=a.La;a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+
dk(a)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(b?lk(null):"")+ek({label:z("Send")})+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(a)}Mk.a="firebaseui.auth.soy2.page.passwordRecovery";function Nk(a,b,c){b=a.S;var d="";a="Follow the instructions sent to <strong>"+(v(a.email)+"</strong> to recover your password");d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+
a+'</p></div><div class="firebaseui-card-actions">';b&&(d+='<div class="firebaseui-form-actions">'+ek({label:z("Done")})+"</div>");d+='</div><div class="firebaseui-card-footer">'+mk(c)+"</div></div>";return w(d)}Nk.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function Ok(a,b,c){return w('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+sk(null,null,c)+"</div></div>")}Ok.a="firebaseui.auth.soy2.page.callback";function Pk(){return w('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}Pk.a="firebaseui.auth.soy2.page.blank";function Rk(a,b,c){b="";a="A sign-in email with additional instructions was sent to <strong>"+(v(a.email)+"</strong>. Check your email to complete sign-in.");var d=w('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');b+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+
a+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+d+'</div><div class="firebaseui-form-actions">'+lk({label:z("Back")})+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(b)}Rk.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function Sk(a,b,c){a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+
w('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+lk({label:z("Back")})+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(a)}Sk.a="firebaseui.auth.soy2.page.emailNotReceived";function Tk(a,b,c){a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+
dk(a)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lk(null)+ek(null)+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(a)}Tk.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function Uk(){var a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+
lk({label:z("Dismiss")})+"</div></div></div>";return w(a)}Uk.a="firebaseui.auth.soy2.page.differentDeviceError";function Vk(){var a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+
lk({label:z("Dismiss")})+"</div></div></div>";return w(a)}Vk.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function Wk(a,b,c){b="";a="You\u2019ve already used <strong>"+(v(a.email)+"</strong> to sign in. Enter your password for that account.");b+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+
a+"</p>"+jk()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+kk()+'</div><div class="firebaseui-form-actions">'+fk()+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(b)}Wk.a="firebaseui.auth.soy2.page.passwordLinking";function Xk(a,b,c){var d=a.email;b="";a=""+tk(a);a=z(a);d="You\u2019ve already used <strong>"+(v(d)+("</strong>. You can connect your <strong>"+(v(a)+("</strong> account with <strong>"+(v(d)+"</strong> by signing in with email link below.")))));a="For this flow to successfully connect your "+(v(a)+" account with this email, you have to open the link on the same device or browser.");b+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+
d+'<p class="firebaseui-text firebaseui-text-justify">'+a+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fk()+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(b)}Xk.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function Yk(a,b,c){b="";var d=""+tk(a);d=z(d);a="You originally intended to connect <strong>"+(v(d)+"</strong> to your email account but have opened the link on a different device where you are not signed in.");d="If you still want to connect your <strong>"+(v(d)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.");b+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+
a+'</p><p class="firebaseui-text firebaseui-text-justify">'+d+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+hk()+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(b)}Yk.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function Zk(a,b,c){var d=a.email;b="";a=""+tk(a);a=z(a);d="You\u2019ve already used <strong>"+(v(d)+("</strong>. Sign in with "+(v(a)+" to continue.")));b+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+
d+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ek({label:z("Sign in with "+a)})+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(b)}Zk.a="firebaseui.auth.soy2.page.federatedLinking";function $k(a){var b="",c='<p class="firebaseui-text">for <strong>'+(v(a.email)+"</strong></p>");b+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+
c+ik(gd(a))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+gk()+"</div></div></form></div>";return w(b)}$k.a="firebaseui.auth.soy2.page.passwordReset";function al(a){a=a||{};a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+
(a.S?'<div class="firebaseui-form-actions">'+hk()+"</div>":"")+"</div></div>";return w(a)}al.a="firebaseui.auth.soy2.page.passwordResetSuccess";function bl(a){a=a||{};a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+
(a.S?'<div class="firebaseui-form-actions">'+ek(null)+"</div>":"")+"</div></div>";return w(a)}bl.a="firebaseui.auth.soy2.page.passwordResetFailure";function cl(a){var b=a.S,c="";a="Your sign-in email address has been changed back to <strong>"+(v(a.email)+"</strong>.");c+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+
a+'</p><p class="firebaseui-text">If you didn\u2019t ask to change your sign-in email, it\u2019s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(b?'<div class="firebaseui-form-actions">'+ek(null)+"</div>":"")+"</div></form></div>";return w(c)}cl.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function dl(a){a=a||{};a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can\u2019t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+
(a.S?'<div class="firebaseui-form-actions">'+ek(null)+"</div>":"")+"</div></div>";return w(a)}dl.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function el(a){a=a||{};a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+
(a.S?'<div class="firebaseui-form-actions">'+hk()+"</div>":"")+"</div></div>";return w(a)}el.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function fl(a){a=a||{};a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+
(a.S?'<div class="firebaseui-form-actions">'+ek(null)+"</div>":"")+"</div></div>";return w(a)}fl.a="firebaseui.auth.soy2.page.emailVerificationFailure";function gl(a){a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+v(a.errorMessage)+"</p></div></div>";return w(a)}gl.a="firebaseui.auth.soy2.page.unrecoverableError";function hl(a,b,c){var d=a.zb;b="";a="Continue with "+(v(a.Ob)+"?");d="You originally wanted to sign in with "+v(d);b+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+a+'</h2><p class="firebaseui-text">'+d+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+
lk(null)+ek({label:z("Continue")})+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form></div>";return w(b)}hl.a="firebaseui.auth.soy2.page.emailMismatch";function il(a,b,c){var d='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';a=a.Bb;b=a.length;for(var e=0;e<b;e++){var f={providerId:a[e]};var g=c,h=f.providerId,n=f;n=n||{};var y="";switch(n.providerId){case"google.com":y+="firebaseui-idp-google";break;case"github.com":y+="firebaseui-idp-github";break;case"facebook.com":y+="firebaseui-idp-facebook";break;case"twitter.com":y+="firebaseui-idp-twitter";break;case"phone":y+="firebaseui-idp-phone";break;case"anonymous":y+="firebaseui-idp-anonymous";break;default:y+="firebaseui-idp-password"}n='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+id(x(y))+' firebaseui-id-idp-button" data-provider-id="'+
id(h)+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';y=(y=f)||{};var na="";switch(y.providerId){case"google.com":na+=nd(g.tb);break;case"github.com":na+=nd(g.rb);break;case"facebook.com":na+=nd(g.ob);break;case"twitter.com":na+=nd(g.Mb);break;case"phone":na+=nd(g.Ab);break;case"anonymous":na+=nd(g.jb);break;default:na+=nd(g.yb)}g=fd(na);n=n+id(nd(g))+'"></span>';"password"==h?n+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with email</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Email</span>':"phone"==h?n+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with phone</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Phone</span>':"anonymous"==h?n+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Continue as guest</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Guest</span>':(h="Sign in with "+v(tk(f)),n+='<span class="firebaseui-idp-text firebaseui-idp-text-long">'+h+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+
v(tk(f))+"</span>");f=w(n+"</button>");d+='<li class="firebaseui-list-item">'+f+"</li>"}d+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+nk(c)+"</div></div>";return w(d)}il.a="firebaseui.auth.soy2.page.providerSignIn";function jl(a,b,c){a=a||{};var d=a.nb,e=a.Na;b=a.fa;a=a||{};a=a.ta;a='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="phoneNumber">Phone number</label><input type="tel" name="phoneNumber" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+
id(null!=a?a:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>';a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+
w(a);var f;d?f=w('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):f="";f=a+f+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?lk(null):"")+ek({label:z("Verify")})+'</div></div><div class="firebaseui-card-footer">';b?(b='<p class="firebaseui-tos firebaseui-phone-tos">',b=c.H&&c.G?b+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':b+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",c=w(b+"</p>")):c=w('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+
mk(c);return w(f+c+"</div></form></div>")}jl.a="firebaseui.auth.soy2.page.phoneSignInStart";function kl(a,b,c){a=a||{};b=a.phoneNumber;var d="";a='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(v(b)+"</a>");v(b);b=d;d=w('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="phoneConfirmationCode">6-digit code</label><input type="number" name="phoneConfirmationCode" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>');c='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+a+"</p>"+d+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lk(null)+ek({label:z("Continue")})+'</div></div><div class="firebaseui-card-footer">'+mk(c)+"</div></form>";a=w('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>');return w(b+(c+a+"</div>"))}kl.a="firebaseui.auth.soy2.page.phoneSignInFinish";function ll(){return K(this,"firebaseui-id-submit")}function Q(){return K(this,"firebaseui-id-secondary-link")}function ml(a,b){M(this,ll.call(this),function(b){a(b)});var c=Q.call(this);c&&b&&M(this,c,function(a){b(a)})}
function nl(){return K(this,"firebaseui-id-password")}function ol(){return K(this,"firebaseui-id-password-error")}function pl(){var a=nl.call(this),b=ol.call(this);Xj(this,a,function(){ck(b)&&(L(a,!0),bk(b))})}function ql(){var a=nl.call(this);var b=ol.call(this);J(a)?(L(a,!0),bk(b),b=!0):(L(a,!1),N(b,x("Enter your password").toString()),b=!1);return b?J(a):null}function rl(a,b,c,d,e,f){O.call(this,Wk,{email:a},f,"passwordLinking",{H:d,G:e});this.a=b;this.K=c}r(rl,O);rl.prototype.v=function(){this.P();this.O(this.a,this.K);Ik(this,this.i(),this.a);this.i().focus();rl.o.v.call(this)};rl.prototype.l=function(){this.a=null;rl.o.l.call(this)};rl.prototype.I=function(){return J(K(this,"firebaseui-id-email"))};q(rl.prototype,{i:nl,C:ol,P:pl,A:ql,Z:ll,aa:Q,O:ml});var sl=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function tl(){return K(this,"firebaseui-id-email")}function ul(){return K(this,"firebaseui-id-email-error")}function vl(a){var b=tl.call(this),c=ul.call(this);Xj(this,b,function(){ck(c)&&(L(b,!0),bk(c))});a&&Yj(this,b,function(){a()})}function wl(){return Ta(J(tl.call(this))||"")}function xl(){var a=tl.call(this);var b=ul.call(this);var c=J(a)||"";c?sl.test(c)?(L(a,!0),bk(b),b=!0):(L(a,!1),N(b,x("That email address isn't correct").toString()),b=!1):(L(a,!1),N(b,x("Enter your email address to continue").toString()),b=!1);return b?Ta(J(a)):null}function yl(a,b,c,d,e,f,g){O.call(this,Kk,{email:c,fa:!!f},g,"passwordSignIn",{H:d,G:e});this.a=a;this.K=b}r(yl,O);yl.prototype.v=function(){this.P();this.Z();this.aa(this.a,this.K);Hk(this,this.s(),this.i());Ik(this,this.i(),this.a);J(this.s())?this.i().focus():this.s().focus();yl.o.v.call(this)};yl.prototype.l=function(){this.K=this.a=null;yl.o.l.call(this)};q(yl.prototype,{s:tl,T:ul,P:vl,O:wl,I:xl,i:nl,C:ol,Z:pl,A:ql,qa:ll,pa:Q,aa:ml});function R(a,b,c,d,e,f){O.call(this,a,b,d,e||"notice",f);this.a=c||null}r(R,O);R.prototype.v=function(){this.a&&(this.s(this.a),this.i().focus());R.o.v.call(this)};R.prototype.l=function(){this.a=null;R.o.l.call(this)};q(R.prototype,{i:ll,A:Q,s:ml});function zl(a,b,c,d,e){R.call(this,Nk,{email:a,S:!!b},b,e,"passwordRecoveryEmailSent",{H:c,G:d})}r(zl,R);function Al(a,b){R.call(this,el,{S:!!a},a,b,"emailVerificationSuccess")}r(Al,R);function Bl(a,b){R.call(this,fl,{S:!!a},a,b,"emailVerificationFailure")}r(Bl,R);function Cl(a,b){R.call(this,al,{S:!!a},a,b,"passwordResetSuccess")}r(Cl,R);function Dl(a,b){R.call(this,bl,{S:!!a},a,b,"passwordResetFailure")}r(Dl,R);function El(a,b){R.call(this,dl,{S:!!a},a,b,"emailChangeRevokeFailure")}r(El,R);function Fl(a,b){R.call(this,gl,{errorMessage:a},void 0,b,"unrecoverableError")}r(Fl,R);var Gl=!1,Hl=null;function Il(a,b){Gl=!!b;Hl||("undefined"==typeof accountchooser&&fj()?(b=Jb(Fb(new Cb(Db,"//www.gstatic.com/accountchooser/client.js"))),Hl=Ze(B(eh(b)),function(){})):Hl=B());Hl.then(a,a)}function Jl(a,b){a=S(a);(a=Fg(a).accountChooserInvoked||null)?a(b):b()}function Kl(a,b,c){a=S(a);(a=Fg(a).accountChooserResult||null)?a(b,c):c()}function Ll(a,b,c,d,e){d?(I("callback",a,b),Gl&&c()):Jl(a,function(){Ei(T(a));Ni(function(d){G(pi,T(a));Kl(a,d?"empty":"unavailable",function(){I("signIn",a,b);(d||Gl)&&c()})},Ai(T(a)),e)})}function Ml(a,b,c,d){function e(a){a=U(a);V(b,c,void 0,a);d()}Kl(b,"accountSelected",function(){zi(!1,T(b));var f=Nl(b);W(b,X(b).fetchSignInMethodsForEmail(a.a).then(function(e){Ol(b,c,e,a.a,a.h||void 0,void 0,f);d()},e))})}function Pl(a,b,c,d){Kl(b,a?"addAccount":"unavailable",function(){I("signIn",b,c);(a||Gl)&&d()})}function Ql(a,b,c,d){function e(){var b=a();b&&(b=Eg(S(b)))&&b()}Ki(function(){var f=a();f&&Ll(f,b,e,c,d)},function(c){var d=a();d&&Ml(c,d,b,e)},function(c){var d=a();d&&Pl(c,d,b,e)},a()&&cg(S(a())))}function Rl(a,b,c,d){function e(c){if(!c.name||"cancel"!=c.name){a:{var d=c.message;try{var e=((JSON.parse(d).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(e&&e.length){var f=!0;break a}}catch(na){}f=!1}if(f)c=P(b),b.m(),V(a,c,void 0,x("Your sign-in session has expired. Please try again.").toString());else{f=c&&c.message||"";if(c.code){if("auth/email-already-in-use"==c.code||"auth/credential-already-in-use"==c.code)return;f=U(c)}b.g(f)}}}Sl(a);if(d)return Tl(a,c),B();if(!c.credential)throw Error("No credential found!");d=X(a).currentUser||c.user;if(!d)throw Error("User not logged in.");d=new qh(d.email,d.displayName,d.photoURL,"password"==c.credential.providerId?null:c.credential.providerId);null!=vi(ri,T(a))&&!vi(ri,T(a))||Bi(d,T(a));G(ri,T(a));try{var f=Ul(a,c)}catch(g){return re(g.code||g.message,g),b.g(g.code||g.message),B()}c=f.then(function(b){Tl(a,b)},e).then(void 0,e);W(a,f);return B(c)}function Tl(a,b){if(!b.user)throw Error("No user found");var c=Hg(S(a));Gg(S(a))&&c&&we("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked.");if(c){c=Hg(S(a));var d=xi(T(a))||void 0;G(qi,T(a));var e=!1;if(Tf()){if(!c||c(b,d))e=!0,window.opener.location.assign(Mb(Ob(Vl(a,d))));c||window.close()}else if(!c||c(b,d))e=!0,Sf(Vl(a,d));e||a.reset()}else{c=b.user;b=b.credential;d=Gg(S(a));e=xi(T(a))||void 0;G(qi,T(a));var f=!1;if(Tf()){if(!d||d(c,b,e))f=!0,window.opener.location.assign(Mb(Ob(Vl(a,e))));d||window.close()}else if(!d||d(c,b,e))f=!0,Sf(Vl(a,e));f||a.reset()}}function Vl(a,b){a=b||S(a).a.get("signInSuccessUrl");if(!a)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return a}function U(a){var b="";switch(a.code){case"auth/email-already-in-use":b+="The email address is already used by another account";break;case"auth/requires-recent-login":b+=wd();break;case"auth/too-many-requests":b+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":b+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":b+="That email address doesn't match an existing account";break;case"auth/user-token-expired":b+=wd();break;case"auth/weak-password":b+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":b+="The email and password you entered don't match";break;case"auth/network-request-failed":b+="A network error has occurred";break;case"auth/invalid-phone-number":b+=td();break;case"auth/invalid-verification-code":b+=x("Wrong code. Try again.");break;case"auth/code-expired":b+="This code is no longer valid";break;case"auth/expired-action-code":b+="This code has expired.";break;case"auth/invalid-action-code":b+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(b=x(b).toString())return b;try{return JSON.parse(a.message),re("Internal error: "+a.message,void 0),ud().toString()}catch(c){return a.message}}function Wl(a,b,c){var d=Ud[b]&&firebase.auth[Ud[b]]?new firebase.auth[Ud[b]]:null;if(!d)throw Error("Invalid Firebase Auth provider!");var e=ug(S(a),b);if(d&&d.addScope)for(var f=0;f<e.length;f++)d.addScope(e[f]);a=vg(S(a),b);b==firebase.auth.GoogleAuthProvider.PROVIDER_ID&&c&&(a=a||{},a.login_hint=c);a&&d&&d.setCustomParameters&&d.setCustomParameters(a);return d}function Xl(a,b,c,d){function e(){Ei(T(a));W(a,b.L(p(a.Kb,a),[n],function(){if("file:"===(window.location&&window.location.protocol))return W(a,Yl(a).then(function(c){b.m();G(pi,T(a));I("callback",a,h,B(c))},f))},g))}function f(c){G(pi,T(a));if(!c.name||"cancel"!=c.name)switch(c.code){case"auth/popup-blocked":e();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":b.g(U(c));break;default:b.m(),I("callback",a,h,Xe(c))}}function g(c){G(pi,T(a));c.name&&"cancel"==c.name||(re("signInWithRedirect: "+c.code,void 0),c=U(c),b.g(c))}var h=P(b),n=Wl(a,c,d);"redirect"==Dg(S(a))?e():W(a,Zl(a,n).then(function(c){b.m();I("callback",a,h,B(c))},f))}function $l(a,b){W(a,b.L(p(a.Gb,a),[],function(c){b.m();return Rl(a,b,c,!0)},function(a){a.name&&"cancel"==a.name||(re("ContinueAsGuest: "+a.code,void 0),a=U(a),b.g(a))}))}function am(a,b,c){function d(c){var d=!1;c=b.L(p(a.Hb,a),[c],function(c){var e=P(b);b.m();I("callback",a,e,B(c));d=!0},function(c){if(!c.name||"cancel"!=c.name)if(!c||"auth/credential-already-in-use"!=c.code)if(c&&"auth/email-already-in-use"==c.code&&c.email&&c.credential){var d=P(b);b.m();I("callback",a,d,Xe(c))}else c=U(c),b.g(c)});W(a,c);return c.then(function(){return d},function(){return!1})}var e=sg(S(a),c&&c.authMethod||null);if(c&&c.idToken&&e===firebase.auth.GoogleAuthProvider.PROVIDER_ID)return ug(S(a),firebase.auth.GoogleAuthProvider.PROVIDER_ID).length?(Xl(a,b,e,c.id),c=B(!0)):c=d(firebase.auth.GoogleAuthProvider.credential(c.idToken)),c;c&&b.g(x("The selected credential for the authentication provider is not supported!").toString());return B(!1)}function bm(a,b){var c=b.I(),d=b.A();if(c)if(d){var e=firebase.auth.EmailAuthProvider.credential(c,d);W(a,b.L(p(a.Ib,a),[c,d],function(c){return Rl(a,b,{user:c.user,credential:e,operationType:c.operationType,additionalUserInfo:c.additionalUserInfo})},function(a){if(!a.name||"cancel"!=a.name)switch(a.code){case"auth/email-already-in-use":break;case"auth/email-exists":L(b.s(),!1);N(b.T(),U(a));break;case"auth/too-many-requests":case"auth/wrong-password":L(b.i(),!1);N(b.C(),U(a));break;default:re("verifyPassword: "+a.message,void 0),b.g(U(a))}}))}else b.i().focus();else b.s().focus()}function Nl(a){a=pg(S(a));return 1==a.length&&a[0]==firebase.auth.EmailAuthProvider.PROVIDER_ID}function cm(a){a=pg(S(a));return 1==a.length&&a[0]==firebase.auth.PhoneAuthProvider.PROVIDER_ID}function V(a,b,c,d){Nl(a)?d?I("signIn",a,b,c,d):dm(a,b,c):a&&cm(a)&&!d?I("phoneSignInStart",a,b):I("providerSignIn",a,b,d)}function em(a,b,c,d){var e=P(b);W(a,b.L(p(X(a).fetchSignInMethodsForEmail,X(a)),[c],function(f){zi(rg(S(a))==$f,T(a));b.m();Ol(a,e,f,c,void 0,d)},function(a){a=U(a);b.g(a)}))}function Ol(a,b,c,d,e,f,g){c.length||Ag(S(a))?!c.length&&Ag(S(a))?I("sendEmailLinkForSignIn",a,b,d,function(){I("signIn",a,b)}):Ka(c,firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?I("passwordSignIn",a,b,d,g):1==c.length&&c[0]===firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?I("sendEmailLinkForSignIn",a,b,d,function(){I("signIn",a,b)}):(c=Sd(c),Di(new xh(d),T(a)),I("federatedSignIn",a,b,d,c,f)):I("passwordSignUp",a,b,d,e,void 0,g)}function fm(a,b,c,d,e,f){var g=P(b);W(a,b.L(p(a.qb,a),[c,f],function(){b.m();I("emailLinkSignInSent",a,g,c,d,f)},e))}function dm(a,b,c){rg(S(a))==$f?Il(function(){Ii?Jl(a,function(){Ei(T(a));Ni(function(d){G(pi,T(a));Kl(a,d?"empty":"unavailable",function(){I("signIn",a,b,c)})},Ai(T(a)),gg(S(a)))}):(Y(a),Ql(gm,b,!1,gg(S(a))))},!1):(Gl=!1,Jl(a,function(){Kl(a,"unavailable",function(){I("signIn",a,b,c)})}))}function hm(a){var b=Wf();a=ig(S(a));b=wc(b,a)||"";for(var c in dg)if(dg[c].toLowerCase()==b.toLowerCase())return dg[c];return"callback"}function im(a){var b=Wf();a=Cd(S(a).a,"queryParameterForSignInSuccessUrl");return(b=wc(b,a))?Mb(Ob(b)):null}function jm(){return wc(Wf(),"oobCode")}function km(){var a=wc(Wf(),"continueUrl");return a?function(){Sf(a)}:null}function lm(a,b){var c=Vf(b);switch(hm(a)){case"callback":(b=im(a))&&yi(b,T(a));a.cb()?I("callback",a,c):V(a,c);break;case"resetPassword":I("passwordReset",a,c,jm(),km());break;case"recoverEmail":I("emailChangeRevocation",a,c,jm());break;case"verifyEmail":I("emailVerification",a,c,jm(),km());break;case"signIn":I("emailLinkSignInCallback",a,c,Wf());mm();break;case"select":if((b=im(a))&&yi(b,T(a)),Ii){V(a,c);break}else{Il(function(){Y(a);Ql(gm,c,!0)},!0);return}default:throw Error("Unhandled widget operation.");}(b=Eg(S(a)))&&b()}function nm(a,b){O.call(this,Vk,void 0,b,"anonymousUserMismatch");this.a=a}r(nm,O);nm.prototype.v=function(){var a=this;M(this,this.i(),function(){a.a()});this.i().focus();nm.o.v.call(this)};nm.prototype.l=function(){this.a=null;nm.o.l.call(this)};q(nm.prototype,{i:Q});H.anonymousUserMismatch=function(a,b){var c=new nm(function(){c.m();V(a,b)});c.render(b);Z(a,c)};function om(a){O.call(this,Ok,void 0,a,"callback")}r(om,O);om.prototype.L=function(a,b,c,d){return a.apply(null,b).then(c,d)};function pm(a,b,c){if(c.user){var d={user:c.user,credential:c.credential,operationType:c.operationType,additionalUserInfo:c.additionalUserInfo},e=Ci(T(a)),f=e&&e.g;if(f&&!qm(c.user,f))rm(a,b,d);else{var g=e&&e.a;g?W(a,c.user.linkAndRetrieveDataWithCredential(g).then(function(c){d={user:c.user,credential:g,operationType:c.operationType,additionalUserInfo:c.additionalUserInfo};sm(a,b,d)},function(c){tm(a,b,c)})):sm(a,b,d)}}else c=P(b),b.m(),G(oi,T(a)),V(a,c)}function sm(a,b,c){G(oi,T(a));Rl(a,b,c)}function tm(a,b,c){var d=P(b);G(oi,T(a));c=U(c);b.m();V(a,d,void 0,c)}function um(a,b,c,d){var e=P(b);W(a,X(a).fetchSignInMethodsForEmail(c).then(function(f){b.m();f.length?Ka(f,firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?I("passwordLinking",a,e,c):1==f.length&&f[0]===firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?I("emailLinkSignInLinking",a,e,c):I("federatedLinking",a,e,c,Sd(f),d):(G(oi,T(a)),I("passwordRecovery",a,e,c,!1,vd().toString()))},function(c){tm(a,b,c)}))}function rm(a,b,c){var d=P(b);W(a,vm(a).then(function(){b.m();I("emailMismatch",a,d,c)},function(a){a.name&&"cancel"==a.name||(a=U(a.code),b.g(a))}))}function qm(a,b){if(b==a.email)return!0;if(a.providerData)for(var c=0;c<a.providerData.length;c++)if(b==a.providerData[c].email)return!0;return!1}H.callback=function(a,b,c){var d=new om;d.render(b);Z(a,d);b=c||Yl(a);W(a,b.then(function(b){pm(a,d,b)},function(b){if(b&&("auth/account-exists-with-different-credential"==b.code||"auth/email-already-in-use"==b.code)&&b.email&&b.credential)Di(yh(b),T(a)),um(a,d,b.email);else if(b&&"auth/user-cancelled"==b.code){var c=Ci(T(a)),e=U(b);c&&c.a?um(a,d,c.g,e):c?em(a,d,c.g,e):tm(a,d,b)}else b&&"auth/credential-already-in-use"==b.code||(b&&"auth/operation-not-supported-in-this-environment"==b.code&&Nl(a)?pm(a,d,{user:null,credential:null}):tm(a,d,b))}))};function wm(a,b){O.call(this,Uk,void 0,b,"differentDeviceError");this.a=a}r(wm,O);wm.prototype.v=function(){var a=this;M(this,this.i(),function(){a.a()});this.i().focus();wm.o.v.call(this)};wm.prototype.l=function(){this.a=null;wm.o.l.call(this)};q(wm.prototype,{i:Q});H.differentDeviceError=function(a,b){var c=new wm(function(){c.m();V(a,b)});c.render(b);Z(a,c)};function xm(a,b,c,d){O.call(this,cl,{email:a,S:!!c},d,"emailChangeRevoke");this.i=b;this.a=c||null}r(xm,O);xm.prototype.v=function(){var a=this;M(this,K(this,"firebaseui-id-reset-password-link"),function(){a.i()});this.a&&(this.A(this.a),this.s().focus());xm.o.v.call(this)};xm.prototype.l=function(){this.i=this.a=null;xm.o.l.call(this)};q(xm.prototype,{s:ll,C:Q,A:ml});function ym(){return K(this,"firebaseui-id-new-password")}function zm(){return K(this,"firebaseui-id-password-toggle")}function Am(){this.Ja=!this.Ja;var a=zm.call(this),b=ym.call(this);this.Ja?(b.type="text",ij(a,"firebaseui-input-toggle-off"),jj(a,"firebaseui-input-toggle-on")):(b.type="password",ij(a,"firebaseui-input-toggle-on"),jj(a,"firebaseui-input-toggle-off"));b.focus()}function Bm(){return K(this,"firebaseui-id-new-password-error")}function Cm(){this.Ja=!1;var a=ym.call(this);a.type="password";var b=Bm.call(this);Xj(this,a,function(){ck(b)&&(L(a,!0),bk(b))});var c=zm.call(this);ij(c,"firebaseui-input-toggle-on");jj(c,"firebaseui-input-toggle-off");Zj(this,a,function(){ij(c,"firebaseui-input-toggle-focus");jj(c,"firebaseui-input-toggle-blur")});ak(this,a,function(){ij(c,"firebaseui-input-toggle-blur");jj(c,"firebaseui-input-toggle-focus")});M(this,c,p(Am,this))}function Dm(){var a=ym.call(this);var b=Bm.call(this);J(a)?(L(a,!0),bk(b),b=!0):(L(a,!1),N(b,x("Enter your password").toString()),b=!1);return b?J(a):null}function Em(a,b,c){O.call(this,$k,{email:a},c,"passwordReset");this.a=b}r(Em,O);Em.prototype.v=function(){this.I();this.C(this.a);Ik(this,this.i(),this.a);this.i().focus();Em.o.v.call(this)};Em.prototype.l=function(){this.a=null;Em.o.l.call(this)};q(Em.prototype,{i:ym,A:Bm,K:zm,I:Cm,s:Dm,P:ll,O:Q,C:ml});function Fm(a,b,c,d,e){var f=c.s();f&&W(a,c.L(p(X(a).confirmPasswordReset,X(a)),[d,f],function(){c.m();var d=new Cl(e);d.render(b);Z(a,d)},function(d){Gm(a,b,c,d)}))}function Gm(a,b,c,d){"auth/weak-password"==(d&&d.code)?(a=U(d),L(c.i(),!1),N(c.A(),a),c.i().focus()):(c&&c.m(),c=new Dl,c.render(b),Z(a,c))}function Hm(a,b,c){var d=new xm(c,function(){W(a,d.L(p(X(a).sendPasswordResetEmail,X(a)),[c],function(){d.m();d=new zl(c,void 0,C(S(a)),D(S(a)));d.render(b);Z(a,d)},function(){d.g(x("Unable to send password reset code to specified email").toString())}))});d.render(b);Z(a,d)}H.passwordReset=function(a,b,c,d){W(a,X(a).verifyPasswordResetCode(c).then(function(e){var f=new Em(e,function(){Fm(a,b,f,c,d)});f.render(b);Z(a,f)},function(){Gm(a,b)}))};H.emailChangeRevocation=function(a,b,c){var d=null;W(a,X(a).checkActionCode(c).then(function(b){d=b.data.email;return X(a).applyActionCode(c)}).then(function(){Hm(a,b,d)},function(){var c=new El;c.render(b);Z(a,c)}))};H.emailVerification=function(a,b,c,d){W(a,X(a).applyActionCode(c).then(function(){var c=new Al(d);c.render(b);Z(a,c)},function(){var c=new Bl;c.render(b);Z(a,c)}))};function Im(a,b){try{var c="number"==typeof a.selectionStart}catch(d){c=!1}c?(a.selectionStart=b,a.selectionEnd=b):u&&!zb("9")&&("textarea"==a.type&&(b=a.value.substring(0,b).replace(/(\r\n|\r|\n)/g,"\n").length),a=a.createTextRange(),a.collapse(!0),a.move("character",b),a.select())}function Jm(a,b,c,d,e,f){O.call(this,Tk,{email:c},f,"emailLinkSignInConfirmation",{H:d,G:e});this.i=a;this.s=b}r(Jm,O);Jm.prototype.v=function(){this.C(this.i);this.I(this.i,this.s);this.a().focus();Im(this.a(),(this.a().value||"").length);Jm.o.v.call(this)};Jm.prototype.l=function(){this.s=this.i=null;Jm.o.l.call(this)};q(Jm.prototype,{a:tl,O:ul,C:vl,K:wl,A:xl,T:ll,P:Q,I:ml});H.emailLinkConfirmation=function(a,b,c,d,e,f){var g=new Jm(function(){var e=g.A();e?(g.m(),d(a,b,e,c)):g.a().focus()},function(){g.m();V(a,b,e||void 0)},e||void 0,C(S(a)),D(S(a)));g.render(b);Z(a,g);f&&g.g(f)};function Km(a,b,c,d,e){O.call(this,Yk,{providerId:a},e,"emailLinkSignInLinkingDifferentDevice",{H:c,G:d});this.a=b}r(Km,O);Km.prototype.v=function(){this.s(this.a);this.i().focus();Km.o.v.call(this)};Km.prototype.l=function(){this.a=null;Km.o.l.call(this)};q(Km.prototype,{i:ll,s:ml});H.emailLinkNewDeviceLinking=function(a,b,c,d){var e=new Ig(c);c=e.a.a.get(E.PROVIDER_ID)||null;Mg(e,null);if(c){var f=new Km(c,function(){f.m();d(a,b,e.toString())},C(S(a)),D(S(a)));f.render(b);Z(a,f)}else V(a,b)};function Lm(a){O.call(this,Pk,void 0,a,"blank")}r(Lm,O);function Mm(a,b,c,d,e){var f=new Lm,g=new Ig(c),h=g.a.a.get(E.Ta)||"",n=g.a.a.get(E.Ka)||"",y="1"===g.a.a.get(E.Ia),na=Lg(g),Ae=g.a.a.get(E.PROVIDER_ID)||null,ng=!vi(ti,T(a)),og=d||Fi(n,T(a)),xc=(d=Gi(n,T(a)))&&d.a;Ae&&xc&&xc.providerId!==Ae&&(xc=null);f.render(b);Z(a,f);W(a,f.L(function(){var b=B(null);b=na&&ng||ng&&y?Xe(Error("anonymous-user-not-found")):Nm(a,c).then(function(a){if(Ae&&!xc)throw Error("pending-credential-not-found");return a});var d=null;return b.then(function(b){d=b;return e?null:X(a).checkActionCode(h)}).then(function(){return d})},[],function(d){og?Om(a,f,og,c,xc,d):y?(f.m(),I("differentDeviceError",a,b)):(f.m(),I("emailLinkConfirmation",a,b,c,Pm))},function(d){var e=void 0;if(!d||!d.name||"cancel"!=d.name)switch(f.m(),d&&d.message){case"anonymous-user-not-found":I("differentDeviceError",a,b);break;case"anonymous-user-mismatch":I("anonymousUserMismatch",a,b);break;case"pending-credential-not-found":I("emailLinkNewDeviceLinking",a,b,c,Qm);break;default:d&&(e=U(d)),V(a,b,void 0,e)}}))}function Pm(a,b,c,d){Mm(a,b,d,c,!0)}function Qm(a,b,c){Mm(a,b,c)}function Om(a,b,c,d,e,f){var g=P(b);b.V("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",x("Signing in...").toString());var h=null;e=(f?Rm(a,f,c,d,e):Sm(a,c,d,e)).then(function(c){G(ui,T(a));G(ti,T(a));b.h();b.V("firebaseui-icon-done",x("Signed in!").toString());h=setTimeout(function(){b.h();Rl(a,b,c,!0)},1E3);W(a,function(){b&&(b.h(),b.m());clearTimeout(h)})},function(e){b.h();b.m();if(!e.name||"cancel"!=e.name){var f=U(e);"auth/email-already-in-use"==e.code||"auth/credential-already-in-use"==e.code?(G(ui,T(a)),G(ti,T(a))):"auth/invalid-email"==e.code?(f=x("The email provided does not match the current sign-in session.").toString(),I("emailLinkConfirmation",a,g,d,Pm,null,f)):V(a,g,c,f)}});W(a,e)}H.emailLinkSignInCallback=Mm;function Tm(a,b,c,d,e,f){O.call(this,Xk,{email:a,providerId:b},f,"emailLinkSignInLinking",{H:d,G:e});this.a=c}r(Tm,O);Tm.prototype.v=function(){this.s(this.a);this.i().focus();Tm.o.v.call(this)};Tm.prototype.l=function(){this.a=null;Tm.o.l.call(this)};q(Tm.prototype,{i:ll,s:ml});function Um(a,b,c,d){var e=P(b);fm(a,b,c,function(){V(a,e,c)},function(d){if(!d.name||"cancel"!=d.name){var f=U(d);d&&"auth/network-request-failed"==d.code?b.g(f):(b.m(),V(a,e,c,f))}},d)}H.emailLinkSignInLinking=function(a,b,c){var d=Ci(T(a));G(oi,T(a));if(d){var e=new Tm(c,d.a.providerId,function(){Um(a,e,c,d)},C(S(a)),D(S(a)));e.render(b);Z(a,e)}else V(a,b)};function Vm(a,b,c,d,e,f){O.call(this,Rk,{email:a},f,"emailLinkSignInSent",{H:d,G:e});this.s=b;this.a=c}r(Vm,O);Vm.prototype.v=function(){var a=this;M(this,this.i(),function(){a.a()});M(this,K(this,"firebaseui-id-trouble-getting-email-link"),function(){a.s()});this.i().focus();Vm.o.v.call(this)};Vm.prototype.l=function(){this.a=this.s=null;Vm.o.l.call(this)};q(Vm.prototype,{i:Q});H.emailLinkSignInSent=function(a,b,c,d,e){var f=new Vm(c,function(){f.m();I("emailNotReceived",a,b,c,d,e)},function(){f.m();d()},C(S(a)),D(S(a)));f.render(b);Z(a,f)};function Wm(a,b,c,d,e,f,g){O.call(this,hl,{Ob:a,zb:b},g,"emailMismatch",{H:e,G:f});this.s=c;this.i=d}r(Wm,O);Wm.prototype.v=function(){this.C(this.s,this.i);this.A().focus();Wm.o.v.call(this)};Wm.prototype.l=function(){this.i=this.a=null;Wm.o.l.call(this)};q(Wm.prototype,{A:ll,I:Q,C:ml});H.emailMismatch=function(a,b,c){var d=Ci(T(a));if(d){var e=new Wm(c.user.email,d.g,function(){var b=e;G(oi,T(a));Rl(a,b,c)},function(){var b=c.credential.providerId,g=P(e);e.m();d.a?I("federatedLinking",a,g,d.g,b):I("federatedSignIn",a,g,d.g,b)},C(S(a)),D(S(a)));e.render(b);Z(a,e)}else V(a,b)};function Xm(a,b,c,d,e){O.call(this,Sk,void 0,e,"emailNotReceived",{H:c,G:d});this.i=a;this.a=b}r(Xm,O);Xm.prototype.v=function(){var a=this;M(this,this.s(),function(){a.a()});M(this,this.wa(),function(){a.i()});this.s().focus();Xm.o.v.call(this)};Xm.prototype.wa=function(){return K(this,"firebaseui-id-resend-email-link")};Xm.prototype.l=function(){this.a=this.i=null;Xm.o.l.call(this)};q(Xm.prototype,{s:Q});H.emailNotReceived=function(a,b,c,d,e){var f=new Xm(function(){fm(a,f,c,d,function(a){a=U(a);f.g(a)},e)},function(){f.m();V(a,b,c)},C(S(a)),D(S(a)));f.render(b);Z(a,f)};function Ym(a,b,c,d,e,f){O.call(this,Zk,{email:a,providerId:b},f,"federatedLinking",{H:d,G:e});this.a=c}r(Ym,O);Ym.prototype.v=function(){this.s(this.a);this.i().focus();Ym.o.v.call(this)};Ym.prototype.l=function(){this.a=null;Ym.o.l.call(this)};q(Ym.prototype,{i:ll,s:ml});H.federatedLinking=function(a,b,c,d,e){var f=Ci(T(a));if(f&&f.a){var g=new Ym(c,d,function(){Xl(a,g,d,c)},C(S(a)),D(S(a)));g.render(b);Z(a,g);e&&g.g(e)}else V(a,b)};H.federatedSignIn=function(a,b,c,d,e){var f=new Ym(c,d,function(){Xl(a,f,d,c)},C(S(a)),D(S(a)));f.render(b);Z(a,f);e&&f.g(e)};function Zm(a,b,c,d){var e=b.A();e?W(a,b.L(p(a.Eb,a),[c,e],function(c){c=c.user.linkAndRetrieveDataWithCredential(d).then(function(c){return Rl(a,b,{user:c.user,credential:d,operationType:c.operationType,additionalUserInfo:c.additionalUserInfo})});W(a,c);return c},function(a){if(!a.name||"cancel"!=a.name)switch(a.code){case"auth/wrong-password":L(b.i(),!1);N(b.C(),U(a));break;case"auth/too-many-requests":b.g(U(a));break;default:re("signInWithEmailAndPassword: "+a.message,void 0),b.g(U(a))}})):b.i().focus()}H.passwordLinking=function(a,b,c){var d=Ci(T(a));G(oi,T(a));var e=d&&d.a;if(e){var f=new rl(c,function(){Zm(a,f,c,e)},function(){f.m();I("passwordRecovery",a,b,c)},C(S(a)),D(S(a)));f.render(b);Z(a,f)}else V(a,b)};function $m(a,b,c,d,e,f){O.call(this,Mk,{email:c,La:!!b},f,"passwordRecovery",{H:d,G:e});this.a=a;this.s=b}r($m,O);$m.prototype.v=function(){this.I();this.K(this.a,this.s);J(this.i())||this.i().focus();Ik(this,this.i(),this.a);$m.o.v.call(this)};$m.prototype.l=function(){this.s=this.a=null;$m.o.l.call(this)};q($m.prototype,{i:tl,C:ul,I:vl,O:wl,A:xl,T:ll,P:Q,K:ml});function an(a,b){var c=b.A();if(c){var d=P(b);W(a,b.L(p(X(a).sendPasswordResetEmail,X(a)),[c],function(){b.m();var e=new zl(c,function(){e.m();V(a,d)},C(S(a)),D(S(a)));e.render(d);Z(a,e)},function(a){L(b.i(),!1);N(b.C(),U(a))}))}else b.i().focus()}H.passwordRecovery=function(a,b,c,d,e){var f=new $m(function(){an(a,f)},d?void 0:function(){f.m();V(a,b)},c,C(S(a)),D(S(a)));f.render(b);Z(a,f);e&&f.g(e)};H.passwordSignIn=function(a,b,c,d){var e=new yl(function(){bm(a,e)},function(){var c=e.O();e.m();I("passwordRecovery",a,b,c)},c,C(S(a)),D(S(a)),d);e.render(b);Z(a,e)};function bn(){return K(this,"firebaseui-id-name")}function cn(){return K(this,"firebaseui-id-name-error")}
function dn(a,b,c,d,e,f,g,h,n){O.call(this,Lk,{email:d,Cb:a,name:e,La:!!c,fa:!!h},n,"passwordSignUp",{H:f,G:g});this.a=b;this.I=c;this.C=a}r(dn,O);dn.prototype.v=function(){this.Z();this.C&&this.Oa();this.qa();this.pa(this.a,this.I);this.C?(Hk(this,this.i(),this.A()),Hk(this,this.A(),this.s())):Hk(this,this.i(),this.s());this.a&&Ik(this,this.s(),this.a);J(this.i())?this.C&&!J(this.A())?this.A().focus():this.s().focus():this.i().focus();dn.o.v.call(this)};dn.prototype.l=function(){this.I=this.a=null;dn.o.l.call(this)};q(dn.prototype,{i:tl,T:ul,Z:vl,$a:wl,O:xl,A:bn,gc:cn,Oa:function(){var a=bn.call(this),b=cn.call(this);Xj(this,a,function(){ck(b)&&(L(a,!0),bk(b))})},K:function(){var a=bn.call(this);var b=cn.call(this);var c=J(a);c=!/^[\s\xa0]*$/.test(null==c?"":String(c));L(a,c);c?(bk(b),b=!0):(N(b,x("Enter your account name").toString()),b=!1);return b?Ta(J(a)):null},s:ym,aa:Bm,ub:zm,qa:Cm,P:Dm,dc:ll,wb:Q,pa:ml});function en(a,b){var c=zg(S(a)),d=b.O(),e=null;c&&(e=b.K());var f=b.P();if(d){if(c)if(e)e=Ua(e);else{b.A().focus();return}if(f){var g=firebase.auth.EmailAuthProvider.credential(d,f);W(a,b.L(p(a.Fb,a),[d,f],function(d){var f={user:d.user,credential:g,operationType:d.operationType,additionalUserInfo:d.additionalUserInfo};return c?(d=d.user.updateProfile({displayName:e}).then(function(){return Rl(a,b,f)}),W(a,d),d):Rl(a,b,f)},function(c){if(!c.name||"cancel"!=c.name){var e=U(c);switch(c.code){case"auth/email-already-in-use":return fn(a,b,d,c);case"auth/too-many-requests":e=x("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":L(b.s(),!1);N(b.aa(),e);break;default:c="setAccountInfo: "+Wh(c),re(c,void 0),b.g(e)}}}))}else b.s().focus()}else b.i().focus()}function fn(a,b,c,d){function e(){var a=U(d);L(b.i(),!1);N(b.T(),a);b.i().focus()}var f=X(a).fetchSignInMethodsForEmail(c).then(function(d){d.length?e():(d=P(b),b.m(),I("passwordRecovery",a,d,c,!1,vd().toString()))},function(){e()});W(a,f);return f}H.passwordSignUp=function(a,b,c,d,e,f){function g(){h.m();V(a,b)}
var h=new dn(zg(S(a)),function(){en(a,h)},e?void 0:g,c,d,C(S(a)),D(S(a)),f);h.render(b);Z(a,h)};function gn(){return K(this,"firebaseui-id-phone-confirmation-code")}function hn(){return K(this,"firebaseui-id-phone-confirmation-code-error")}function jn(){return K(this,"firebaseui-id-resend-countdown")}function kn(a,b,c,d,e,f,g,h,n){O.call(this,kl,{phoneNumber:e},n,"phoneSignInFinish",{H:g,G:h});this.Oa=f;this.i=new vj(1E3);this.C=f;this.O=a;this.a=b;this.I=c;this.K=d}r(kn,O);kn.prototype.v=function(){var a=this;this.P(this.Oa);Ef(this.i,"tick",this.A,!1,this);this.i.start();M(this,K(this,"firebaseui-id-change-phone-number-link"),function(){a.O()});M(this,this.wa(),function(){a.K()});this.qa(this.a);this.aa(this.a,this.I);this.s().focus();kn.o.v.call(this)};kn.prototype.l=function(){this.K=this.I=this.a=this.O=null;wj(this.i);Mf(this.i,"tick",this.A);this.i=null;kn.o.l.call(this)};kn.prototype.A=function(){--this.C;0<this.C?this.P(this.C):(wj(this.i),Mf(this.i,"tick",this.A),this.pa(),this.$a())};q(kn.prototype,{s:gn,Z:hn,qa:function(a){var b=gn.call(this),c=hn.call(this);Xj(this,b,function(){ck(c)&&(L(b,!0),bk(c))});a&&Yj(this,b,function(){a()})},T:function(){var a=Ta(J(gn.call(this))||"");return/^\d{6}$/.test(a)?a:null},mb:jn,P:function(a){hc(jn.call(this),x("Resend code in "+((9<a?"0:":"0:0")+a)).toString())},pa:function(){var a=this.mb();bk(a)},wa:function(){return K(this,"firebaseui-id-resend-link")},$a:function(){N(this.wa())},wb:ll,ub:Q,aa:ml});function ln(a,b,c,d){function e(a){b.s().focus();L(b.s(),!1);N(b.Z(),a)}var f=b.T();f?(b.V("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",x("Verifying...").toString()),W(a,b.L(p(d.confirm,d),[f],function(c){b.h();b.V("firebaseui-icon-done",x("Verified!").toString());var d=setTimeout(function(){b.h();b.m();var d={user:mn(a).currentUser,credential:null,operationType:c.operationType,additionalUserInfo:c.additionalUserInfo};Rl(a,b,d,!0)},1E3);W(a,function(){b&&b.h();clearTimeout(d)})},function(d){if(d.name&&"cancel"==d.name)b.h();else{var f=U(d);switch(d.code){case"auth/credential-already-in-use":b.h();break;case"auth/code-expired":d=P(b);b.h();b.m();I("phoneSignInStart",a,d,c,f);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":b.h();e(f);break;default:b.h(),b.g(f)}}}))):e(x("Wrong code. Try again.").toString())}H.phoneSignInFinish=function(a,b,c,d,e,f){var g=new kn(function(){g.m();I("phoneSignInStart",a,b,c)},function(){ln(a,g,c,e)},function(){g.m();V(a,b)},function(){g.m();I("phoneSignInStart",a,b,c)},Rd(c),d,C(S(a)),D(S(a)));g.render(b);Z(a,g);f&&g.g(f)};var nn=!u&&!(t("Safari")&&!(jb()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android")));function on(a,b){if(/-[a-z]/.test(b))return null;if(nn&&a.dataset){if(!(!t("Android")||jb()||t("Firefox")||t("Opera")||t("Silk")||b in a.dataset))return null;a=a.dataset[b];return void 0===a?null:a}return a.getAttribute("data-"+String(b).replace(/([A-Z])/g,"-$1").toLowerCase())}function pn(a,b,c){a=Yc(rk,{items:a},null,this.w);yk.call(this,a,!0,!0);c&&(c=qn(a,c))&&(c.focus(),Pj(c,a));M(this,a,function(a){if(a=(a=ic(a.target,"firebaseui-id-list-box-dialog-button"))&&on(a,"listboxid"))zk(),b(a)})}function qn(a,b){a=(a||document).getElementsByTagName("BUTTON");for(var c=0;c<a.length;c++)if(on(a[c],"listboxid")===b)return a[c];return null}function rn(){return K(this,"firebaseui-id-phone-number")}function sn(){return K(this,"firebaseui-id-country-selector")}function tn(){return K(this,"firebaseui-id-phone-number-error")}function un(a,b){var c=a.a,d=vn("1-US-0",c),e=null;b&&vn(b,c)?e=b:d?e="1-US-0":e=0<c.length?c[0].c:null;if(!e)throw Error("No available default country");wn.call(this,e,a)}function vn(a,b){a=Jd(a);return!(!a||!Ka(b,a))}function xn(a){return Ha(a,function(a){return{id:a.c,Ea:"firebaseui-flag "+yn(a),label:a.name+" "+("\u200e+"+a.b)}})}function yn(a){return"firebaseui-flag-"+a.f}function zn(a){var b=this;pn.call(this,xn(a.a),function(c){wn.call(b,c,a,!0);b.J().focus()},this.ua)}function wn(a,b,c){var d=Jd(a);d&&(c&&(c=Ta(J(rn.call(this))||""),b=Id(b,c),b.length&&b[0].b!=d.b&&(c="+"+d.b+c.substr(b[0].b.length+1),kj(rn.call(this),c))),b=Jd(this.ua),this.ua=a,a=K(this,"firebaseui-id-country-selector-flag"),b&&jj(a,yn(b)),ij(a,yn(d)),hc(K(this,"firebaseui-id-country-selector-code"),"\u200e+"+d.b))}function An(a,b,c,d,e,f,g,h,n,y){O.call(this,jl,{nb:b,ta:n||null,Na:!!c,fa:!!f},y,"phoneSignInStart",{H:d,G:e});this.I=h||null;this.K=b;this.a=a;this.A=c||null;this.Z=g||null}r(An,O);An.prototype.v=function(){this.aa(this.Z,this.I);this.O(this.a,this.A||void 0);this.K||Hk(this,this.J(),this.i());Ik(this,this.i(),this.a);this.J().focus();Im(this.J(),(this.J().value||"").length);An.o.v.call(this)};An.prototype.l=function(){this.A=this.a=null;An.o.l.call(this)};q(An.prototype,{kb:Ak,J:rn,C:tn,aa:function(a,b,c){var d=this,e=rn.call(this),f=sn.call(this),g=tn.call(this),h=a||Od,n=h.a;if(0==n.length)throw Error("No available countries provided.");un.call(d,h,b);M(this,f,function(){zn.call(d,h)});Xj(this,e,function(){ck(g)&&(L(e,!0),bk(g));var a=Ta(J(e)||""),b=Jd(this.ua),c=Id(h,a);a=vn("1-US-0",n);c.length&&c[0].b!=b.b&&(b=c[0],wn.call(d,"1"==b.b&&a?"1-US-0":b.c,h))});c&&Yj(this,e,function(){c()})},P:function(a){var b=Ta(J(rn.call(this))||"");a=a||Od;var c=a.a,d=Id(Od,b);if(d.length&&!Ka(c,d[0]))throw kj(rn.call(this)),rn.call(this).focus(),N(tn.call(this),x("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");c=Jd(this.ua);d.length&&d[0].b!=c.b&&wn.call(this,d[0].c,a);d.length&&(b=b.substr(d[0].b.length+1));return b?new Pd(this.ua,b):null},qa:sn,T:function(){return K(this,"firebaseui-recaptcha-container")},s:function(){return K(this,"firebaseui-id-recaptcha-error")},i:ll,pa:Q,O:ml});function Bn(a,b,c,d){try{var e=b.P(Ri)}catch(f){return}e?Pi?(b.V("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",x("Verifying...").toString()),W(a,b.L(p(a.Jb,a),[Rd(e),c],function(c){var d=P(b);b.V("firebaseui-icon-done",x("Code sent!").toString());var f=setTimeout(function(){b.h();b.m();I("phoneSignInFinish",a,d,e,15,c)},1E3);W(a,function(){b&&b.h();clearTimeout(f)})},function(a){b.h();if(!a.name||"cancel"!=a.name){grecaptcha.reset(Si);Pi=null;var c=a&&a.message||"";if(a.code)switch(a.code){case"auth/too-many-requests":c=x("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":b.J().focus();N(b.C(),td().toString());return;default:c=U(a)}b.g(c)}}))):Qi?N(b.s(),x("Solve the reCAPTCHA").toString()):!Qi&&d&&b.i().click():(b.J().focus(),N(b.C(),td().toString()))}H.phoneSignInStart=function(a,b,c,d){var e=tg(S(a))||{};Pi=null;Qi=!(e&&"invisible"===e.size);var f=cm(a),g=xg(S(a)),h=f?wg(S(a)):null;g=c&&c.a||g&&g.c||null;c=c&&c.ta||h;(h=yg(S(a)))&&Nd(h);Ri=h?new Hd(yg(S(a))):Od;var n=new An(function(b){Bn(a,n,y,!(!b||!b.keyCode))},Qi,f?null:function(){y.clear();n.m();V(a,b)},C(S(a)),D(S(a)),f,Ri,g,c);n.render(b);Z(a,n);d&&n.g(d);e.callback=function(b){n.s()&&bk(n.s());Pi=b;Qi||Bn(a,n,y)};e["expired-callback"]=function(){Pi=null};var y=new firebase.auth.RecaptchaVerifier(Qi?n.T():n.i(),e,mn(a).app);W(a,n.L(p(y.render,y),[],function(a){Si=a},function(c){c.name&&"cancel"==c.name||(c=U(c),n.m(),V(a,b,void 0,c))}))};function Cn(a,b,c,d,e){O.call(this,il,{Bb:b},e,"providerSignIn",{H:c,G:d});this.a=a}r(Cn,O);Cn.prototype.v=function(){this.i(this.a);Cn.o.v.call(this)};Cn.prototype.l=function(){this.a=null;Cn.o.l.call(this)};q(Cn.prototype,{i:function(a){function b(b){a(b)}
for(var c=this.j?ac("firebaseui-id-idp-button",this.j||this.w.a):[],d=0;d<c.length;d++){var e=c[d],f=on(e,"providerId");M(this,e,wa(b,f))}}});H.providerSignIn=function(a,b,c){var d=new Cn(function(c){c==firebase.auth.EmailAuthProvider.PROVIDER_ID?(d.m(),dm(a,b)):c==firebase.auth.PhoneAuthProvider.PROVIDER_ID?(d.m(),I("phoneSignInStart",a,b)):"anonymous"==c?$l(a,d):Xl(a,d,c);Y(a);a.N.cancel()},pg(S(a)),C(S(a)),D(S(a)));d.render(b);Z(a,d);c&&d.g(c);Dn(a)};H.sendEmailLinkForSignIn=function(a,b,c,d){var e=new om;e.render(b);Z(a,e);fm(a,e,c,d,function(d){e.m();d=U(d);I("signIn",a,b,c,d)})};function En(a,b,c,d,e,f,g){O.call(this,Jk,{email:c,Na:!!b,fa:!!f},g,"signIn",{H:d,G:e});this.a=a;this.s=b}r(En,O);En.prototype.v=function(){this.C(this.a);this.I(this.a,this.s||void 0);this.i().focus();Im(this.i(),(this.i().value||"").length);En.o.v.call(this)};En.prototype.l=function(){this.s=this.a=null;En.o.l.call(this)};q(En.prototype,{i:tl,O:ul,C:vl,K:wl,A:xl,T:ll,P:Q,I:ml});H.signIn=function(a,b,c,d){var e=Nl(a),f=e&&rg(S(a))!=$f,g=new En(function(){var b=g,c=b.A()||"";c&&em(a,b,c)},f?null:function(){g.m();V(a,b,c)},c,C(S(a)),D(S(a)),e);g.render(b);Z(a,g);d&&g.g(d)};function Fn(a,b){this.Y=!1;var c=Gn(b);if(Hn[c])throw Error('An AuthUI instance already exists for the key "'+c+'"');Hn[c]=this;this.g=a;this.A=null;this.s=!1;In(this.g);this.u=firebase.initializeApp({apiKey:a.app.options.apiKey,authDomain:a.app.options.authDomain},a.app.name+"-firebaseui-temp").auth();In(this.u);this.u.setPersistence&&this.u.setPersistence(firebase.auth.Auth.Persistence.SESSION);this.ca=b;this.V=new Zf;this.a=this.J=this.i=this.D=null;this.j=[];this.X=!1;this.N=lh.Pa();this.h=this.B=null;this.$=this.w=!1}function In(a){a&&a.INTERNAL&&a.INTERNAL.logFramework&&a.INTERNAL.logFramework("FirebaseUI-web")}var Hn={};function Gn(a){return a||"[DEFAULT]"}function Yl(a){Y(a);a.i||(a.i=Jn(a,function(b){return b&&!Ci(T(a))?B(mn(a).getRedirectResult().then(function(a){return a},function(b){if(b&&"auth/email-already-in-use"==b.code&&b.email&&b.credential)throw b;return Kn(a,b)})):B(X(a).getRedirectResult().then(function(b){return jg(S(a))&&!b.user&&a.h&&!a.h.isAnonymous?mn(a).getRedirectResult():b}))}));return a.i}function Z(a,b){Y(a);a.a=b}var Ln=null;function gm(){return Ln}function X(a){Y(a);return a.u}function mn(a){Y(a);return a.g}function T(a){Y(a);return a.ca}k=Fn.prototype;k.cb=function(){Y(this);return"pending"===vi(pi,T(this))||Mn(Wf())};function Mn(a){a=new Ig(a);return"signIn"===(a.a.a.get(E.hb)||null)&&!!a.a.a.get(E.Ta)}
k.start=function(a,b){Y(this);var c=this;"undefined"!==typeof this.g.languageCode&&(this.A=this.g.languageCode);var d="en".replace(/_/g,"-");this.g.languageCode=d;this.u.languageCode=d;this.s=!0;this.ab(b);var e=l.document;this.B?this.B.then(function(){"complete"==e.readyState?Nn(c,a):Ff(window,"load",function(){Nn(c,a)})}):"complete"==e.readyState?Nn(c,a):Ff(window,"load",function(){Nn(c,a)})};function Nn(a,b){var c=Vf(b);c.setAttribute("lang","en".replace(/_/g,"-"));if(Ln){var d=Ln;Y(d);Ci(T(d))&&we("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset.");Ln.reset()}Ln=a;a.J=c;On(a,c);ei(new fi)&&ei(new gi)?lm(a,b):(b=Vf(b),c=new Fl(x("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),c.render(b),Z(a,c));G(pi,T(a))}function Jn(a,b){if(a.w)return b(Pn(a));W(a,function(){a.w=!1});if(jg(S(a))){var c=new A(function(c){W(a,a.g.onAuthStateChanged(function(d){a.h=d;a.w||(a.w=!0,c(b(Pn(a))))}))});W(a,c);return c}a.w=!0;return b(null)}function Pn(a){Y(a);return jg(S(a))&&a.h&&a.h.isAnonymous?a.h:null}function W(a,b){Y(a);if(b){a.j.push(b);var c=function(){Oa(a.j,function(a){return a==b})};"function"!=typeof b&&b.then(c,c)}}k.disableAutoSignIn=function(){Y(this);this.X=!0};function Qn(a){Y(a);var b;(b=a.X)||(a=S(a),a=vg(a,firebase.auth.GoogleAuthProvider.PROVIDER_ID),b=!(!a||"select_account"!==a.prompt));return b}function Sl(a){"undefined"!==typeof a.g.languageCode&&a.s&&(a.s=!1,a.g.languageCode=a.A)}k.reset=function(){Y(this);var a=this;this.J&&this.J.removeAttribute("lang");this.D&&Tg(this.D);Sl(this);mm();G(pi,T(this));Y(this);this.N.cancel();this.i=B({user:null,credential:null});Ln==this&&(Ln=null);this.J=null;for(var b=0;b<this.j.length;b++)if("function"==typeof this.j[b])this.j[b]();else this.j[b].cancel&&this.j[b].cancel();this.j=[];G(oi,T(this));this.a&&(this.a.m(),this.a=null);this.F=null;this.u&&(this.B=vm(this).then(function(){a.B=null},function(){a.B=null}))};function On(a,b){a.F=null;a.D=new Ug(b);a.D.register();Ef(a.D,"pageEnter",function(b){b=b&&b.pageId;if(a.F!=b){var c=S(a);(c=Fg(c).uiChanged||null)&&c(a.F,b);a.F=b}})}k.ab=function(a){Y(this);var b=this.V,c;for(c in a)try{Bd(b.a,c,a[c])}catch(d){re('Invalid config: "'+c+'"',void 0)}sb&&Bd(b.a,"popupMode",!1);yg(b);!this.$&&Gg(S(this))&&(we("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.$=!0)};function S(a){Y(a);return a.V}k.Db=function(){Y(this);var a=S(this),b=Cd(a.a,"widgetUrl");var c=hg(a,b);S(this).a.get("popupMode")?(a=(window.screen.availHeight-600)/2,b=(window.screen.availWidth-500)/2,c=c||"about:blank",a={width:500,height:600,top:0<a?a:0,left:0<b?b:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},a.target=a.target||c.target||"google_popup",a.width=a.width||690,a.height=a.height||500,(a=Rf(c,a))&&a.focus()):Sf(c)};function Y(a){if(a.Y)throw Error("AuthUI instance is deleted!");}k.pb=function(){var a=this;Y(this);return this.u.app.delete().then(function(){var b=Gn(T(a));delete Hn[b];a.reset();a.Y=!0})};function Dn(a){Y(a);try{nh(a.N,qg(S(a)),Qn(a)).then(function(b){return a.a?am(a,a.a,b):!1})}catch(b){}}k.qb=function(a,b){Y(this);var c=this,d=Yf();if(!Ag(S(this)))throw Error("Email link sign-in should be enabled to trigger email sending.");var e=Cg(S(this)),f=new Ig(e.url);Jg(f,d);b&&b.a&&(Hi(d,b,T(this)),Mg(f,b.a.providerId));Kg(f,Bg(S(this)));return Jn(this,function(b){b&&((b=b.uid)?f.a.a.set(E.Ha,b):Sc(f.a.a,E.Ha));e.url=f.toString();return X(c).sendSignInLinkToEmail(a,e)}).then(function(){var b=T(c),e={};e.email=a;wi(ti,Th(d,JSON.stringify(e)),b)},function(a){G(ui,T(c));G(ti,T(c));throw a;})};function Nm(a,b){var c=Lg(new Ig(b));if(!c)return B(null);b=new A(function(b,e){var d=mn(a).onAuthStateChanged(function(a){d();a&&a.isAnonymous&&a.uid===c?b(a):a&&a.isAnonymous&&a.uid!==c?e(Error("anonymous-user-mismatch")):e(Error("anonymous-user-not-found"))});W(a,d)});W(a,b);return b}function Rm(a,b,c,d,e){Y(a);var f=e||null,g=firebase.auth.EmailAuthProvider.credentialWithLink(c,d);c=f?X(a).signInWithEmailLink(c,d).then(function(a){return a.user.linkAndRetrieveDataWithCredential(f)}).then(function(){return vm(a)}).then(function(){return Kn(a,{code:"auth/email-already-in-use"},f)}):X(a).fetchSignInMethodsForEmail(c).then(function(c){return c.length?Kn(a,{code:"auth/email-already-in-use"},g):b.linkAndRetrieveDataWithCredential(g)});W(a,c);return c}function Sm(a,b,c,d){Y(a);var e=d||null,f;b=X(a).signInWithEmailLink(b,c).then(function(a){f={user:a.user,credential:null,operationType:a.operationType,additionalUserInfo:a.additionalUserInfo};if(e)return a.user.linkAndRetrieveDataWithCredential(e).then(function(a){f={user:a.user,credential:e,operationType:f.operationType,additionalUserInfo:a.additionalUserInfo}})}).then(function(){vm(a)}).then(function(){return mn(a).updateCurrentUser(f.user)}).then(function(){f.user=mn(a).currentUser;return f});W(a,b);return b}function mm(){var a=Wf();if(Mn(a)){a=new Ig(a);for(var b in E)E.hasOwnProperty(b)&&Sc(a.a.a,E[b]);b={state:"signIn",mode:"emailLink",operation:"clear"};var c=l.document.title;l.history&&l.history.replaceState&&l.history.replaceState(b,c,a.toString())}}k.Ib=function(a,b){Y(this);var c=this;return X(this).signInWithEmailAndPassword(a,b).then(function(d){return Jn(c,function(e){return e?vm(c).then(function(){return Kn(c,{code:"auth/email-already-in-use"},firebase.auth.EmailAuthProvider.credential(a,b))}):d})})};k.Fb=function(a,b){Y(this);var c=this;return Jn(this,function(d){if(d){var e=firebase.auth.EmailAuthProvider.credential(a,b);return d.linkAndRetrieveDataWithCredential(e)}return X(c).createUserWithEmailAndPassword(a,b)})};k.Hb=function(a){Y(this);var b=this;return Jn(this,function(c){return c?c.linkAndRetrieveDataWithCredential(a).then(function(a){return a},function(c){if(c&&"auth/email-already-in-use"==c.code&&c.email&&c.credential)throw c;return Kn(b,c,a)}):X(b).signInAndRetrieveDataWithCredential(a)})};function Zl(a,b){Y(a);return Jn(a,function(c){return c&&!Ci(T(a))?c.linkWithPopup(b).then(function(a){return a},function(b){if(b&&"auth/email-already-in-use"==b.code&&b.email&&b.credential)throw b;return Kn(a,b)}):X(a).signInWithPopup(b)})}k.Kb=function(a){Y(this);var b=this,c=this.i;this.i=null;return Jn(this,function(c){return c&&!Ci(T(b))?c.linkWithRedirect(a):X(b).signInWithRedirect(a)}).then(function(){},function(a){b.i=c;throw a;})};k.Jb=function(a,b){Y(this);var c=this;return Jn(this,function(d){return d?d.linkWithPhoneNumber(a,b).then(function(a){return new ph(a,function(a){if("auth/credential-already-in-use"==a.code)return Kn(c,a);throw a;})}):mn(c).signInWithPhoneNumber(a,b).then(function(a){return new ph(a)})})};k.Gb=function(){Y(this);return mn(this).signInAnonymously()};function Ul(a,b){Y(a);return Jn(a,function(c){if(a.h&&!a.h.isAnonymous&&jg(S(a))&&!X(a).currentUser)return vm(a).then(function(){"password"==b.credential.providerId&&(b.credential=null);return b});if(c)return vm(a).then(function(){return c.linkAndRetrieveDataWithCredential(b.credential)}).then(function(a){b.user=a.user;b.credential=a.credential;b.operationType=a.operationType;b.additionalUserInfo=a.additionalUserInfo;return b},function(c){if(c&&"auth/email-already-in-use"==c.code&&c.email&&c.credential)throw c;return Kn(a,c,b.credential)});if(!b.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return vm(a).then(function(){return mn(a).updateCurrentUser(b.user)}).then(function(){b.user=mn(a).currentUser;b.operationType="signIn";b.credential&&b.credential.providerId&&"password"==b.credential.providerId&&(b.credential=null);return b})})}k.Eb=function(a,b){Y(this);return X(this).signInWithEmailAndPassword(a,b)};function vm(a){Y(a);return X(a).signOut()}function Kn(a,b,c){Y(a);if(b&&b.code&&("auth/email-already-in-use"==b.code||"auth/credential-already-in-use"==b.code)){var d=kg(S(a));return B().then(function(){return d(new xd("anonymous-upgrade-merge-conflict",null,c||b.credential))}).then(function(){a.a&&(a.a.m(),a.a=null);throw b;})}return Xe(b)}ya("firebaseui.auth.AuthUI",Fn);ya("firebaseui.auth.AuthUI.getInstance",function(a){a=Gn(a);return Hn[a]?Hn[a]:null});ya("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Fn.prototype.disableAutoSignIn);ya("firebaseui.auth.AuthUI.prototype.start",Fn.prototype.start);ya("firebaseui.auth.AuthUI.prototype.setConfig",Fn.prototype.ab);ya("firebaseui.auth.AuthUI.prototype.signIn",Fn.prototype.Db);ya("firebaseui.auth.AuthUI.prototype.reset",Fn.prototype.reset);ya("firebaseui.auth.AuthUI.prototype.delete",Fn.prototype.pb);ya("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Fn.prototype.cb);ya("firebaseui.auth.AuthUIError",xd);ya("firebaseui.auth.AuthUIError.prototype.toJSON",xd.prototype.toJSON);ya("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",$f);ya("firebaseui.auth.CredentialHelper.GOOGLE_YOLO","googleyolo");ya("firebaseui.auth.CredentialHelper.NONE","none");ya("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous")})();})();!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";!function(t){if(!t.fetch){var e="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),n="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=h(t),e=l(e);var r=this.map[t];this.map[t]=r?r+","+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=l(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),p(r)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),p(r)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},_.call(g.prototype),_.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var f=[301,302,303,307,308];O.redirect=function(t,e){if(-1===f.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=g,t.Response=O,t.fetch=function(r,i){return new Promise(function(n,t){var e=new g(r,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),r=e.shift().trim();if(r){var n=e.join(":").trim();i.append(r,n)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;n(new O(r,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&s&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function v(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function b(t){var e=new FileReader,r=v(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(n&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var t,e,r,n=y(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=v(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(t,e){var r,n,i=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),-1<c.indexOf(n)?n:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),n=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(r),decodeURIComponent(n))}}),i}function O(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=setTimeout;function n(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function i(r,n){for(;3===r._state;)r=r._value;0!==r._state?(r._handled=!0,o._immediateFn(function(){var t=1===r._state?n.onFulfilled:n.onRejected;if(null!==t){var e;try{e=t(r._value)}catch(t){return void a(n.promise,t)}s(n.promise,e)}else(1===r._state?s:a)(n.promise,r._value)})):r._deferreds.push(n)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof r)return void f((n=r,i=t,function(){n.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){a(e,t)}var n,i}function a(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)i(t,t._deferreds[e]);t._deferreds=null}function c(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function f(t,e){var r=!1;try{t(function(t){r||(r=!0,s(e,t))},function(t){r||(r=!0,a(e,t))})}catch(t){if(r)return;r=!0,a(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var r=new this.constructor(n);return i(this,new c(t,e,r)),r},o.prototype.finally=function(e){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){return r.reject(t)})})},o.all=function(e){return new o(function(n,i){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return n([]);var s=o.length;function a(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void r.call(t,function(t){a(e,t)},i)}o[e]=t,0==--s&&n(o)}catch(t){i(t)}}for(var t=0;t<o.length;t++)a(t,o[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(r){return new o(function(t,e){e(r)})},o.race=function(i){return new o(function(t,e){for(var r=0,n=i.length;r<n;r++)i[r].then(t,e)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();h.Promise||(h.Promise=o);var y=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=e(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),l=(v.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),p=function(t){if(!l(t))throw TypeError(t+" is not an object!");return t},d=function(t){try{return!!t()}catch(t){return!0}},b=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),m=y.document,_=l(m)&&l(m.createElement),g=function(t){return _?m.createElement(t):{}},w=!b&&!d(function(){return 7!=Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a}),O=function(t,e){if(!l(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!l(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!l(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!l(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},S=Object.defineProperty,E={f:b?Object.defineProperty:function(t,e,r){if(p(t),e=O(e,!0),p(r),w)try{return S(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},j=b?function(t,e,r){return E.f(t,e,A(1,r))}:function(t,e,r){return t[e]=r,t},P={}.hasOwnProperty,T=function(t,e){return P.call(t,e)},k=0,x=Math.random(),F=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++k+x).toString(36))},N=e(function(t){var o=F("src"),e="toString",r=Function[e],s=(""+r).split(e);v.inspectSource=function(t){return r.call(t)},(t.exports=function(t,e,r,n){var i="function"==typeof r;i&&(T(r,"name")||j(r,"name",e)),t[e]!==r&&(i&&(T(r,o)||j(r,o,t[e]?""+t[e]:s.join(String(e)))),t===y?t[e]=r:n?t[e]?t[e]=r:j(t,e,r):(delete t[e],j(t,e,r)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||r.call(this)})}),L=function(n,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(n),void 0===i)return n;switch(t){case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,r){return n.call(i,t,e,r)}}return function(){return n.apply(i,arguments)}},I="prototype",D=function(t,e,r){var n,i,o,s,a=t&D.F,u=t&D.G,c=t&D.S,f=t&D.P,h=t&D.B,l=u?y:c?y[e]||(y[e]={}):(y[e]||{})[I],p=u?v:v[e]||(v[e]={}),d=p[I]||(p[I]={});for(n in u&&(r=e),r)o=((i=!a&&l&&void 0!==l[n])?l:r)[n],s=h&&i?L(o,y):f&&"function"==typeof o?L(Function.call,o):o,l&&N(l,n,o,t&D.U),p[n]!=o&&j(p,n,s),f&&d[n]!=o&&(d[n]=o)};y.core=v,D.F=1,D.G=2,D.S=4,D.P=8,D.B=16,D.W=32,D.U=64,D.R=128;var R=D,C={}.toString,B=function(t){return C.call(t).slice(8,-1)},U=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},M=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},z=function(t){return Object(M(t))},G=Math.ceil,W=Math.floor,H=function(t){return isNaN(t=+t)?0:(0<t?W:G)(t)},V=Math.min,q=function(t){return 0<t?V(H(t),9007199254740991):0},K=Array.isArray||function(t){return"Array"==B(t)},$="__core-js_shared__",J=y[$]||(y[$]={}),Y=function(t){return J[t]||(J[t]={})},X=e(function(t){var e=Y("wks"),r=y.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:F)("Symbol."+t))}).store=e}),Q=X("species"),Z=function(t,e){return K(r=t)&&("function"!=typeof(n=r.constructor)||n!==Array&&!K(n.prototype)||(n=void 0),l(n)&&null===(n=n[Q])&&(n=void 0)),new(void 0===n?Array:n)(e);var r,n},tt=function(h,t){var l=1==h,p=2==h,d=3==h,y=4==h,v=6==h,b=5==h||v,m=t||Z;return function(t,e,r){for(var n,i,o=z(t),s=U(o),a=L(e,r,3),u=q(s.length),c=0,f=l?m(t,u):p?m(t,0):void 0;c<u;c++)if((b||c in s)&&(i=a(n=s[c],c,o),h))if(l)f[c]=i;else if(i)switch(h){case 3:return!0;case 5:return n;case 6:return c;case 2:f.push(n)}else if(y)return!1;return v?-1:d||y?y:f}},et=X("unscopables"),rt=Array.prototype;null==rt[et]&&j(rt,et,{});var nt=function(t){rt[et][t]=!0},it=tt(5),ot="find",st=!0;ot in[]&&Array(1)[ot](function(){st=!1}),R(R.P+R.F*st,"Array",{find:function(t){return it(this,t,1<arguments.length?arguments[1]:void 0)}}),nt(ot);v.Array.find;var at=tt(6),ut="findIndex",ct=!0;ut in[]&&Array(1)[ut](function(){ct=!1}),R(R.P+R.F*ct,"Array",{findIndex:function(t){return at(this,t,1<arguments.length?arguments[1]:void 0)}}),nt(ut);v.Array.findIndex;var ft,ht=function(t){return U(M(t))},lt=Math.max,pt=Math.min,dt=Y("keys"),yt=function(t){return dt[t]||(dt[t]=F(t))},vt=(ft=!1,function(t,e,r){var n,i,o,s=ht(t),a=q(s.length),u=(i=a,(n=H(n=r))<0?lt(n+i,0):pt(n,i));if(ft&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((ft||u in s)&&s[u]===e)return ft||u||0;return!ft&&-1}),bt=yt("IE_PROTO"),mt=function(t,e){var r,n=ht(t),i=0,o=[];for(r in n)r!=bt&&T(n,r)&&o.push(r);for(;e.length>i;)T(n,r=e[i++])&&(~vt(o,r)||o.push(r));return o},_t="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),gt=Object.keys||function(t){return mt(t,_t)},wt={f:Object.getOwnPropertySymbols},Ot={f:{}.propertyIsEnumerable},St=Object.assign,Et=!St||d(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=St({},t)[r]||Object.keys(St({},e)).join("")!=n})?function(t,e){for(var r=z(t),n=arguments.length,i=1,o=wt.f,s=Ot.f;i<n;)for(var a,u=U(arguments[i++]),c=o?gt(u).concat(o(u)):gt(u),f=c.length,h=0;h<f;)s.call(u,a=c[h++])&&(r[a]=u[a]);return r}:St;R(R.S+R.F,"Object",{assign:Et});v.Object.assign;var At=X("match"),jt=function(t,e,r){if(l(n=e)&&(void 0!==(i=n[At])?i:"RegExp"==B(n)))throw TypeError("String#"+r+" doesn't accept regex!");var n,i;return String(M(t))},Pt=X("match"),Tt="startsWith",kt=""[Tt];R(R.P+R.F*function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[Pt]=!1,!"/./"[e](r)}catch(t){}}return!0}(Tt),"String",{startsWith:function(t){var e=jt(this,t,Tt),r=q(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),n=String(t);return kt?kt.call(e,n,r):e.slice(r,r+n.length)===n}});v.String.startsWith;R(R.P,"String",{repeat:function(t){var e=String(M(this)),r="",n=H(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;0<n;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r}});v.String.repeat;var xt=e(function(t){var r=F("meta"),e=E.f,n=0,i=Object.isExtensible||function(){return!0},o=!d(function(){return i(Object.preventExtensions({}))}),s=function(t){e(t,r,{value:{i:"O"+ ++n,w:{}}})},a=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!l(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!T(t,r)){if(!i(t))return"F";if(!e)return"E";s(t)}return t[r].i},getWeak:function(t,e){if(!T(t,r)){if(!i(t))return!0;if(!e)return!1;s(t)}return t[r].w},onFreeze:function(t){return o&&a.NEED&&i(t)&&!T(t,r)&&s(t),t}}}),Ft=(xt.KEY,xt.NEED,xt.fastKey,xt.getWeak,xt.onFreeze,E.f),Nt=X("toStringTag"),Lt=function(t,e,r){t&&!T(t=r?t:t.prototype,Nt)&&Ft(t,Nt,{configurable:!0,value:e})},It={f:X},Dt=E.f,Rt=function(t){var e=v.Symbol||(v.Symbol=y.Symbol||{});"_"==t.charAt(0)||t in e||Dt(e,t,{value:It.f(t)})},Ct=b?Object.defineProperties:function(t,e){p(t);for(var r,n=gt(e),i=n.length,o=0;o<i;)E.f(t,r=n[o++],e[r]);return t},Bt=y.document,Ut=Bt&&Bt.documentElement,Mt=yt("IE_PROTO"),zt=function(){},Gt="prototype",Wt=function(){var t,e=g("iframe"),r=_t.length;for(e.style.display="none",Ut.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Wt=t.F;r--;)delete Wt[Gt][_t[r]];return Wt()},Ht=Object.create||function(t,e){var r;return null!==t?(zt[Gt]=p(t),r=new zt,zt[Gt]=null,r[Mt]=t):r=Wt(),void 0===e?r:Ct(r,e)},Vt=_t.concat("length","prototype"),qt={f:Object.getOwnPropertyNames||function(t){return mt(t,Vt)}},Kt=qt.f,$t={}.toString,Jt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Yt={f:function(t){return Jt&&"[object Window]"==$t.call(t)?function(t){try{return Kt(t)}catch(t){return Jt.slice()}}(t):Kt(ht(t))}},Xt=Object.getOwnPropertyDescriptor,Qt={f:b?Xt:function(t,e){if(t=ht(t),e=O(e,!0),w)try{return Xt(t,e)}catch(t){}if(T(t,e))return A(!Ot.f.call(t,e),t[e])}},Zt=xt.KEY,te=Qt.f,ee=E.f,re=Yt.f,ne=y.Symbol,ie=y.JSON,oe=ie&&ie.stringify,se="prototype",ae=X("_hidden"),ue=X("toPrimitive"),ce={}.propertyIsEnumerable,fe=Y("symbol-registry"),he=Y("symbols"),le=Y("op-symbols"),pe=Object[se],de="function"==typeof ne,ye=y.QObject,ve=!ye||!ye[se]||!ye[se].findChild,be=b&&d(function(){return 7!=Ht(ee({},"a",{get:function(){return ee(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=te(pe,e);n&&delete pe[e],ee(t,e,r),n&&t!==pe&&ee(pe,e,n)}:ee,me=function(t){var e=he[t]=Ht(ne[se]);return e._k=t,e},_e=de&&"symbol"==typeof ne.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof ne},ge=function(t,e,r){return t===pe&&ge(le,e,r),p(t),e=O(e,!0),p(r),T(he,e)?(r.enumerable?(T(t,ae)&&t[ae][e]&&(t[ae][e]=!1),r=Ht(r,{enumerable:A(0,!1)})):(T(t,ae)||ee(t,ae,A(1,{})),t[ae][e]=!0),be(t,e,r)):ee(t,e,r)},we=function(t,e){p(t);for(var r,n=function(t){var e=gt(t),r=wt.f;if(r)for(var n,i=r(t),o=Ot.f,s=0;i.length>s;)o.call(t,n=i[s++])&&e.push(n);return e}(e=ht(e)),i=0,o=n.length;i<o;)ge(t,r=n[i++],e[r]);return t},Oe=function(t){var e=ce.call(this,t=O(t,!0));return!(this===pe&&T(he,t)&&!T(le,t))&&(!(e||!T(this,t)||!T(he,t)||T(this,ae)&&this[ae][t])||e)},Se=function(t,e){if(t=ht(t),e=O(e,!0),t!==pe||!T(he,e)||T(le,e)){var r=te(t,e);return!r||!T(he,e)||T(t,ae)&&t[ae][e]||(r.enumerable=!0),r}},Ee=function(t){for(var e,r=re(ht(t)),n=[],i=0;r.length>i;)T(he,e=r[i++])||e==ae||e==Zt||n.push(e);return n},Ae=function(t){for(var e,r=t===pe,n=re(r?le:ht(t)),i=[],o=0;n.length>o;)!T(he,e=n[o++])||r&&!T(pe,e)||i.push(he[e]);return i};de||(N((ne=function(){if(this instanceof ne)throw TypeError("Symbol is not a constructor!");var e=F(0<arguments.length?arguments[0]:void 0),r=function(t){this===pe&&r.call(le,t),T(this,ae)&&T(this[ae],e)&&(this[ae][e]=!1),be(this,e,A(1,t))};return b&&ve&&be(pe,e,{configurable:!0,set:r}),me(e)})[se],"toString",function(){return this._k}),Qt.f=Se,E.f=ge,qt.f=Yt.f=Ee,Ot.f=Oe,wt.f=Ae,b&&N(pe,"propertyIsEnumerable",Oe,!0),It.f=function(t){return me(X(t))}),R(R.G+R.W+R.F*!de,{Symbol:ne});for(var je="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Pe=0;je.length>Pe;)X(je[Pe++]);for(var Te=gt(X.store),ke=0;Te.length>ke;)Rt(Te[ke++]);R(R.S+R.F*!de,"Symbol",{for:function(t){return T(fe,t+="")?fe[t]:fe[t]=ne(t)},keyFor:function(t){if(!_e(t))throw TypeError(t+" is not a symbol!");for(var e in fe)if(fe[e]===t)return e},useSetter:function(){ve=!0},useSimple:function(){ve=!1}}),R(R.S+R.F*!de,"Object",{create:function(t,e){return void 0===e?Ht(t):we(Ht(t),e)},defineProperty:ge,defineProperties:we,getOwnPropertyDescriptor:Se,getOwnPropertyNames:Ee,getOwnPropertySymbols:Ae}),ie&&R(R.S+R.F*(!de||d(function(){var t=ne();return"[null]"!=oe([t])||"{}"!=oe({a:t})||"{}"!=oe(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(l(e)||void 0!==t)&&!_e(t))return K(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!_e(e))return e}),n[1]=e,oe.apply(ie,n)}}),ne[se][ue]||j(ne[se],ue,ne[se].valueOf),Lt(ne,"Symbol"),Lt(Math,"Math",!0),Lt(y.JSON,"JSON",!0);var xe=X("toStringTag"),Fe="Arguments"==B(function(){return arguments}()),Ne={};Ne[X("toStringTag")]="z",Ne+""!="[object z]"&&N(Object.prototype,"toString",function(){return"[object "+(void 0===(t=this)?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),xe))?r:Fe?B(e):"Object"==(n=B(e))&&"function"==typeof e.callee?"Arguments":n)+"]";var t,e,r,n},!0),Rt("asyncIterator"),Rt("observable");v.Symbol;var Le={},Ie={};j(Ie,X("iterator"),function(){return this});var De,Re=yt("IE_PROTO"),Ce=Object.prototype,Be=Object.getPrototypeOf||function(t){return t=z(t),T(t,Re)?t[Re]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ce:null},Ue=X("iterator"),Me=!([].keys&&"next"in[].keys()),ze="values",Ge=function(){return this},We=function(t,e,r,n,i,o,s){var a,u,c;u=e,c=n,(a=r).prototype=Ht(Ie,{next:A(1,c)}),Lt(a,u+" Iterator");var f,h,l,p=function(t){if(!Me&&t in b)return b[t];switch(t){case"keys":case ze:return function(){return new r(this,t)}}return function(){return new r(this,t)}},d=e+" Iterator",y=i==ze,v=!1,b=t.prototype,m=b[Ue]||b["@@iterator"]||i&&b[i],_=m||p(i),g=i?y?p("entries"):_:void 0,w="Array"==e&&b.entries||m;if(w&&(l=Be(w.call(new t)))!==Object.prototype&&l.next&&(Lt(l,d,!0),"function"!=typeof l[Ue]&&j(l,Ue,Ge)),y&&m&&m.name!==ze&&(v=!0,_=function(){return m.call(this)}),(Me||v||!b[Ue])&&j(b,Ue,_),Le[e]=_,Le[d]=Ge,i)if(f={values:y?_:p(ze),keys:o?_:p("keys"),entries:g},s)for(h in f)h in b||N(b,h,f[h]);else R(R.P+R.F*(Me||v),e,f);return f},He=(De=!0,function(t,e){var r,n,i=String(M(t)),o=H(e),s=i.length;return o<0||s<=o?De?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===s||(n=i.charCodeAt(o+1))<56320||57343<n?De?i.charAt(o):r:De?i.slice(o,o+2):n-56320+(r-55296<<10)+65536});We(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=He(e,r),this._i+=t.length,{value:t,done:!1})});var Ve=function(t,e){return{value:e,done:!!t}},qe=We(Array,"Array",function(t,e){this._t=ht(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Ve(1)):Ve(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");Le.Arguments=Le.Array,nt("keys"),nt("values"),nt("entries");for(var Ke=X("iterator"),$e=X("toStringTag"),Je=Le.Array,Ye={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Xe=gt(Ye),Qe=0;Qe<Xe.length;Qe++){var Ze,tr=Xe[Qe],er=Ye[tr],rr=y[tr],nr=rr&&rr.prototype;if(nr&&(nr[Ke]||j(nr,Ke,Je),nr[$e]||j(nr,$e,tr),Le[tr]=Je,er))for(Ze in qe)nr[Ze]||N(nr,Ze,qe[Ze],!0)}It.f("iterator");var ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function or(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=or(t[r],e[r]));return t}function sr(t,e,r){t[e]=r}var ar="FirebaseError",ur=Error.captureStackTrace,cr=function(t,e){if(this.code=t,this.message=e,ur)ur(this,fr.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=ar,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}};cr.prototype=Object.create(Error.prototype),(cr.prototype.constructor=cr).prototype.name=ar;var fr=function(){function t(t,e,r){this.service=t,this.serviceName=e,this.errors=r,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,n){void 0===n&&(n={});var e,r=this.errors[t],i=this.service+"/"+t;e=void 0===r?"Error":r.replace(this.pattern,function(t,e){var r=n[e];return void 0!==r?r.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+i+").";var o=new cr(i,e);for(var s in n)n.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=n[s]);return o},t}();!function(r){function t(){var t=r.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var e=1;e<t.blockSize;++e)t.pad_[e]=0;return t.reset(),t}(function(t,e){function r(){this.constructor=t}ir(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(t,r),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var r=this.W_;if("string"==typeof t)for(var n=0;n<16;n++)r[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(n=0;n<16;n++)r[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(n=16;n<80;n++){var i=r[n-3]^r[n-8]^r[n-14]^r[n-16];r[n]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],f=this.chain_[3],h=this.chain_[4];for(n=0;n<80;n++){s=n<40?n<20?(o=f^u&(c^f),1518500249):(o=u^c^f,1859775393):n<60?(o=u&c|f&(u|c),2400959708):(o=u^c^f,3395469782);i=(a<<5|a>>>27)+o+h+s+r[n]&4294967295;h=f,f=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var r=e-this.blockSize,n=0,i=this.buf_,o=this.inbuf_;n<e;){if(0==o)for(;n<=r;)this.compress_(t,n),n+=this.blockSize;if("string"==typeof t){for(;n<e;)if(i[o]=t.charCodeAt(n),++n,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;n<e;)if(i[o]=t[n],++n,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;56<=r;r--)this.buf_[r]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(r=0;r<5;r++)for(var i=24;0<=i;i-=8)t[n]=this.chain_[r]>>i&255,++n;return t}}(function(){this.blockSize=-1});function hr(t,e){var r=new lr(t,e);return r.subscribe.bind(r)}var lr=function(){function t(t,e){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(r)}).catch(function(t){r.error(t)})}return t.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,r){var n,i=this;if(void 0===t&&void 0===e&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function(t,e){if("object"!=typeof t||null===t)return!1;for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:r}).next&&(n.next=pr),void 0===n.error&&(n.error=pr),void 0===n.complete&&(n.complete=pr);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?n.error(i.finalError):n.complete()}catch(t){}}),this.observers.push(n),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var r=this;this.task.then(function(){if(void 0!==r.observers&&void 0!==r.observers[t])try{e(r.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function pr(){}var dr=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},yr="[DEFAULT]",vr=[],br=function(){function t(t,e,r){this.firebase_=r,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=or(void 0,t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){vr.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(e){vr=vr.filter(function(t){return t!==e})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var n=this;return new Promise(function(t){n.checkDestroyed_(),t()}).then(function(){n.firebase_.INTERNAL.removeApp(n.name_);var r=[];return Object.keys(n.services_).forEach(function(e){Object.keys(n.services_[e]).forEach(function(t){r.push(n.services_[e][t])})}),Promise.all(r.map(function(t){return t.INTERNAL.delete()}))}).then(function(){n.isDeleted_=!0,n.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=yr),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var r=e!==yr?e:void 0,n=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),r);this.services_[t][e]=n}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;or(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(vr.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),vr=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&mr("app-deleted",{name:this.name_})},t}();function mr(t,e){throw _r.create(t,e)}br.prototype.name&&br.prototype.options||br.prototype.delete||console.log("dc");var _r=new fr("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),gr=!1;try{gr="[object process]"===Object.prototype.toString.call(global.process)}catch(t){}return gr&&console.warn('\nWarning: This is a browser-targeted Firebase bundle but it appears it is being\nrun in a Node environment.  If running in a Node environment, make sure you\nare using the bundle specified by the "main" field in package.json.\n\nIf you are using Webpack, you can specify "main" as the first item in\n"resolve.mainFields":\nhttps://webpack.js.org/configuration/resolve/#resolvemainfields\n\nIf using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\nto false and "main" to true:\nhttps://github.com/rollup/rollup-plugin-node-resolve\n'),function t(){var s={},a={},u={},c={__esModule:!0,initializeApp:function(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){var r=e;e={name:r}}var n=e;void 0===n.name&&(n.name=yr);var i=n.name;"string"==typeof i&&i||mr("bad-app-name",{name:i+""}),dr(s,i)&&mr("duplicate-app",{name:i});var o=new br(t,n,c);return l(s[i]=o,"create"),o},app:f,apps:null,Promise:Promise,SDK_VERSION:"5.8.6",INTERNAL:{registerService:function(r,t,e,n,i){a[r]&&mr("duplicate-service",{name:r}),a[r]=t,n&&(u[r]=n,h().forEach(function(t){n("create",t)}));var o=function(t){return void 0===t&&(t=f()),"function"!=typeof t[r]&&mr("invalid-app-argument",{name:r}),t[r]()};return void 0!==e&&or(o,e),c[r]=o,br.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,i?t:[])},o},createFirebaseNamespace:t,extendNamespace:function(t){or(c,t)},createSubscribe:hr,ErrorFactory:fr,removeApp:function(t){l(s[t],"delete"),delete s[t]},factories:a,useAsService:i,Promise:Promise,deepExtend:or}};function f(t){return dr(s,t=t||yr)||mr("no-app",{name:t}),s[t]}function h(){return Object.keys(s).map(function(t){return s[t]})}function l(r,n){Object.keys(a).forEach(function(t){var e=i(r,t);null!==e&&u[e]&&u[e](n,r)})}function i(t,e){if("serverAuth"===e)return null;var r=e;return t.options,r}return sr(c,"default",c),Object.defineProperty(c,"apps",{get:h}),sr(f,"App",br),c}()});!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(Lh){"use strict";try{(function(){Lh=Lh&&Lh.hasOwnProperty("default")?Lh.default:Lh,function(){var t,u=u||{},h=this;function c(t){return"string"==typeof t}function n(t){return"boolean"==typeof t}function o(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function i(t){return null===t}function f(t){return"array"==l(t)}function d(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function a(t){return"function"==l(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var e="closure_uid_"+(1e9*Math.random()>>>0),r=0;function s(t,e,n){return t.call.apply(t.bind,arguments)}function v(e,n,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:v).apply(null,arguments)}function g(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now||function(){return+new Date};function y(t,o){function e(){}e.prototype=o.prototype,t.ob=o.prototype,t.prototype=new e,(t.prototype.constructor=t).ed=function(t,e,n){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return o.prototype[e].apply(t,i)}}function w(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function I(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function T(t){if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function E(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");T.call(this,n+t[i])}function A(t,e){throw new E("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function k(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function S(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function N(){this.b=this.a=null}y(T,Error),T.prototype.name="CustomError",y(E,T),E.prototype.name="AssertionError",k.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var _=new k(function(){return new O},function(t){t.reset()});function O(){this.next=this.b=this.a=null}N.prototype.add=function(t,e){var n=_.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},O.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},O.prototype.reset=function(){this.next=this.b=this.a=null};var P=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(c(t))return c(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},R=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=c(t)?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};var D=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r=c(t)?t.split(""):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},C=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=c(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function L(t,e){return 0<=P(t,e)}function x(t,e){var n;return(n=0<=(e=P(t,e)))&&Array.prototype.splice.call(t,e,1),n}function M(n,i){!function(t,e){var n=t.length,i=c(t)?t.split(""):t;for(--n;0<=n;--n)n in i&&e.call(void 0,i[n],n,t)}(n,function(t,e){i.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function j(t){return Array.prototype.concat.apply([],arguments)}function U(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function V(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}var K=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function F(t){return z.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(H,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(W,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(B,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(G,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(X,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(J,"&#0;"))),t}var q,H=/&/g,W=/</g,B=/>/g,G=/"/g,X=/'/g,J=/\x00/g,z=/[\x00&<>"']/;function Y(t,e){return-1!=t.indexOf(e)}function $(t,e){return t<e?-1:e<t?1:0}t:{var Z=h.navigator;if(Z){var Q=Z.userAgent;if(Q){q=Q;break t}}q=""}function tt(t){return Y(q,t)}function et(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function nt(t){for(var e in t)return!1;return!0}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}var rt,ot,at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<at.length;o++)n=at[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function ut(t){h.setTimeout(function(){throw t},0)}function ct(t,e){ot||function(){if(h.Promise&&h.Promise.resolve){var t=h.Promise.resolve(void 0);ot=function(){t.then(ft)}}else ot=function(){var t=ft;!a(h.setImmediate)||h.Window&&h.Window.prototype&&!tt("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(rt||(rt=function(){var t=h.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!tt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0===t||tt("Trident")||tt("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){h.setTimeout(t,0)};var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).wb;n.wb=null,t()}},function(t){i.next={wb:t},i=i.next,e.port2.postMessage(0)}}()),rt(t)):h.setImmediate(t)}}(),ht||(ot(),ht=!0),lt.add(t,e)}var ht=!1,lt=new N;function ft(){for(var t;n=e=void 0,n=null,(e=lt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ut(t)}S(_,t)}var e,n;ht=!1}function dt(t,e){if(this.a=pt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=o)try{var n=this;t.call(e,function(t){St(n,vt,t)},function(t){if(!(t instanceof Ct))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}St(n,mt,t)})}catch(t){St(this,mt,t)}}var pt=0,vt=2,mt=3;function gt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}gt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var bt=new k(function(){return new gt},function(t){t.reset()});function yt(t,e,n){var i=bt.get();return i.g=t,i.b=e,i.f=n,i}function wt(t){if(t instanceof dt)return t;var e=new dt(o);return St(e,vt,t),e}function It(n){return new dt(function(t,e){e(n)})}function Tt(t,e,n){Nt(t,e,n,null)||ct(g(e,t))}function Et(n){return new dt(function(i){var r=n.length,o=[];if(r)for(var t=function(t,e,n){r--,o[t]=e?{Db:!0,value:n}:{Db:!1,reason:n},0==r&&i(o)},e=0;e<n.length;e++)Tt(n[e],g(t,e,!0),g(t,e,!1));else i(o)})}function At(t,e){t.b||t.a!=vt&&t.a!=mt||_t(t),t.f?t.f.next=e:t.b=e,t.f=e}function kt(t,r,o,a){var e=yt(null,null,null);return e.a=new dt(function(n,i){e.g=r?function(t){try{var e=r.call(a,t);n(e)}catch(t){i(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof Ct?i(t):n(e)}catch(t){i(t)}}:i}),At(e.a.c=t,e),e.a}function St(t,e,n){var i,r;t.a==pt&&(t===n&&(e=mt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Nt(n,t.Nc,t.Oc,t)||(t.i=n,t.a=e,t.c=null,_t(t),e!=mt||n instanceof Ct||(r=n,(i=t).g=!0,ct(function(){i.g&&Dt.call(null,r)}))))}function Nt(t,e,n,i){if(t instanceof dt)return At(t,yt(e||o,n||null,i)),!0;if(I(t))return t.then(e,n,i),!0;if(p(t))try{var r=t.then;if(a(r))return function(t,e,n,i,r){function o(t){a||(a=!0,i.call(r,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(r,t))},o)}catch(t){o(t)}}(t,r,e,n,i),!0}catch(t){return n.call(i,t),!0}return!1}function _t(t){t.h||(t.h=!0,ct(t.Yb,t))}function Ot(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Pt(t,e,n,i){if(n==mt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Rt(e,n,i);else try{e.c?e.g.call(e.f):Rt(e,n,i)}catch(t){Dt.call(null,t)}S(bt,e)}function Rt(t,e,n){e==vt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}dt.prototype.then=function(t,e,n){return kt(this,a(t)?t:null,a(e)?e:null,n)},w(dt),(t=dt.prototype).ia=function(t,e){return(t=yt(t,t,e)).c=!0,At(this,t),this},t.s=function(t,e){return kt(this,null,t,e)},t.cancel=function(t){this.a==pt&&ct(function(){!function t(e,n){if(e.a==pt)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,s.a==e&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==pt&&1==r?t(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):Ot(i),Pt(i,o,mt,n)))}e.c=null}else St(e,mt,n)}(this,new Ct(t))},this)},t.Nc=function(t){this.a=pt,St(this,vt,t)},t.Oc=function(t){this.a=pt,St(this,mt,t)},t.Yb=function(){for(var t;t=Ot(this);)Pt(this,t,this.a,this.i);this.h=!1};var Dt=ut;function Ct(t){T.call(this,t)}function Lt(){this.qa=this.qa,this.ja=this.ja}y(Ct,T);var xt=0;function Mt(t){if(!t.qa&&(t.qa=!0,t.va(),0!=xt))t[e]||(t[e]=++r)}function jt(t){return jt[" "](t),t}Lt.prototype.qa=!(Ct.prototype.name="cancel"),Lt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},jt[" "]=o;var Ut,Vt,Kt=tt("Opera"),Ft=tt("Trident")||tt("MSIE"),qt=tt("Edge"),Ht=qt||Ft,Wt=tt("Gecko")&&!(Y(q.toLowerCase(),"webkit")&&!tt("Edge"))&&!(tt("Trident")||tt("MSIE"))&&!tt("Edge"),Bt=Y(q.toLowerCase(),"webkit")&&!tt("Edge");function Gt(){var t=h.document;return t?t.documentMode:void 0}t:{var Xt="",Jt=(Vt=q,Wt?/rv:([^\);]+)(\)|;)/.exec(Vt):qt?/Edge\/([\d\.]+)/.exec(Vt):Ft?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Bt?/WebKit\/(\S+)/.exec(Vt):Kt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Jt&&(Xt=Jt?Jt[1]:""),Ft){var zt=Gt();if(null!=zt&&zt>parseFloat(Xt)){Ut=String(zt);break t}}Ut=Xt}var Yt,$t={};function Zt(s){return t=s,e=function(){for(var t=0,e=K(String(Ut)).split("."),n=K(String(s)).split("."),i=Math.max(e.length,n.length),r=0;0==t&&r<i;r++){var o=e[r]||"",a=n[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=$(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||$(0==o[2].length,0==a[2].length)||$(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t},n=$t,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Qt=h.document;Yt=Qt&&Ft?Gt()||("CSS1Compat"==Qt.compatMode?parseInt(Ut,10):5):void 0;var te=Object.freeze||function(t){return t},ee=!Ft||9<=Number(Yt),ne=Ft&&!Zt("9"),ie=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return h.addEventListener("test",o,e),h.removeEventListener("test",o,e),t}();function re(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function oe(t,e){if(re.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{jt(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,this.screenY=null===i?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,i.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=c(t.pointerType)?t.pointerType:ae[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}re.prototype.preventDefault=function(){this.Kb=!1},y(oe,re);var ae=te({2:"touch",3:"pen",4:"mouse"});oe.prototype.preventDefault=function(){oe.ob.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ne)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},oe.prototype.f=function(){return this.a};var se="closure_listenable_"+(1e6*Math.random()|0),ue=0;function ce(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.La=r,this.key=++ue,this.oa=this.Ia=!1}function he(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function le(t){this.src=t,this.a={},this.b=0}function fe(t,e){var n=e.type;n in t.a&&x(t.a[n],e)&&(he(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function de(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.La==i)return r}return-1}le.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=de(t,e,i,r);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new ce(e,this.src,o,!!i,r)).Ia=n,t.push(e)),e};var pe="closure_lm_"+(1e6*Math.random()|0),ve={};function me(t,e,n,i,r){if(i&&i.once)be(t,e,n,i,r);else if(f(e))for(var o=0;o<e.length;o++)me(t,e[o],n,i,r);else n=Ne(n),t&&t[se]?Oe(t,e,n,p(i)?!!i.capture:!!i,r):ge(t,e,n,!1,i,r)}function ge(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a,s,u=p(r)?!!r.capture:!!r,c=ke(t);if(c||(t[pe]=c=new le(t)),!(n=c.add(e,n,i,u,o)).proxy)if(a=Ae,i=s=ee?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=i).src=t,i.listener=n,t.addEventListener)ie||(r=u),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ie(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}}function be(t,e,n,i,r){if(f(e))for(var o=0;o<e.length;o++)be(t,e[o],n,i,r);else n=Ne(n),t&&t[se]?Pe(t,e,n,p(i)?!!i.capture:!!i,r):ge(t,e,n,!0,i,r)}function ye(t,e,n,i,r){if(f(e))for(var o=0;o<e.length;o++)ye(t,e[o],n,i,r);else i=p(i)?!!i.capture:!!i,n=Ne(n),t&&t[se]?(t=t.l,(e=String(e).toString())in t.a&&(-1<(n=de(o=t.a[e],n,i,r))&&(he(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=ke(t))&&(e=t.a[e.toString()],t=-1,e&&(t=de(e,n,i,r)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[se])fe(e.l,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ie(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=ke(e))?(fe(n,t),0==n.b&&(n.src=null,e[pe]=null)):he(t)}}}function Ie(t){return t in ve?ve[t]:ve[t]="on"+t}function Te(t,e,n,i){var r=!0;if((t=ke(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=Ee(o,i),r=r&&!1!==o)}return r}function Ee(t,e){var n=t.listener,i=t.La||t.src;return t.Ia&&we(t),n.call(i,e)}function Ae(t,e){if(t.oa)return!0;if(ee)return Ee(t,new oe(e,this));if(!e)t:{e=["window","event"];for(var n=h,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new oe(i=e,this),n=!0,!(i.keyCode<0||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=Te(i[r],t,!0,e);n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=Te(i[r],t,!1,e),n=n&&o}return n}function ke(t){return(t=t[pe])instanceof le?t:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ne(e){return a(e)?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function _e(){Lt.call(this),this.l=new le(this),(this.Rb=this).Va=null}function Oe(t,e,n,i,r){t.l.add(String(e),n,!1,i,r)}function Pe(t,e,n,i,r){t.l.add(String(e),n,!0,i,r)}function Re(t,e,n,i){if(!(e=t.l.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ia&&fe(t.l,a),r=!1!==s.call(u,i)&&r}}return r&&0!=i.Kb}function De(t,e,n){if(a(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Ce(n){var i=null;return new dt(function(t,e){-1==(i=De(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw h.clearTimeout(i),t})}function Le(t){if(t.S&&"function"==typeof t.S)return t.S();if(c(t))return t.split("");if(d(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function xe(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(d(t)||c(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function Me(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Me)for(n=t.U(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function je(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Ue(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)Ue(r,i=t.a[e])||(r[t.a[n++]=i]=1),e++;t.a.length=n}}function Ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}y(_e,Lt),_e.prototype[se]=!0,_e.prototype.addEventListener=function(t,e,n,i){me(this,t,e,n,i)},_e.prototype.removeEventListener=function(t,e,n,i){ye(this,t,e,n,i)},_e.prototype.dispatchEvent=function(t){var e,n=this.Va;if(n)for(e=[];n;n=n.Va)e.push(n);n=this.Rb;var i=t.type||t;if(c(t))t=new re(t,n);else if(t instanceof re)t.target=t.target||n;else{var r=t;st(t=new re(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];r=Re(a,i,!0,t)&&r}if(r=Re(a=t.b=n,i,!0,t)&&r,r=Re(a,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=Re(a=t.b=e[o],i,!1,t)&&r;return r},_e.prototype.va=function(){if(_e.ob.va.call(this),this.l){var t,e=this.l;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)he(n[i]);delete e.a[t],e.b--}}this.Va=null},(t=Me.prototype).S=function(){je(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return je(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Ue(this.b,t)?this.b[t]:e},t.set=function(t,e){Ue(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var Ve=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ke(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Ke){this.f=void 0!==e?e:t.f,Fe(this,t.c),this.l=t.l,this.b=t.b,qe(this,t.i),this.g=t.g,e=t.a;var n=new nn;n.c=e.c,e.a&&(n.a=new Me(e.a),n.b=e.b),He(this,n),this.h=t.h}else t&&(n=String(t).match(Ve))?(this.f=!!e,Fe(this,n[1]||"",!0),this.l=Je(n[2]||""),this.b=Je(n[3]||"",!0),qe(this,n[4]),this.g=Je(n[5]||"",!0),He(this,n[6]||"",!0),this.h=Je(n[7]||"")):(this.f=!!e,this.a=new nn(null,this.f))}function Fe(t,e,n){t.c=n?Je(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function He(t,e,n){var i,r;e instanceof nn?(t.a=e,i=t.a,(r=t.f)&&!i.f&&(rn(i),i.c=null,i.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(an(this,e),un(this,n,t))},i)),i.f=r):(n||(e=ze(e,tn)),t.a=new nn(e,t.f))}function We(t,e,n){t.a.set(e,n)}function Be(t,e){return t.a.get(e)}function Ge(t){return t instanceof Ke?new Ke(t):new Ke(t,void 0)}function Xe(t,e){var n=new Ke(null,void 0);return Fe(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ze(t,e,n){return c(t)?(t=encodeURI(t).replace(e,Ye),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ye(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ke.prototype.toString=function(){var t=[],e=this.c;e&&t.push(ze(e,$e,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(ze(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(ze(n,"/"==n.charAt(0)?Qe:Ze,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",ze(n,en)),t.join("")};var $e=/[#\/\?@]/g,Ze=/[#\?:]/g,Qe=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function rn(n){n.a||(n.a=new Me,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function on(t){var e=xe(t);if(void 0===e)throw Error("Keys are undefined");var n=new nn(null,void 0);t=Le(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];f(o)?un(n,r,o):n.add(r,o)}return n}function an(t,e){rn(t),e=cn(t,e),Ue(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ue((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&je(t)))}function sn(t,e){return rn(t),e=cn(t,e),Ue(t.a.b,e)}function un(t,e,n){an(t,e),0<n.length&&(t.c=null,t.a.set(cn(t,e),U(n)),t.b+=n.length)}function cn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=nn.prototype).add=function(t,e){rn(this),this.c=null,t=cn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,i){rn(this),this.a.forEach(function(t,e){R(t,function(t){n.call(i,t,e,this)},this)},this)},t.U=function(){rn(this);for(var t=this.a.S(),e=this.a.U(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.S=function(t){rn(this);var e=[];if(c(t))sn(this,t)&&(e=j(e,this.a.get(cn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=j(e,t[n])}return e},t.set=function(t,e){return rn(this),this.c=null,sn(this,t=cn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.S(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}}return this.c=t.join("&")};var hn=!Ft||9<=Number(Yt);function ln(){this.a="",this.b=dn}function fn(t){return t instanceof ln&&t.constructor===ln&&t.b===dn?t.a:(A("expected object of type Const, got '"+t+"'"),"type_error:Const")}ln.prototype.na=!0,ln.prototype.ma=function(){return this.a},ln.prototype.toString=function(){return"Const{"+this.a+"}"};var dn={};function pn(t){var e=new ln;return e.a=t,e}function vn(){this.a="",this.b=wn}function mn(t){return t instanceof vn&&t.constructor===vn&&t.b===wn?t.a:(A("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function gn(t,n){var e,i,r=fn(t);if(!yn.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(bn,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof ln?fn(t):encodeURIComponent(String(t))}),e=t,(i=new vn).a=e,i}pn(""),vn.prototype.na=!0,vn.prototype.ma=function(){return this.a},vn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var bn=/%{(\w+)}/g,yn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,wn={};function In(){this.a="",this.b=kn}function Tn(t){return t instanceof In&&t.constructor===In&&t.b===kn?t.a:(A("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}In.prototype.na=!0,In.prototype.ma=function(){return this.a},In.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var En=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function An(t){return t instanceof In?t:(t=t.na?t.ma():String(t),En.test(t)||(t="about:invalid#zClosurez"),Sn(t))}var kn={};function Sn(t){var e=new In;return e.a=t,e}function Nn(){this.a="",this.b=_n}Sn("about:blank"),Nn.prototype.na=!0,Nn.prototype.ma=function(){return this.a},Nn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var _n={};function On(t){var e=new Nn;return e.a=t,e}function Pn(t){var e=document;return c(t)?e.getElementById(t):t}function Rn(n,t){et(t,function(t,e){t&&t.na&&(t=t.ma()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:Dn.hasOwnProperty(e)?n.setAttribute(Dn[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}On("<!DOCTYPE html>"),On(""),On("<br>");var Dn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Cn(t,e,n){var i=arguments,r=document,o=String(i[0]),a=i[1];if(!hn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',F(a.name),'"'),a.type){o.push(' type="',F(a.type),'"');var s={};st(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=r.createElement(o),a&&(c(a)?o.className=a:f(a)?o.className=a.join(" "):Rn(o,a)),2<i.length&&function(e,n,t){function i(t){t&&n.appendChild(c(t)?e.createTextNode(t):t)}for(var r=2;r<t.length;r++){var o=t[r];!d(o)||p(o)&&0<o.nodeType?i(o):R(Ln(o)?U(o):o,i)}}(r,o,i),o}function Ln(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(a(t))return"function"==typeof t.item}return!1}function xn(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(f(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),t(e,r[a],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&("function"!=typeof(a=n[r])&&(i.push(o),Vn(r,i),i.push(":"),t(e,a,i),o=","));return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":Vn(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Mn,t,e),e.join("")}function Mn(){}var jn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Un=/\uffff/.test("   ")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Vn(t,e){e.push('"',t.replace(Un,function(t){var e=jn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),jn[t]=e),e}),'"')}function Kn(){var t=oi();return Ft&&!!Yt&&11==Yt||/Edge\/\d+/.test(t)}function Fn(){return h.window&&h.window.location.href||self&&self.location&&self.location.href||""}function qn(t,e){e=e||h.window;var n="about:blank";t&&(n=Tn(An(t))),e.location.href=n}function Hn(t){return!!((t=(t||oi()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Wn(t){t=t||h.window;try{t.close()}catch(t){}}function Bn(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=oi().toLowerCase(),i&&(e.target=i,Y(n,"crios/")&&(e.target="_blank")),ni(oi())==ti&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof In?n:An(void 0!==n.href?n.href:String(n)),n=t.target||n.target,r=[],t)switch(s){case"width":case"height":case"top":case"left":r.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(s+"="+(t[s]?1:0))}var a,s=r.join(",");if((tt("iPhone")&&!tt("iPod")&&!tt("iPad")||tt("iPad")||tt("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(s=i.document.createElement("A"),e instanceof In||e instanceof In||(e=e.na?e.ma():String(e),En.test(e)||(e="about:invalid#zClosurez"),e=Sn(e)),s.href=Tn(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=i.open("",n,s),t=Tn(e),s&&(Ht&&Y(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,pn("b/12014412, meta tag with sanitized URL"),t=On(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+F(t)+'">'),s.document.write((a=t)instanceof Nn&&a.constructor===Nn&&a.b===_n?a.a:(A("expected object of type SafeHtml, got '"+a+"' of type "+l(a)),"type_error:SafeHtml")),s.document.close())):(s=i.open(Tn(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var Gn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xn=/^[^@]+@[^@]+$/;function Jn(){var e=null;return new dt(function(t){"complete"==h.document.readyState?t():(e=function(){t()},be(window,"load",e))}).s(function(t){throw ye(window,"load",e),t})}function zn(t){return t=t||oi(),!("file:"!==hi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yn(){var t=h.window;try{return!(!t||t==t.top)}catch(t){return!1}}function $n(){return"object"!=typeof h.window&&"function"==typeof h.importScripts}function Zn(){return Lh.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Lh.INTERNAL.hasOwnProperty("node")?"Node":$n()?"Worker":"Browser"}function Qn(){var t=Zn();return"ReactNative"===t||"Node"===t}var ti="Firefox",ei="Chrome";function ni(t){var e=t.toLowerCase();return Y(e,"opera/")||Y(e,"opr/")||Y(e,"opios/")?"Opera":Y(e,"iemobile")?"IEMobile":Y(e,"msie")||Y(e,"trident/")?"IE":Y(e,"edge/")?"Edge":Y(e,"firefox/")?ti:Y(e,"silk/")?"Silk":Y(e,"blackberry")?"Blackberry":Y(e,"webos")?"Webos":!Y(e,"safari/")||Y(e,"chrome/")||Y(e,"crios/")||Y(e,"android")?!Y(e,"chrome/")&&!Y(e,"crios/")||Y(e,"edge/")?Y(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":ei:"Safari"}var ii={Uc:"FirebaseCore-web",Wc:"FirebaseUI-web"};function ri(t,e){e=e||[];var n,i=[],r={};for(n in ii)r[ii[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=Zn())?i=ni(r=oi()):"Worker"===i&&(i=ni(r=oi())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function oi(){return h.navigator&&h.navigator.userAgent||""}function ai(t,e){t=t.split("."),e=e||h;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function si(){try{var t=h.localStorage,e=vi();if(t)return t.setItem(e,"1"),t.removeItem(e),!Kn()||!!h.indexedDB}catch(t){return $n()&&!!h.indexedDB}return!1}function ui(){return(ci()||"chrome-extension:"===hi()||zn())&&!Qn()&&si()&&!$n()}function ci(){return"http:"===hi()||"https:"===hi()}function hi(){return h.location&&h.location.protocol||null}function li(t){return!Hn(t=t||oi())&&ni(t)!=ti}function fi(t){return void 0===t?null:xn(t)}function di(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function pi(t){if(null!==t)return JSON.parse(t)}function vi(t){return t||Math.floor(1e9*Math.random()).toString()}function mi(t){return"Safari"!=ni(t=t||oi())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function gi(){var t=h.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function bi(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=oi(),e=Zn(),this.b=Hn(t)||"ReactNative"===e}function yi(){var t=h.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function wi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Ii(){return!(!ai("fireauth.oauthhelper",h)&&!ai("fireauth.iframe",h))}bi.prototype.get=function(){var t=h.navigator;return!t||"boolean"!=typeof t.onLine||!ci()&&"chrome-extension:"!==hi()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ti,Ei={};function Ai(t){Ei[t]||(Ei[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var ki={};Object.defineProperty(ki,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ki,"abcd",{configurable:!0,enumerable:!0,value:2}),Ti=2==ki.abcd}catch(t){Ti=!1}function Si(t,e,n){Ti?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ni(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Si(t,n,e[n])}function _i(t){var e={};return Ni(e,t),e}function Oi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Si(e,n,Oi(t[n]));return e}function Pi(t){var e={},n=t[Di],i=t[Ci];if(!(t=t[Li])||t!=Ri&&!n)throw Error("Invalid provider user info!");e[Mi]=i||null,e[xi]=n||null,Si(this,Ui,t),Si(this,ji,Oi(e))}var Ri="EMAIL_SIGNIN",Di="email",Ci="newEmail",Li="requestType",xi="email",Mi="fromEmail",ji="data",Ui="operation";function Vi(t,e){this.code=Fi+t,this.message=e||qi[t]||""}function Ki(t){var e=t&&t.code;return e?new Vi(e.substring(Fi.length),t.message):null}y(Vi,Error),Vi.prototype.C=function(){return{code:this.code,message:this.message}},Vi.prototype.toJSON=function(){return this.C()};var Fi="auth/",qi={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Hi(t){var e=t[Ji];if(void 0===e)throw new Vi("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Vi("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Wi];if(n&&"object"==typeof n){e=n[$i];var i=n[zi];if(n=n[Yi],"string"==typeof e&&e.length){if(this.a=e,void 0!==i&&"boolean"!=typeof i)throw new Vi("argument-error",zi+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Vi("argument-error",Yi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Vi("argument-error",$i+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new Vi("missing-android-pkg-name")}}else if(void 0!==n)throw new Vi("argument-error",Wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Xi])&&"object"==typeof e){if("string"==typeof(e=e[Zi])&&e.length)this.f=e;else if(void 0!==e)throw new Vi("argument-error",Zi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Vi("argument-error",Xi+" property must be a non null object when specified.");if(void 0!==(e=t[Gi])&&"boolean"!=typeof e)throw new Vi("argument-error",Gi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Bi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Vi("argument-error",Bi+" property must be a non empty string when specified.");this.i=t||null}var Wi="android",Bi="dynamicLinkDomain",Gi="handleCodeInApp",Xi="iOS",Ji="url",zi="installApp",Yi="minimumVersion",$i="packageName",Zi="bundleId";function Qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var tr=null,er=null;function nr(t){var e="";return function(i,t){function e(t){for(;r<i.length;){var e=i.charAt(r++),n=er[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!tr){tr={},er={};for(var t=0;t<65;t++)tr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=(er[tr[t]]=t)&&(er["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var n=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===n)break;t(n<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function ir(t){this.c=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function rr(t){return(t=or(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ir(t):null}function or(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(nr(t))}catch(t){}return null}ir.prototype.f=function(){return this.b};var ar,sr={$c:{ab:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},bd:{ab:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},cd:{ab:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function ur(t){for(var e in sr)if(sr[e].id===t)return{firebaseEndpoint:(t=sr[e]).ab,secureTokenEndpoint:t.ib};return null}ar=ur("__EID__")?"__EID__":void 0;var cr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),hr=["client_id","response_type","scope","redirect_uri","state"],lr={Vc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",hb:hr},Xc:{Ma:null,Ba:500,Aa:620,Na:"github.com",hb:hr},Yc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",hb:hr},dd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",hb:cr}};function fr(t){for(var e in lr)if(lr[e].Na==t)return lr[e];return null}function dr(t){var e={};e["facebook.com"]=br,e["google.com"]=wr,e["github.com"]=yr,e["twitter.com"]=Ir;var n=t&&t[vr];try{if(n)return e[n]?new e[n](t):new gr(t);if(void 0!==t[pr])return new mr(t)}catch(t){}return null}var pr="idToken",vr="providerId";function mr(t){var e=t[vr];if(!e&&t[pr]){var n=rr(t[pr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Si(this,"providerId",e),Si(this,"isNewUser",n)}function gr(t){mr.call(this,t),Si(this,"profile",Oi((t=pi(t.rawUserInfo||"{}"))||{}))}function br(t){if(gr.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function yr(t){if(gr.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Si(this,"username",this.profile&&this.profile.login||null)}function wr(t){if(gr.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ir(t){if(gr.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Si(this,"username",t.screenName||null)}function Tr(t){this.a=Ge(t)}function Er(t){var e=Ge(t),n=Be(e,"link"),i=Be(Ge(n),"link");return Be(Ge(e=Be(e,"deep_link_id")),"link")||e||i||n||t}function Ar(t,n){return t.then(function(t){if(t[sa]){var e=rr(t[sa]);if(!e||n!=e.c)throw new Vi("user-mismatch");return t}throw new Vi("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Fi+"user-not-found"?new Vi("user-mismatch"):t})}function kr(t,e){if(!e)throw new Vi("internal-error","failed to construct a credential");this.a=e,Si(this,"providerId",t),Si(this,"signInMethod",t)}function Sr(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Nr(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Si(this,"idToken",e.idToken),e.accessToken&&Si(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Si(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Vi("internal-error","failed to construct a credential");Si(this,"accessToken",e.oauthToken),Si(this,"secret",e.oauthTokenSecret)}Si(this,"providerId",t),Si(this,"signInMethod",n)}function _r(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:on(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Or(t,e){this.Dc=e||[],Ni(this,{providerId:t,isOAuthProvider:!0}),this.yb={},this.cb=(fr(t)||{}).Ma||null,this.$a=null}function Pr(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Vi("argument-error",'SAML provider IDs must be prefixed with "saml."');Or.call(this,t,[])}function Rr(t){Or.call(this,t,hr),this.a=[]}function Dr(){Rr.call(this,"facebook.com")}function Cr(t){if(!t)throw new Vi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Dr).credential(null,e)}function Lr(){Rr.call(this,"github.com")}function xr(t){if(!t)throw new Vi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Lr).credential(null,e)}function Mr(){Rr.call(this,"google.com"),this.ua("profile")}function jr(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new Mr).credential(n,e)}function Ur(){Or.call(this,"twitter.com",cr)}function Vr(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Vi("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Nr("twitter.com",n,"twitter.com")}function Kr(t,e,n){this.a=t,this.c=e,Si(this,"providerId","password"),Si(this,"signInMethod",n===Fr.EMAIL_LINK_SIGN_IN_METHOD?Fr.EMAIL_LINK_SIGN_IN_METHOD:Fr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Fr(){Ni(this,{providerId:"password",isOAuthProvider:!1})}function qr(t,e){if(!(e=Hr(e)))throw new Vi("argument-error","Invalid email link!");return new Kr(t,e,Fr.EMAIL_LINK_SIGN_IN_METHOD)}function Hr(t){var e=Be((t=new Tr(t=Er(t))).a,"oobCode")||null;return"signIn"===(Be(t.a,"mode")||null)&&e?e:null}function Wr(t){if(!(t.Ta&&t.Sa||t.Fa&&t.$))throw new Vi("internal-error");this.a=t,Si(this,"providerId","phone"),Si(this,"signInMethod","phone")}function Br(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ta,code:t.a.Sa}}function Gr(t){try{this.a=t||Lh.auth()}catch(t){throw new Vi("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ni(this,{providerId:"phone",isOAuthProvider:!1})}function Xr(t,e){if(!t)throw new Vi("missing-verification-id");if(!e)throw new Vi("missing-verification-code");return new Wr({Ta:t,Sa:e})}function Jr(t){if(t.temporaryProof&&t.phoneNumber)return new Wr({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return jr(o,n);case"facebook.com":return Cr(n);case"github.com":return xr(n);case"twitter.com":return Vr(n,i);default:return n||i||o||a?a?0==e.indexOf("saml.")?new kr(e,a):new Nr(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Rr(e).credential(o,n,r):null}}catch(t){return null}}function zr(t){if(!t.isOAuthProvider)throw new Vi("invalid-oauth-provider")}function Yr(t,e,n,i,r,o){if(this.b=t,this.c=e||null,this.f=n||null,this.g=i||null,this.h=o||null,this.a=r||null,!this.f&&!this.a)throw new Vi("invalid-auth-event");if(this.f&&this.a)throw new Vi("invalid-auth-event");if(this.f&&!this.g)throw new Vi("invalid-auth-event")}function $r(t){return(t=t||{}).type?new Yr(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Ki(t.error),t.postBody):null}function Zr(){this.b=null,this.a=[]}y(gr,mr),y(br,gr),y(yr,gr),y(wr,gr),y(Ir,gr),kr.prototype.la=function(t){return ka(t,Sr(this))},kr.prototype.b=function(t,e){var n=Sr(this);return n.idToken=e,Sa(t,n)},kr.prototype.f=function(t,e){return Ar(Na(t,Sr(this)),e)},kr.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Nr.prototype.la=function(t){return ka(t,_r(this))},Nr.prototype.b=function(t,e){var n=_r(this);return n.idToken=e,Sa(t,n)},Nr.prototype.f=function(t,e){return Ar(Na(t,_r(this)),e)},Nr.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Or.prototype.Da=function(t){return this.yb=it(t),this},y(Pr,Or),y(Rr,Or),Rr.prototype.ua=function(t){return L(this.a,t)||this.a.push(t),this},Rr.prototype.Eb=function(){return U(this.a)},Rr.prototype.credential=function(t,e,n){if(!t&&!e)throw new Vi("argument-error","credential failed: must provide the ID token and/or the access token.");return new Nr(this.providerId,{idToken:t||null,accessToken:e||null,nonce:n||null},this.providerId)},y(Dr,Rr),Si(Dr,"PROVIDER_ID","facebook.com"),Si(Dr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),y(Lr,Rr),Si(Lr,"PROVIDER_ID","github.com"),Si(Lr,"GITHUB_SIGN_IN_METHOD","github.com"),y(Mr,Rr),Si(Mr,"PROVIDER_ID","google.com"),Si(Mr,"GOOGLE_SIGN_IN_METHOD","google.com"),y(Ur,Or),Si(Ur,"PROVIDER_ID","twitter.com"),Si(Ur,"TWITTER_SIGN_IN_METHOD","twitter.com"),Kr.prototype.la=function(t){return this.signInMethod==Fr.EMAIL_LINK_SIGN_IN_METHOD?ns(t,xa,{email:this.a,oobCode:this.c}):ns(t,Za,{email:this.a,password:this.c})},Kr.prototype.b=function(t,e){return this.signInMethod==Fr.EMAIL_LINK_SIGN_IN_METHOD?ns(t,Ma,{idToken:e,email:this.a,oobCode:this.c}):ns(t,Ga,{idToken:e,email:this.a,password:this.c})},Kr.prototype.f=function(t,e){return Ar(this.la(t),e)},Kr.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Ni(Fr,{PROVIDER_ID:"password"}),Ni(Fr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ni(Fr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Wr.prototype.la=function(t){return t.Ua(Br(this))},Wr.prototype.b=function(t,e){var n=Br(this);return n.idToken=e,ns(t,ts,n)},Wr.prototype.f=function(t,e){var n=Br(this);return n.operation="REAUTH",Ar(t=ns(t,es,n),e)},Wr.prototype.C=function(){var t={providerId:"phone"};return this.a.Ta&&(t.verificationId=this.a.Ta),this.a.Sa&&(t.verificationCode=this.a.Sa),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},Gr.prototype.Ua=function(i,r){var o=this.a.b;return wt(r.verify()).then(function(t){if(!c(t))throw new Vi("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(r.type){case"recaptcha":return(e=o,n={phoneNumber:i,recaptchaToken:t},ns(e,Wa,n)).then(function(t){return"function"==typeof r.reset&&r.reset(),t},function(t){throw"function"==typeof r.reset&&r.reset(),t});default:throw new Vi("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}var e,n})},Ni(Gr,{PROVIDER_ID:"phone"}),Ni(Gr,{PHONE_SIGN_IN_METHOD:"phone"}),Yr.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};var Qr,to=null;function eo(t){var e="unauthorized-domain",n=void 0,i=Ge(t);t=i.b,"chrome-extension"==(i=i.c)?n=V("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=V("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Vi.call(this,e,n)}function no(t,e,n){Vi.call(this,t,n),(t=e||{}).zb&&Si(this,"email",t.zb),t.$&&Si(this,"phoneNumber",t.$),t.credential&&Si(this,"credential",t.credential)}function io(t){if(t.code){var e=t.code||"";0==e.indexOf(Fi)&&(e=e.substring(Fi.length));var n={credential:Jr(t)};if(t.email)n.zb=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Vi(e,t.message||void 0);return new no(e,n,t.message)}return null}function ro(){}function oo(t){return t.c||(t.c=t.b())}function ao(){}function so(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function uo(){}function co(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=m(this.ec,this),this.a.onerror=m(this.Fb,this),this.a.onprogress=m(this.fc,this),this.a.ontimeout=m(this.ic,this)}function ho(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function lo(t,e,n){this.reset(t,e,n,void 0,void 0)}function fo(t){this.f=t,this.b=this.c=this.a=null}function po(t,e){this.name=t,this.value=e}Zr.prototype.subscribe=function(t){var n=this;this.a.push(t),this.b||(this.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=ai("universalLinks.subscribe",h))&&t(null,this.b))},Zr.prototype.unsubscribe=function(e){M(this.a,function(t){return t==e})},y(eo,Vi),y(no,Vi),no.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&st(t,e),t},no.prototype.toJSON=function(){return this.C()},ro.prototype.c=null,y(ao,ro),ao.prototype.a=function(){var t=so(this);return t?new ActiveXObject(t):new XMLHttpRequest},ao.prototype.b=function(){var t={};return so(this)&&(t[0]=!0,t[1]=!0),t},Qr=new ao,y(uo,ro),uo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new co;throw Error("Unsupported browser")},uo.prototype.b=function(){return{}},(t=co.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ec=function(){this.status=200,this.responseText=this.a.responseText,ho(this,4)},t.Fb=function(){this.status=500,this.responseText="",ho(this,4)},t.ic=function(){this.Fb()},t.fc=function(){this.status=200,ho(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},lo.prototype.a=null,lo.prototype.reset=function(t,e,n,i,r){delete this.a},po.prototype.toString=function(){return this.name};var vo=new po("SEVERE",1e3),mo=new po("WARNING",900),go=new po("CONFIG",700),bo=new po("FINE",500);fo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(A("Root logger has no level set."),null)}(this).value)for(a(e)&&(e=e()),t=new lo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var yo,wo={},Io=null;function To(t){var e;if(Io||(Io=new fo(""),(wo[""]=Io).c=go),!(e=wo[t])){e=new fo(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=To(t.substr(0,n))).b||(n.b={}),(n.b[i]=e).a=n,wo[t]=e}return e}function Eo(t,e){t&&t.log(bo,e,void 0)}function Ao(t){this.f=t}function ko(t){_e.call(this),this.i=t,this.readyState=So,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=To("goog.net.FetchXmlHttp")}y(Ao,ro),Ao.prototype.a=function(){return new ko(this.f)},Ao.prototype.b=(yo={},function(){return yo}),y(ko,_e);var So=0;function No(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function _o(t){_e.call(this),this.headers=new Me,this.D=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.m="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Oo,this.v=this.O=!1}(t=ko.prototype).open=function(t,e){if(this.readyState!=So)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,No(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.hc.bind(this),this.Gb.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,No(this)),this.readyState=So},t.hc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,No(this)),this.a&&(this.readyState=3,No(this),this.a&&t.text().then(this.gc.bind(this,t),this.Gb.bind(this))))},t.gc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,No(this))},t.Gb=function(t){var e=this.f;e&&e.log(mo,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,No(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(mo,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(mo,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},y(_o,_e);var Oo="";_o.prototype.b=To("goog.net.XhrIo");var Po=/^https?$/i,Ro=["POST","PUT"];function Do(e,t,n,i,r){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.m+"; newUri="+t);n=n?n.toUpperCase():"GET",e.m=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.D?e.D.a():Qr.a(),e.w=e.D?oo(e.D):oo(Qr),e.a.onreadystatechange=m(e.Jb,e);try{Eo(e.b,Fo(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return Eo(e.b,Fo(e,"Error opening Xhr: "+t.message)),void Lo(e,t)}t=i||"";var o,a=new Me(e.headers);r&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||c(t))R(t,e,void 0);else for(var n=xe(t),i=Le(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(r,function(t,e){a.set(e,t)}),r=function(t){t:{for(var e=Co,n=t.length,i=c(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return e<0?null:c(t)?t.charAt(e):t[e]}(a.U()),i=h.FormData&&t instanceof h.FormData,!L(Ro,n)||r||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{Uo(e),0<e.g&&(e.v=(o=e.a,Ft&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Eo(e.b,Fo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ga,e)):e.u=De(e.Ga,e.g,e)),Eo(e.b,Fo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Eo(e.b,Fo(e,"Send error: "+t.message)),Lo(e,t)}}function Co(t){return"content-type"==t.toLowerCase()}function Lo(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,xo(t),jo(t)}function xo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Mo(e){if(e.c&&void 0!==u)if(e.w[1]&&4==Vo(e)&&2==Ko(e))Eo(e.b,Fo(e,"Local request error detected and ignored"));else if(e.i&&4==Vo(e))De(e.Jb,0,e);else if(e.dispatchEvent("readystatechange"),4==Vo(e)){Eo(e.b,Fo(e,"Request complete")),e.c=!1;try{var t,n=Ko(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(t=i)){var r;if(r=0===n){var o=String(e.m).match(Ve)[1]||null;if(!o&&h.self&&h.self.location){var a=h.self.location.protocol;o=a.substr(0,a.length-1)}r=!Po.test(o?o.toLowerCase():"")}t=r}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<Vo(e)?e.a.statusText:""}catch(t){Eo(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+Ko(e)+"]",xo(e)}}finally{jo(e)}}}function jo(e,t){if(e.a){Uo(e);var n=e.a,i=e.w[0]?o:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=i}catch(t){(e=e.b)&&e.log(vo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Uo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(h.clearTimeout(t.u),t.u=null)}function Vo(t){return t.a?t.a.readyState:0}function Ko(t){try{return 2<Vo(t)?t.a.status:-1}catch(t){return-1}}function Fo(t,e){return e+" ["+t.N+" "+t.m+" "+Ko(t)+"]"}function qo(t,e){this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.m=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Ho(t,e,n){t.a=!0,t.c=n,t.f=!e,Xo(t)}function Wo(t){if(t.a){if(!t.m)throw new Jo(t);t.m=!1}}function Bo(t,e,n,i){t.g.push([e,n,i]),t.a&&Xo(t)}function Go(t){return C(t.g,function(t){return a(t[1])})}function Xo(e){if(e.h&&e.a&&Go(e)){var n=e.h,i=$o[n];i&&(h.clearTimeout(i.a),delete $o[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=i=!1;e.g.length&&!e.i;){var r=e.g.shift(),o=r[0],a=r[1];if(r=r[2],o=e.f?a:o)try{var s=o.call(r||e.u,n);void 0!==s&&(e.f=e.f&&(s==n||s instanceof Error),e.c=n=s),(I(n)||"function"==typeof h.Promise&&n instanceof h.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Go(e)||(i=!0)}}e.c=n,t&&(s=m(e.o,e,!0),t=m(e.o,e,!1),n instanceof qo?(Bo(n,s,t),n.w=!0):n.then(s,t)),i&&(n=new Yo(n),$o[n.a]=n,e.h=n.a)}function Jo(){T.call(this)}function zo(){T.call(this)}function Yo(t){this.a=h.setTimeout(m(this.c,this),0),this.b=t}(t=_o.prototype).Ga=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Eo(this.b,Fo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Eo(this.b,Fo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jo(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),jo(this,!0)),_o.ob.va.call(this)},t.Jb=function(){this.qa||(this.I||this.i||this.f?Mo(this):this.wc())},t.wc=function(){Mo(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Oo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(vo,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return Eo(this.b,"Can not get response: "+t.message),null}},qo.prototype.cancel=function(t){if(this.a)this.c instanceof qo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.v?this.v.call(this.u,this):this.m=!0,this.a||(t=new zo(this),Wo(this),Ho(this,!1,t))}},qo.prototype.o=function(t,e){this.i=!1,Ho(this,t,e)},qo.prototype.D=function(){Wo(this),Ho(this,!0,null)},qo.prototype.then=function(t,e,n){var i,r,o=new dt(function(t,e){i=t,r=e});return Bo(this,i,function(t){t instanceof zo?o.cancel():r(t)}),o.then(t,e,n)},w(qo),y(Jo,T),Jo.prototype.message="Deferred has already fired",Jo.prototype.name="AlreadyCalledError",y(zo,T),zo.prototype.message="Deferred was canceled",zo.prototype.name="CanceledError",Yo.prototype.c=function(){throw delete $o[this.a],this.b};var $o={};function Zo(t){var e,n,i,r=document,o=mn(t),a=document.createElement("SCRIPT"),s={Lb:a,Ga:void 0},u=new qo(Qo,s);return e=window.setTimeout(function(){ta(a,!0);var t=new ia(na,"Timeout reached for loading script "+o);Wo(u),Ho(u,!1,t)},5e3),s.Ga=e,a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(ta(a,!1,e),u.D())},a.onerror=function(){ta(a,!0,e);var t=new ia(ea,"Error while loading script "+o);Wo(u),Ho(u,!1,t)},st(s={},{type:"text/javascript",charset:"UTF-8"}),Rn(a,s),a.src=mn(t),(n=r,(i=(n||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:n.documentElement).appendChild(a),u}function Qo(){if(this&&this.Lb){var t=this.Lb;t&&"SCRIPT"==t.tagName&&ta(t,!0,this.Ga)}}function ta(t,e,n){null!=n&&h.clearTimeout(n),t.onload=o,t.onerror=o,t.onreadystatechange=o,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var ea=0,na=1;function ia(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),T.call(this,n),this.code=t}function ra(t){this.f=t}function oa(t,e,n){if(this.b=t,t=e||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||ua,this.f=it(t.secureTokenHeaders||ca),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||ha,this.a=it(t.firebaseHeaders||la),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==Zn(),!(n=h.XMLHttpRequest||n&&Lh.INTERNAL.node&&Lh.INTERNAL.node.XMLHttpRequest)&&!$n())throw new Vi("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,$n()?this.c=new Ao(self):Qn()?this.c=new ra(n):this.c=new uo}y(ia,T),y(ra,ro),ra.prototype.a=function(){return new this.f},ra.prototype.b=function(){return{}};var aa,sa="idToken",ua=new bi(3e4,6e4),ca={"Content-Type":"application/x-www-form-urlencoded"},ha=new bi(3e4,6e4),la={"Content-Type":"application/json"};function fa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function da(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function pa(t,e,n,i,r,o,a){var s;(t=!((s=ni(s=oi())!=ei?null:(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)&&s<30||Ft&&Yt&&!(9<Yt))||$n()?m(t.o,t):(aa||(aa=new dt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{h[ma]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=gn(va,{onload:ma});Bo(Zo(n),null,function(){e(Error("CORS_UNSUPPORTED"))},void 0)}}(t,e)})),m(t.m,t)))(e,n,i,r,o,a)}oa.prototype.o=function(t,n,e,i,r,o){if($n()&&(void 0===h.fetch||void 0===h.Headers||void 0===h.Request))throw new Vi("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new _o(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}Oe(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Eo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),Pe(a,"ready",function(){s&&clearTimeout(s),Mt(this)}),Pe(a,"timeout",function(){s&&clearTimeout(s),Mt(this),n&&n(null)}),Do(a,t,e,i,r)};var va=pn("https://apis.google.com/js/client.js?onload=%{onload}"),ma="__fcb"+Math.floor(1e6*Math.random()).toString();function ga(t){if(!c(t=t.email)||!Xn.test(t))throw new Vi("invalid-email")}function ba(t){"email"in t&&ga(t)}function ya(t){if(!t[sa])throw new Vi("internal-error")}function wa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Vi("internal-error")}else{if(!t.sessionInfo)throw new Vi("missing-verification-id");if(!t.code)throw new Vi("missing-verification-code")}}oa.prototype.m=function(t,n,i,r,o){var a=this;aa.then(function(){window.gapi.client.setApiKey(a.b);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:i,body:r,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},oa.prototype.Qa=function(){return ns(this,Xa,{})},oa.prototype.pb=function(t,e){return ns(this,Ba,{idToken:t,email:e})},oa.prototype.qb=function(t,e){return ns(this,Ga,{idToken:t,password:e})};var Ia={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ta(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Vi("internal-error")}function Ea(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(sn(t=new nn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Aa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=io(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=io(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=io(t)):t.errorMessage&&(e=is(t.errorMessage)),e)throw e;if(!t[sa])throw new Vi("internal-error")}function ka(t,e){return e.returnIdpCredential=!0,ns(t,Ja,e)}function Sa(t,e){return e.returnIdpCredential=!0,ns(t,Ya,e)}function Na(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ns(t,za,e)}function _a(t){if(!t.oobCode)throw new Vi("invalid-action-code")}(t=oa.prototype).rb=function(t,i){var r={idToken:t},o=[];return et(Ia,function(t,e){var n=i[e];null===n?o.push(t):e in i&&(r[e]=n)}),o.length&&(r.deleteAttribute=o),ns(this,Ba,r)},t.kb=function(t,e){return st(t={requestType:"PASSWORD_RESET",email:t},e),ns(this,Ka,t)},t.lb=function(t,e){return st(t={requestType:"EMAIL_SIGNIN",email:t},e),ns(this,Ua,t)},t.jb=function(t,e){return st(t={requestType:"VERIFY_EMAIL",idToken:t},e),ns(this,Va,t)},t.Ua=function(t){return ns(this,Qa,t)},t.Za=function(t,e){return ns(this,Ha,{oobCode:t,newPassword:e})},t.Ja=function(t){return ns(this,Pa,{oobCode:t})},t.Wa=function(t){return ns(this,Oa,{oobCode:t})};var Oa={endpoint:"setAccountInfo",B:_a,da:"email"},Pa={endpoint:"resetPassword",B:_a,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Vi("internal-error")}},Ra={endpoint:"signupNewUser",B:function(t){if(ga(t),!t.password)throw new Vi("weak-password")},J:ya,R:!0},Da={endpoint:"createAuthUri"},Ca={endpoint:"deleteAccount",T:["idToken"]},La={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(t){if(!f(t.deleteProvider))throw new Vi("internal-error")}},xa={endpoint:"emailLinkSignin",T:["email","oobCode"],B:ga,J:ya,R:!0},Ma={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:ga,J:ya,R:!0},ja={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Vi("internal-error");ga(t)},da:"email"},Va={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Vi("internal-error")},da:"email"},Ka={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Vi("internal-error");ga(t)},da:"email"},Fa={ub:!0,endpoint:"getProjectConfig",Ib:"GET"},qa={ub:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Vi("internal-error")}},Ha={endpoint:"resetPassword",B:_a,da:"email"},Wa={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Ba={endpoint:"setAccountInfo",T:["idToken"],B:ba,R:!0},Ga={endpoint:"setAccountInfo",T:["idToken"],B:function(t){if(ba(t),!t.password)throw new Vi("weak-password")},J:ya,R:!0},Xa={endpoint:"signupNewUser",J:ya,R:!0},Ja={endpoint:"verifyAssertion",B:Ta,Oa:Ea,J:Aa,R:!0},za={endpoint:"verifyAssertion",B:Ta,Oa:Ea,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Vi("user-not-found");if(t.errorMessage)throw is(t.errorMessage);if(!t[sa])throw new Vi("internal-error")},R:!0},Ya={endpoint:"verifyAssertion",B:function(t){if(Ta(t),!t.idToken)throw new Vi("internal-error")},Oa:Ea,J:Aa,R:!0},$a={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new Vi("invalid-custom-token")},J:ya,R:!0},Za={endpoint:"verifyPassword",B:function(t){if(ga(t),!t.password)throw new Vi("wrong-password")},J:ya,R:!0},Qa={endpoint:"verifyPhoneNumber",B:wa,J:ya},ts={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new Vi("internal-error");wa(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",io(t);ya(t)}},es={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:wa,J:ya};function ns(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return!1}return!0}(n,e.T))return It(new Vi("internal-error"));var i,r=e.Ib||"POST";return wt(n).then(e.B).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,i,r,o,n){var a=Ge(t.g+e);We(a,"key",t.b),n&&We(a,"cb",b().toString());var s="GET"==i;if(s)for(var u in r)r.hasOwnProperty(u)&&We(a,u,r[u]);return new dt(function(e,n){pa(t,a.toString(),function(t){t?t.error?n(rs(t,o||{})):e(t):n(new Vi("network-request-failed"))},i,s?void 0:xn(di(r)),t.a,t.h.get())})}(t,e.endpoint,r,n,e.Xb,e.ub||!1)}).then(function(t){return i=t,e.Oa?e.Oa(n,i):i}).then(e.J).then(function(){if(!e.da)return i;if(!(e.da in i))throw new Vi("internal-error");return i[e.da]})}function is(t){return rs({error:{errors:[{message:t}],code:400,message:t}})}function rs(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new Vi(i[n]):null)return n;for(var r in n=t.error&&t.error.message||"",st(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new Vi(i[r],e);return!e&&t&&(e=fi(t)),new Vi("internal-error",e)}function os(t){var o;this.b=t,this.a=null,this.fb=(o=this,(cs||(cs=new dt(function(t,e){function n(){gi(),ai("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){gi(),e(Error("Network Error"))},timeout:ss.get()})}if(ai("gapi.iframes.Iframe"))t();else if(ai("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();h[i]=function(){ai("gapi.load")?n():e(Error("Network Error"))},wt(Zo(i=gn(as,{onload:i}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw cs=null,t}))).then(function(){return new dt(function(i,r){ai("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:ai("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),i()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){r(Error("Network Error"))},us.get());t.ping(e).then(e,function(){r(Error("Network Error"))})})})}))}var as=pn("https://apis.google.com/js/api.js?onload=%{onload}"),ss=new bi(3e4,6e4),us=new bi(5e3,15e3),cs=null;function hs(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Xe(this.i,"/__/auth/iframe"),We(this.a,"apiKey",this.g),We(this.a,"appName",this.h),this.b=null,this.c=[]}function ls(t,e,n,i,r){this.o=t,this.m=e,this.c=n,this.l=i,this.h=this.g=this.i=null,this.a=r,this.f=null}function fs(t){try{return Lh.app(t).auth().ya()}catch(t){return[]}}function ds(t,e,n,i,r){this.m=t,this.f=e,this.b=n,this.c=i||null,this.h=r||null,this.o=this.u=this.v=null,this.g=[],this.l=this.a=null}function ps(t){var e,s=Fn();return(e=t,ns(e,Fa,{}).then(function(t){return t.authorizedDomains||[]})).then(function(t){t:{var e=Ge(s),n=e.c;e=e.b;for(var i=0;i<t.length;i++){var r=t[i],o=e,a=n;if(o=0==r.indexOf("chrome-extension://")?Ge(r).b==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(Gn.test(r)?o==r:(r=r.split(".").join("\\."),new RegExp("^(.+\\."+r+"|"+r+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new eo(Fn())})}function vs(r){return r.l||(r.l=Jn().then(function(){if(!r.u){var t=r.c,e=r.h,n=fs(r.b),i=new hs(r.m,r.f,r.b);i.f=t,i.b=e,i.c=U(n||[]),r.u=i.toString()}r.i=new os(r.u),function(i){if(!i.i)throw Error("IfcHandler must be initialized!");t=i.i,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=$r(t.authEvent),e=0;e<i.g.length;e++)n=i.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",wt(e)}return e.status="ERROR",wt(e)},t.fb.then(function(){t.a.register("authEvent",e,ai("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))});var t,e}(r)})),r.l}function ms(t){return t.o||(t.v=t.c?ri(t.c,fs(t.b)):null,t.o=new oa(t.f,ur(t.h),t.v)),t.o}function gs(t,e,n,i,r,o,a,s,u,c){return(t=new ls(t,e,n,i,r)).i=o,t.g=a,t.h=s,t.b=it(u||null),t.f=c,t.toString()}function bs(t){if(this.a=t||Lh.INTERNAL.reactNative&&Lh.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Vi("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ys(t){this.b=t,this.a={},this.c=m(this.f,this)}hs.prototype.toString=function(){return this.f?We(this.a,"v",this.f):an(this.a.a,"v"),this.b?We(this.a,"eid",this.b):an(this.a.a,"eid"),this.c.length?We(this.a,"fw",this.c.join(",")):an(this.a.a,"fw"),this.a.toString()},ls.prototype.toString=function(){var t=Xe(this.o,"/__/auth/handler");if(We(t,"apiKey",this.m),We(t,"appName",this.c),We(t,"authType",this.l),this.a.isOAuthProvider){var e=this.a;try{var n=Lh.app(this.c).auth().ea()}catch(t){n=null}for(var i in e.$a=n,We(t,"providerId",this.a.providerId),n=di((e=this.a).yb))n[i]=n[i].toString();i=e.Dc,n=it(n);for(var r=0;r<i.length;r++){var o=i[r];o in n&&delete n[o]}e.cb&&e.$a&&!n[e.cb]&&(n[e.cb]=e.$a),nt(n)||We(t,"customParameters",fi(n))}if("function"==typeof this.a.Eb&&((e=this.a.Eb()).length&&We(t,"scopes",e.join(","))),this.i?We(t,"redirectUrl",this.i):an(t.a,"redirectUrl"),this.g?We(t,"eventId",this.g):an(t.a,"eventId"),this.h?We(t,"v",this.h):an(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Be(t,a)&&We(t,a,this.b[a]);return this.f?We(t,"eid",this.f):an(t.a,"eid"),(a=fs(this.c)).length&&We(t,"fw",a.join(",")),t.toString()},(t=ds.prototype).Ea=function(e,n,t){var i=new Vi("popup-closed-by-user"),r=new Vi("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){var t,i;(t=o,i={type:"webStorageSupport"},vs(t).then(function(){return e=t.i,n=i,e.fb.then(function(){return new dt(function(t){e.a.send(n.type,n,t,ai("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then(function(t){t||(e&&Wn(e),n(r),a=!0)})}).s(function(){}).then(function(){if(!a)return n=e,new dt(function(e){return function t(){Ce(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!a)return Ce(t).then(function(){n(i)})})},t.Mb=function(){var t=oi();return!li(t)&&!mi(t)},t.Hb=function(){return!1},t.Cb=function(e,t,n,i,r,o,a){if(!e)return It(new Vi("popup-blocked"));if(a&&!li())return this.ga().s(function(t){Wn(e),r(t)}),i(),wt();this.a||(this.a=ps(ms(this)));var s=this;return this.a.then(function(){var t=s.ga().s(function(t){throw Wn(e),r(t),t});return i(),t}).then(function(){(zr(n),a)||qn(gs(s.m,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=ps(ms(this)));var i=this;return this.a.then(function(){zr(e),qn(gs(i.m,i.f,i.b,t,e,Fn(),n,i.c,void 0,i.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ga=function(){var t=this;return vs(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new Vi("network-request-failed")})},t.Qb=function(){return!0},t.wa=function(t){this.g.push(t)},t.Ka=function(e){M(this.g,function(t){return t==e})},(t=bs.prototype).get=function(t){return wt(this.a.getItem(t)).then(function(t){return t&&pi(t)})},t.set=function(t,e){return wt(this.a.setItem(t,fi(e)))},t.P=function(t){return wt(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var ws,Is=[];function Ts(t){this.a=t}function Es(t){this.c=t,this.b=!1,this.a=[]}function As(i,t,e,n){var r,o,a,s,u=e||{},c=null;if(i.b)return It(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new dt(function(e,n){l?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===r&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},i.a.push(c),l.port1.addEventListener("message",o),i.c.postMessage({eventType:t,eventId:r,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return ks(i,c),t}).s(function(t){throw ks(i,c),t})}function ks(t,e){if(e){var n=e.messageChannel,i=e.onMessage;n&&(n.port1.removeEventListener("message",i),n.port1.close()),M(t.a,function(t){return t==e})}}function Ss(){if(!Os())throw new Vi("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=h.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.u=!1,this.h=null;var t,i=this;$n()&&self?(this.l=function(){var e=$n()?self:null;if(R(Is,function(t){t.b==e&&(n=t)}),!n){var n=new ys(e);Is.push(n)}return n}(),this.l.subscribe("keyChanged",function(t,n){return Ls(i).then(function(e){return 0<e.length&&R(i.a,function(t){t(e)}),{keyProcessed:L(e,n.key)}})}),this.l.subscribe("ping",function(){return wt(["keyChanged"])})):(t=h.navigator,t&&t.serviceWorker?wt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):wt(null)).then(function(t){(i.h=t)&&(i.g=new Es(new Ts(t)),As(i.g,"ping",null,!0).then(function(t){t[0].fulfilled&&L(t[0].value,"keyChanged")&&(i.u=!0)}).s(function(){}))})}function Ns(r){return new dt(function(e,n){var t=r.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var i;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(i=r,new dt(function(t,e){var n=i.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})).then(function(){return Ns(r)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function _s(t){return t.o||(t.o=Ns(t)),t.o}function Os(){try{return!!h.indexedDB}catch(t){return!1}}function Ps(t){return t.objectStore("firebaseLocalStorage")}function Rs(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ds(t){return new dt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cs(t,e){return t.g&&t.h&&((n=h.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?As(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):wt();var n}function Ls(i){return _s(i).then(function(t){var r=Ps(Rs(t,!1));return r.getAll?Ds(r.getAll()):new dt(function(e,n){var i=[],t=r.openCursor();t.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t.continue()):e(i)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==i.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var i,r=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?r.push(i):"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(i.c,e),i.c=e}return n})}function xs(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Ms(t){var i=this,r=null;this.a=[],this.type="indexedDB",this.c=t,this.b=wt().then(function(){if(Os()){var e=vi(),n="__sak"+e;return ws||(ws=new Ss),(r=ws).set(n,e).then(function(){return r.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return r.P(n)}).then(function(){return r}).s(function(){return i.c})}return i.c}).then(function(t){return i.type=t.type,t.Y(function(e){R(i.a,function(t){t(e)})}),t})}function js(){this.a={},this.type="inMemory"}function Us(){if(!function(){var t="Node"==Zn();if(!(t=Vs()||t&&Lh.INTERNAL.node&&Lh.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Zn())throw new Vi("internal-error","The LocalStorage compatibility library was not found.");throw new Vi("web-storage-unsupported")}this.a=Vs()||Lh.INTERNAL.node.localStorage,this.type="localStorage"}function Vs(){try{var t=h.localStorage,e=vi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ks(){this.type="nullStorage"}function Fs(){if(!function(){var t="Node"==Zn();if(!(t=qs()||t&&Lh.INTERNAL.node&&Lh.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Zn())throw new Vi("internal-error","The SessionStorage compatibility library was not found.");throw new Vi("web-storage-unsupported")}this.a=qs()||Lh.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qs(){try{var t=h.sessionStorage,e=vi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hs(){var t={};t.Browser=Gs,t.Node=Xs,t.ReactNative=Js,t.Worker=zs,this.a=t[Zn()]}ys.prototype.f=function(n){var i=n.data.eventType,r=n.data.eventId,t=this.a[i];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:r,eventType:i,response:null});var e=[];R(t,function(t){e.push(wt().then(function(){return t(n.origin,n.data.data)}))}),Et(e).then(function(t){var e=[];R(t,function(t){e.push({fulfilled:t.Db,value:t.value,reason:t.reason?t.reason.message:void 0})}),R(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:e})})}},ys.prototype.subscribe=function(t,e){nt(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},ys.prototype.unsubscribe=function(t,e){void 0!==this.a[t]&&e?(M(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],nt(this.a)&&this.b.removeEventListener("message",this.c)},Ts.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Es.prototype.close=function(){for(;0<this.a.length;)ks(this,this.a[0]);this.b=!0},(t=Ss.prototype).set=function(n,i){var r,o=!1,a=this;return _s(this).then(function(t){return Ds((t=Ps(Rs(r=t,!0))).get(n))}).then(function(t){var e=Ps(Rs(r,!0));return t?(t.value=i,Ds(e.put(t))):(a.b++,o=!0,(t={}).fbase_key=n,t.value=i,Ds(e.add(t)))}).then(function(){return a.c[n]=i,Cs(a,n)}).ia(function(){o&&a.b--})},t.get=function(e){return _s(this).then(function(t){return Ds(Ps(Rs(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.P=function(e){var n=!1,i=this;return _s(this).then(function(t){return n=!0,i.b++,Ds(Ps(Rs(t,!0)).delete(e))}).then(function(){return delete i.c[e],Cs(i,e)}).ia(function(){n&&i.b--})},t.Y=function(t){var n;0==this.a.length&&(xs(n=this),function e(){n.f=setTimeout(function(){n.i=Ls(n).then(function(e){0<e.length&&R(n.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ca=function(e){M(this.a,function(t){return t==e}),0==this.a.length&&xs(this)},(t=Ms.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.P=function(e){return this.b.then(function(t){return t.P(e)})},t.Y=function(t){this.a.push(t)},t.ca=function(e){M(this.a,function(t){return t==e})},(t=js.prototype).get=function(t){return wt(this.a[t])},t.set=function(t,e){return this.a[t]=e,wt()},t.P=function(t){return delete this.a[t],wt()},t.Y=function(){},t.ca=function(){},(t=Us.prototype).get=function(t){var e=this;return wt().then(function(){return pi(e.a.getItem(t))})},t.set=function(e,n){var i=this;return wt().then(function(){var t=fi(n);null===t?i.P(e):i.a.setItem(e,t)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(t){h.window&&me(h.window,"storage",t)},t.ca=function(t){h.window&&ye(h.window,"storage",t)},(t=Ks.prototype).get=function(){return wt(null)},t.set=function(){return wt()},t.P=function(){return wt()},t.Y=function(){},t.ca=function(){},(t=Fs.prototype).get=function(t){var e=this;return wt().then(function(){return pi(e.a.getItem(t))})},t.set=function(e,n){var i=this;return wt().then(function(){var t=fi(n);null===t?i.P(e):i.a.setItem(e,t)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var Ws,Bs,Gs={A:Us,Ra:Fs},Xs={A:Us,Ra:Fs},Js={A:bs,Ra:Ks},zs={A:Us,Ra:Ks},Ys={Zc:"local",NONE:"none",ad:"session"};function $s(){var t=!(mi(oi())||!Yn()),e=li(),n=si();this.o=t,this.h=e,this.l=n,this.a={},Ws||(Ws=new Hs),t=Ws;try{this.g=!Kn()&&Ii()||!h.indexedDB?new t.a.A:new Ms($n()?new js:new t.a.A)}catch(t){this.g=new js,this.h=!0}try{this.i=new t.a.Ra}catch(t){this.i=new js}this.m=new js,this.f=m(this.Pb,this),this.b={}}function Zs(){return Bs||(Bs=new $s),Bs}function Qs(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function tu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function eu(t,e,n){return n=tu(e,n),"local"==e.A&&(t.b[n]=null),Qs(t,e.A).P(n)}function nu(t){t.c&&(clearInterval(t.c),t.c=null)}function iu(t){this.a=t,this.b=Zs()}(t=$s.prototype).get=function(t,e){return Qs(this,t.A).get(tu(t,e))},t.set=function(e,t,n){var i=tu(e,n),r=this,o=Qs(this,e.A);return o.set(i,t).then(function(){return o.get(i)}).then(function(t){"local"==e.A&&(r.b[i]=t)})},t.addListener=function(t,e,n){var i;t=tu(t,e),this.l&&(this.b[t]=h.localStorage.getItem(t)),nt(this.a)&&(Qs(this,"local").Y(this.f),this.h||(Kn()||!Ii())&&h.indexedDB||!this.l||(nu(i=this),i.c=setInterval(function(){for(var t in i.a){var e=h.localStorage.getItem(t),n=i.b[t];e!=n&&(i.b[t]=e,e=new oe({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),i.Pb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tu(t,e),this.a[t]&&(M(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),nt(this.a)&&(Qs(this,"local").ca(this.f),nu(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=h.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.Xa(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Qs(this,"local").ca(this.f):nu(this),this.o)if(n=h.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?h.localStorage.setItem(e,i):h.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===h.localStorage.getItem(e)||(o.b[e]=h.localStorage.getItem(e),o.Xa(e))},Ft&&Yt&&10==Yt&&h.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else R(t,m(this.Xa,this))},t.Xa=function(t){this.a[t]&&R(this.a[t],function(t){t()})};var ru,ou={name:"authEvent",A:"local"};function au(){this.a=Zs()}function su(t,e){this.b=uu,this.f=h.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=h.Int32Array?new Int32Array(64):Array(64),void 0!==ru||(ru=h.Int32Array?new Int32Array(vu):vu),this.reset()}y(su,function(){this.b=-1});for(var uu=64,cu=uu-1,hu=[],lu=0;lu<cu;lu++)hu[lu]=0;var fu=j(128,hu);function du(t){for(var e=t.f,n=t.l,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;e<64;e++){r=0|n[e-15],i=0|n[e-2];var o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|ru[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=r,r=i,i=a+f|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function pu(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if(c(e))for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(du(t),r=0);else{if(!d(e))throw Error("message must be string or array");for(;i<n;){var o=e[i++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[r++]=o,r==t.b&&(du(t),r=0)}}t.c=r,t.g+=n}su.prototype.reset=function(){this.g=this.c=0,this.a=h.Int32Array?new Int32Array(this.h):U(this.h)};var vu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mu(){su.call(this,8,gu)}y(mu,su);var gu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function bu(t,e,n,i,r){this.m=t,this.i=e,this.l=n,this.o=i||null,this.u=r||null,this.h=e+":"+n,this.v=new au,this.g=new iu(this.h),this.f=null,this.b=[],this.a=this.c=null}function yu(t){return new Vi("invalid-cordova-configuration",t)}function wu(t){var e=new mu;pu(e,t),t=[];var n=8*e.g;e.c<56?pu(e,fu,56-e.c):pu(e,fu,e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(du(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return D(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function Iu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Tu(i){return i.f||(i.f=i.ga().then(function(){return new dt(function(n){i.wa(function t(e){return n(e),i.Ka(t),!1}),function(r){function e(i){t=!0,n&&n.cancel(),Eu(r).then(function(t){var e=o;if(t&&i&&i.url){var n=null;-1!=(e=Er(i.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=pi(Be(n=Ge(e),"firebaseError")||null))?Ki(n):null)?new Yr(t.b,t.c,null,null,n):new Yr(t.b,t.c,e,t.g)),e=n||o}Iu(r,e)})}var o=new Yr("unknown",null,null,null,new Vi("no-auth-event")),t=!1,n=Ce(500).then(function(){return Eu(r).then(function(){t||Iu(r,o)})}),i=h.handleOpenURL;h.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ai("BuildInfo.packageName",h).toLowerCase()+"://")&&e({url:t}),"function"==typeof i)try{i(t)}catch(t){console.error(t)}},to||(to=new Zr),to.subscribe(e)}(i)})})),i.f}function Eu(e){var t,n=null;return(t=e.g,t.b.get(ou,t.a).then(function(t){return $r(t)})).then(function(t){return n=t,eu((t=e.g).b,ou,t.a)}).then(function(){return n})}function Au(t){this.a=t,this.b=Zs()}(t=bu.prototype).ga=function(){return this.za?this.za:this.za=(zn(void 0)?Jn().then(function(){return new dt(function(t,e){var n=h.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):It(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof ai("universalLinks.subscribe",h))throw yu("cordova-universal-links-plugin-fix is not installed");if(void 0===ai("BuildInfo.packageName",h))throw yu("cordova-plugin-buildinfo is not installed");if("function"!=typeof ai("cordova.plugins.browsertab.openUrl",h))throw yu("cordova-plugin-browsertab is not installed");if("function"!=typeof ai("cordova.InAppBrowser.open",h))throw yu("cordova-plugin-inappbrowser is not installed")},function(){throw new Vi("cordova-not-ready")})},t.Ea=function(t,e){return e(new Vi("operation-not-supported-in-this-environment")),wt()},t.Cb=function(){return It(new Vi("operation-not-supported-in-this-environment"))},t.Qb=function(){return!1},t.Mb=function(){return!0},t.Hb=function(){return!0},t.Ca=function(t,e,n){if(this.c)return It(new Vi("redirect-operation-pending"));var i=this,r=h.document,o=null,a=null,s=null,u=null;return this.c=wt().then(function(){return zr(e),Tu(i)}).then(function(){return function(n,t,e,i){var r=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),o=new Yr(t,i,null,r,new Vi("no-auth-event")),a=ai("BuildInfo.packageName",h);if("string"!=typeof a)throw new Vi("invalid-cordova-configuration");var s=ai("BuildInfo.displayName",h),u={};if(oi().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!oi().toLowerCase().match(/android/))return It(new Vi("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),r=wu(r),u.sessionId=r;var c=gs(n.m,n.i,n.l,t,e,null,i,n.o,u,n.u);return n.ga().then(function(){var t=n.h;return n.v.a.set(ou,o.C(),t)}).then(function(){var t=ai("cordova.plugins.browsertab.isAvailable",h);if("function"!=typeof t)throw new Vi("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=ai("cordova.plugins.browsertab.openUrl",h)))throw new Vi("invalid-cordova-configuration");e(c)}else{if("function"!=typeof(e=ai("cordova.InAppBrowser.open",h)))throw new Vi("invalid-cordova-configuration");t=!(!(t=oi()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),n.a=e(c,t?"_blank":"_system","location=yes")}})})}(i,t,e,n)}).then(function(){return new dt(function(e,t){a=function(){var t=ai("cordova.plugins.browsertab.close",h);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.wa(a),s=function(){o||(o=Ce(2e3).then(function(){t(new Vi("redirect-cancelled-by-user"))}))},u=function(){yi()&&s()},r.addEventListener("resume",s,!1),oi().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",u,!1)}).s(function(t){return Eu(i).then(function(){throw t})})}).ia(function(){s&&r.removeEventListener("resume",s,!1),u&&r.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&i.Ka(a),i.c=null})},t.wa=function(e){this.b.push(e),Tu(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Yr("unknown",null,null,null,new Vi("no-auth-event")),e(t))})},t.Ka=function(e){M(this.b,function(t){return t==e})};var ku={name:"pendingRedirect",A:"session"};function Su(t){return eu(t.b,ku,t.a)}function Nu(t,e,n){this.u=t,this.l=e,this.m=n,this.h=[],this.f=!1,this.i=m(this.bb,this),this.b=new ju,this.o=new Fu,this.g=new Au(this.l+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.o,this.c.linkViaPopup=this.o,this.c.reauthViaPopup=this.o,this.a=_u(this.u,this.l,this.m,ar)}function _u(t,e,n,i){var r=Lh.SDK_VERSION||null;return zn()?new bu(t,e,n,r,i):new ds(t,e,n,r,i)}function Ou(e){e.f||(e.f=!0,e.a.wa(e.i));var n=e.a;return e.a.ga().s(function(t){throw e.a==n&&e.reset(),t})}function Pu(n){n.a.Mb()&&Ou(n).s(function(t){var e=new Yr("unknown",null,null,null,new Vi("operation-not-supported-in-this-environment"));Lu(t)&&n.bb(e)}),n.a.Hb()||Uu(n.b)}(t=Nu.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=_u(this.u,this.l,this.m)},t.Ya=function(){this.b.Ya()},t.subscribe=function(t){if(L(this.h,t)||this.h.push(t),!this.f){var n=this;(e=this.g,e.b.get(ku,e.a).then(function(t){return"pending"==t})).then(function(t){t?Su(n.g).then(function(){Ou(n).s(function(t){var e=new Yr("unknown",null,null,null,new Vi("operation-not-supported-in-this-environment"));Lu(t)&&n.bb(e)})}):Pu(n)}).s(function(){Pu(n)})}var e},t.unsubscribe=function(e){M(this.h,function(t){return t==e})},t.bb=function(t){if(!t)throw new Vi("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.vb(t.b,t.c)){(e=this.c[t.b])&&e.h(t,i),e=!0;break}}return Uu(this.b),e};var Ru=new bi(2e3,1e4),Du=new bi(3e4,6e4);function Cu(t,e,n,i,r,o){return t.a.Cb(e,n,i,function(){t.f||(t.f=!0,t.a.wa(t.i))},function(){t.reset()},r,o)}function Lu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}Nu.prototype.fa=function(){return this.b.fa()},Nu.prototype.Ca=function(t,e,n){var i,r,o=this;return(r=this.g,r.b.set(ku,"pending",r.a)).then(function(){return o.a.Ca(t,e,n).s(function(t){if(Lu(t))throw new Vi("operation-not-supported-in-this-environment");return i=t,Su(o.g).then(function(){throw i})}).then(function(){return o.a.Qb()?new dt(function(){}):Su(o.g).then(function(){return o.fa()}).then(function(){}).s(function(){})})})},Nu.prototype.Ea=function(e,n,t,i){return this.a.Ea(t,function(t){e.ha(n,null,t,i)},Ru.get())};var xu={};function Mu(t,e,n){var i=e+":"+n;return xu[i]||(xu[i]=new Nu(t,e,n)),xu[i]}function ju(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Uu(t){t.g||(t.g=!0,Ku(t,!1,null,null))}function Vu(t,e){if(t.b=function(){return wt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Ku(t,e,n,i){e?i?function(t,e){if(t.b=function(){return It(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):Vu(t,n):Vu(t,{user:null}),t.f=[],t.c=[]}function Fu(){}function qu(){this.sb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.sb},set:function(t){this.sb=t},enumerable:!1})}function Hu(t,e){this.a=e,Si(this,"verificationId",t)}function Wu(t,e,n,i){return new Gr(t).Ua(e,n).then(function(t){return new Hu(t,i)})}function Bu(t){var e=or(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Vi("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ni(this,{token:t,expirationTime:wi(1e3*e.exp),authTime:wi(1e3*e.auth_time),issuedAtTime:wi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Gu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Xu(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Ju(t){this.f=t,this.b=this.a=null,this.c=0}function zu(t,e){var n=e[sa],i=e.refreshToken;e=Yu(e.expiresIn),t.b=n,t.c=e,t.a=i}function Yu(t){return b()+1e3*parseInt(t,10)}function $u(e,t){return(i=e.f,r=t,new dt(function(e,n){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?pa(i,i.i+"?key="+encodeURIComponent(i.b),function(t){t?t.error?n(rs(t)):t.access_token&&t.refresh_token?e(t):n(new Vi("internal-error")):n(new Vi("network-request-failed"))},"POST",on(r).toString(),i.f,i.l.get()):n(new Vi("internal-error"))})).then(function(t){return e.b=t.access_token,e.c=Yu(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var i,r}function Zu(t,e){this.a=t||null,this.b=e||null,Ni(this,{lastSignInTime:wi(e||null),creationTime:wi(t||null)})}function Qu(t,e,n,i,r,o){Ni(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function tc(t,e){for(var n in re.call(this,t),e)this[n]=e[n]}function ec(t,e,n){var i;this.G=[],this.m=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=Lh.SDK_VERSION?ri(Lh.SDK_VERSION):null,this.b=new oa(this.m,ur(ar),t),this.h=new Ju(this.b),uc(this,e[sa]),zu(this.h,e),Si(this,"refreshToken",this.h.a),lc(this,n||{}),_e.call(this),this.I=!1,this.u&&ui()&&(this.a=Mu(this.u,this.m,this.o)),this.N=[],this.i=null,this.w=(i=this,new Gu(function(){return i.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=i.h.c-b()-3e5;return 0<t?t:0})),this.V=m(this.Ha,this);var r=this;this.ka=null,this.ta=function(t){r.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){ic(r,t.c)},this.W=null}function nc(t,e){t.X&&ye(t.X,"languageCodeChanged",t.ta),(t.X=e)&&me(e,"languageCodeChanged",t.ta)}function ic(t,e){t.O=e,da(t.b,Lh.SDK_VERSION?ri(Lh.SDK_VERSION,t.O):null)}function rc(t,e){t.W&&ye(t.W,"frameworkChanged",t.sa),(t.W=e)&&me(e,"frameworkChanged",t.sa)}function oc(e){try{return Lh.app(e.o).auth()}catch(t){throw new Vi("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.o+"'!")}}function ac(t){t.D||t.w.b||(t.w.start(),ye(t,"tokenChanged",t.V),me(t,"tokenChanged",t.V))}function sc(t){ye(t,"tokenChanged",t.V),t.w.stop()}function uc(t,e){t.ra=e,Si(t,"_lat",e)}function cc(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return Et(e).then(function(){return t})}function hc(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function lc(t,e){Ni(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new Zu(e.createdAt,e.lastLoginAt),providerData:[]})}function fc(){}function dc(t){return wt().then(function(){if(t.D)throw new Vi("app-deleted")})}function pc(t){return D(t.providerData,function(t){return t.providerId})}function vc(t,e){e&&(mc(t,e.providerId),t.providerData.push(e))}function mc(t,e){M(t.providerData,function(t){return t.providerId==e})}function gc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Si(t,e,n)}function bc(e,t){var n,i,r;e!=t&&(Ni(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?Si(e,"metadata",new Zu((r=t.metadata).a,r.b)):Si(e,"metadata",new Zu),R(t.providerData,function(t){vc(e,t)}),n=e.h,i=t.h,n.b=i.b,n.a=i.a,n.c=i.c,Si(e,"refreshToken",e.h.a))}function yc(r){return r.F().then(function(t){var e,n,i=r.isAnonymous;return(e=r,n=t,ns(e.b,ja,{idToken:n}).then(m(e.xc,e))).then(function(){return i||gc(r,"isAnonymous",!1),t})})}function wc(t,e){e[sa]&&t.ra!=e[sa]&&(zu(t.h,e),t.dispatchEvent(new tc("tokenChanged")),uc(t,e[sa]),gc(t,"refreshToken",t.h.a))}function Ic(t,e){return yc(t).then(function(){if(L(pc(t),e))return cc(t).then(function(){throw new Vi("provider-already-linked")})})}function Tc(t,e,n){return _i({user:t,credential:Jr(e),additionalUserInfo:e=dr(e),operationType:n})}function Ec(t,e){return wc(t,e),t.reload().then(function(){return t})}function Ac(n,i,t,e,r){if(!ui())return It(new Vi("operation-not-supported-in-this-environment"));if(n.i&&!r)return It(n.i);var o=fr(t.providerId),a=vi(n.uid+":::"),s=null;(!li()||Yn())&&n.u&&t.isOAuthProvider&&(s=gs(n.u,n.m,n.o,i,t,null,a,Lh.SDK_VERSION||null));var u=Bn(s,o&&o.Ba,o&&o.Aa);return e=e().then(function(){if(Sc(n),!r)return n.F().then(function(){})}).then(function(){return Cu(n.a,u,i,t,a,!!s)}).then(function(){return new dt(function(t,e){n.ha(i,null,new Vi("cancelled-popup-request"),n.g||null),n.f=t,n.v=e,n.g=a,n.c=n.a.Ea(n,i,u,a)})}).then(function(t){return u&&Wn(u),t?_i(t):null}).s(function(t){throw u&&Wn(u),t}),Nc(n,e,r)}function kc(e,t,n,i,r){if(!ui())return It(new Vi("operation-not-supported-in-this-environment"));if(e.i&&!r)return It(e.i);var o=null,a=vi(e.uid+":::");return i=i().then(function(){if(Sc(e),!r)return e.F().then(function(){})}).then(function(){return e.aa=a,cc(e)}).then(function(t){return e.ba&&(t=(t=e.ba).b.set(Pc,e.C(),t.a)),t}).then(function(){return e.a.Ca(t,n,a)}).s(function(t){if(o=t,e.ba)return Rc(e.ba);throw o}).then(function(){if(o)throw o}),Nc(e,i,r)}function Sc(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Vi("internal-error");throw new Vi("auth-domain-config-required")}}function Nc(t,e,n){var i,r,o,a=(r=e,o=n,(i=t).i&&!o?(r.cancel(),It(i.i)):r.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(i.i||i.dispatchEvent(new tc("userInvalidated")),i.i=t),t}));return t.G.push(a),a.ia(function(){x(t.G,a)}),a}function _c(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[sa]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-b())/1e3;var i=new ec(e,n,t);return t.providerData&&R(t.providerData,function(t){t&&vc(i,_i(t))}),t.redirectEventId&&(i.aa=t.redirectEventId),i}function Oc(t){this.a=t,this.b=Zs()}ju.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ju.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,i=t.c,r=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!r&&!o),"unknown"!=n||r||o?t.a?(Ku(this,!0,null,t.a),wt()):e.xa(n,i)?function(e,t,n){n=n.xa(t.b,t.c);var i=t.f,r=t.g,o=t.h,a=!!t.b.match(/Redirect$/);n(i,r,o).then(function(t){Ku(e,a,t,null)}).s(function(t){Ku(e,a,null,t)})}(this,t,e):It(new Vi("invalid-auth-event")):(Ku(this,!1,null,null),wt())}else It(new Vi("invalid-auth-event"))},ju.prototype.Ya=function(){this.g&&!this.i&&Ku(this,!1,null,null)},ju.prototype.fa=function(){var r=this;return new dt(function(t,e){var n,i;r.b?r.b().then(t,e):(r.f.push(t),r.c.push(e),n=r,i=new Vi("timeout"),n.a&&n.a.cancel(),n.a=Ce(Du.get()).then(function(){n.b||(n.g=!0,Ku(n,!0,null,i))}))})},Fu.prototype.h=function(t,e){if(t){var n=t.b,i=t.c;t.a?(e.ha(t.b,null,t.a,t.c),wt()):e.xa(n,i)?(o=e,a=(r=t).c,s=r.b,o.xa(s,a)(r.f,r.g,r.h).then(function(t){o.ha(s,t,null,a)}).s(function(t){o.ha(s,null,t,a)})):It(new Vi("invalid-auth-event"))}else It(new Vi("invalid-auth-event"));var r,o,a,s},Hu.prototype.confirm=function(t){return t=Xr(this.verificationId,t),this.a(t)},Gu.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=Ce(Xu(n,t)).then(function(){return e=h.document,n=null,yi()||!e?wt():new dt(function(t){n=function(){yi()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Gu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ju.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Ju.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?It(new Vi("user-token-expired")):t||!this.b||b()>this.c-3e4?this.a?$u(this,{grant_type:"refresh_token",refresh_token:this.a}):wt(null):wt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Zu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},y(tc,re),y(ec,_e),ec.prototype.pa=function(t){this.ka=t,fa(this.b,t)},ec.prototype.ea=function(){return this.ka},ec.prototype.ya=function(){return U(this.O)},ec.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Si(ec.prototype,"providerId","firebase"),(t=ec.prototype).reload=function(){var t=this;return Nc(this,dc(this).then(function(){return yc(t).then(function(){return cc(t)}).then(fc)}))},t.dc=function(t){return this.F(t).then(function(t){return new Bu(t)})},t.F=function(t){var e=this;return Nc(this,dc(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Vi("internal-error");return t.accessToken!=e.ra&&(uc(e,t.accessToken),e.dispatchEvent(new tc("tokenChanged"))),gc(e,"refreshToken",t.refreshToken),t.accessToken}))},t.xc=function(t){if(!(t=t.users)||!t.length)throw new Vi("internal-error");lc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=(i=(i=t).providerUserInfo)&&i.length?D(i,function(t){return new Qu(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],n=0;n<e.length;n++)vc(this,e[n]);var i;gc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.gb=function(t){var e=this,n=null;return Nc(this,t.f(this.b,this.uid).then(function(t){return wc(e,t),n=Tc(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.yc=function(t){return Ai("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.gb(t).then(function(){})},t.eb=function(e){var n=this,i=null;return Nc(this,Ic(this,e.providerId).then(function(){return n.F()}).then(function(t){return e.b(n.b,t)}).then(function(t){return i=Tc(n,t,"link"),Ec(n,t)}).then(function(){return i}))},t.pc=function(t){return Ai("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.eb(t).then(function(t){return t.user})},t.qc=function(t,e){var n=this;return Nc(this,Ic(this,"phone").then(function(){return Wu(oc(n),t,e,m(n.eb,n))}))},t.zc=function(t,e){var n=this;return Nc(this,wt().then(function(){return Wu(oc(n),t,e,m(n.gb,n))}),!0)},t.pb=function(e){var n=this;return Nc(this,this.F().then(function(t){return n.b.pb(t,e)}).then(function(t){return wc(n,t),n.reload()}))},t.Rc=function(e){var n=this;return Nc(this,this.F().then(function(t){return e.b(n.b,t)}).then(function(t){return wc(n,t),n.reload()}))},t.qb=function(e){var n=this;return Nc(this,this.F().then(function(t){return n.b.qb(t,e)}).then(function(t){return wc(n,t),n.reload()}))},t.rb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return dc(this);var n=this;return Nc(this,this.F().then(function(t){return n.b.rb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return wc(n,t),gc(n,"displayName",t.displayName||null),gc(n,"photoURL",t.photoUrl||null),R(n.providerData,function(t){"password"===t.providerId&&(Si(t,"displayName",n.displayName),Si(t,"photoURL",n.photoURL))}),cc(n)}).then(fc))},t.Pc=function(r){var o=this;return Nc(this,yc(this).then(function(t){return L(pc(o),r)?(e=o.b,n=t,i=[r],ns(e,La,{idToken:n,deleteProvider:i})).then(function(t){var e={};return R(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),R(pc(o),function(t){e[t]||mc(o,t)}),e[Gr.PROVIDER_ID]||Si(o,"phoneNumber",null),cc(o)}):cc(o).then(function(){throw new Vi("no-such-provider")});var e,n,i}))},t.delete=function(){var e=this;return Nc(this,this.F().then(function(t){return ns(e.b,Ca,{idToken:t})}).then(function(){e.dispatchEvent(new tc("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");nc(e,null),rc(e,null),e.G=[],e.D=!0,sc(e),Si(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)})},t.vb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Ab,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Bb,this):"linkViaRedirect"==t&&(this.aa||null)==e?m(this.Ab,this):"reauthViaRedirect"==t&&(this.aa||null)==e?m(this.Bb,this):null},t.rc=function(t){var e=this;return Ac(this,"linkViaPopup",t,function(){return Ic(e,t.providerId).then(function(){return cc(e)})},!1)},t.Ac=function(t){return Ac(this,"reauthViaPopup",t,function(){return wt()},!0)},t.sc=function(t){var e=this;return kc(this,"linkViaRedirect",t,function(){return Ic(e,t.providerId)},!1)},t.Bc=function(t){return kc(this,"reauthViaRedirect",t,function(){return wt()},!0)},t.Ab=function(e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Nc(this,this.F().then(function(t){return Sa(r.b,{requestUri:e,postBody:i,sessionId:n,idToken:t})}).then(function(t){return o=Tc(r,t,"link"),Ec(r,t)}).then(function(){return o}))},t.Bb=function(t,e,n){var i=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Nc(this,wt().then(function(){return Ar(Na(i.b,{requestUri:t,sessionId:e,postBody:n}),i.uid)}).then(function(t){return r=Tc(i,t,"reauthenticate"),wc(i,t),i.i=null,i.reload()}).then(function(){return r}),!0)},t.jb=function(e){var n=this,i=null;return Nc(this,this.F().then(function(t){return i=t,void 0===e||nt(e)?{}:Qi(new Hi(e))}).then(function(t){return n.b.jb(i,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.m,appName:this.o,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};return this.metadata&&st(e,this.metadata.C()),R(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),e};var Pc={name:"redirectUser",A:"session"};function Rc(t){return eu(t.b,Pc,t.a)}function Dc(t){var e,n,i,r,o,a,s,u,c;this.a=t,this.b=Zs(),this.c=null,this.f=(e=this,n=xc("local"),i=xc("session"),r=xc("none"),(o=e.b,a=n,s=e.a,u=tu(a,s),c=Qs(o,a.A),o.get(a,s).then(function(t){var e=null;try{e=pi(h.localStorage.getItem(u))}catch(t){}if(e&&!t)return h.localStorage.removeItem(u),o.set(a,e,s);e&&t&&"localStorage"!=c.type&&h.localStorage.removeItem(u)})).then(function(){return e.b.get(i,e.a)}).then(function(t){return t?i:e.b.get(r,e.a).then(function(t){return t?r:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Lc,e.a).then(function(t){return t?xc(t):n})})})}).then(function(t){return e.c=t,Cc(e,t.A)}).s(function(){e.c||(e.c=n)})),this.b.addListener(xc("local"),this.a,m(this.g,this))}function Cc(t,e){var n,s,i=[];for(n in Ys)Ys[n]!==e&&i.push(eu(t.b,xc(Ys[n]),t.a));return i.push(eu(t.b,Lc,t.a)),s=i,new dt(function(n,e){var i=s.length,r=[];if(i)for(var t=function(t,e){i--,r[t]=e,0==i&&n(r)},o=function(t){e(t)},a=0;a<s.length;a++)Tt(s[a],g(t,a),o);else n(r)})}Dc.prototype.g=function(){var e=this,n=xc("local");Vc(this,function(){return wt().then(function(){return e.c&&"local"!=e.c.A?e.b.get(n,e.a):null}).then(function(t){if(t)return Cc(e,"local").then(function(){e.c=n})})})};var Lc={name:"persistence",A:"session"};function xc(t){return{name:"authUser",A:t}}function Mc(t,e){return Vc(t,function(){return t.b.set(t.c,e.C(),t.a)})}function jc(t){return Vc(t,function(){return eu(t.b,t.c,t.a)})}function Uc(t,e){return Vc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),_c(t||{})})})}function Vc(t,e){return t.f=t.f.then(e,e),t.f}function Kc(t){if(this.m=!1,Si(this,"settings",new qu),Si(this,"app",t),!Xc(this).options||!Xc(this).options.apiKey)throw new Vi("invalid-api-key");var n,e,i,r,o,a,s,u,c,h,l,f;t=Lh.SDK_VERSION?ri(Lh.SDK_VERSION):null,this.b=new oa(Xc(this).options&&Xc(this).options.apiKey,ur(ar),t),this.N=[],this.o=[],this.I=[],this.Tb=Lh.INTERNAL.createSubscribe(m(this.mc,this)),this.O=void 0,this.Ub=Lh.INTERNAL.createSubscribe(m(this.nc,this)),Bc(this,null),this.h=new Dc(Xc(this).options.apiKey+":"+Xc(this).name),this.w=new Oc(Xc(this).options.apiKey+":"+Xc(this).name),this.V=$c(this,(e=Xc(n=this).options.authDomain,i=(r=n,o=(a=r.w,s=Xc(r).options.authDomain,a.b.get(Pc,a.a).then(function(t){return t&&s&&(t.authDomain=s),_c(t||{})})).then(function(t){return(r.D=t)&&(t.ba=r.w),Rc(r.w)}),$c(r,o)).then(function(){return Uc(n.h,e)}).then(function(e){return e?(e.ba=n.w,n.D&&(n.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Mc(n.h,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:jc(n.h)})):null}).then(function(t){Bc(n,t||null)}),$c(n,i))),this.i=$c(this,(u=this).V.then(function(){return u.fa()}).s(function(){}).then(function(){if(!u.m)return u.ka()}).s(function(){}).then(function(){if(!u.m){u.X=!0;var t=u.h;t.b.addListener(xc("local"),t.a,u.ka)}})),this.X=!1,this.ka=m(this.Mc,this),this.Ha=m(this.Z,this),this.ra=m(this.bc,this),this.sa=m(this.jc,this),this.ta=m(this.kc,this),h=Xc(c=this).options.authDomain,l=Xc(c).options.apiKey,h&&ui()&&(c.Sb=c.V.then(function(){if(!c.m){if(c.a=Mu(h,l,Xc(c).name),c.a.subscribe(c),Jc(c)&&hc(Jc(c)),c.D){hc(c.D);var t=c.D;t.pa(c.ea()),nc(t,c),ic(t=c.D,c.G),rc(t,c),c.D=null}return c.a}})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.tc,this),this.u=0,_e.call(this),f=this,Object.defineProperty(f,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),f.W=null,this.G=[]}function Fc(t){re.call(this,"languageCodeChanged"),this.g=t}function qc(t){re.call(this,"frameworkChanged"),this.c=t}function Hc(t){return t.Sb||It(new Vi("auth-domain-config-required"))}function Wc(o,a){var s={};return s.apiKey=Xc(o).options.apiKey,s.authDomain=Xc(o).options.authDomain,s.appName=Xc(o).name,o.V.then(function(){return t=s,e=a,n=o.w,i=o.ya(),r=new ec(t,e),n&&(r.ba=n),i&&ic(r,i),r.reload().then(function(){return r});var t,e,n,i,r}).then(function(t){return Jc(o)&&t.uid==Jc(o).uid?bc(Jc(o),t):(Bc(o,t),hc(t)),o.Z(t)}).then(function(){Yc(o)})}function Bc(t,e){var n,i;Jc(t)&&(n=Jc(t),i=t.Ha,M(n.N,function(t){return t==i}),ye(Jc(t),"tokenChanged",t.ra),ye(Jc(t),"userDeleted",t.sa),ye(Jc(t),"userInvalidated",t.ta),sc(Jc(t))),e&&(e.N.push(t.Ha),me(e,"tokenChanged",t.ra),me(e,"userDeleted",t.sa),me(e,"userInvalidated",t.ta),0<t.u&&ac(e)),Si(t,"currentUser",e),e&&(e.pa(t.ea()),nc(e,t),ic(e,t.G),rc(e,t))}function Gc(e,t){var n=null,i=null;return $c(e,t.then(function(t){return n=Jr(t),i=dr(t),Wc(e,t)}).then(function(){return _i({user:Jc(e),credential:n,additionalUserInfo:i,operationType:"signIn"})}))}function Xc(t){return t.app}function Jc(t){return t.currentUser}function zc(t){return Jc(t)&&Jc(t)._lat||null}function Yc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](zc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](zc(t))}}function $c(t,e){return t.N.push(e),e.ia(function(){x(t.N,e)}),e}function Zc(){}function Qc(){this.a={},this.b=1e12}Dc.prototype.mb=function(e){var n=null,i=this;return function(t){var e=new Vi("invalid-persistence-type"),n=new Vi("unsupported-persistence-type");t:{for(i in Ys)if(Ys[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch(Zn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!si()&&"none"!==t)throw n}}(e),Vc(this,function(){return e!=i.c.A?i.b.get(i.c,i.a).then(function(t){return n=t,Cc(i,e)}).then(function(){if(i.c=xc(e),n)return i.b.set(i.c,n,i.a)}):wt()})},y(Kc,_e),y(Fc,re),y(qc,re),(t=Kc.prototype).mb=function(t){return $c(this,t=this.h.mb(t))},t.pa=function(t){this.W===t||this.m||(this.W=t,fa(this.b,this.W),this.dispatchEvent(new Fc(this.ea())))},t.ea=function(){return this.W},t.Sc=function(){var t=h.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.tc=function(t){this.G.push(t),da(this.b,Lh.SDK_VERSION?ri(Lh.SDK_VERSION,this.G):null),this.dispatchEvent(new qc(this.G))},t.ya=function(){return U(this.G)},t.toJSON=function(){return{apiKey:Xc(this).options.apiKey,authDomain:Xc(this).options.authDomain,appName:Xc(this).name,currentUser:Jc(this)&&Jc(this).C()}},t.vb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,i){"signInViaPopup"==t&&this.g==i&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ac,this):null},t.ac=function(t,e,n){var i=this;t={requestUri:t,postBody:n,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,o=null,a=ka(i.b,t).then(function(t){return r=Jr(t),o=dr(t),t});return $c(this,t=i.V.then(function(){return a}).then(function(t){return Wc(i,t)}).then(function(){return _i({user:Jc(i),credential:r,additionalUserInfo:o,operationType:"signIn"})}))},t.Kc=function(e){if(!ui())return It(new Vi("operation-not-supported-in-this-environment"));var n=this,t=fr(e.providerId),i=vi(),r=null;(!li()||Yn())&&Xc(this).options.authDomain&&e.isOAuthProvider&&(r=gs(Xc(this).options.authDomain,Xc(this).options.apiKey,Xc(this).name,"signInViaPopup",e,null,i,Lh.SDK_VERSION||null));var o=Bn(r,t&&t.Ba,t&&t.Aa);return $c(this,t=Hc(this).then(function(t){return Cu(t,o,"signInViaPopup",e,i,!!r)}).then(function(){return new dt(function(t,e){n.ha("signInViaPopup",null,new Vi("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=n.a.Ea(n,"signInViaPopup",o,i)})}).then(function(t){return o&&Wn(o),t?_i(t):null}).s(function(t){throw o&&Wn(o),t}))},t.Lc=function(t){if(!ui())return It(new Vi("operation-not-supported-in-this-environment"));var e=this;return $c(this,Hc(this).then(function(){return Vc(t=e.h,function(){return t.b.set(Lc,t.c.A,t.a)});var t}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},t.fa=function(){if(!ui())return It(new Vi("operation-not-supported-in-this-environment"));var t=this;return $c(this,Hc(this).then(function(){return t.a.fa()}).then(function(t){return t?_i(t):null}))},t.Qc=function(t){if(!t)return It(new Vi("null-user"));var e=this,n={};n.apiKey=Xc(this).options.apiKey,n.authDomain=Xc(this).options.authDomain,n.appName=Xc(this).name;var i=function(t,e,n,i){e=e||{apiKey:t.m,authDomain:t.u,appName:t.o};var r=t.h,o={};return o[sa]=r.b,o.refreshToken=r.a,o.expiresIn=(r.c-b())/1e3,e=new ec(e,o),n&&(e.ba=n),i&&ic(e,i),bc(e,t),e}(t,n,e.w,e.ya());return $c(this,this.i.then(function(){if(Xc(e).options.apiKey!=t.m)return i.reload()}).then(function(){return Jc(e)&&t.uid==Jc(e).uid?(bc(Jc(e),t),e.Z(t)):(Bc(e,i),hc(i),e.Z(i))}).then(function(){Yc(e)}))},t.nb=function(){var t=this;return $c(this,this.i.then(function(){return Jc(t)?(Bc(t,null),jc(t.h).then(function(){Yc(t)})):wt()}))},t.Mc=function(){var i=this;return Uc(this.h,Xc(this).options.authDomain).then(function(t){if(!i.m){var e;if(e=Jc(i)&&t){e=Jc(i).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return bc(Jc(i),t),Jc(i).F();(Jc(i)||t)&&(Bc(i,t),t&&(hc(t),t.ba=i.w),i.a&&i.a.subscribe(i),Yc(i))}})},t.Z=function(t){return Mc(this.h,t)},t.bc=function(){Yc(this),this.Z(Jc(this))},t.jc=function(){this.nb()},t.kc=function(){this.nb()},t.mc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Jc(e))})},t.nc=function(t){var e,n,i=this;n=function(){t.next(Jc(i))},(e=this).I.push(n),$c(e,e.i.then(function(){!e.m&&L(e.I,n)&&e.O!==e.getUid()&&(e.O=e.getUid(),n(zc(e)))}))},t.vc=function(t,e,n){var i=this;return this.X&&Lh.Promise.resolve().then(function(){a(t)?t(Jc(i)):a(t.next)&&t.next(Jc(i))}),this.Tb(t,e,n)},t.uc=function(t,e,n){var i=this;return this.X&&Lh.Promise.resolve().then(function(){i.O=i.getUid(),a(t)?t(Jc(i)):a(t.next)&&t.next(Jc(i))}),this.Ub(t,e,n)},t.cc=function(t){var e=this;return $c(this,this.i.then(function(){return Jc(e)?Jc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Nb=function(t){var n=this;return this.i.then(function(){return Gc(n,ns(n.b,$a,{token:t}))}).then(function(t){var e=t.user;return gc(e,"isAnonymous",!1),n.Z(e),t})},t.Ec=function(t){return Ai("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(t)},t.Fc=function(t,e){return Ai("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(t,e)},t.Ob=function(t,e){var n=this;return this.i.then(function(){return Gc(n,ns(n.b,Za,{email:t,password:e}))})},t.xb=function(t,e){var n=this;return this.i.then(function(){return Gc(n,ns(n.b,Ra,{email:t,password:e}))})},t.Wb=function(t,e){return Ai("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.xb(t,e)},t.Hc=function(t){return Ai("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Pa(t).then(function(t){return t.user})},t.Pa=function(t){var e=this;return this.i.then(function(){return Gc(e,t.la(e.b))})},t.Qa=function(){var n=this;return this.i.then(function(){var t=Jc(n);return t&&t.isAnonymous?_i({user:t,credential:null,additionalUserInfo:_i({providerId:null,isNewUser:!1}),operationType:"signIn"}):Gc(n,n.b.Qa()).then(function(t){var e=t.user;return gc(e,"isAnonymous",!0),n.Z(e),t})})},t.Gc=function(){return Ai("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Qa()},t.getUid=function(){return Jc(this)&&Jc(this).uid||null},t.Vb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Jc(this)&&ac(Jc(this))},t.Cc=function(e){var n=this;R(this.o,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&Jc(this)&&sc(Jc(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),$c(this,this.i.then(function(){e.m||L(e.o,t)&&t(zc(e))}))},t.removeAuthTokenListener=function(e){M(this.o,function(t){return t==e})},t.delete=function(){this.m=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(xc("local"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),Lh.Promise.resolve()},t.Zb=function(t){return Ai("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),$c(this,ns(this.b,Da,{identifier:t,continueUri:ci()?Fn():"http://localhost"}).then(function(t){return t.allProviders||[]}))},t.$b=function(t){return $c(this,ns(this.b,Da,{identifier:t,continueUri:ci()?Fn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.oc=function(t){return!!Hr(t)},t.lb=function(e,n){var i=this;return $c(this,wt().then(function(){var t=new Hi(n);if(!t.c)throw new Vi("argument-error",Gi+" must be true when sending sign in link to email");return Qi(t)}).then(function(t){return i.b.lb(e,t)}).then(function(){}))},t.Tc=function(t){return this.Ja(t).then(function(t){return t.data.email})},t.Za=function(t,e){return $c(this,this.b.Za(t,e).then(function(){}))},t.Ja=function(t){return $c(this,this.b.Ja(t).then(function(t){return new Pi(t)}))},t.Wa=function(t){return $c(this,this.b.Wa(t).then(function(){}))},t.kb=function(e,t){var n=this;return $c(this,wt().then(function(){return void 0===t||nt(t)?{}:Qi(new Hi(t))}).then(function(t){return n.b.kb(e,t)}).then(function(){}))},t.Jc=function(t,e){return $c(this,Wu(this,t,e,m(this.Pa,this)))},t.Ic=function(e,n){var i=this;return $c(this,wt().then(function(){var t=qr(e,n||Fn());return i.Pa(t)}))},Zc.prototype.render=function(){},Zc.prototype.reset=function(){},Zc.prototype.getResponse=function(){},Zc.prototype.execute=function(){};var th=null;function eh(t,e){return(e=nh(e))&&t.a[e]||null}function nh(t){return(t=void 0===t?1e12:t)?t.toString():null}function ih(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Pn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():me(this.f,"click",this.i)}function rh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function oh(){}Qc.prototype.render=function(t,e){return this.a[this.b.toString()]=new ih(t,e),this.b++},Qc.prototype.reset=function(t){var e=eh(this,t);t=nh(t),e&&t&&(e.delete(),delete this.a[t])},Qc.prototype.getResponse=function(t){return(t=eh(this,t))?t.getResponse():null},Qc.prototype.execute=function(t){(t=eh(this,t))&&t.execute()},ih.prototype.getResponse=function(){return rh(this),this.b},ih.prototype.execute=function(){rh(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},ih.prototype.delete=function(){rh(this),this.g=!0,clearTimeout(this.a),this.a=null,ye(this.f,"click",this.i)},oh.prototype.g=function(){return th||(th=new Qc),wt(th)},oh.prototype.c=function(){};var ah=null;function sh(){this.b=h.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var uh=pn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ch=new bi(3e4,6e4);sh.prototype.g=function(r){var o=this;return new dt(function(t,e){var i=setTimeout(function(){e(new Vi("network-request-failed"))},ch.get());!h.grecaptcha||r!==o.f&&!o.b?(h[o.a]=function(){if(h.grecaptcha){o.f=r;var n=h.grecaptcha.render;h.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(i),t(h.grecaptcha)}else clearTimeout(i),e(new Vi("internal-error"));delete h[o.a]},wt(Zo(gn(uh,{onload:o.a,hl:r||""}))).s(function(){clearTimeout(i),e(new Vi("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),t(h.grecaptcha))})},sh.prototype.c=function(){this.b--};var hh=null;function lh(t,e,n,i,r,o,a){if(Si(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.m=e,this.g=null,a=a?(ah||(ah=new oh),ah):(hh||(hh=new sh),hh),this.o=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[ph])throw new Vi("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[vh],!h.document)throw new Vi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Pn(e)||!this.i&&Pn(e).hasChildNodes())throw new Vi("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new oa(t,o||null,r||null),this.v=i||function(){return null};var s=this;this.l=[];var u=this.a[fh];this.a[fh]=function(t){if(mh(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=ai(u,h);"function"==typeof e&&e(t)}};var c=this.a[dh];this.a[dh]=function(){if(mh(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=ai(c,h);"function"==typeof t&&t()}}}var fh="callback",dh="expired-callback",ph="sitekey",vh="size";function mh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function gh(t,e){return t.h.push(e),e.ia(function(){x(t.h,e)}),e}function bh(t){if(t.D)throw new Vi("internal-error","RecaptchaVerifier instance has been destroyed.")}function yh(t,e,n){var i=!1;try{this.b=n||Lh.app()}catch(t){throw new Vi("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Vi("invalid-api-key");n=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().ya()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Lh.SDK_VERSION?ri(Lh.SDK_VERSION,o):null,lh.call(this,n,t,e,function(){try{var e=r.b.auth().ea()}catch(t){e=null}return e},o,ur(ar),i)}function wh(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Vi("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].M(n[r])&&!o){if(e=e[r],r<0||r>=Ih.length)throw new Vi("internal-error","Argument validator received an unsupported number of arguments.");n=Ih[r],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}i=null}}if(i)throw new Vi("argument-error",t+" failed: "+i)}(t=lh.prototype).za=function(){var e=this;return this.f?this.f:this.f=gh(this,wt().then(function(){if(ci()&&!$n())return Jn();throw new Vi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.o.g(e.v())}).then(function(t){return e.g=t,ns(e.u,qa,{})}).then(function(t){e.a[ph]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},t.render=function(){bh(this);var n=this;return gh(this,this.za().then(function(){if(null===n.c){var t=n.m;if(!n.i){var e=Pn(t);t=Cn("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){bh(this);var r=this;return gh(this,this.render().then(function(e){return new dt(function(n){var t=r.g.getResponse(e);if(t)n(t);else{var i=function(t){var e;t&&(e=i,M(r.l,function(t){return t==e}),n(t))};r.l.push(i),r.i&&r.g.execute(r.c)}})}))},t.reset=function(){bh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){bh(this),this.D=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Pn(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},y(yh,lh);var Ih="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Th(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:c}}function Eh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:n}}function Ah(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function kh(t,e){return{name:t||"",K:"a function",optional:!!e,M:a}}function Sh(t,e){return{name:t||"",K:"null",optional:!!e,M:i}}function Nh(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.la||!e)}}}function _h(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&c(t.type)&&a(t.verify))}}}function Oh(e,n,t,i){return{name:t||"",K:e.K+" or "+n.K,optional:!!i,M:function(t){return e.M(t)||n.M(t)}}}function Ph(t,e){for(var n in e){var i=e[n].name;t[i]=Ch(i,t[n],e[n].j)}}function Rh(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:g(function(t){return this[t]},n),set:g(function(t,e,n,i){wh(t,[n],[i],!0),this[e]=i},i,n,e[n].tb),enumerable:!0})}}function Dh(t,e,n,i){t[e]=Ch(e,n,i)}function Ch(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return wh(a,n,t),e.apply(this,t)}if(!n)return e;var r,o,a=(o=(o=t).split("."))[o.length-1];for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}Ph(Kc.prototype,{Wa:{name:"applyActionCode",j:[Th("code")]},Ja:{name:"checkActionCode",j:[Th("code")]},Za:{name:"confirmPasswordReset",j:[Th("code"),Th("newPassword")]},xb:{name:"createUserWithEmailAndPassword",j:[Th("email"),Th("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[Th("email"),Th("password")]},Zb:{name:"fetchProvidersForEmail",j:[Th("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[Th("email")]},fa:{name:"getRedirectResult",j:[]},oc:{name:"isSignInWithEmailLink",j:[Th("emailLink")]},uc:{name:"onAuthStateChanged",j:[Oh(Ah(),kh(),"nextOrObserver"),kh("opt_error",!0),kh("opt_completed",!0)]},vc:{name:"onIdTokenChanged",j:[Oh(Ah(),kh(),"nextOrObserver"),kh("opt_error",!0),kh("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Th("email"),Oh(Ah("opt_actionCodeSettings",!0),Sh(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Th("email"),Ah("actionCodeSettings")]},mb:{name:"setPersistence",j:[Th("persistence")]},Pa:{name:"signInAndRetrieveDataWithCredential",j:[Nh()]},Qa:{name:"signInAnonymously",j:[]},Gc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Hc:{name:"signInWithCredential",j:[Nh()]},Nb:{name:"signInWithCustomToken",j:[Th("token")]},Ec:{name:"signInAndRetrieveDataWithCustomToken",j:[Th("token")]},Ob:{name:"signInWithEmailAndPassword",j:[Th("email"),Th("password")]},Ic:{name:"signInWithEmailLink",j:[Th("email"),Th("emailLink",!0)]},Fc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[Th("email"),Th("password")]},Jc:{name:"signInWithPhoneNumber",j:[Th("phoneNumber"),_h()]},Kc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Qc:{name:"updateCurrentUser",j:[Oh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof ec)}},Sh(),"user")]},nb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Th(null,!0)]},Sc:{name:"useDeviceLanguage",j:[]},Tc:{name:"verifyPasswordResetCode",j:[Th("code")]}}),Rh(Kc.prototype,{lc:{name:"languageCode",tb:Oh(Th(),Sh(),"languageCode")}}),(Kc.Persistence=Ys).LOCAL="local",Kc.Persistence.SESSION="session",Kc.Persistence.NONE="none",Ph(ec.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Eh("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Eh("opt_forceRefresh",!0)]},eb:{name:"linkAndRetrieveDataWithCredential",j:[Nh()]},pc:{name:"linkWithCredential",j:[Nh()]},qc:{name:"linkWithPhoneNumber",j:[Th("phoneNumber"),_h()]},rc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},sc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},gb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Nh()]},yc:{name:"reauthenticateWithCredential",j:[Nh()]},zc:{name:"reauthenticateWithPhoneNumber",j:[Th("phoneNumber"),_h()]},Ac:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Bc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[Oh(Ah("opt_actionCodeSettings",!0),Sh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Th(null,!0)]},Pc:{name:"unlink",j:[Th("provider")]},pb:{name:"updateEmail",j:[Th("email")]},qb:{name:"updatePassword",j:[Th("password")]},Rc:{name:"updatePhoneNumber",j:[Nh("phone")]},rb:{name:"updateProfile",j:[Ah("profile")]}}),Ph(Qc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ph(Zc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ph(dt.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Rh(qu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",tb:Eh("appVerificationDisabledForTesting")}}),Ph(Hu.prototype,{confirm:{name:"confirm",j:[Th("verificationCode")]}}),Dh(Fr,"credential",function(t,e){return new Kr(t,e)},[Th("email"),Th("password")]),Ph(Dr.prototype,{ua:{name:"addScope",j:[Th("scope")]},Da:{name:"setCustomParameters",j:[Ah("customOAuthParameters")]}}),Dh(Dr,"credential",Cr,[Oh(Th(),Ah(),"token")]),Dh(Fr,"credentialWithLink",qr,[Th("email"),Th("emailLink")]),Ph(Lr.prototype,{ua:{name:"addScope",j:[Th("scope")]},Da:{name:"setCustomParameters",j:[Ah("customOAuthParameters")]}}),Dh(Lr,"credential",xr,[Oh(Th(),Ah(),"token")]),Ph(Mr.prototype,{ua:{name:"addScope",j:[Th("scope")]},Da:{name:"setCustomParameters",j:[Ah("customOAuthParameters")]}}),Dh(Mr,"credential",jr,[Oh(Th(),Oh(Ah(),Sh()),"idToken"),Oh(Th(),Sh(),"accessToken",!0)]),Ph(Ur.prototype,{Da:{name:"setCustomParameters",j:[Ah("customOAuthParameters")]}}),Dh(Ur,"credential",Vr,[Oh(Th(),Ah(),"token"),Th("secret",!0)]),Ph(Rr.prototype,{ua:{name:"addScope",j:[Th("scope")]},credential:{name:"credential",j:[Oh(Th(),Sh(),"idToken",!0),Oh(Th(),Sh(),"accessToken",!0),Oh(Th(),Sh(),"nonce",!0)]},Da:{name:"setCustomParameters",j:[Ah("customOAuthParameters")]}}),Dh(Gr,"credential",Xr,[Th("verificationId"),Th("verificationCode")]),Ph(Gr.prototype,{Ua:{name:"verifyPhoneNumber",j:[Th("phoneNumber"),_h()]}}),Ph(Vi.prototype,{toJSON:{name:"toJSON",j:[Th(null,!0)]}}),Ph(no.prototype,{toJSON:{name:"toJSON",j:[Th(null,!0)]}}),Ph(eo.prototype,{toJSON:{name:"toJSON",j:[Th(null,!0)]}}),Ph(yh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===Lh||!Lh.INTERNAL||!Lh.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Kc,Error:Vi};Dh(t,"EmailAuthProvider",Fr,[]),Dh(t,"FacebookAuthProvider",Dr,[]),Dh(t,"GithubAuthProvider",Lr,[]),Dh(t,"GoogleAuthProvider",Mr,[]),Dh(t,"TwitterAuthProvider",Ur,[]),Dh(t,"OAuthProvider",Rr,[Th("providerId")]),Dh(t,"SAMLAuthProvider",Pr,[Th("providerId")]),Dh(t,"PhoneAuthProvider",Gr,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Kc)}}]),Dh(t,"RecaptchaVerifier",yh,[Oh(Th(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ah("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Lh.app.App)}}]),Lh.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:m((t=new Kc(t)).getUid,t),getToken:m(t.cc,t),addAuthTokenListener:m(t.Vb,t),removeAuthTokenListener:m(t.Cc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),Lh.INTERNAL.extendNamespace({User:ec})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-auth - be sure to load firebase-app.js first.")}});!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(tr){"use strict";try{(function(){tr=tr&&tr.hasOwnProperty("default")?tr.default:tr;var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function s(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function e(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[0,s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var t=!1,n=!1,i="${JSCORE_VERSION}",C=function(t,e){if(!t)throw p(e)},p=function(t){return new Error("Firebase Database ("+i+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);e[n++]=i<128?i:(e[n++]=i<2048?i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,i>>6&63|128),63&i|128)}return e},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,h=i+2<t.length,u=h?t[i+2]:0,l=o>>2,c=(3&o)<<4|a>>4,p=(15&a)<<2|u>>6,d=63&u;h||(d=64,s||(p=64)),r.push(n[l],n[c],n[p],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,h=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==h)throw Error();var u=o<<2|s>>4;if(r.push(u),64!=a){var l=s<<4&240|a>>2;if(r.push(l),64!=h){var c=a<<6&192|h;r.push(c)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return h.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function o(t){return function t(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:var r=n;return new Date(r.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return n}for(var i in n)n.hasOwnProperty(i)&&(e[i]=t(e[i],n[i]));return e}(void 0,t)}var l=function(){function t(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return t.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},t}(),c=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")},d=function(){return!0===t||!0===n},f="FirebaseError",_=Error.captureStackTrace,y=function(t,e){if(this.code=t,this.message=e,_)_(this,v.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=f,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}};y.prototype=Object.create(Error.prototype),(y.prototype.constructor=y).prototype.name=f;var v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,r){void 0===r&&(r={});var e,n=this.errors[t],i=this.service+"/"+t;e=void 0===n?"Error":n.replace(this.pattern,function(t,e){var n=r[e];return void 0!==n?n.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+i+").";var o=new y(i,e);for(var s in r)r.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=r[s]);return o},t}();function g(t){return JSON.parse(t)}function m(t){return JSON.stringify(t)}var E=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(u(o[0])||""),n=g(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},w=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},b=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},S=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},T=function(t){return n={},S(t,function(t,e){n[t]=e}),n;var n},I=function(t){for(var e in t)return!1;return!0},N=function(t){var e=0;for(var n in t)e++;return e},R=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},P=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},D=function(t){for(var e in t)return e},O=function(n){function t(){var t=n.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var e=1;e<t.blockSize;++e)t.pad_[e]=0;return t.reset(),t}return s(t,n),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],h=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){s=r<40?r<20?(o=l^h&(u^l),1518500249):(o=h^u^l,1859775393):r<60?(o=h&u|l&(h|u),2400959708):(o=h^u^l,3395469782);i=(a<<5|a>>>27)+o+c+s+n[r]&4294967295;c=l,l=u,u=4294967295&(h<<30|h>>>2),h=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+h&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(function(){this.blockSize=-1}),k=function(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function x(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function F(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(x(t,e,r)+"must be a valid function.")}function A(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(x(t,e,r)+"must be a valid context object.")}var L,M,W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e};(M=L||(L={}))[M.DEBUG=0]="DEBUG",M[M.VERBOSE=1]="VERBOSE",M[M.INFO=2]="INFO",M[M.WARN=3]="WARN",M[M.ERROR=4]="ERROR",M[M.SILENT=5]="SILENT";var q,Q=L.INFO,U=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case L.DEBUG:case L.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case L.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case L.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case L.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},V=function(){function t(t){this.name=t,this._logLevel=Q,this._logHandler=U}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in L))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.ERROR].concat(t))},t}(),H=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),m(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:g(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),B=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return w(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),j=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new H(e)}}catch(t){}return new B},K=j("localStorage"),Y=j("sessionStorage"),z=new V("@firebase/database"),G=(q=1,function(){return q++}),X=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;C(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}e[n++]=i<128?i:(e[n++]=i<2048?i>>6|192:(e[n++]=i<65536?i>>12|224:(e[n++]=i>>18|240,i>>12&63|128),i>>6&63|128),63&i|128)}return e}(t),n=new O;n.update(e);var r=n.digest();return h.encodeByteArray(r)},$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=$.apply(null,t[r]):"object"==typeof t[r]?n+=m(t[r]):n+=t[r],n+=" ";return n},J=null,Z=!0,tt=function(t,e){C(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(z.logLevel=L.VERBOSE,J=z.log.bind(z),e&&Y.set("logging_enabled",!0)):"function"==typeof t?J=t:(J=null,Y.remove("logging_enabled"))},et=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Z&&(Z=!1,null===J&&!0===Y.get("logging_enabled")&&tt(!0)),J){var n=$.apply(null,t);J(n)}},nt=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];et.apply(void 0,[n].concat(t))}},rt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+$.apply(void 0,t);z.error(n)},it=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+$.apply(void 0,t);throw z.error(n),new Error(n)},ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+$.apply(void 0,t);z.warn(n)},st=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},at="[MIN_NAME]",ht="[MAX_NAME]",ut=function(t,e){if(t===e)return 0;if(t===at||e===ht)return-1;if(e===at||t===ht)return 1;var n=vt(t),r=vt(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},lt=function(t,e){return t===e?0:t<e?-1:1},ct=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+m(e))},pt=function(t){if("object"!=typeof t||null===t)return m(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=m(e[i]),r+=":",r+=pt(t[e[i]]);return r+="}"},dt=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},ft=function(t,n){if(Array.isArray(t))for(var e=0;e<t.length;++e)n(e,t[e]);else S(t,function(t,e){return n(e,t)})},_t=function(t){C(!st(t),"Invalid JSON number");var e,n,r,i,o,s,a;for(0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074)))),s=[],o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse(),a=s.join("");var h="";for(o=0;o<64;o+=8){var u=parseInt(a.substr(o,8),2).toString(16);1===u.length&&(u="0"+u),h+=u}return h.toLowerCase()},yt=new RegExp("^-?\\d{1,10}$"),vt=function(t){if(yt.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},gt=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ot("Exception was thrown by user callback.",t),e},Math.floor(0))}},mt=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Ct=function(){function i(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(i,"Empty",{get:function(){return new i("")},enumerable:!0,configurable:!0}),i.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},i.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},i.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new i(this.pieces_,t)},i.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},i.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},i.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},i.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},i.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new i(t,0)},i.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof i)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new i(e,0)},i.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},i.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return i.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},i.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=ut(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},i.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},i.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},i}(),Et=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=W(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=W(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=W(t),0<this.parts_.length&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),wt="firebaseio.com",bt="websocket",St="long_polling",Tt=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=K.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&K.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(C("string"==typeof t,"typeof type must == string"),C("object"==typeof e,"typeof params must == object"),t===bt)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==St)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return S(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var It,Nt,Rt,Pt,Dt,Ot=function(t){var e=kt(t),n=e.subdomain;"firebase"===e.domain&&it(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||it("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new Tt(e.host,e.secure,n,r),path:new Ct(e.pathString)}},kt=function(t){var e="",n="",r="",i="",o=!0,s="https",a=443;if("string"==typeof t){var h=t.indexOf("//");0<=h&&(s=t.substring(0,h-1),t=t.substring(h+2));var u=t.indexOf("/");-1===u&&(u=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(u,l)),u<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(u,l)));var c=function(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):ot("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,l)));0<=(h=e.indexOf(":"))?(o="https"===s||"wss"===s,a=parseInt(e.substring(h+1),10)):h=t.length;var p=e.split(".");3===p.length?(n=p[1],r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,h).toLowerCase()&&(n="localhost"),""===r&&"ns"in c&&(r=c.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:s,pathString:i}},xt=/[\[\].#$\/\u0000-\u001F\u007F]/,Ft=/[\[\].#$\u0000-\u001F\u007F]/,At=10485760,Lt=function(t){return"string"==typeof t&&0!==t.length&&!xt.test(t)},Mt=function(t){return"string"==typeof t&&0!==t.length&&!Ft.test(t)},Wt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!st(t)||t&&"object"==typeof t&&w(t,".sv")},qt=function(t,e,n,r,i){i&&void 0===n||Qt(x(t,e,i),n,r)},Qt=function(n,t,e){var r=e instanceof Ct?new Et(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(st(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>At/3&&W(t)>At)throw new Error(n+"contains a string greater than "+At+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(S(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Lt(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),Qt(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Ut=function(t,e,n,r,i){if(!i||void 0!==n){var o=x(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];S(n,function(t,e){var n=new Ct(t);if(Qt(o,e,r.child(n)),".priority"===n.getBack()&&!Wt(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Lt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Vt=function(t,e,n,r){if(!r||void 0!==n){if(st(n))throw new Error(x(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Wt(n))throw new Error(x(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ht=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(x(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Bt=function(t,e,n,r){if(!(r&&void 0===n||Lt(n)))throw new Error(x(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jt=function(t,e,n,r){if(!(r&&void 0===n||Mt(n)))throw new Error(x(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Kt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Yt=function(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Lt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&((r=i)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),!Mt(r)))throw new Error(x(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){k("OnDisconnect.cancel",0,1,arguments.length),F("OnDisconnect.cancel",1,t,!0);var e=new l;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){k("OnDisconnect.remove",0,1,arguments.length),Kt("OnDisconnect.remove",this.path_),F("OnDisconnect.remove",1,t,!0);var e=new l;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){k("OnDisconnect.set",1,2,arguments.length),Kt("OnDisconnect.set",this.path_),qt("OnDisconnect.set",1,t,this.path_,!1),F("OnDisconnect.set",2,e,!0);var n=new l;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){k("OnDisconnect.setWithPriority",2,3,arguments.length),Kt("OnDisconnect.setWithPriority",this.path_),qt("OnDisconnect.setWithPriority",1,t,this.path_,!1),Vt("OnDisconnect.setWithPriority",2,e,!1),F("OnDisconnect.setWithPriority",3,n,!0);var r=new l;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(k("OnDisconnect.update",1,2,arguments.length),Kt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ot("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ut("OnDisconnect.update",1,t,this.path_,!1),F("OnDisconnect.update",2,e,!0);var i=new l;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Gt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return k("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Xt=(It="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nt=0,Rt=[],function(t){var e,n=t===Nt;Nt=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=It.charAt(t%64),t=Math.floor(t/64);C(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===Rt[e];e--)Rt[e]=0;Rt[e]++}else for(e=0;e<12;e++)Rt[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=It.charAt(Rt[e]);return C(20===i.length,"nextPushId: Length should be 20."),i}),$t=function(){function n(t,e){this.name=t,this.node=e}return n.Wrap=function(t,e){return new n(t,e)},n}(),Jt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new $t(at,t),r=new $t(at,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return $t.MIN},t}(),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Pt},set:function(t){Pt=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return ut(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw p("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return $t.MIN},e.prototype.maxPost=function(){return new $t(ht,Pt)},e.prototype.makePost=function(t,e){return C("string"==typeof t,"KeyIndex indexValue must always be a string."),new $t(t,Pt)},e.prototype.toString=function(){return".key"},e}(Jt),te=new Zt;var ee,ne,re,ie=function(t){return"number"==typeof t?"number:"+_t(t):"string:"+t},oe=function(t){if(t.isLeafNode()){var e=t.val();C("string"==typeof e||"number"==typeof e||"object"==typeof e&&w(e,".sv"),"Priority must be a string or number.")}else C(t===Dt||t.isEmpty(),"priority of unexpected type.");C(t===Dt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},se=function(){function o(t,e){void 0===e&&(e=o.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,C(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),oe(this.priorityNode_)}return Object.defineProperty(o,"__childrenNodeConstructor",{get:function(){return ee},set:function(t){ee=t},enumerable:!0,configurable:!0}),o.prototype.isLeafNode=function(){return!0},o.prototype.getPriority=function(){return this.priorityNode_},o.prototype.updatePriority=function(t){return new o(this.value_,t)},o.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.hasChild=function(){return!1},o.prototype.getPredecessorChildName=function(t,e){return null},o.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},o.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(C(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},o.prototype.isEmpty=function(){return!1},o.prototype.numChildren=function(){return 0},o.prototype.forEachChild=function(t,e){return!1},o.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},o.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ie(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?_t(this.value_):this.value_,this.lazyHash_=X(t)}return this.lazyHash_},o.prototype.getValue=function(){return this.value_},o.prototype.compareTo=function(t){return t===o.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof o.__childrenNodeConstructor?-1:(C(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},o.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=o.VALUE_TYPE_ORDER.indexOf(e),i=o.VALUE_TYPE_ORDER.indexOf(n);return C(0<=r,"Unknown leaf type: "+e),C(0<=i,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},o.prototype.withIndex=function(){return this},o.prototype.isIndexed=function(){return!0},o.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o}();var ae,he,ue=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?ut(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return $t.MIN},e.prototype.maxPost=function(){return new $t(ht,new se("[PRIORITY-POST]",re))},e.prototype.makePost=function(t,e){var n=ne(t);return new $t(e,new se("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Jt)),le=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return 0<this.nodeStack_.length},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),ce=function(){function o(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:o.RED,this.left=null!=r?r:de.EMPTY_NODE,this.right=null!=i?i:de.EMPTY_NODE}return o.prototype.copy=function(t,e,n,r,i){return new o(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},o.prototype.count=function(){return this.left.count()+1+this.right.count()},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},o.prototype.minKey=function(){return this.min_().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},o.prototype.removeMin_=function(){if(this.left.isEmpty())return de.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},o.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return de.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},o.prototype.isRed_=function(){return this.color},o.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},o.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},o.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},o.prototype.rotateLeft_=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight_=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},o.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},o.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},o.RED=!0,o.BLACK=!1,o}(),pe=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ce(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),de=function(){function n(t,e){void 0===e&&(e=n.EMPTY_NODE),this.comparator_=t,this.root_=e}return n.prototype.insert=function(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ce.BLACK,null,null))},n.prototype.remove=function(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ce.BLACK,null,null))},n.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},n.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},n.prototype.isEmpty=function(){return this.root_.isEmpty()},n.prototype.count=function(){return this.root_.count()},n.prototype.minKey=function(){return this.root_.minKey()},n.prototype.maxKey=function(){return this.root_.maxKey()},n.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},n.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},n.prototype.getIterator=function(t){return new le(this.root_,null,this.comparator_,!1,t)},n.prototype.getIteratorFrom=function(t,e){return new le(this.root_,t,this.comparator_,!1,e)},n.prototype.getReverseIteratorFrom=function(t,e){return new le(this.root_,t,this.comparator_,!0,e)},n.prototype.getReverseIterator=function(t){return new le(this.root_,null,this.comparator_,!0,t)},n.EMPTY_NODE=new pe,n}(),fe=Math.log(2),_e=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/fe,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ye=function(u,t,l,e){u.sort(t);var c=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=u[t],r=l?l(n):n,new ce(r,n.node,ce.BLACK,null,null);var o=parseInt(i/2,10)+t,s=c(t,o),a=c(o+1,e);return n=u[o],r=l?l(n):n,new ce(r,n.node,ce.BLACK,s,a)},n=function(t){for(var e=null,n=null,a=u.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=c(n+1,r),o=u[n],s=l?l(o):o;h(new ce(s,o.node,e,null,i))},h=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,ce.BLACK):(r(s,ce.BLACK),r(s,ce.RED))}return n}(new _e(u.length));return new de(e||t,n)},ve={},ge=function(){function c(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(c,"Default",{get:function(){return C(ue,"ChildrenNode.ts has not been loaded"),ae=ae||new c({".priority":ve},{".priority":ue})},enumerable:!0,configurable:!0}),c.prototype.get=function(t){var e=b(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===ve?null:e},c.prototype.hasIndex=function(t){return w(this.indexSet_,t.toString())},c.prototype.addIndex=function(t,e){C(t!==te,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator($t.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?ye(r,t.getCompare()):ve;var a=t.toString(),h=T(this.indexSet_);h[a]=t;var u=T(this.indexes_);return u[a]=n,new c(u,h)},c.prototype.addToIndexes=function(h,u){var l=this;return new c(R(this.indexes_,function(t,e){var n=b(l.indexSet_,e);if(C(n,"Missing index implementation for "+e),t===ve){if(n.isDefinedOn(h.node)){for(var r=[],i=u.getIterator($t.Wrap),o=i.getNext();o;)o.name!=h.name&&r.push(o),o=i.getNext();return r.push(h),ye(r,n.getCompare())}return ve}var s=u.get(h.name),a=t;return s&&(a=a.remove(new $t(h.name,s))),a.insert(h,h.node)}),this.indexSet_)},c.prototype.removeFromIndexes=function(n,r){return new c(R(this.indexes_,function(t){if(t===ve)return t;var e=r.get(n.name);return e?t.remove(new $t(n.name,e)):t}),this.indexSet_)},c}();function me(t,e){return ut(t.name,e.name)}function Ce(t,e){return ut(t,e)}var Ee=function(){function a(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&oe(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(a,"EMPTY_NODE",{get:function(){return he||(he=new a(new de(Ce),null,ge.Default))},enumerable:!0,configurable:!0}),a.prototype.isLeafNode=function(){return!1},a.prototype.getPriority=function(){return this.priorityNode_||he},a.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new a(this.children_,t,this.indexMap_)},a.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?he:e},a.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},a.prototype.hasChild=function(t){return null!==this.children_.get(t)},a.prototype.updateImmediateChild=function(t,e){if(C(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new $t(t,e),r=void 0,i=void 0;return i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),new a(r,r.isEmpty()?he:this.priorityNode_,i)},a.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;C(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},a.prototype.isEmpty=function(){return this.children_.isEmpty()},a.prototype.numChildren=function(){return this.children_.count()},a.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(ue,function(t,e){r[t]=e.val(n),i++,s&&a.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},a.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+ie(this.getPriority().val())+":"),this.forEachChild(ue,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":X(r)}return this.lazyHash_},a.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new $t(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},a.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},a.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new $t(e,this.children_.get(e)):null},a.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},a.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new $t(e,this.children_.get(e)):null},a.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},a.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},a.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,$t.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},a.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},a.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,$t.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},a.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===we?-1:0},a.prototype.withIndex=function(t){if(t===te||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new a(this.children_,this.priorityNode_,e)},a.prototype.isIndexed=function(t){return t===te||this.indexMap_.hasIndex(t)},a.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(ue),r=e.getIterator(ue),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},a.prototype.resolveIndex_=function(t){return t===te?null:this.indexMap_.get(t.toString())},a.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,a}(),we=new(function(t){function e(){return t.call(this,new de(Ce),Ee.EMPTY_NODE,ge.Default)||this}return s(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ee.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ee));Object.defineProperties($t,{MIN:{value:new $t(at,Ee.EMPTY_NODE)},MAX:{value:new $t(ht,we)}}),Zt.__EMPTY_NODE=Ee.EMPTY_NODE,se.__childrenNodeConstructor=Ee,Dt=we,re=we;var be=!0;function Se(t,e){if(void 0===e&&(e=null),null===t)return Ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),C(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new se(t,Se(e));if(t instanceof Array||!be){var r=Ee.EMPTY_NODE,i=t;return S(i,function(t,e){if(w(i,t)&&"."!==t.substring(0,1)){var n=Se(e);!n.isLeafNode()&&n.isEmpty()||(r=r.updateImmediateChild(t,n))}}),r.updatePriority(Se(e))}var o=[],s=!1,a=t;if(S(a,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=Se(a[t]);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new $t(t,n)))}}),0==o.length)return Ee.EMPTY_NODE;var n=ye(o,me,function(t){return t.name},Ce);if(s){var h=ye(o,ue.getCompare());return new Ee(n,Se(e),new ge({".priority":h},{".priority":ue}))}return new Ee(n,Se(e),ge.Default)}ne=Se;var Te,Ie,Ne,Re=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ut(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return $t.MIN},e.prototype.maxPost=function(){return $t.MAX},e.prototype.makePost=function(t,e){var n=Se(t);return new $t(e,n)},e.prototype.toString=function(){return".value"},e}(Jt)),Pe=function(n){function t(t){var e=n.call(this)||this;return e.indexPath_=t,C(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}return s(t,n),t.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?ut(t.name,e.name):i},t.prototype.makePost=function(t,e){var n=Se(t),r=Ee.EMPTY_NODE.updateChild(this.indexPath_,n);return new $t(e,r)},t.prototype.maxPost=function(){var t=Ee.EMPTY_NODE.updateChild(this.indexPath_,we);return new $t(ht,t)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(Jt),De=function(){function i(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return i.prototype.val=function(){return k("DataSnapshot.val",0,0,arguments.length),this.node_.val()},i.prototype.exportVal=function(){return k("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},i.prototype.toJSON=function(){return k("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},i.prototype.exists=function(){return k("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},i.prototype.child=function(t){k("DataSnapshot.child",0,1,arguments.length),t=String(t),jt("DataSnapshot.child",1,t,!1);var e=new Ct(t),n=this.ref_.child(e);return new i(this.node_.getChild(e),n,ue)},i.prototype.hasChild=function(t){k("DataSnapshot.hasChild",1,1,arguments.length),jt("DataSnapshot.hasChild",1,t,!1);var e=new Ct(t);return!this.node_.getChild(e).isEmpty()},i.prototype.getPriority=function(){return k("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},i.prototype.forEach=function(n){var r=this;return k("DataSnapshot.forEach",1,1,arguments.length),F("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new i(e,r.ref_.child(t),ue))})},i.prototype.hasChildren=function(){return k("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(i.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),i.prototype.numChildren=function(){return k("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},i.prototype.getRef=function(){return k("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(i.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),i}(),Oe=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+m(this.snapshot.exportVal())},t}(),ke=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),xe=function(){function e(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return e.prototype.respondsTo=function(t){return"value"===t},e.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Oe("value",this,new De(t.snapshotNode,e.getRef(),n))},e.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){C(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},e.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ke(this,t,e):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Fe=function(){function i(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return i.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,w(this.callbacks_,e)},i.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ke(this,t,e):null},i.prototype.createEvent=function(t,e){C(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Oe(t.type,this,new De(t.snapshotNode,n,r),t.prevName)},i.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){C(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},i.prototype.matches=function(n){if(n instanceof i){if(!this.callbacks_||!n.callbacks_)return!0;if(this.context_===n.context_){var t=N(n.callbacks_);if(t===N(this.callbacks_)){if(1!==t)return function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0}(this.callbacks_,function(t,e){return n.callbacks_[t]===e});var e=D(n.callbacks_),r=D(this.callbacks_);return!(r!==e||n.callbacks_[e]&&this.callbacks_[r]&&n.callbacks_[e]!==this.callbacks_[r])}}}return!1},i.prototype.hasAnyCallback=function(){return null!==this.callbacks_},i}(),Ae=function(){function u(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(u,"__referenceConstructor",{get:function(){return C(Te,"Reference.ts has not been loaded"),Te},set:function(t){Te=t},enumerable:!0,configurable:!0}),u.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===te){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=at)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=ht)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ue){if(null!=e&&!Wt(e)||null!=n&&!Wt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(C(t.getIndex()instanceof Pe||t.getIndex()===Re,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},u.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},u.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},u.prototype.getQueryParams=function(){return this.queryParams_},u.prototype.getRef=function(){return k("Query.ref",0,0,arguments.length),new u.__referenceConstructor(this.repo,this.path)},u.prototype.on=function(t,e,n,r){k("Query.on",2,4,arguments.length),Ht("Query.on",1,t,!1),F("Query.on",2,e,!1);var i=u.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},u.prototype.onValueEvent=function(t,e,n){var r=new xe(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},u.prototype.onChildEvent=function(t,e,n){var r=new Fe(t,e,n);this.repo.addEventCallbackForQuery(this,r)},u.prototype.off=function(t,e,n){k("Query.off",0,3,arguments.length),Ht("Query.off",1,t,!0),F("Query.off",2,e,!0),A("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new xe(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Fe(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},u.prototype.once=function(e,n,t,r){var i=this;k("Query.once",1,4,arguments.length),Ht("Query.once",1,e,!1),F("Query.once",2,n,!0);var o=u.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new l;a.promise.catch(function(){});var h=function(t){s&&(s=!1,i.off(e,h),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,h,function(t){i.off(e,h),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},u.prototype.limitToFirst=function(t){if(k("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new u(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},u.prototype.limitToLast=function(t){if(k("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new u(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},u.prototype.orderByChild=function(t){if(k("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');jt("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Ct(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new Pe(e),r=this.queryParams_.orderBy(n);return u.validateQueryEndpoints_(r),new u(this.repo,this.path,r,!0)},u.prototype.orderByKey=function(){k("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(te);return u.validateQueryEndpoints_(t),new u(this.repo,this.path,t,!0)},u.prototype.orderByPriority=function(){k("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(ue);return u.validateQueryEndpoints_(t),new u(this.repo,this.path,t,!0)},u.prototype.orderByValue=function(){k("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Re);return u.validateQueryEndpoints_(t),new u(this.repo,this.path,t,!0)},u.prototype.startAt=function(t,e){void 0===t&&(t=null),k("Query.startAt",0,2,arguments.length),qt("Query.startAt",1,t,this.path,!0),Bt("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(u.validateLimit_(n),u.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new u(this.repo,this.path,n,this.orderByCalled_)},u.prototype.endAt=function(t,e){void 0===t&&(t=null),k("Query.endAt",0,2,arguments.length),qt("Query.endAt",1,t,this.path,!0),Bt("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(u.validateLimit_(n),u.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new u(this.repo,this.path,n,this.orderByCalled_)},u.prototype.equalTo=function(t,e){if(k("Query.equalTo",1,2,arguments.length),qt("Query.equalTo",1,t,this.path,!1),Bt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},u.prototype.toString=function(){return k("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},u.prototype.toJSON=function(){return k("Query.toJSON",0,1,arguments.length),this.toString()},u.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},u.prototype.queryIdentifier=function(){var t=this.queryObject(),e=pt(t);return"{}"===e?"default":e},u.prototype.isEqual=function(t){if(k("Query.isEqual",1,1,arguments.length),!(t instanceof u)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},u.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,F(t,3,r.cancel,!0),r.context=n,A(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(x(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(u.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),u}(),Le=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return w(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return I(this.set)},t.prototype.count=function(){return N(this.set)},t.prototype.each=function(n){S(this.set,function(t,e){return n(t,e)})},t.prototype.keys=function(){var e=[];return S(this.set,function(t){e.push(t)}),e},t}(),Me=function(){function i(){this.value_=null,this.children_=null}return i.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},i.prototype.remember=function(t,e){if(t.isEmpty())this.value_=e,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,e);else{null==this.children_&&(this.children_=new Le);var n=t.getFront();this.children_.contains(n)||this.children_.add(n,new i);var r=this.children_.get(n);t=t.popFront(),r.remember(t,e)}},i.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,!(this.children_=null);if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(ue,function(t,e){n.remember(new Ct(t),e)}),this.forget(t)}if(null===this.children_)return!0;var r=t.getFront();return t=t.popFront(),this.children_.contains(r)&&this.children_.get(r).forget(t)&&this.children_.remove(r),!!this.children_.isEmpty()&&!(this.children_=null)},i.prototype.forEachTree=function(r,i){null!==this.value_?i(r,this.value_):this.forEachChild(function(t,e){var n=new Ct(r.toString()+"/"+t);e.forEachTree(n,i)})},i.prototype.forEachChild=function(n){null!==this.children_&&this.children_.each(function(t,e){n(t,e)})},i}(),We=function(t,e){return t&&"object"==typeof t?(C(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},qe=function(t,r){var i,e=t.getPriority().val(),n=We(e,r);if(t.isLeafNode()){var o=t,s=We(o.getValue(),r);return s!==o.getValue()||n!==o.getPriority().val()?new se(s,Se(n)):t}var a=t;return n!==(i=a).getPriority().val()&&(i=i.updatePriority(new se(n))),a.forEachChild(ue,function(t,e){var n=qe(e,r);n!==e&&(i=i.updateImmediateChild(t,n))}),i};(Ne=Ie||(Ie={}))[Ne.OVERWRITE=0]="OVERWRITE",Ne[Ne.MERGE=1]="MERGE",Ne[Ne.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ne[Ne.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Qe,Ue,Ve=function(){function e(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,C(!r||e,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),He=function(){function n(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ie.ACK_USER_WRITE,this.source=Ve.User}return n.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Ct(t));return new n(Ct.Empty,e,this.revert)}return C(this.path.getFront()===t,"operationForChild called for unrelated child."),new n(this.path.popFront(),this.affectedTree,this.revert)},n}(),Be=function(){function o(t,e){void 0===e&&(Qe||(Qe=new de(lt)),e=Qe),this.value=t,this.children=e}return o.fromObject=function(t){var n=o.Empty;return S(t,function(t,e){n=n.set(new Ct(t),e)}),n},o.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},o.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ct.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Ct(n).child(i.path),value:i.value}},o.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},o.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):o.Empty},o.prototype.set=function(t,e){if(t.isEmpty())return new o(e,this.children);var n=t.getFront(),r=(this.children.get(n)||o.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new o(this.value,i)},o.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?o.Empty:new o(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?o.Empty:new o(this.value,i)}return this},o.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},o.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||o.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new o(this.value,i)},o.prototype.fold=function(t){return this.fold_(Ct.Empty,t)},o.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},o.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Ct.Empty,e)},o.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},o.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Ct.Empty,e)},o.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):o.Empty},o.prototype.foreach=function(t){this.foreach_(Ct.Empty,t)},o.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},o.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},o.Empty=new o(null),o}(),je=function(){function e(t,e){this.source=t,this.path=e,this.type=Ie.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,Ct.Empty):new e(this.source,this.path.popFront())},e}(),Ke=function(){function e(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ie.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,Ct.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),Ye=function(){function n(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ie.MERGE}return n.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Ct(t));return e.isEmpty()?null:e.value?new Ke(this.source,Ct.Empty,e.value):new n(this.source,Ct.Empty,e)}return C(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,this.path.popFront(),this.children)},n.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},n}(),ze=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ge=function(){function r(t,e){this.eventCache_=t,this.serverCache_=e}return r.prototype.updateEventSnap=function(t,e,n){return new r(new ze(t,e,n),this.serverCache_)},r.prototype.updateServerSnap=function(t,e,n){return new r(this.eventCache_,new ze(t,e,n))},r.prototype.getEventCache=function(){return this.eventCache_},r.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},r.prototype.getServerCache=function(){return this.serverCache_},r.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},r.Empty=new r(new ze(Ee.EMPTY_NODE,!1,!1),new ze(Ee.EMPTY_NODE,!1,!1)),r}(),Xe=function(){function r(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return r.valueChange=function(t){return new r(r.VALUE,t)},r.childAddedChange=function(t,e){return new r(r.CHILD_ADDED,e,t)},r.childRemovedChange=function(t,e){return new r(r.CHILD_REMOVED,e,t)},r.childChangedChange=function(t,e,n){return new r(r.CHILD_CHANGED,e,t,n)},r.childMovedChange=function(t,e){return new r(r.CHILD_MOVED,e,t)},r.CHILD_ADDED="child_added",r.CHILD_REMOVED="child_removed",r.CHILD_CHANGED="child_changed",r.CHILD_MOVED="child_moved",r.VALUE="value",r}(),$e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){C(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Xe.childRemovedChange(e,s)):C(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Xe.childAddedChange(e,n)):o.trackChildChange(Xe.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(ue,function(t,e){n.hasChild(t)||i.trackChildChange(Xe.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(ue,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(Xe.childChangedChange(t,e,n))}else i.trackChildChange(Xe.childAddedChange(t,e))})),n.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ee.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Je=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;C(e==Xe.CHILD_ADDED||e==Xe.CHILD_CHANGED||e==Xe.CHILD_REMOVED,"Only child changes supported for tracking"),C(".priority"!==n,"Only non-priority child changes can be tracked.");var r=b(this.changeMap_,n);if(r){var i=r.type;if(e==Xe.CHILD_ADDED&&i==Xe.CHILD_REMOVED)this.changeMap_[n]=Xe.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==Xe.CHILD_REMOVED&&i==Xe.CHILD_ADDED)delete this.changeMap_[n];else if(e==Xe.CHILD_REMOVED&&i==Xe.CHILD_CHANGED)this.changeMap_[n]=Xe.childRemovedChange(n,r.oldSnap);else if(e==Xe.CHILD_CHANGED&&i==Xe.CHILD_ADDED)this.changeMap_[n]=Xe.childAddedChange(n,t.snapshotNode);else{if(e!=Xe.CHILD_CHANGED||i!=Xe.CHILD_CHANGED)throw p("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=Xe.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e}(this.changeMap_)},t}(),Ze=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),tn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ze(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),en=function(t,e){this.viewCache=t,this.changes=e},nn=function(){function c(t){this.filter_=t}return c.prototype.assertIndexed=function(t){C(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),C(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},c.prototype.applyOperation=function(t,e,n,r){var i,o,s=new Je;if(e.type===Ie.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(C(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===Ie.MERGE){var h=e;i=h.source.fromUser?this.applyUserMerge_(t,h.path,h.children,n,r,s):(C(h.source.fromServer,"Unknown source."),o=h.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,h.path,h.children,n,r,o,s))}else if(e.type===Ie.ACK_USER_WRITE){var u=e;i=u.revert?this.revertUserWrite_(t,u.path,n,r,s):this.ackUserWrite_(t,u.path,u.affectedTree,n,r,s)}else{if(e.type!==Ie.LISTEN_COMPLETE)throw p("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var l=s.getChanges();return c.maybeAddValueEvent_(t,i,l),new en(i,l)},c.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Xe.valueChange(e.getCompleteEventSnap()))}},c.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(C(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var h=t.getCompleteServerSnap(),u=h instanceof Ee?h:Ee.EMPTY_NODE,l=n.calcCompleteEventChildren(u);s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var c=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var p=e.getFront();if(".priority"==p){C(1==e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();a=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,d,a);s=null!=f?this.filter_.updatePriority(d,f):o.getNode()}else{var _=e.popFront(),y=void 0;if(o.isCompleteForChild(p)){a=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=v?o.getNode().getImmediateChild(p).updateChild(_,v):o.getNode().getImmediateChild(p)}else y=n.calcCompleteChild(p,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),p,y,_,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},c.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,h=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=u.updateFullNode(h.getNode(),n,null);else if(u.filtersNodes()&&!h.isFiltered()){var l=h.getNode().updateChild(e,n);a=u.updateFullNode(h.getNode(),l,null)}else{var c=e.getFront();if(!h.isCompleteForPath(e)&&1<e.getLength())return t;var p=e.popFront(),d=h.getNode().getImmediateChild(c).updateChild(p,n);a=".priority"==c?u.updatePriority(h.getNode(),d):u.updateChild(h.getNode(),c,d,p,Ze,null)}var f=t.updateServerSnap(a,h.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),_=new tn(r,f,i);return this.generateEventCacheAfterServerEvent_(f,e,r,_,s)},c.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,h=t.getEventCache(),u=new tn(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,h.isFullyInitialized(),h.isFiltered());else{var c=e.popFront(),p=h.getNode().getImmediateChild(l),d=void 0;if(c.isEmpty())d=n;else{var f=u.getCompleteChild(l);d=null!=f?".priority"===c.getBack()&&f.getChild(c.parent()).isEmpty()?f:f.updateChild(c,n):Ee.EMPTY_NODE}if(p.equals(d))s=t;else{var _=this.filter_.updateChild(h.getNode(),l,d,c,u,o);s=t.updateEventSnap(_,h.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},c.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},c.prototype.applyUserMerge_=function(r,i,t,o,s,a){var h=this,u=r;return t.foreach(function(t,e){var n=i.child(t);c.cacheHasChild_(r,n.getFront())&&(u=h.applyUserOverwrite_(u,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);c.cacheHasChild_(r,n.getFront())||(u=h.applyUserOverwrite_(u,n,e,o,s,a))}),u},c.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},c.prototype.applyServerMerge_=function(o,t,e,s,a,h,u){var l=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,c=o;n=t.isEmpty()?e:Be.Empty.setTree(t,e);var p=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(p.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=l.applyMerge_(n,e);c=l.applyServerOverwrite_(c,new Ct(t),r,s,a,h,u)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!p.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=l.applyMerge_(r,e);c=l.applyServerOverwrite_(c,new Ct(t),i,s,a,h,u)}}),c},c.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var h=Be.Empty;return a.getNode().forEachChild(te,function(t,e){h=h.set(new Ct(t),e)}),this.applyServerMerge_(t,r,h,n,i,s,o)}return t}var u=Be.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(u=u.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,u,n,i,s,o)},c.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ze,r)},c.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new tn(n,t,r),a=t.getEventCache().getNode(),h=void 0;if(e.isEmpty()||".priority"===e.getFront()){var u=void 0;if(t.getServerCache().isFullyInitialized())u=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();C(l instanceof Ee,"serverChildren would be complete if leaf node"),u=n.calcCompleteEventChildren(l)}u=u,h=this.filter_.updateFullNode(a,u,i)}else{var c=e.getFront(),p=n.calcCompleteChild(c,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(c)&&(p=a.getImmediateChild(c)),(h=null!=p?this.filter_.updateChild(a,c,p,e.popFront(),s,i):t.getEventCache().getNode().hasChild(c)?this.filter_.updateChild(a,c,Ee.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(h=this.filter_.updateFullNode(h,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Ct.Empty),t.updateEventSnap(h,o,this.filter_.filtersNodes())},c}(),rn=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Xe.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Xe.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Xe.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Xe.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Xe.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Xe.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Xe.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw p("Should only compare child_ events.");var n=new $t(t.childName,t.snapshotNode),r=new $t(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),on=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new $e(n.getIndex()),i=n.getNodeFilter();this.processor_=new nn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ee.EMPTY_NODE,o.getNode(),null),h=i.updateFullNode(Ee.EMPTY_NODE,s.getNode(),null),u=new ze(a,o.isFullyInitialized(),r.filtersNodes()),l=new ze(h,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Ge(l,u),this.eventGenerator_=new rn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,n){var r=[];if(n){C(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},t.prototype.applyOperation=function(t,e,n){t.type===Ie.MERGE&&null!==t.source.queryId&&(C(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),C(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),C(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(ue,function(t,e){n.push(Xe.childAddedChange(t,e))});return e.isFullyInitialized()&&n.push(Xe.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),sn=function(){function u(){this.views_={}}return Object.defineProperty(u,"__referenceConstructor",{get:function(){return C(Ue,"Reference.ts has not been loaded"),Ue},set:function(t){C(!Ue,"__referenceConstructor has already been defined"),Ue=t},enumerable:!0,configurable:!0}),u.prototype.isEmpty=function(){return I(this.views_)},u.prototype.applyOperation=function(n,r,i){var t=n.source.queryId;if(null!==t){var e=b(this.views_,t);return C(null!=e,"SyncTree gave us an op for an invalid query."),e.applyOperation(n,r,i)}var o=[];return S(this.views_,function(t,e){o=o.concat(e.applyOperation(n,r,i))}),o},u.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=b(this.views_,o);if(!s){var a=n.calcCompleteEventCache(i?r:null),h=!1;h=!!a||(a=r instanceof Ee?n.calcCompleteEventChildren(r):Ee.EMPTY_NODE,!1);var u=new Ge(new ze(a,h,!1),new ze(r,i,!1));s=new on(t,u),this.views_[o]=s}return s.addEventRegistration(e),s.getInitialEvents(e)},u.prototype.removeEventRegistration=function(t,n,r){var e=t.queryIdentifier(),i=[],o=[],s=this.hasCompleteView();if("default"===e){var a=this;S(this.views_,function(t,e){o=o.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete a.views_[t],e.getQuery().getQueryParams().loadsAllData()||i.push(e.getQuery()))})}else{var h=b(this.views_,e);h&&(o=o.concat(h.removeEventRegistration(n,r)),h.isEmpty()&&(delete this.views_[e],h.getQuery().getQueryParams().loadsAllData()||i.push(h.getQuery())))}return s&&!this.hasCompleteView()&&i.push(new u.__referenceConstructor(t.repo,t.path)),{removed:i,events:o}},u.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},u.prototype.getCompleteServerCache=function(n){var r=null;return S(this.views_,function(t,e){r=r||e.getCompleteServerCache(n)}),r},u.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return b(this.views_,e)},u.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},u.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},u.prototype.getCompleteView=function(){var t,e,n;return(t=this.views_,(n=P(t,function(t){return t.getQuery().getQueryParams().loadsAllData()},e))&&t[n])||null},u}(),an=function(){function a(t){this.writeTree_=t}return a.prototype.addWrite=function(t,e){if(t.isEmpty())return new a(new Be(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Ct.relativePath(r,t);return i=i.updateChild(o,e),new a(this.writeTree_.set(r,i))}var s=new Be(e);return new a(this.writeTree_.setTree(t,s))},a.prototype.addWrites=function(n,t){var r=this;return S(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},a.prototype.removeWrite=function(t){return t.isEmpty()?a.Empty:new a(this.writeTree_.setTree(t,Be.Empty))},a.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},a.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Ct.relativePath(e.path,t)):null},a.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ue,function(t,e){n.push(new $t(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new $t(t,e.value))}),n},a.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new a(null!=e?new Be(e):this.writeTree_.subtree(t))},a.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},a.prototype.apply=function(t){return a.applySubtreeWrite_(Ct.Empty,this.writeTree_,t)},a.Empty=new a(new Be(null)),a.applySubtreeWrite_=function(n,t,r){if(null!=t.value)return r.updateChild(n,t.value);var i=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(C(null!==e.value,"Priority writes must always be leaf nodes"),i=e.value):r=a.applySubtreeWrite_(n.child(t),e,r)}),r.getChild(n).isEmpty()||null===i||(r=r.updateChild(n.child(".priority"),i)),r},a}(),hn=function(){function u(){this.visibleWrites_=an.Empty,this.allWrites_=[],this.lastWriteId_=-1}return u.prototype.childWrites=function(t){return new un(t,this)},u.prototype.addOverwrite=function(t,e,n,r){C(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},u.prototype.addMerge=function(t,e,n){C(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},u.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},u.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});C(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var h=r.children;S(h,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},u.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},u.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Ct.Empty)){var o=u.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);h=t||Ee.EMPTY_NODE;return o.apply(h)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);if(a.isEmpty())return t;if(null!=t||a.hasCompleteWrite(Ct.Empty)){var h=t||Ee.EMPTY_NODE;return a.apply(h)}return null},u.prototype.calcCompleteEventChildren=function(t,e){var r=Ee.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(ue,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(ue,function(t,e){var n=i.childCompoundWrite(new Ct(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},u.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){C(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},u.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},u.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},u.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),h=a.getCompleteNode(Ct.Empty);if(null!=h)s=h;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],l=o.getCompare(),c=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=c.getNext();p&&u.length<r;)0!==l(p,n)&&u.push(p),p=c.getNext();return u},u.prototype.recordContainsPath_=function(n,r){return n.snap?n.path.contains(r):!!P(n.children,function(t,e){return n.path.child(e).contains(r)})},u.prototype.resetTree_=function(){this.visibleWrites_=u.layerTree_(this.allWrites_,u.DefaultFilter_,Ct.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},u.DefaultFilter_=function(t){return t.visible},u.layerTree_=function(t,e,n){for(var r=an.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Ct.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Ct.relativePath(s,n),r=r.addWrite(Ct.Empty,o.snap.getChild(a)));else{if(!o.children)throw p("WriteRecord should have .snap or .children");if(n.contains(s))a=Ct.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=Ct.relativePath(s,n)).isEmpty())r=r.addWrites(Ct.Empty,o.children);else{var h=b(o.children,a.getFront());if(h){var u=h.getChild(a.popFront());r=r.addWrite(Ct.Empty,u)}}}}}return r},u}(),un=function(){function e(t,e){this.treePath_=t,this.writeTree_=e}return e.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},e.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},e.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},e.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},e.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},e.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),ln=function(){function v(t){this.listenProvider_=t,this.syncPointTree_=Be.Empty,this.pendingWriteTree_=new hn,this.tagToQueryMap_={},this.queryToTagMap_={}}return v.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ke(Ve.User,t,e)):[]},v.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Be.fromObject(e);return this.applyOperationToSyncPoints_(new Ye(Ve.User,t,r))},v.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Be.Empty;return null!=n.snap?r=r.set(Ct.Empty,!0):S(n.children,function(t,e){r=r.set(new Ct(t),e)}),this.applyOperationToSyncPoints_(new He(n.path,r,e))}return[]},v.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ke(Ve.Server,t,e))},v.prototype.applyServerMerge=function(t,e){var n=Be.fromObject(e);return this.applyOperationToSyncPoints_(new Ye(Ve.Server,t,n))},v.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new je(Ve.Server,t))},v.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=v.parseQueryKey_(r),o=i.path,s=i.queryId,a=Ct.relativePath(o,t),h=new Ke(Ve.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,h)},v.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=v.parseQueryKey_(r),o=i.path,s=i.queryId,a=Ct.relativePath(o,t),h=Be.fromObject(e),u=new Ye(Ve.forServerTaggedQuery(s),a,h);return this.applyTaggedOperation_(o,u)}return[]},v.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=v.parseQueryKey_(n),i=r.path,o=r.queryId,s=Ct.relativePath(i,t),a=new je(Ve.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},v.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Ct.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);(s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Ct.Empty)):(s=new sn,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i)?n=!0:(n=!1,i=Ee.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Ct.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var h=v.makeQueryKey_(t);C(!(h in this.queryToTagMap_),"View does not exist, but we have a tag");var u=v.getNextQueryTag_();this.queryToTagMap_[h]=u,this.tagToQueryMap_["_"+u]=h}var l=this.pendingWriteTree_.childWrites(r),c=s.addEventRegistration(t,e,l,i,n);if(!a&&!o){var p=s.viewForQuery(t);c=c.concat(this.setupListener_(t,p))}return c},v.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var h=a.removed;s=a.events;var u=-1!==h.findIndex(function(t){return t.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(u&&!l){var c=this.syncPointTree_.subtree(i);if(!c.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(c),d=0;d<p.length;++d){var f=p[d],_=f.getQuery(),y=this.createListenerForView_(f);this.listenProvider_.startListening(v.queryForListening_(_),this.tagForQuery_(_),y.hashFn,y.onComplete)}}if(!l&&0<h.length&&!n)if(u){this.listenProvider_.stopListening(v.queryForListening_(t),null)}else h.forEach(function(t){var e=r.queryToTagMap_[v.makeQueryKey_(t)];r.listenProvider_.stopListening(v.queryForListening_(t),e)});this.removeTags_(h)}return s},v.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=Ct.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},v.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),S(n,function(t,e){r=r.concat(e)}),r})},v.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=v.makeQueryKey_(n),i=this.queryToTagMap_[r];delete this.queryToTagMap_[r],delete this.tagToQueryMap_["_"+i]}}},v.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},v.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(v.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)C(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),S(n,function(t,e){r=r.concat(e)}),r}),h=0;h<a.length;++h){var u=a[h];this.listenProvider_.stopListening(v.queryForListening_(u),this.tagForQuery_(u))}return o},v.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||Ee.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},v.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},v.parseQueryKey_=function(t){var e=t.indexOf("$");return C(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ct(t.substr(0,e))}},v.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},v.prototype.tagForQuery_=function(t){var e=v.makeQueryKey_(t);return b(this.queryToTagMap_,e)},v.getNextQueryTag_=function(){return v.nextQueryTag_++},v.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);C(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},v.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Ct.Empty))},v.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Ct.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Ct.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),h=e.children.get(s);if(h&&a){var u=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,h,u,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},v.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var h=this,e=t.get(Ct.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(Ct.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(u=u.concat(h.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(u=u.concat(e.applyOperation(o,a,s))),u},v.nextQueryTag_=1,v}(),cn=function(){function t(){this.rootNode_=Ee.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),pn=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(et("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ot(t)},t}(),dn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),w(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return o(this.counters_)},t}(),fn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new dn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),_n=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),n=T(t);return this.last_&&S(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},t}(),yn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new _n(t);var n=1e4+2e4*Math.random();mt(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;S(t,function(t,e){0<e&&w(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),mt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),vn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new gn(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},t.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),gn=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();J&&et("event: "+e.toString()),gt(n)}}},t.prototype.getPath=function(){return this.path_},t}(),mn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},C(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(e){C(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},t}(),Cn=function(r){function t(){var e,t,n=r.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}return s(t,r),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(t){return C("visible"===t,"Unknown event type: "+t),[this.visible_]},t}(mn),En=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||c()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return s(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(t){return C("online"===t,"Unknown event type: "+t),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(mn),wn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&gt(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===n())break}},t}(),bn=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nt(t),this.stats_=fn.getCollection(e),this.urlFn=function(t){return e.connectionURL(St,t)}}return t.prototype.open=function(t,e){var o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new wn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(d()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!o.isClosed_){o.scriptTagHolder=new Sn(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1],i=t[2];if(o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"==n)o.id=r,o.password=i;else{if("close"!==n)throw new Error("Unrecognized command received: "+n);r?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(r,function(){o.onClosed_()})):o.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(n,r)},function(){o.onClosed_()},o.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),!d()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(wt)&&(t.r="f");var e=o.urlFn(t);o.log_("Connecting via long-poll to "+e),o.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!d()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=m(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=a(e),h.encodeByteArray(n,!0)),i=dt(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!d()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=m(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Sn=function(){function s(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Le,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,d())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=G(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=s.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))i='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){et("frame writing exception"),t.stack&&et(t.stack),et(t)}}}return s.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||et("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},s.prototype.close=function(){var t=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0))),d()&&this.myID){var e={disconn:"t"};e.id=this.myID,e.pw=this.myPW;var n=this.urlFn(e);s.nodeRestRequest(n)}var r=this.onDisconnect;r&&(this.onDisconnect=null,r())},s.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},s.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},s.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},s.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},s.prototype.addTag=function(t,n){var r=this;d()?this.doNodeLongPoll(t,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){et("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},s}(),Tn=null;"undefined"!=typeof MozWebSocket?Tn=MozWebSocket:"undefined"!=typeof WebSocket&&(Tn=WebSocket);var In=function(){function i(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nt(this.connId),this.stats_=fn.getCollection(e),this.connURL=i.connectionURL_(e,n,r)}return i.connectionURL_=function(t,e,n){var r={v:"5"};return!d()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(wt)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(bt,r)},i.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,K.set("previous_websocket_failure",!0);try{if(d()){var r={headers:{"User-Agent":"Firebase/5/"+tr.SDK_VERSION+"/"+process.platform+"/Node"}},i=process.env,o=0==this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Tn(this.connURL,[],r)}else this.mySock=new Tn(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},i.prototype.start=function(){},i.forceDisallow=function(){i.forceDisallow_=!0},i.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==Tn&&!i.forceDisallow_},i.previouslyFailed=function(){return K.isInMemoryStorage||!0===K.get("previous_websocket_failure")},i.prototype.markConnectionHealthy=function(){K.remove("previous_websocket_failure")},i.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=g(e);this.onMessage(n)}},i.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},i.prototype.extractFrameCount_=function(t){if(C(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},i.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},i.prototype.send=function(t){this.resetKeepAlive();var e=m(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=dt(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},i.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},i.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},i.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},i.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},i.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i}(),Nn=function(){function i(t){this.initTransports_(t)}return Object.defineProperty(i,"ALL_TRANSPORTS",{get:function(){return[bn,In]},enumerable:!0,configurable:!0}),i.prototype.initTransports_=function(t){var e=In&&In.isAvailable(),n=e&&!In.previouslyFailed();if(t.webSocketOnly&&(e||ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[In];else{var r=this.transports_=[];ft(i.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&r.push(e)})}},i.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},i.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},i}(),Rn=function(){function t(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nt("c:"+this.id+":"),this.transportManager_=new Nn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=mt(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},t.prototype.connReceiver_=function(e){var n=this;return function(t){2!=n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=ct("t",t),n=ct("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=ct("t",t),n=ct("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=ct("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?rt("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rt("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ot("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),mt(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mt(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(K.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Pn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Dn=function(a){function l(t,e,n,r,i,o){var s=a.call(this)||this;if(s.repoInfo_=t,s.onDataUpdate_=e,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=l.nextPersistentConnectionId_++,s.log_=nt("p:"+s.id+":"),s.interruptReasons_={},s.listens_={},s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o&&!d())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),Cn.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&En.getInstance().on("online",s.onOnline_,s),s}return s(l,a),l.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(m(i)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},l.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},C(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens_[o][i],"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=s,this.connected_&&this.sendListen_(s)},l.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;l.warnOnListenWarnings_(e,o),(i.listens_[s]&&i.listens_[s][a])===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},l.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&w(t,"w")){var n=b(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();ot("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},l.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},l.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=E(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},l.prototype.tryAuth=function(){var t,r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,e=(t=E(i).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",n={cred:i};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},l.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),C(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},l.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},l.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},l.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},l.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},l.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},l.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},l.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},l.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},l.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},l.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},l.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+m(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},l.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):rt("Unrecognized action received from server: "+m(t)+"\nAre you using the latest client?")},l.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},l.prototype.scheduleConnect_=function(t){var e=this;C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},l.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},l.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},l.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},l.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+l.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,h=null,u=function(){h?h.close():(a=!0,r())};this.realtime_={close:u,sendRequest:function(t){C(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?et("getToken() completed but was canceled"):(et("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,h=new Rn(i,o.repoInfo_,e,n,r,function(t){ot(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||u()})}},l.prototype.interrupt=function(t){et("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},l.prototype.resume=function(t){et("Resuming connection for reason: "+t),delete this.interruptReasons_[t],I(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},l.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},l.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},l.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return pt(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},l.prototype.removeListen_=function(t,e){var n,r=new Ct(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===N(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},l.prototype.onAuthRevoked_=function(t,e){et("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},l.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},l.prototype.restoreState_=function(){var n=this;this.tryAuth(),S(this.listens_,function(t,e){S(e,function(t,e){n.sendListen_(e)})});for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}},l.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+tr.SDK_VERSION.replace(/\./g,"-")]=1,c()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},l.prototype.shouldReconnect_=function(){var t=En.getInstance().currentlyOnline();return I(this.interruptReasons_)&&t},l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l}(Pn),On=function(i){function u(t,e,n){var r=i.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=nt("p:rest:"),r.listens_={},r}return s(u,i),u.prototype.reportStats=function(t){throw new Error("Method not implemented.")},u.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(C(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},u.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=u.getListenId_(t,r),h={};this.listens_[a]=h;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;(404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),b(o.listens_,a)===h)&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},u.prototype.unlisten=function(t,e){var n=u.getListenId_(t,e);delete this.listens_[n]},u.prototype.refreshAuthToken=function(t){},u.prototype.restRequest_=function(o,s,a){var h=this;void 0===s&&(s={}),s.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(s.auth=e);var n,r=(h.repoInfo_.secure?"https://":"http://")+h.repoInfo_.host+o+"?ns="+h.repoInfo_.namespace+(n=[],S(s,function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),n.length?"&"+n.join("&"):"");h.log_("Sending REST request for "+r);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(a&&4===i.readyState){h.log_("REST Response for "+r+" received. status:",i.status,"response:",i.responseText);var t=null;if(200<=i.status&&i.status<300){try{t=g(i.responseText)}catch(t){ot("Failed to parse JSON response for "+r+": "+i.responseText)}a(null,t)}else 401!==i.status&&404!==i.status&&ot("Got unsuccessful REST response for "+r+" Status: "+i.status),a(i.status);a=null}},i.open("GET",r,!0),i.send()})},u}(Pn),kn="repo_interrupt",xn=function(){function t(t,e,n){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Me,this.persistentConnection_=null;var r=new pn(n);if(this.stats_=fn.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new On(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{m(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Dn(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=fn.getOrCreateReporter(t,function(){return new yn(s.stats_,s.server_)}),this.transactions_init_(),this.infoData_=new cn,this.infoSyncTree_=new ln({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ln({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Ct(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Ct(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=R(e,function(t){return Se(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Se(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var h=R(e,function(t){return Se(t)});o=this.serverSyncTree_.applyServerMerge(i,h)}else{var u=Se(e);o=this.serverSyncTree_.applyServerOverwrite(i,u)}var l=i;0<o.length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var n=this;ft(t,function(t,e){n.updateInfo_(e,t)})},t.prototype.updateInfo_=function(t,e){var n=new Ct("/.info/"+t),r=Se(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=Se(t,e),a=qe(r,n),h=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(i,a,h,!0);this.eventQueue_.queueEvents(u),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||ot("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(h,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var r=!0,i=this.generateServerValues(),h={};if(S(t,function(t,e){r=!1;var n=Se(e);h[t]=qe(n,i)}),r)et("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok");else{var u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,h,u);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||ot("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),S(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},t.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var t,n,i,e=this.generateServerValues(),o=(t=this.onDisconnect_,n=e,i=new Me,t.forEachTree(new Ct(""),function(t,e){i.remember(t,qe(e,n))}),i),s=[];o.forEachTree(Ct.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new Me,this.eventQueue_.raiseEventsForChangedPath(Ct.Empty,s)},t.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Se(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Se(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(I(n))return et("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&S(n,function(t,e){var n=Se(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(kn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(kn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new _n(this.stats_)),this.statsListener_.get()):this.stats_.get();var r=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);S(e,function(t,e){for(var n=t.length;n<r+2;n++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),et.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(r,i,o){r&&gt(function(){if("ok"==i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new jn(this))},enumerable:!0,configurable:!0}),t}(),Fn=function(){function e(t){this.indexedFilter_=new $e(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new $t(e,n))||(n=Ee.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},e.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ee.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ee.EMPTY_NODE);var i=this;return e.forEachChild(ue,function(t,e){i.matches(new $t(t,e))||(r=r.updateImmediateChild(t,Ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},e.prototype.updatePriority=function(t,e){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},e}(),An=function(){function t(t){this.rangedFilter_=new Fn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new $t(e,n))||(n=Ee.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ee.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ee.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ee.EMPTY_NODE);var a=void 0,h=void 0,u=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();u=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var c=!1;i.hasNext();){s=i.getNext();!c&&u(a,s)<=0&&(c=!0),c&&o<this.limit_&&u(s,h)<=0?o++:r=r.updateImmediateChild(s.name,Ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;C(a.numChildren()==this.limit_,"");var h=new $t(e,n),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(h);if(a.hasChild(e)){for(var c=a.getImmediateChild(e),p=r.getChildAfterChild(this.index_,u,this.reverse_);null!=p&&(p.name==e||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,h);if(l&&!n.isEmpty()&&0<=d)return null!=i&&i.trackChildChange(Xe.childChangedChange(e,n,c)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Xe.childRemovedChange(e,c));var f=a.updateImmediateChild(e,Ee.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(Xe.childAddedChange(p.name,p.node)),f.updateImmediateChild(p.name,p.node)):f}return n.isEmpty()?t:l&&0<=o(u,h)?(null!=i&&(i.trackChildChange(Xe.childRemovedChange(u.name,u.node)),i.trackChildChange(Xe.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(u.name,Ee.EMPTY_NODE)):t},t}(),Ln=function(){function r(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ue}return r.prototype.hasStart=function(){return this.startSet_},r.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},r.prototype.getIndexStartValue=function(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},r.prototype.getIndexStartName=function(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:at},r.prototype.hasEnd=function(){return this.endSet_},r.prototype.getIndexEndValue=function(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},r.prototype.getIndexEndName=function(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ht},r.prototype.hasLimit=function(){return this.limitSet_},r.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},r.prototype.getLimit=function(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_},r.prototype.getIndex=function(){return this.index_},r.prototype.copy_=function(){var t=new r;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},r.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},r.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},r.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},r.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,n.indexStartName_=null!=e?(n.startNameSet_=!0,e):(n.startNameSet_=!1,""),n},r.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,n.indexEndName_=void 0!==e?(n.endNameSet_=!0,e):(n.endNameSet_=!1,""),n},r.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},r.prototype.getQueryObject=function(){var t=r.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==ue&&(e[t.INDEX]=this.index_.toString()),e},r.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},r.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==ue},r.prototype.getNodeFilter=function(){return this.loadsAllData()?new $e(this.getIndex()):this.hasLimit()?new An(this):new Fn(this)},r.prototype.toRestQueryStringParameters=function(){var t,e=r.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===ue?e.PRIORITY_INDEX:this.index_===Re?e.VALUE_INDEX:this.index_===te?e.KEY_INDEX:(C(this.index_ instanceof Pe,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=m(t),this.startSet_&&(n[e.START_AT]=m(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+m(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=m(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+m(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},r.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},r.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},r.DEFAULT=new r,r}(),Mn=function(n){function o(t,e){if(!(t instanceof xn))throw new Error("new Reference() no longer supported - use app.database().");return n.call(this,t,e,Ln.DEFAULT,!1)||this}return s(o,n),o.prototype.getKey=function(){return k("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},o.prototype.child=function(t){var e,n,r,i;return k("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Ct||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),jt(e,n,r,i)):jt("Reference.child",1,t,!1)),new o(this.repo,this.path.child(t))},o.prototype.getParent=function(){k("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new o(this.repo,t)},o.prototype.getRoot=function(){k("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},o.prototype.databaseProp=function(){return this.repo.database},o.prototype.set=function(t,e){k("Reference.set",1,2,arguments.length),Kt("Reference.set",this.path),qt("Reference.set",1,t,this.path,!1),F("Reference.set",2,e,!0);var n=new l;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},o.prototype.update=function(t,e){if(k("Reference.update",1,2,arguments.length),Kt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ot("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ut("Reference.update",1,t,this.path,!1),F("Reference.update",2,e,!0);var i=new l;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},o.prototype.setWithPriority=function(t,e,n){if(k("Reference.setWithPriority",2,3,arguments.length),Kt("Reference.setWithPriority",this.path),qt("Reference.setWithPriority",1,t,this.path,!1),Vt("Reference.setWithPriority",2,e,!1),F("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new l;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},o.prototype.remove=function(t){return k("Reference.remove",0,1,arguments.length),Kt("Reference.remove",this.path),F("Reference.remove",1,t,!0),this.set(null,t)},o.prototype.transaction=function(t,r,e){if(k("Reference.transaction",1,3,arguments.length),Kt("Reference.transaction",this.path),F("Reference.transaction",1,t,!1),F("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(x(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new l;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new Gt(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},o.prototype.setPriority=function(t,e){k("Reference.setPriority",1,2,arguments.length),Kt("Reference.setPriority",this.path),Vt("Reference.setPriority",1,t,!1),F("Reference.setPriority",2,e,!0);var n=new l;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},o.prototype.push=function(t,e){k("Reference.push",0,2,arguments.length),Kt("Reference.push",this.path),qt("Reference.push",1,t,this.path,!0),F("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Xt(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},o.prototype.onDisconnect=function(){return Kt("Reference.onDisconnect",this.path),new zt(this.repo,this.path)},Object.defineProperty(o.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),o}(Ae);Ae.__referenceConstructor=Mn,sn.__referenceConstructor=Mn;var Wn,qn,Qn=function(){this.children={},this.childCount=0,this.value=null},Un=function(){function i(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Qn),this.name_=t,this.parent_=e,this.node_=n}return i.prototype.subTree=function(t){for(var e,n=t instanceof Ct?t:new Ct(t),r=this;null!==(e=n.getFront());){r=new i(e,r,b(r.node_.children,e)||new Qn),n=n.popFront()}return r},i.prototype.getValue=function(){return this.node_.value},i.prototype.setValue=function(t){C(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},i.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},i.prototype.hasChildren=function(){return 0<this.node_.childCount},i.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},i.prototype.forEachChild=function(n){var r=this;S(this.node_.children,function(t,e){n(new i(t,r,e))})},i.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},i.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},i.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},i.prototype.path=function(){return new Ct(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},i.prototype.name=function(){return this.name_},i.prototype.parent=function(){return this.parent_},i.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},i.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=w(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},i}();(qn=Wn||(Wn={}))[qn.RUN=0]="RUN",qn[qn.SENT=1]="SENT",qn[qn.COMPLETED=2]="COMPLETED",qn[qn.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",qn[qn.NEEDS_ABORT=4]="NEEDS_ABORT",xn.MAX_TRANSACTION_RETRIES_=25,xn.prototype.transactions_init_=function(){this.transactionQueueTree_=new Un},xn.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Mn(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:G(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var h=s.update(a.val());if(void 0===h){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var u=new De(s.currentInputSnapshot,new Mn(this,s.path),ue);s.onComplete(null,!1,u)}}else{Qt("transaction failed: Data returned ",h,s.path),s.status=Wn.RUN;var l=this.transactionQueueTree_.subTree(t),c=l.getValue()||[];c.push(s),l.setValue(c);var p=void 0;if("object"==typeof h&&null!==h&&w(h,".priority"))p=b(h,".priority"),C(Wt(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else p=(this.serverSyncTree_.calcCompleteEventCache(t)||Ee.EMPTY_NODE).getPriority().val();p=p;var d=this.generateServerValues(),f=Se(h,p),_=qe(f,d);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=_,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,_,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},xn.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ee.EMPTY_NODE},xn.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);C(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===Wn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},xn.prototype.sendTransactionQueue_=function(a,h){for(var u=this,t=h.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<h.length;i++){var o=h[i];C(o.status===Wn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Wn.SENT,o.retryCount++;var s=Ct.relativePath(a,o.path);n=n.updateChild(s,o.currentOutputSnapshotRaw)}var l=n.val(!0),c=a;this.server_.put(c.toString(),l,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<h.length;r++){if(h[r].status=Wn.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(h[r].currentWriteId)),h[r].onComplete){var i=h[r].currentOutputSnapshotResolved,o=new Mn(u,h[r].path),s=new De(i,o,ue);n.push(h[r].onComplete.bind(null,null,!0,s))}h[r].unwatcher()}u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(a)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(a,e);for(r=0;r<n.length;r++)gt(n[r])}else{if("datastale"===t)for(r=0;r<h.length;r++)h[r].status===Wn.SENT_NEEDS_ABORT?h[r].status=Wn.NEEDS_ABORT:h[r].status=Wn.RUN;else{ot("transaction at "+c.toString()+" failed: "+t);for(r=0;r<h.length;r++)h[r].status=Wn.NEEDS_ABORT,h[r].abortReason=t}u.rerunTransactions_(a)}},r)},xn.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},xn.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Wn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],h=Ct.relativePath(e,a.path),u=!1,l=void 0;if(C(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Wn.NEEDS_ABORT)u=!0,l=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Wn.RUN)if(a.retryCount>=xn.MAX_TRANSACTION_RETRIES_)u=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var c=this.getLatestState_(a.path,o);a.currentInputSnapshot=c;var p=t[s].update(c.val());if(void 0!==p){Qt("transaction failed: Data returned ",p,a.path);var d=Se(p);"object"==typeof p&&null!=p&&w(p,".priority")||(d=d.updatePriority(c.getPriority()));var f=a.currentWriteId,_=this.generateServerValues(),y=qe(d,_);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(f),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else u=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],u&&(t[s].status=Wn.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new Mn(this,t[s].path),g=t[s].currentInputSnapshot,m=new De(g,v,ue);r.push(t[s].onComplete.bind(null,null,!1,m))}else r.push(t[s].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)gt(r[s]);this.sendReadyTransactions_()}},xn.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},xn.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},xn.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},xn.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Wn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},xn.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},xn.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===Wn.SENT_NEEDS_ABORT);else if(e[o].status===Wn.SENT)C(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Wn.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(C(e[o].status===Wn.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)gt(n[o])}};var Vn,Hn="databaseURL",Bn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Vn||(Vn=new t),Vn},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options[Hn];void 0===n&&it("Can't determine Firebase Database URL.  Be sure to include "+Hn+" option when calling firebase.initializeApp().");var r=Ot(n),i=r.repoInfo;return Yt("Invalid Firebase Database URL",1,r),r.path.isEmpty()||it("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=b(this.repos_,t.app.name);e&&b(e,t.repoInfo_.toURLString())===t||it("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=b(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=b(n,t.toURLString());return r&&it("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new xn(t,this.useRestClient_,e),n[t.toURLString()]=r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),jn=function(){function t(t){(this.repo_=t)instanceof xn||it("Don't call new Database() directly - please use firebase.database()."),this.root_=new Mn(t,Ct.Empty),this.INTERNAL=new Kn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),k("database.ref",0,1,arguments.length),t instanceof Mn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),k(e,1,1,arguments.length);var n=Ot(t);Yt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&it(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&it("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){k("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){k("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),Kn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return o=this,h=function(){return e(this,function(t){return this.database.checkDeleted_("delete"),Bn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})},new((a=s=void 0)||(a=Promise))(function(t,e){function n(t){try{i(h.next(t))}catch(t){e(t)}}function r(t){try{i(h.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,r)}i((h=h.apply(o,s||[])).next())});var o,s,a,h},t}(),Yn=Object.freeze({forceLongPolling:function(){In.forceDisallow(),bn.forceAllow()},forceWebSockets:function(){bn.forceDisallow()},isWebSocketsAvailable:function(){return In.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),zn=Dn;Dn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Dn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Gn,Xn=Rn,$n=Tt,Jn=Object.freeze({DataConnection:zn,RealTimeConnection:Xn,hijackHash:function(i){var o=Dn.prototype.put;return Dn.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Dn.prototype.put=o}},ConnectionTarget:$n,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){Bn.getInstance().forceRestClient(t)}}),Zn=jn.ServerValue;Gn=tr.INTERNAL.registerService("database",function(t,e,n){return Bn.getInstance().databaseFromApp(t,n)},{Reference:Mn,Query:Ae,Database:jn,enableLogging:tt,INTERNAL:Yn,ServerValue:Zn,TEST_ACCESS:Jn},null,!0),d()&&(module.exports=Gn)}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-database - be sure to load firebase-app.js first.")}});!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(Ju){"use strict";try{(function(){var o,t;Ju=Ju&&Ju.hasOwnProperty("default")?Ju.default:Ju,(t=o||(o={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT";var e=o.INFO,n=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},r=function(){function t(t){this.name=t,this._logLevel=e,this._logHandler=n}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.ERROR].concat(t))},t}(),i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function a(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function h(o,s,a,u){return new(a||(a=Promise))(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})}function p(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[0,s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var s,u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=c||{},l=u;function f(t){return"string"==typeof t}function d(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function m(){}function y(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function g(t){return"array"==y(t)}function v(t){var e=y(t);return"array"==e||"object"==e&&"number"==typeof t.length}function b(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var w="closure_uid_"+(1e9*Math.random()>>>0),E=0;function S(t,e,n){return t.call.apply(t.bind,arguments)}function T(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:T).apply(null,arguments)}function C(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var D=Date.now||function(){return+new Date};function N(t,o){function e(){}e.prototype=o.prototype,t.S=o.prototype,t.prototype=new e,(t.prototype.constructor=t).re=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function A(){this.i=this.i,this.j=this.j}A.prototype.i=!1,A.prototype.La=function(){if(!this.i&&(this.i=!0,this.G(),0))this[w]||(this[w]=++E)},A.prototype.G=function(){if(this.j)for(;this.j.length;)this.j.shift()()};var k=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(f(t))return f(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},R=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=f(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function M(t){return Array.prototype.concat.apply([],arguments)}function _(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function O(t){return/^[\s\xa0]*$/.test(t)}var P,L=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function x(t,e){return-1!=t.indexOf(e)}function q(t,e){return t<e?-1:e<t?1:0}t:{var F=l.navigator;if(F){var B=F.userAgent;if(B){P=B;break t}}P=""}function V(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function U(t){var e,n={};for(e in t)n[e]=t[e];return n}var Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Q.length;o++)n=Q[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function W(t){return W[" "](t),t}W[" "]=m;var j,z,G=x(P,"Opera"),H=x(P,"Trident")||x(P,"MSIE"),Y=x(P,"Edge"),X=Y||H,J=x(P,"Gecko")&&!(x(P.toLowerCase(),"webkit")&&!x(P,"Edge"))&&!(x(P,"Trident")||x(P,"MSIE"))&&!x(P,"Edge"),$=x(P.toLowerCase(),"webkit")&&!x(P,"Edge");function Z(){var t=l.document;return t?t.documentMode:void 0}t:{var tt="",et=(z=P,J?/rv:([^\);]+)(\)|;)/.exec(z):Y?/Edge\/([\d\.]+)/.exec(z):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(z):$?/WebKit\/(\S+)/.exec(z):G?/(?:Version)[ \/]?(\S+)/.exec(z):void 0);if(et&&(tt=et?et[1]:""),H){var nt=Z();if(null!=nt&&nt>parseFloat(tt)){j=String(nt);break t}}j=tt}var rt,it={};function ot(a){return t=a,e=function(){for(var t=0,e=L(String(j)).split("."),n=L(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=q(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||q(0==o[2].length,0==s[2].length)||q(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=it,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var st=l.document;rt=st&&H?Z()||("CSS1Compat"==st.compatMode?parseInt(j,10):5):void 0;var at=!H||9<=Number(rt),ut=H&&!ot("9"),ct=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",m,e),l.removeEventListener("test",m,e)}catch(t){}return t}();function ht(t,e){this.type=t,this.a=this.target=e,this.b=!1,this.hc=!0}function lt(t,e){ht.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.f=null,t&&this.g(t,e)}ht.prototype.c=function(){this.hc=!1},N(lt,ht);var ft={2:"touch",3:"pen",4:"mouse"};lt.prototype.g=function(t,e){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(J){t:{try{W(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,this.screenY=r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=f(t.pointerType)?t.pointerType:ft[t.pointerType]||"",(this.f=t).defaultPrevented&&this.c()},lt.prototype.c=function(){lt.S.c.call(this);var t=this.f;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ut)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var pt="closure_listenable_"+(1e6*Math.random()|0),dt=0;function mt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ya=i,this.key=++dt,this.ja=this.oa=!1}function yt(t){this.src=t,this.a={},this.b=0}function gt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ja&&o.listener==e&&o.capture==!!n&&o.ya==r)return i}return-1}mt.prototype.a=function(){this.ja=!0,this.ya=this.src=this.proxy=this.listener=null},(s=yt.prototype).add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=gt(t,e,r,i);return-1<s?(e=t[s],n||(e.oa=!1)):((e=new mt(e,this.src,o,!!r,i)).oa=n,t.push(e)),e},s.Sc=function(t,e,n,r){if((t=t.toString())in this.a){var i=this.a[t];-1<(e=gt(i,e,n,r))&&(i[e].a(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.a[t],this.b--))}},s.fc=function(t){var e=t.type;if(e in this.a){var n,r=this.a[e],i=k(r,t);(n=0<=i)&&Array.prototype.splice.call(r,i,1),n&&(t.a(),0==this.a[e].length&&(delete this.a[e],this.b--))}},s.Tc=function(){var t;for(t in this.a){for(var e=this.a[t],n=0;n<e.length;n++)e[n].a();delete this.a[t],this.b--}},s.Rc=function(t,e,n,r){var i=-1;return(t=this.a[t.toString()])&&(i=gt(t,e,n,r)),-1<i?t[i]:null};var vt="closure_lm_"+(1e6*Math.random()|0),bt={};function wt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(g(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=At(r);return e&&e[pt]?e.Mb(n,r,b(i)?!!i.capture:!!i,o):Et(e,n,r,!0,i,o)}(t,e,n,r,i);if(g(e)){for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);return null}return n=At(n),t&&t[pt]?t.Lb(e,n,b(r)?!!r.capture:!!r,i):Et(t,e,n,!1,r,i)}function Et(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=b(i)?!!i.capture:!!i;if(s&&!at)return null;var a,u,c=Dt(t);if(c||(t[vt]=c=new yt(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=Ct,r=u=at?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)ct||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Tt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function St(t){if("number"!=typeof t&&t&&!t.ja){var e=t.src;if(e&&e[pt])e.nc(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Tt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Dt(e))?(n.fc(t),0==n.b&&(n.src=null,e[vt]=null)):t.a()}}}function Tt(t){return t in bt?bt[t]:bt[t]="on"+t}function It(t,e){var n=t.listener,r=t.ya||t.src;return t.oa&&St(t),n.call(r,e)}function Ct(t,e){return!!t.ja||(at?It(t,new lt(e,this)):It(t,e=new lt(e||d("window.event"),this)))}function Dt(t){return(t=t[vt])instanceof yt?t:null}var Nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(e){return"function"==y(e)?e:(e[Nt]||(e[Nt]=function(t){return e.handleEvent(t)}),e[Nt])}function kt(){A.call(this),this.c=new yt(this),(this.K=this).F=null}N(kt,A),kt.prototype[pt]=!0,(s=kt.prototype).addEventListener=function(t,e,n,r){wt(this,t,e,n,r)},s.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(g(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=b(i)?!!i.capture:!!i,r=At(r),e&&e[pt]?e.Qc(n,r,i,o):e&&(e=Dt(e))&&(n=e.Rc(n,r,i,o))&&St(n)}(this,t,e,n,r)},s.dispatchEvent=function(t){var e,n=this.F;if(n)for(e=[];n;n=n.F)e.push(n);n=this.K;var r=t.type||t;if(f(t))t=new ht(t,n);else if(t instanceof ht)t.target=t.target||n;else{var i=t;K(t=new ht(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.b&&0<=o;o--){var s=t.a=e[o];i=s.ua(r,!0,t)&&i}if(t.b||(i=(s=t.a=n).ua(r,!0,t)&&i,t.b||(i=s.ua(r,!1,t)&&i)),e)for(o=0;!t.b&&o<e.length;o++)i=(s=t.a=e[o]).ua(r,!1,t)&&i;return i},s.G=function(){kt.S.G.call(this),this.Id(),this.F=null},s.Lb=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},s.Mb=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)},s.Qc=function(t,e,n,r){this.c.Sc(String(t),e,n,r)},s.nc=function(t){this.c.fc(t)},s.Id=function(){this.c&&this.c.Tc()},s.ua=function(t,e,n){if(!(t=this.c.a[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ja&&o.capture==e){var s=o.listener,a=o.ya||o.src;o.oa&&this.nc(o),r=!1!==s.call(a,n)&&r}}return r&&0!=n.hc};var Rt=l.JSON.stringify;function Mt(t,e){this.g=100,this.c=t,this.h=e,this.b=0,this.a=null}function _t(){this.b=this.a=null}Mt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t},Mt.prototype.f=function(t){this.h(t),this.b<this.g&&(this.b++,t.next=this.a,this.a=t)};var Ot,Pt=new Mt(function(){return new Lt},function(t){t.reset()});function Lt(){this.next=this.b=this.a=null}function xt(t){l.setTimeout(function(){throw t},0)}_t.prototype.add=function(t,e){var n=this.c();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},_t.prototype.f=function(){var t=null;return this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null),t},_t.prototype.g=function(t){Pt.f(t)},_t.prototype.c=function(){return Pt.get()},Lt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var qt=!(Lt.prototype.reset=function(){this.next=this.b=this.a=null}),Ft=new _t;function Bt(){for(var t;t=Ft.f();){try{t.a.call(t.b)}catch(t){xt(t)}Ft.g(t)}qt=!1}function Vt(t,e){kt.call(this),this.b=t||1,this.a=e||l,this.f=I(this.$d,this),this.g=D()}function Ut(t,e,n){if("function"==y(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Qt(t,e,n){A.call(this),this.f=null!=n?I(t,n):t,this.c=e,this.b=I(this.Cd,this),this.a=[]}function Kt(t){A.call(this),this.b=t,this.a={}}N(Vt,kt),(s=Vt.prototype).wa=!1,s.P=null,s.$d=function(){if(this.wa){var t=D()-this.g;0<t&&t<.8*this.b?this.P=this.a.setTimeout(this.f,this.b-t):(this.P&&(this.a.clearTimeout(this.P),this.P=null),this.Gc(),this.wa&&(this.Na(),this.start()))}},s.Gc=function(){this.dispatchEvent("tick")},s.start=function(){this.wa=!0,this.P||(this.P=this.a.setTimeout(this.f,this.b),this.g=D())},s.Na=function(){this.wa=!1,this.P&&(this.a.clearTimeout(this.P),this.P=null)},s.G=function(){Vt.S.G.call(this),this.Na(),delete this.a},N(Qt,A),(s=Qt.prototype).Ca=!1,s.ec=0,s.ba=null,s.Hc=function(t){this.a=arguments,this.ba||this.ec?this.Ca=!0:this.yb()},s.Pc=function(){this.ba&&(l.clearTimeout(this.ba),this.ba=null,this.Ca=!1,this.a=[])},s.G=function(){Qt.S.G.call(this),this.Pc()},s.Cd=function(){this.ba=null,this.Ca&&!this.ec&&(this.Ca=!1,this.yb())},s.yb=function(){this.ba=Ut(this.b,this.c),this.f.apply(null,this.a)},N(Kt,A);var Wt=[];function jt(){}(s=Kt.prototype).Jb=function(t,e,n){this.wd(t,e,n)},s.wd=function(t,e,n){g(e)||(e&&(Wt[0]=e.toString()),e=Wt);for(var r=0;r<e.length;r++){var i=wt(t,e[r],n||this.handleEvent,!1,this.b||this);if(!i)break;this.a[i.key]=i}},s.Kb=function(){V(this.a,function(t,e){this.a.hasOwnProperty(e)&&St(t)},this),this.a={}},s.G=function(){Kt.S.G.call(this),this.Kb()},s.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zt=new kt;function Gt(t){ht.call(this,"serverreachability",t)}function Ht(t){zt.dispatchEvent(new Gt(zt,t))}function Yt(t){ht.call(this,"statevent",t)}function Xt(t){zt.dispatchEvent(new Yt(zt,t))}function Jt(t){ht.call(this,"timingevent",t)}function $t(t,e){if("function"!=y(t))throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){t()},e)}N(Gt,ht),N(Yt,ht),N(Jt,ht);var Zt={NO_ERROR:0,ae:1,he:2,ge:3,de:4,fe:5,ie:6,qc:7,TIMEOUT:8,le:9},te={ce:"complete",pe:"success",rc:"error",qc:"abort",ne:"ready",oe:"readystatechange",TIMEOUT:"timeout",je:"incrementaldata",me:"progress",ee:"downloadprogress",qe:"uploadprogress"};function ee(){}function ne(){}ee.prototype.a=null,ee.prototype.c=function(){return this.a||(this.a={})};var re,ie={OPEN:"a",be:"b",rc:"c",ke:"d"};function oe(){ht.call(this,"d")}function se(){ht.call(this,"c")}function ae(){}function ue(t,e,n){this.g=t,this.da=e,this.ca=n||1,this.I=new Kt(this),this.L=45e3,t=X?125:void 0,this.T=new Vt(t),this.J=null,this.b=!1,this.i=this.C=this.f=this.F=this.u=this.U=this.h=null,this.j=[],this.a=null,this.A=0,this.c=this.v=null,this.o=-1,this.l=!1,this.K=0,this.B=null,this.s=this.Y=this.H=!1}N(oe,ht),N(se,ht),N(ae,ee),ae.prototype.b=function(){return new XMLHttpRequest},re=new ae;var ce={},he={};function le(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||f(t))R(t,e,void 0);else{if(t.O&&"function"==typeof t.O)var n=t.O();else if(t.D&&"function"==typeof t.D)n=void 0;else if(v(t)||f(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.D&&"function"==typeof t.D)return t.D();if(f(t))return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function fe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.fd(t)}function pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(s=ue.prototype).ha=function(t){this.J=t},s.setTimeout=function(t){this.L=t},s.Xc=function(t){this.K=t},s.Qd=function(t){this.j=t},s.cb=function(t,e){this.F=1,this.f=t.N().za(),this.i=e,this.H=!0,this.ic(null)},s.bb=function(t,e,n){this.F=1,this.f=t.N().za(),this.i=null,this.H=e,this.ic(n)},s.ic=function(t){this.u=D(),this.fa(),this.C=this.f.N(),this.C.Aa("t",this.ca),this.A=0,this.a=this.g.sa(this.g.Da()?t:null),0<this.K&&(this.B=new Qt(I(this.oc,this,this.a),this.K)),this.I.Jb(this.a,"readystatechange",this.Hd),t=this.J?U(this.J):{},this.i?(this.v||(this.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.a.xa(this.C,this.v,this.i,t)):(this.v="GET",this.a.xa(this.C,this.v,null,t)),Ht(1)},s.Hd=function(t){t=t.target;var e=this.B;e&&3==t.W()?e.Hc():this.oc(t)},s.oc=function(t){try{t==this.a&&this.Ed()}catch(t){}},s.Ed=function(){var t=this.a.W(),e=this.a.Db(),n=this.a.aa();if(!(t<3||3==t&&!X&&!this.a.va()))if(this.l||4!=t||7==e||Ht(8==e||n<=0?3:2),this.pa(),this.o=n=this.a.aa(),e=this.a.va(),this.b=200==n){if(this.Td()){if(!(n=this.Kc()))return this.b=!1,this.c=3,Xt(12),this.Z(),void this.ta();this.s=!0,this.Wa(n)}this.H?(this.vb(t,e),X&&this.b&&3==t&&this.Yd()):this.Wa(e),4==t&&this.Z(),this.b&&!this.l&&(4==t?this.g.Va(this):(this.b=!1,this.fa()))}else 400==n&&0<e.indexOf("Unknown SID")?(this.c=3,Xt(12)):(this.c=0,Xt(13)),this.Z(),this.ta()},s.Td=function(){return this.Y&&!this.s},s.Kc=function(){if(this.a){var t=this.a.ga("X-HTTP-Initial-Response");if(t&&!O(t))return t}return null},s.Md=function(){this.Y=!0},s.vb=function(t,e){for(var n=!0;!this.l&&this.A<e.length;){var r=this.Lc(e);if(r==he){4==t&&(this.c=4,Xt(14),n=!1);break}if(r==ce){this.c=4,Xt(15),n=!1;break}this.Wa(r)}4==t&&0==e.length&&(this.c=1,Xt(16),n=!1),this.b=this.b&&n,n||(this.Z(),this.ta())},s.Gd=function(){if(this.a){var t=this.a.W(),e=this.a.va();this.A<e.length&&(this.pa(),this.vb(t,e),this.b&&4!=t&&this.fa())}},s.Yd=function(){this.I.Jb(this.T,"tick",this.Gd),this.T.start()},s.Lc=function(t){var e=this.A,n=t.indexOf("\n",e);return-1==n?he:(e=Number(t.substring(e,n)),isNaN(e)?ce:(n+=1)+e>t.length?he:(t=t.substr(n,e),this.A=n+e,t))},s.Ld=function(t){this.F=2,this.f=t.N().za(),t=!1,l.navigator&&l.navigator.sendBeacon&&(t=l.navigator.sendBeacon(this.f.toString(),"")),!t&&l.Image&&((new Image).src=this.f,t=!0),t||(this.a=this.g.sa(null),this.a.xa(this.f)),this.u=D(),this.fa()},s.cancel=function(){this.l=!0,this.Z()},s.Kd=function(t){t&&this.setTimeout(t),this.h&&(this.pa(),this.fa())},s.fa=function(){this.U=D()+this.L,this.mc(this.L)},s.mc=function(t){if(null!=this.h)throw Error("WatchDog timer not null");this.h=$t(I(this.Dd,this),t)},s.pa=function(){this.h&&(l.clearTimeout(this.h),this.h=null)},s.Dd=function(){this.h=null;var t=D();0<=t-this.U?this.md():this.mc(this.U-t)},s.md=function(){2!=this.F&&(Ht(3),Xt(17)),this.Z(),this.c=2,this.ta()},s.ta=function(){this.g.Tb()||this.l||this.g.Va(this)},s.Z=function(){this.pa();var t=this.B;t&&"function"==typeof t.La&&t.La(),this.B=null,this.T.Na(),this.I.Kb(),this.a&&(t=this.a,this.a=null,t.abort(),t.La())},s.Wa=function(t){try{this.g.bc(this,t),Ht(4)}catch(t){}},(s=fe.prototype).D=function(){this.Ka();for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},s.O=function(){return this.Ka(),this.a.concat()},s.Ra=function(t){return pe(this.b,t)},s.hd=function(){return 0==this.c},s.gd=function(){this.b={},this.c=this.a.length=0},s.Qb=function(t){pe(this.b,t)&&(delete this.b[t],this.c--,this.a.length>2*this.c&&this.Ka())},s.Ka=function(){if(this.c!=this.a.length){for(var t=0,e=0;t<this.a.length;){var n=this.a[t];pe(this.b,n)&&(this.a[e++]=n),t++}this.a.length=e}if(this.c!=this.a.length){var r={};for(e=t=0;t<this.a.length;)pe(r,n=this.a[t])||(r[this.a[e++]=n]=1),t++;this.a.length=e}},s.get=function(t,e){return pe(this.b,t)?this.b[t]:e},s.set=function(t,e){pe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},s.fd=function(t){if(t instanceof fe)for(var e=t.O(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},s.forEach=function(t,e){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},s.Pb=function(){return new fe(this)};var de=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function me(t,e){var n;this.c=this.i=this.b="",this.h=null,this.j=this.g="",this.f=this.l=!1,t instanceof me?(this.f=void 0!==e?e:t.f,this.ma(t.b),this.$a(t.i),this.ka(t.c),this.la(t.h),this.Ba(t.g),this.Za(t.a.Gb()),this.Ya(t.j)):t&&(n=String(t).match(de))?(this.f=!!e,this.ma(n[1]||"",!0),this.$a(n[2]||"",!0),this.ka(n[3]||"",!0),this.la(n[4]),this.Ba(n[5]||"",!0),this.Za(n[6]||"",!0),this.Ya(n[7]||"",!0)):(this.f=!!e,this.a=new Ie(null,this.f))}function ye(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ge(t,e,n){return f(t)?(t=encodeURI(t).replace(e,ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(s=me.prototype).toString=function(){var t=[],e=this.b;e&&t.push(ge(e,be,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(ge(e,be,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.Sa()&&"/"!=n.charAt(0)&&t.push("/"),t.push(ge(n,"/"==n.charAt(0)?Ee:we,!0))),(n=this.Ic())&&t.push("?",n),(n=this.j)&&t.push("#",ge(n,Te)),t.join("")},s.resolve=function(t){var e=this.N(),n=t.qd();n?e.ma(t.b):n=t.rd(),n?e.$a(t.i):n=t.Sa(),n?e.ka(t.c):n=t.od();var r=t.g;if(n)e.la(t.h);else if(n=t.Sb()){if("/"!=r.charAt(0))if(this.Sa()&&!this.Sb())r="/"+r;else{var i=e.g.lastIndexOf("/");-1!=i&&(r=e.g.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.Ba(r):n=t.pd(),n?e.Za(t.a.Gb()):n=t.nd(),n&&e.Ya(t.j),e},s.N=function(){return new me(this)},s.ma=function(t,e){this.M(),(this.b=e?ye(t,!0):t)&&(this.b=this.b.replace(/:$/,""))},s.qd=function(){return!!this.b},s.$a=function(t,e){this.M(),this.i=e?ye(t):t},s.rd=function(){return!!this.i},s.ka=function(t,e){this.M(),this.c=e?ye(t,!0):t},s.Sa=function(){return!!this.c},s.la=function(t){if(this.M(),t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);this.h=t}else this.h=null},s.od=function(){return null!=this.h},s.Ba=function(t,e){this.M(),this.g=e?ye(t,!0):t},s.Sb=function(){return!!this.g},s.pd=function(){return""!==this.a.toString()},s.Za=function(t,e){this.M(),t instanceof Ie?(this.a=t,this.a.Oc(this.f)):(e||(t=ge(t,Se)),this.a=new Ie(t,this.f))},s.Ic=function(){return this.a.toString()},s.m=function(t,e){this.M(),this.a.set(t,e)},s.Aa=function(t,e){this.M(),g(e)||(e=[String(e)]),this.a.lc(t,e)},s.Ya=function(t,e){this.M(),this.j=e?ye(t):t},s.nd=function(){return!!this.j},s.za=function(){return this.M(),this.m("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^D()).toString(36)),this},s.M=function(){if(this.l)throw Error("Tried to modify a read-only Uri")};var be=/[#\/\?@]/g,we=/[#\?:]/g,Ee=/[#\?]/g,Se=/[#\?@]/g,Te=/#/g;function Ie(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ce(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function De(){this.a=this.b=null}function Ne(){this.a=new fe}function Ae(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[w]||(t[w]=++E)):e.charAt(0)+t}function ke(t,e){this.a=t,this.b=e}function Re(t){this.g=t||Me,t=l.PerformanceNavigationTiming?0<(t=l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(l.Ja&&l.Ja.Vb&&l.Ja.Vb()&&l.Ja.Vb().te),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Ne),this.b=null,this.c=[]}(s=Ie.prototype).V=function(){if(!this.a&&(this.a=new fe,this.b=0,this.c)){var n=this;!function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)})}},s.add=function(t,e){this.V(),this.ia(),t=this.$(t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},s.Ib=function(t){this.V(),t=this.$(t),this.a.Ra(t)&&(this.ia(),this.b-=this.a.get(t).length,this.a.Qb(t))},s.Hb=function(t){return this.V(),t=this.$(t),this.a.Ra(t)},s.forEach=function(n,r){this.V(),this.a.forEach(function(t,e){R(t,function(t){n.call(r,t,e,this)},this)},this)},s.O=function(){this.V();for(var t=this.a.D(),e=this.a.O(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},s.D=function(t){this.V();var e=[];if(f(t))this.Hb(t)&&(e=M(e,this.a.get(this.$(t))));else{t=this.a.D();for(var n=0;n<t.length;n++)e=M(e,t[n])}return e},s.set=function(t,e){return this.V(),this.ia(),t=this.$(t),this.Hb(t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},s.get=function(t,e){return t&&0<(t=this.D(t)).length?String(t[0]):e},s.lc=function(t,e){this.Ib(t),0<e.length&&(this.ia(),this.a.set(this.$(t),_(e)),this.b+=e.length)},s.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.O(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.D(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},s.ia=function(){this.c=null},s.Gb=function(){var t=new Ie;return t.c=this.c,this.a&&(t.a=this.a.Pb(),t.b=this.b),t},s.$=function(t){return t=String(t),this.f&&(t=t.toLowerCase()),t},s.Oc=function(t){t&&!this.f&&(this.V(),this.ia(),this.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.Ib(e),this.lc(n,t))},this)),this.f=t},N(function(){},function(){}),(s=Ce.prototype).R=null,s.Wc=function(t){this.h=t},s.Vc=function(t){this.i=t,t=this.a.Cb(this.i),Xt(3);var e=this.a.H.b;null!=e?(this.f=this.a.Oa(e[0]),this.R=1,this.rb()):(t.Aa("MODE","init"),!this.a.o&&this.a.j&&t.Aa("X-HTTP-Session-Id",this.a.j),this.b=new ue(this,void 0,void 0),this.b.ha(this.h),this.b.bb(t,!1,null),this.R=0)},s.rb=function(){var t=this.a.H.a;if(null!=t)Xt(4),t?(Xt(10),this.a.na(this,!1)):(Xt(11),this.a.na(this,!0));else{this.b=new ue(this,void 0,void 0),this.b.ha(this.h),t=this.a.Bb(this.f,this.i),Xt(4),t.Aa("TYPE","xmlhttp");var e=this.a.j,n=this.a.Fa;e&&n&&t.m(e,n),this.b.bb(t,!1,this.f)}},s.sa=function(t){return this.a.sa(t)},s.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},s.Tb=function(){return!1},s.bc=function(t,e){if(this.c=t.o,0==this.R)if(this.Uc(t),e){try{var n=this.a.U.a(e)}catch(t){return void this.a.ab(this)}this.f=this.a.Oa(n[0])}else this.a.ab(this);else 1==this.R&&(this.g?Xt(6):"11111"==e?(Xt(5),this.g=!0,this.Ac()&&(this.c=200,this.b.cancel(),Xt(11),this.a.na(this,!0))):(Xt(7),this.g=!1))},s.Va=function(){this.c=this.b.o,this.b.b?0==this.R?(this.R=1,this.rb()):1==this.R&&(this.g?(Xt(11),this.a.na(this,!0)):(Xt(10),this.a.na(this,!1))):(0==this.R?Xt(8):1==this.R&&Xt(9),this.a.ab(this))},s.Uc=function(t){if(!this.a.o&&(t=t.a)){var e=t.ga("X-Client-Wire-Protocol");this.l=e||null,this.a.j&&(t=t.ga("X-HTTP-Session-Id"))&&this.a.kc(t)}},s.Da=function(){return this.a.Da()},s.Pa=function(){return this.a.Pa()},s.Ac=function(){return!H||10<=Number(rt)},(s=Ne.prototype).add=function(t){this.a.set(Ae(t),t)},s.ed=function(t){this.a.Qb(Ae(t))},s.jd=function(){this.a.gd()},s.Rb=function(){return this.a.hd()},s.Ob=function(t){return this.a.Ra(Ae(t))},s.D=function(){return this.a.D()};var Me=10;function _e(){this.b=this.a=void 0}function Oe(){this.f=new _e}function Pe(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}(s=Re.prototype).kb=function(t){!this.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(this.f=this.g,this.a=new Ne,this.b&&(this.Ha(this.b),this.b=null))},s.Ub=function(){return!!this.b||!!this.a&&this.a.a.c>=this.f},s.Mc=function(){return this.b?1:this.a?this.a.a.c:0},s.Ta=function(t){return this.b?this.b==t:!!this.a&&this.a.Ob(t)},s.Ha=function(t){this.a?this.a.add(t):this.b=t},s.gc=function(t){this.b&&this.b==t?this.b=null:this.a&&this.a.Ob(t)&&this.a.ed(t)},s.cancel=function(){this.c=this.Xb(),this.b?(this.b.cancel(),this.b=null):this.a&&!this.a.Rb()&&(R(this.a.D(),function(t){t.cancel()}),this.a.jd())},s.Xb=function(){if(null!=this.b)return this.c.concat(this.b.j);if(null==this.a||this.a.Rb())return _(this.c);var e=this.c;return R(this.a.D(),function(t){e=e.concat(t.j)}),e},s.wc=function(t){this.c=this.c.concat(t)},s.Bc=function(){this.c.length=0},_e.prototype.stringify=function(t){return l.JSON.stringify(t,this.a)},_e.prototype.parse=function(t){return l.JSON.parse(t,this.b)},Oe.prototype.b=function(t,r,e){var i=e||"";try{le(t,function(t,e){var n=t;b(t)&&(n=Rt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}},Oe.prototype.c=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?(r=t[0].a,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,s=0;s<e;s++){var a=t[s].a,u=t[s].b;if((a-=r)<0)r=Math.max(0,t[s].a-100),o=!1;else try{this.b(u,i,"req"+a+"_")}catch(t){n&&n(u)}}if(o)return i.join("&")}},Oe.prototype.a=function(t){return this.f.parse(t)};var Le=l.JSON.parse;function xe(t){kt.call(this),this.headers=new fe,this.l=t||null,this.b=!1,this.v=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.o=this.A=!1,this.u=0,this.s=null,this.J=qe,this.H=this.L=this.I=!1}N(xe,kt);var qe="",Fe=/^https?$/i,Be=["POST","PUT"];function Ve(t){return"content-type"==t.toLowerCase()}function Ue(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function Qe(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;var i;if(i="",V(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,f(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var o=""}else o=t.substring(r+1,n);n=(t=[t.substr(0,r),o,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.m(e,n),t}function Ke(t){this.gb=22,this.g=[],this.H=new De,this.da=this.fb=this.C=this.Ea=this.a=this.Fa=this.j=this.ca=this.f=this.J=this.h=null,this.sc=!0,this.zc=this.L=0,this.uc=!!d("internalChannelParams.failFast",t),this.Ga=this.v=this.s=this.l=this.i=this.b=null,this.eb=!0,this.B=this.jb=this.K=-1,this.Y=this.u=this.A=0,this.tc=d("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Fc=d("internalChannelParams.retryDelaySeedMs",t)||1e4,this.pc=d("internalChannelParams.forwardChannelMaxRetries",t)||2,this.ib=d("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.xc=t&&t.ue||void 0,this.F=void 0,this.vc=0,this.T=t&&t.supportsCrossDomainXhr||!1,this.I="",this.c=new Re(t&&t.concurrentRequestLimit),this.U=new Oe,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.hb=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.se&&(this.eb=!1)}function We(){}function je(){if(H&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function ze(t,e){kt.call(this),this.a=new Ke(e),this.g=t,this.o=e&&e.testUrl?e.testUrl:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.cd(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.tb&&(t?t["X-WebChannel-Client-Profile"]=e.tb:t={"X-WebChannel-Client-Profile":e.tb}),this.a.Pd(t),(t=e&&e.httpHeadersOverwriteParam)&&!O(t)&&this.a.Nd(t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.a.Od(e),null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Ye(this)}function Ge(t){oe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.f=t)?(t=this.f,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function He(){se.call(this),this.status=1}function Ye(t){this.a=t}(s=xe.prototype).Sd=function(t){this.I=t},s.xa=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.Ec(),this.v=this.l?this.l.c():re.c(),this.a.onreadystatechange=I(this.ac,this),this.L&&"onprogress"in this.a&&(this.a.onprogress=I(function(t){this.Zb(t,!0)},this),this.a.upload&&(this.a.upload.onprogress=I(this.Zb,this)));try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(t){return void this.Ab(t)}t=n||"";var i,o=this.headers.Pb();r&&le(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Ve,n=t.length,r=f(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:f(t)?t.charAt(e):t[e]}(o.O()),n=l.FormData&&t instanceof l.FormData,!(0<=k(Be,e))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.J&&(this.a.responseType=this.J),"withCredentials"in this.a&&this.a.withCredentials!==this.I&&(this.a.withCredentials=this.I);try{this.sb(),0<this.u&&((this.H=(i=this.a,H&&ot(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.u,this.a.ontimeout=I(this.Nb,this)):this.s=Ut(this.Nb,this.u,this)),this.o=!0,this.a.send(t),this.o=!1}catch(t){this.Ab(t)}},s.Ec=function(){return this.l?this.l.b():re.b()},s.Nb=function(){void 0!==c&&this.a&&(this.f="Timed out after "+this.u+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},s.Ab=function(t){this.b=!1,this.a&&(this.g=!0,this.a.abort(),this.g=!1),this.f=t,this.h=5,this.xb(),this.qa()},s.xb=function(){this.A||(this.A=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},s.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.qa())},s.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),this.qa(!0)),xe.S.G.call(this)},s.ac=function(){this.i||(this.B||this.o||this.g?this.$b():this.Bd())},s.Bd=function(){this.$b()},s.$b=function(){if(this.b&&void 0!==c&&(!this.v[1]||4!=this.W()||2!=this.aa()))if(this.o&&4==this.W())Ut(this.ac,0,this);else if(this.dispatchEvent("readystatechange"),this.td()){this.b=!1;try{this.vd()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.h=6,this.f=this.Fb()+" ["+this.aa()+"]",this.xb())}finally{this.qa()}}},s.Zb=function(t,e){this.dispatchEvent(Ue(t,"progress")),this.dispatchEvent(Ue(t,e?"downloadprogress":"uploadprogress"))},s.qa=function(t){if(this.a){this.sb();var e=this.a,n=this.v[0]?m:null;this.v=this.a=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(t){}}},s.sb=function(){this.a&&this.H&&(this.a.ontimeout=null),this.s&&(l.clearTimeout(this.s),this.s=null)},s.td=function(){return 4==this.W()},s.vd=function(){var t=this.aa();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.ud()},s.ud=function(){var t=String(this.C).match(de)[1]||null;return!t&&l.self&&l.self.location&&(t=(t=l.self.location.protocol).substr(0,t.length-1)),Fe.test(t?t.toLowerCase():"")},s.W=function(){return this.a?this.a.readyState:0},s.aa=function(){try{return 2<this.W()?this.a.status:-1}catch(t){return-1}},s.Fb=function(){try{return 2<this.W()?this.a.statusText:""}catch(t){return""}},s.va=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},s.Nc=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Le(e)}},s.ga=function(t){return this.a?this.a.getResponseHeader(t):null},s.Db=function(){return this.h},s.dd=function(){return f(this.f)?this.f:String(this.f)},(s=Ke.prototype).qb=8,s.w=1,s.bd=function(t,e,n){Xt(0),this.Ea=e,this.ca=n||{},this.o&&(this.H.b=[],this.H.a=!1),this.Dc(t)},s.Qa=function(){if(this.lb(),3==this.w){var t=this.L++,e=this.C.N();e.m("SID",this.I),e.m("RID",t),e.m("TYPE","terminate"),this.ea(e),new ue(this,t,void 0).Ld(e)}this.Yb()},s.Dc=function(t){this.v=new Ce(this),null===this.f&&this.v.Wc(this.h);var e=t;this.f&&this.h&&(e=Qe(t,this.f,this.h)),this.v.Vc(e)},s.Cc=function(){this.C=this.Cb(this.Ea),this.Ma()},s.lb=function(){this.v&&(this.v.abort(),this.v=null),this.a&&(this.a.cancel(),this.a=null),this.l&&(l.clearTimeout(this.l),this.l=null),this.ra(),this.c.cancel(),this.i&&(l.clearTimeout(this.i),this.i=null)},s.cd=function(t){this.h=t},s.Pd=function(t){this.J=t},s.Nd=function(t){this.f=t},s.Od=function(t){this.j=t},s.kc=function(t){this.Fa=t},s.Rd=function(){this.T=!0},s.jc=function(t){this.b=t},s.sd=function(){return!this.Ga},s.Xa=function(t){this.g.push(new ke(this.zc++,t)),3==this.w&&this.Ma()},s.Jc=function(){return this.uc?0:this.pc},s.Tb=function(){return 0==this.w},s.Ma=function(){this.c.Ub()||this.i||(this.i=$t(I(this.dc,this),0),this.A=0)},s.xd=function(t){return!(this.c.Mc()>=this.c.f-(this.i?1:0))&&(this.i?(this.g=t.j.concat(this.g),!0):!(1==this.w||2==this.w||this.A>=this.Jc())&&(this.i=$t(I(this.dc,this,t),this.Eb(this.A)),this.A++,!0))},s.dc=function(t){this.i=null,this.Xd(t)},s.Xd=function(t){1==this.w?t||(this.Fd(),this.w=2):3==this.w&&(t?this.Wb(t):0==this.g.length||this.c.Ub()||this.Wb())},s.Fd=function(){this.L=Math.floor(1e5*Math.random());var t=this.L++,e=new ue(this,t,void 0),n=this.h;this.J&&(n?K(n=U(n),this.J):n=this.J),null===this.f&&e.ha(n);var r=this.wb(e),i=this.C.N();i.m("RID",t),0<this.gb&&i.m("CVER",this.gb),this.o&&this.j&&i.m("X-HTTP-Session-Id",this.j),this.ea(i),this.f&&n&&Qe(i,this.f,n),this.c.Ha(e),this.hb?(i.m("$req",r),i.m("SID","null"),e.Md(),e.cb(i,null)):e.cb(i,r)},s.Wb=function(t){var e;e=t?t.da:this.L++;var n=this.C.N();n.m("SID",this.I),n.m("RID",e),n.m("AID",this.K),this.ea(n),this.f&&this.h&&Qe(n,this.f,this.h),e=new ue(this,e,this.A+1),null===this.f&&e.ha(this.h),t&&this.Jd(t),t=this.wb(e),e.setTimeout(Math.round(.5*this.ib)+Math.round(.5*this.ib*Math.random())),this.c.Ha(e),e.cb(n,t)},s.ea=function(n){this.b&&le({},function(t,e){n.m(e,t)})},s.wb=function(t){var e=Math.min(this.g.length,1e3),n=this.b?I(this.b.yc,this.b,this):null;return n=this.U.c(this.g,e,n),t.Qd(this.g.splice(0,e)),n},s.Jd=function(t){this.g=t.j.concat(this.g)},s.zb=function(){if(!this.a&&!this.l){this.Y=1;var t=this.cc;Ot||(e=l.Promise.resolve(void 0),Ot=function(){e.then(Bt)}),qt||(Ot(),qt=!0),Ft.add(t,this),this.u=0}var e},s.Ua=function(){return!(this.a||this.l||3<=this.u)&&(this.Y++,this.l=$t(I(this.cc,this),this.Eb(this.u)),this.u++,!0)},s.cc=function(){this.l=null,this.Vd()},s.Vd=function(){this.a=new ue(this,"rpc",this.Y),null===this.f&&this.a.ha(this.h),this.a.Xc(this.vc);var t=this.fb.N();t.m("RID","rpc"),t.m("SID",this.I),t.m("CI",this.Ga?"0":"1"),t.m("AID",this.K),this.ea(t),t.m("TYPE","xmlhttp"),this.f&&this.h&&Qe(t,this.f,this.h),this.F&&this.a.setTimeout(this.F),this.a.bb(t,!0,this.da)},s.na=function(t,e){var n=t.l;n&&this.c.kb(n),this.Ga=this.eb&&e,this.B=t.c,this.Cc()},s.ab=function(t){this.B=t.c,this.X(2)},s.bc=function(t,e){if(0!=this.w&&(this.a==t||this.c.Ta(t)))if(this.B=t.o,!t.s&&this.c.Ta(t)&&3==this.w){try{var n=this.U.a(e)}catch(t){n=null}g(n)&&3==n.length?this.ld(n,t):this.X(11)}else(t.s||this.a==t)&&this.ra(),O(e)||(n=this.U.a(e),this.Ad(n,t))},s.ld=function(t,e){0==t[0]?this.kd(e):(this.jb=t[1],0<this.jb-this.K&&this.Ud(t[2])&&!this.s&&(this.s=$t(I(this.yd,this),6e3)))},s.kd=function(t){if(!this.l){if(this.a){if(!(this.a.u+3e3<t.u))return;this.ra(),this.a.cancel(),this.a=null}this.Ua(),Xt(18)}},s.Ud=function(t){return t<37500&&!this.sd()&&0==this.u},s.Oa=function(t){return this.sc?this.b?this.b.$c(t):t:null},s.yd=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,this.Ua(),Xt(19))},s.ra=function(){null!=this.s&&(l.clearTimeout(this.s),this.s=null)},s.Va=function(t){var e=null;if(this.a==t){this.ra(),this.a=null;var n=2}else{if(!this.c.Ta(t))return;e=t.j,this.c.gc(t),n=1}if(this.B=t.o,0!=this.w)if(t.b)1==n?(n=D()-t.u,zt.dispatchEvent(new Jt(zt,t.i?t.i.length:0,n,this.A)),this.Ma()):this.zb();else{var r=t.c;if(3==r||0==r&&0<this.B||!(1==n&&this.xd(t)||2==n&&this.Ua()))switch(e&&0<e.length&&this.c.wc(e),r){case 1:this.X(5);break;case 4:this.X(10);break;case 3:this.X(6);break;default:this.X(2)}}},s.Eb=function(t){var e=this.tc+Math.floor(Math.random()*this.Fc);return this.Pa()||(e*=2),e*t},s.ad=function(t){if(this.o&&(t=t.a)){var e=t.ga("X-Client-Wire-Protocol");e&&this.c.kb(e),this.j&&(t=t.ga("X-HTTP-Session-Id"))&&(this.kc(t),this.C.m(this.j,t))}},s.Ad=function(t,e){for(var n=this.b&&this.b.Ia?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.K=i[0],i=i[1],2==this.w)if("c"==i[0]){this.I=i[1],this.da=this.Oa(i[2]);var o=i[3];null!=o&&(this.qb=o),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.F=1.5*i),this.ad(e),this.w=3,this.b&&this.b.pb(),this.Wd(e)}else"stop"!=i[0]&&"close"!=i[0]||this.X(7);else 3==this.w&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.b.Ia(this,n),n.length=0),"stop"==i[0]?this.X(7):this.Qa()):"noop"!=i[0]&&(n?n.push(i):this.b&&this.b.ob(i)),this.u=0)}n&&0!=n.length&&this.b.Ia(this,n)},s.Wd=function(t){this.fb=this.Bb(this.da,this.Ea),t.s?(this.c.gc(t),t.Kd(this.F),this.a=t):this.zb()},s.X=function(t){if(2==t){var e=null;this.b&&(e=null);var n=I(this.Zd,this);e||(e=new me("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||e.ma("https"),e.za()),r=e.toString(),i=n,o=new jt,(s=new Image).onload=C(Pe,o,s,"TestLoadImage: loaded",!0,i),s.onerror=C(Pe,o,s,"TestLoadImage: error",!1,i),s.onabort=C(Pe,o,s,"TestLoadImage: abort",!1,i),s.ontimeout=C(Pe,o,s,"TestLoadImage: timeout",!1,i),l.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else Xt(2);var r,i,o,s;this.zd(t)},s.Zd=function(t){Xt(t?2:1)},s.zd=function(t){this.w=0,this.b&&this.b.nb(t),this.Yb(),this.lb()},s.Yb=function(){this.w=0,this.B=-1,this.b&&(0==this.c.Xb().length&&0==this.g.length||(this.c.Bc(),_(this.g),this.g.length=0),this.b.mb())},s.Cb=function(t){return this.ub(null,t)},s.Bb=function(t,e){return this.ub(this.Da()?t:null,e)},s.ub=function(t,e){var n,r,i,o,s,a,u=(n=e)instanceof me?n.N():new me(n,void 0);if(""!=u.c)t&&u.ka(t+"."+u.c),u.la(u.h);else{var c,h=l.location;c=t?t+"."+h.hostname:h.hostname,r=h.protocol,i=c,o=+h.port,s=e,a=new me(null,void 0),r&&a.ma(r),i&&a.ka(i),o&&a.la(o),s&&a.Ba(s),u=a}return this.ca&&V(this.ca,function(t,e){u.m(e,t)}),t=this.j,e=this.Fa,t&&e&&u.m(t,e),u.m("VER",this.qb),this.ea(u),u},s.sa=function(t){if(t&&!this.T)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new xe(this.xc)).Sd(this.T),t},s.Pa=function(){return!!this.b&&!0},s.Da=function(){return this.T},(s=We.prototype).Ia=null,s.pb=function(){},s.ob=function(){},s.nb=function(){},s.mb=function(){},s.yc=function(){},s.$c=function(t){return t},je.prototype.a=function(t,e){return new ze(t,e)},N(ze,kt),(s=ze.prototype).addEventListener=function(t,e,n,r){ze.S.addEventListener.call(this,t,e,n,r)},s.removeEventListener=function(t,e,n,r){ze.S.removeEventListener.call(this,t,e,n,r)},s.Yc=function(){this.a.jc(this.f),this.l&&this.a.Rd(),this.a.bd(this.o,this.g,this.b||void 0)},s.close=function(){this.a.Qa()},s.Zc=function(t){if(f(t)){var e={};e.__data__=t,this.a.Xa(e)}else this.h?((e={}).__data__=Rt(t),this.a.Xa(e)):this.a.Xa(t)},s.G=function(){this.a.jc(null),delete this.f,this.a.Qa(),delete this.a,ze.S.G.call(this)},N(Ge,oe),N(He,se),N(Ye,We),Ye.prototype.pb=function(){this.a.dispatchEvent("a")},Ye.prototype.ob=function(t){this.a.dispatchEvent(new Ge(t))},Ye.prototype.nb=function(t){this.a.dispatchEvent(new He(t))},Ye.prototype.mb=function(){this.a.dispatchEvent("b")};var Xe=C(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},je);je.prototype.createWebChannel=je.prototype.a,ze.prototype.send=ze.prototype.Zc,ze.prototype.open=ze.prototype.Yc,ze.prototype.close=ze.prototype.close,Zt.NO_ERROR=0,Zt.TIMEOUT=8,Zt.HTTP_ERROR=6,te.COMPLETE="complete",(ne.EventType=ie).OPEN="a",ie.CLOSE="b",ie.ERROR="c",ie.MESSAGE="d",kt.prototype.listen=kt.prototype.Lb,xe.prototype.listenOnce=xe.prototype.Mb,xe.prototype.getLastError=xe.prototype.dd,xe.prototype.getLastErrorCode=xe.prototype.Db,xe.prototype.getStatus=xe.prototype.aa,xe.prototype.getStatusText=xe.prototype.Fb,xe.prototype.getResponseJson=xe.prototype.Nc,xe.prototype.getResponseText=xe.prototype.va,xe.prototype.send=xe.prototype.xa;var Je={createWebChannelTransport:Xe,ErrorCode:Zt,EventType:te,WebChannel:ne,XhrIo:xe},$e=Je.createWebChannelTransport,Ze=Je.ErrorCode,tn=Je.EventType,en=Je.WebChannel,nn=Je.XhrIo,rn="FirebaseError",on=Error.captureStackTrace,sn=function(t,e){if(this.code=t,this.message=e,on)on(this,cn.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=rn,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}};sn.prototype=Object.create(Error.prototype),(sn.prototype.constructor=sn).prototype.name=rn;var an,un,cn=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,r){void 0===r&&(r={});var e,n=this.errors[t],i=this.service+"/"+t;e=void 0===n?"Error":n.replace(this.pattern,function(t,e){var n=r[e];return void 0!==n?n.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+i+").";var o=new sn(i,e);for(var s in r)r.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=r[s]);return o},t}(),hn=(function(n){function t(){var t=n.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var e=1;e<t.blockSize;++e)t.pad_[e]=0;return t.reset(),t}a(t,n),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}(function(){this.blockSize=-1}),Ju.SDK_VERSION),ln=new r("@firebase/firestore");function fn(){return ln.logLevel===o.DEBUG?an.DEBUG:ln.logLevel===o.SILENT?an.SILENT:an.ERROR}function pn(t){switch(t){case an.DEBUG:ln.logLevel=o.DEBUG;break;case an.ERROR:ln.logLevel=o.ERROR;break;case an.SILENT:ln.logLevel=o.SILENT;break;default:ln.error("Firestore ("+hn+"): Invalid value passed to `setLogLevel`")}}function dn(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(ln.logLevel<=o.DEBUG){var i=n.map(yn);ln.debug.apply(ln,["Firestore ("+hn+") ["+t+"]: "+e].concat(i))}}function mn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ln.logLevel<=o.ERROR){var r=e.map(yn);ln.error.apply(ln,["Firestore ("+hn+"): "+t].concat(r))}}function yn(e){if("string"==typeof e)return e;var t=bn.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function gn(t){var e="FIRESTORE ("+hn+") INTERNAL ASSERTION FAILED: "+t;throw mn(e),new Error(e)}function vn(t,e){t||gn(e)}(un=an||(an={}))[un.DEBUG=0]="DEBUG",un[un.ERROR=1]="ERROR",un[un.SILENT=2]="SILENT";var bn=function(){function e(){}return e.setPlatform=function(t){e.platform&&gn("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||gn("Platform not set"),e.platform},e}();function wn(){return bn.getPlatform().emptyByteString}var En={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sn=function(r){function t(t,e){var n=r.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return a(t,r),t}(Error);function Tn(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Sn(En.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Cn(t,e){return void 0!==t?t:e}function Dn(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function Nn(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function An(t){for(var e in vn(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kn(t,e,n){if(e.length!==n)throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires "+jn(n,"argument")+", but was called with "+jn(e.length,"argument")+".")}function Rn(t,e,n){if(e.length<n)throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires at least "+jn(n,"argument")+", but was called with "+jn(e.length,"argument")+".")}function Mn(t,e,n,r){if(e.length<n||e.length>r)throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+jn(e.length,"argument")+".")}function _n(t,e,n,r){Fn(t,e,Wn(n)+" argument",r)}function On(t,e,n,r){void 0!==r&&_n(t,e,n,r)}function Pn(t,e,n,r){Fn(t,e,n+" option",r)}function Ln(t,e,n,r){void 0!==r&&Pn(t,e,n,r)}function xn(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Vn(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+Vn(r[o]))}(t,e,n,r,i)}function qn(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(Vn(u))}var c=Vn(r);throw new Sn(En.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Fn(t,e,n,r){if(!("object"===e?Bn(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Vn(r);throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Bn(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Vn(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":gn("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function Un(t,e,n){if(void 0===n)throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Wn(e)+" argument, but it was undefined.")}function Qn(n,t,r){Nn(t,function(t,e){if(r.indexOf(t)<0)throw new Sn(En.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Kn(t,e,n,r){var i=Vn(r);return new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires its "+Wn(n)+" argument to be a "+e+", but it was: "+i)}function Wn(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function jn(t,e){return t+" "+e+(1===t?"":"s")}var zn=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return vn(20===e.length,"Invalid auto ID: "+e),e},t}();function Gn(t,e){return t<e?-1:e<t?1:0}function Hn(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Yn(){if("undefined"==typeof Uint8Array)throw new Sn(En.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Xn(){if(!bn.getPlatform().base64Available)throw new Sn(En.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Jn,$n,Zn,tr,er=function(){function e(t){Xn(),this._binaryString=t}return e.fromBase64String=function(t){kn("Blob.fromBase64String",arguments,1),_n("Blob.fromBase64String","string",1,t),Xn();try{return new e(bn.getPlatform().atob(t))}catch(t){throw new Sn(En.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(kn("Blob.fromUint8Array",arguments,1),Yn(),!(t instanceof Uint8Array))throw Kn("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(t){return String.fromCharCode(t)}).join(""))},e.prototype.toBase64=function(){return kn("Blob.toBase64",arguments,0),Xn(),bn.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){kn("Blob.toUint8Array",arguments,0),Yn();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._binaryString===t._binaryString},e.prototype._compareTo=function(t){return Gn(this._binaryString,t._binaryString)},e}(),nr=Tn(er,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),rr=function(){function t(t,e){if(kn("GeoPoint",arguments,2),_n("GeoPoint","number",1,t),_n("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Sn(En.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Sn(En.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Gn(this._lat,t._lat)||Gn(this._long,t._long)},t}(),ir=function(){function n(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Sn(En.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Sn(En.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Sn(En.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Sn(En.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return n.now=function(){return n.fromMillis(Date.now())},n.fromDate=function(t){return n.fromMillis(t.getTime())},n.fromMillis=function(t){var e=Math.floor(t/1e3);return new n(e,1e6*(t-1e3*e))},n.prototype.toDate=function(){return new Date(this.toMillis())},n.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},n.prototype._compareTo=function(t){return this.seconds===t.seconds?Gn(this.nanoseconds,t.nanoseconds):Gn(this.seconds,t.seconds)},n.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},n.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},n}(),or=function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r},sr="(default)",ar=function(){function e(t,e){this.projectId=t,this.database=e||sr}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===sr},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(t){return Gn(this.projectId,t.projectId)||Gn(this.database,t.database)},e}(),ur="__name__",cr=function(){function n(t,e,n){this.init(t,e,n)}return n.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&gn("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&gn("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},n.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(n.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(t){return 0===n.comparator(this,t)},n.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(function(t){e.push(t)}):"string"==typeof t?e.push(t):gn("Unknown parameter type for Path.child(): "+t),this.construct(e)},n.prototype.limit=function(){return this.offset+this.length},n.prototype.popFirst=function(t){return t=void 0===t?1:t,vn(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},n.prototype.popLast=function(){return vn(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},n.prototype.firstSegment=function(){return vn(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},n.prototype.lastSegment=function(){return vn(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},n.prototype.get=function(t){return vn(t<this.length,"Index out of range"),this.segments[this.offset+t]},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},n.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},n.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},n.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},n.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},n}(),hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(0<=t.indexOf("//"))throw new Sn(En.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return 0<t.length}))},e.EMPTY_PATH=new e([]),e}(cr),lr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fr=function(t){function u(){return null!==t&&t.apply(this,arguments)||this}return a(u,t),u.isValidIdentifier=function(t){return lr.test(t)},u.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),u.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},u.prototype.toString=function(){return this.canonicalString()},u.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===ur},u.keyField=function(){return new u([ur])},u.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Sn(En.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Sn(En.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Sn(En.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Sn(En.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new u(e)},u.EMPTY_PATH=new u([]),u}(cr),pr=function(){function e(t){this.path=t,vn(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.isEqual=function(t){return null!==t&&0===hr.comparator(this.path,t.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,e){return hr.comparator(t.path,e.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new hr(t.slice()))},e.fromPathString=function(t){return new e(hr.fromString(t))},e.EMPTY=new e(new hr([])),e}(),dr=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return pr.comparator(t.key,e.key)},t}(),mr=function(s){function e(t,e,n,r,i){var o=s.call(this,t,e)||this;return o.data=n,o.proto=i,o.hasLocalMutations=!!r.hasLocalMutations,o.hasCommittedMutations=!!r.hasCommittedMutations,o}return a(e,s),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):gn("Trying to compare documents on fields that don't exist")},e}(dr),yr=function(i){function e(t,e,n){var r=i.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}return a(e,i),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(dr),gr=function(n){function e(t,e){return n.call(this,t,e)||this}return a(e,n),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(dr),vr=function(){function n(t,e){this.comparator=t,this.root=e||wr.EMPTY}return n.prototype.insert=function(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,wr.BLACK,null,null))},n.prototype.remove=function(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wr.BLACK,null,null))},n.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},n.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},n.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(n.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),n.prototype.minKey=function(){return this.root.minKey()},n.prototype.maxKey=function(){return this.root.maxKey()},n.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},n.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},n.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},n.prototype.getIterator=function(){return new br(this.root,null,this.comparator,!1)},n.prototype.getIteratorFrom=function(t){return new br(this.root,t,this.comparator,!1)},n.prototype.getReverseIterator=function(){return new br(this.root,null,this.comparator,!0)},n.prototype.getReverseIteratorFrom=function(t){return new br(this.root,t,this.comparator,!0)},n}(),br=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){vn(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return 0<this.nodeStack.length},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),wr=function(){function o(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:o.RED,this.left=null!=r?r:o.EMPTY,this.right=null!=i?i:o.EMPTY,this.size=this.left.size+1+this.right.size}return o.prototype.copy=function(t,e,n,r,i){return new o(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},o.prototype.minKey=function(){return this.min().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},o.prototype.removeMin=function(){if(this.left.isEmpty())return o.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},o.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return o.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},o.prototype.isRed=function(){return this.color},o.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},o.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},o.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},o.prototype.rotateLeft=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},o.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},o.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw gn("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw gn("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw gn("Black depths differ");return t+(this.isRed()?0:1)},o.EMPTY=null,o.RED=!0,o.BLACK=!1,o}(),Er=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new wr(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();wr.EMPTY=new Er,($n=Jn||(Jn={}))[$n.NullValue=0]="NullValue",$n[$n.BooleanValue=1]="BooleanValue",$n[$n.NumberValue=2]="NumberValue",$n[$n.TimestampValue=3]="TimestampValue",$n[$n.StringValue=4]="StringValue",$n[$n.BlobValue=5]="BlobValue",$n[$n.RefValue=6]="RefValue",$n[$n.GeoPointValue=7]="GeoPointValue",$n[$n.ArrayValue=8]="ArrayValue",$n[$n.ObjectValue=9]="ObjectValue",(tr=Zn||(Zn={}))[tr.Default=0]="Default",tr[tr.Estimate=1]="Estimate",tr[tr.Previous=2]="Previous";var Sr=function(){function n(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return n.fromSnapshotOptions=function(t,e){switch(t.serverTimestamps){case"estimate":return new n(Zn.Estimate,e);case"previous":return new n(Zn.Previous,e);case"none":case void 0:return new n(Zn.Default,e);default:return gn("fromSnapshotOptions() called with invalid options.")}},n}(),Tr=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return vn(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Gn(this.typeOrder,t.typeOrder)},t}(),Ir=function(e){function n(){var t=e.call(this)||this;return t.typeOrder=Jn.NullValue,t.internalValue=null,t}return a(n,e),n.prototype.value=function(t){return null},n.prototype.isEqual=function(t){return t instanceof n},n.prototype.compareTo=function(t){return t instanceof n?0:this.defaultCompareTo(t)},n.INSTANCE=new n,n}(Tr),Cr=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.BooleanValue,e}return a(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Gn(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Tr),Dr=function(n){function r(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.NumberValue,e}return a(r,n),r.prototype.value=function(t){return this.internalValue},r.prototype.compareTo=function(t){return t instanceof r?(e=this.internalValue,n=t.internalValue,e<n?-1:n<e?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1):this.defaultCompareTo(t);var e,n},r}(Tr);function Nr(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Ar=function(e){function n(t){return e.call(this,t)||this}return a(n,e),n.prototype.isEqual=function(t){return t instanceof n&&Nr(this.internalValue,t.internalValue)},n}(Dr),kr=function(n){function e(t){var e=n.call(this,t)||this;return e.internalValue=t,e}return a(e,n),e.prototype.isEqual=function(t){return t instanceof e&&Nr(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Dr),Rr=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.StringValue,e}return a(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Gn(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Tr),Mr=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.TimestampValue,e}return a(e,n),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof _r?-1:this.defaultCompareTo(t)},e}(Tr),_r=function(r){function e(t,e){var n=r.call(this)||this;return n.localWriteTime=t,n.previousValue=e,n.typeOrder=Jn.TimestampValue,n}return a(e,r),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Zn.Estimate?new Mr(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Zn.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Mr?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Tr),Or=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.BlobValue,e}return a(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Tr),Pr=function(r){function n(t,e){var n=r.call(this)||this;return n.databaseId=t,n.key=e,n.typeOrder=Jn.RefValue,n}return a(n,r),n.prototype.value=function(t){return this.key},n.prototype.isEqual=function(t){return t instanceof n&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},n.prototype.compareTo=function(t){if(t instanceof n){var e=this.databaseId.compareTo(t.databaseId);return 0!==e?e:pr.comparator(this.key,t.key)}return this.defaultCompareTo(t)},n}(Tr),Lr=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.GeoPointValue,e}return a(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Tr),xr=function(n){function s(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.ObjectValue,e}return a(s,n),s.prototype.value=function(n){var r={};return this.internalValue.inorderTraversal(function(t,e){r[t]=e.value(n)}),r},s.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},s.prototype.isEqual=function(t){if(t instanceof s){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.hasNext()&&!n.hasNext()}return!1},s.prototype.compareTo=function(t){if(t instanceof s){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext(),o=Gn(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return Gn(e.hasNext(),n.hasNext())}return this.defaultCompareTo(t)},s.prototype.set=function(t,e){if(vn(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),e);var n=this.child(t.firstSegment());n instanceof s||(n=s.EMPTY);var r=n.set(t.popFirst(),e);return this.setChild(t.firstSegment(),r)},s.prototype.delete=function(t){if(vn(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new s(this.internalValue.remove(t.firstSegment()));var e=this.child(t.firstSegment());if(e instanceof s){var n=e.delete(t.popFirst());return new s(this.internalValue.insert(t.firstSegment(),n))}return this},s.prototype.contains=function(t){return void 0!==this.field(t)},s.prototype.field=function(t){vn(!t.isEmpty(),"Can't get field of empty path");var e=this;return t.forEach(function(t){e=e instanceof s&&e.internalValue.get(t)||void 0}),e},s.prototype.toString=function(){return JSON.stringify(this.value())},s.prototype.child=function(t){return this.internalValue.get(t)||void 0},s.prototype.setChild=function(t,e){return new s(this.internalValue.insert(t,e))},s.EMPTY=new s(new vr(Gn)),s}(Tr),qr=function(n){function i(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Jn.ArrayValue,e}return a(i,n),i.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},i.prototype.forEach=function(t){this.internalValue.forEach(t)},i.prototype.isEqual=function(t){if(t instanceof i){if(this.internalValue.length!==t.internalValue.length)return!1;for(var e=0;e<this.internalValue.length;e++)if(!this.internalValue[e].isEqual(t.internalValue[e]))return!1;return!0}return!1},i.prototype.compareTo=function(t){if(t instanceof i){for(var e=Math.min(this.internalValue.length,t.internalValue.length),n=0;n<e;n++){var r=this.internalValue[n].compareTo(t.internalValue[n]);if(r)return r}return Gn(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},i.prototype.toString=function(){return JSON.stringify(this.value())},i}(Tr),Fr=Number,Br=Fr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Vr=Fr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Ur=Fr.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Qr(t){return null==t}function Kr(t){return Ur(t)&&t<=Vr&&Br<=t}var Wr,jr,zr=function(){function n(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return n.atPath=function(t){return new n(t)},Object.defineProperty(n.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[ei]:this.memoizedOrderBy=[new ti(t),ei];else{vn(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var s=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:$r.ASCENDING;this.memoizedOrderBy.push(s===$r.ASCENDING?ei:ni)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),n.prototype.addFilter=function(t){vn(null==this.getInequalityFilterField()||!(t instanceof Yr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),vn(!pr.isDocumentKey(this.path),"No filtering allowed for document query");var e=this.filters.concat([t]);return new n(this.path,this.explicitOrderBy.slice(),e,this.limit,this.startAt,this.endAt)},n.prototype.addOrderBy=function(t){vn(!pr.isDocumentKey(this.path),"No ordering allowed for document query"),vn(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.explicitOrderBy.concat([t]);return new n(this.path,e,this.filters.slice(),this.limit,this.startAt,this.endAt)},n.prototype.withLimit=function(t){return new n(this.path,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},n.prototype.withStartAt=function(t){return new n(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},n.prototype.withEndAt=function(t){return new n(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},n.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}Qr(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},n.prototype.toString=function(){var t="Query("+this.path.canonicalString();return 0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),Qr(this.limit)||(t+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},n.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt))},n.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return vn(n,"orderBy used that doesn't compare on key field"),0},n.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},n.prototype.hasLimit=function(){return!Qr(this.limit)},n.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},n.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Yr&&n.isInequality())return n.field}return null},n.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof Yr&&t.op===Hr.ARRAY_CONTAINS})},n.prototype.isDocumentQuery=function(){return pr.isDocumentKey(this.path)&&0===this.filters.length},n.prototype.matchesAncestor=function(t){var e=t.key.path;return pr.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},n.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},n.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},n.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},n.prototype.assertValidBound=function(t){vn(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},n}(),Gr=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(Ir.INSTANCE)){if(e!==Hr.EQUAL)throw new Sn(En.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Xr(t)}if(n.isEqual(kr.NAN)){if(e!==Hr.EQUAL)throw new Sn(En.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Jr(t)}return new Yr(t,e,n)},t}(),Hr=function(){function e(t){this.name=t}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;default:return gn("Unknown relation: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(t){return this.name===t.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e}(),Yr=function(i){function e(t,e,n){var r=i.call(this)||this;return r.field=t,r.op=e,r.value=n,r}return a(e,i),e.prototype.matches=function(t){if(this.field.isKeyField()){vn(this.value instanceof Pr,"Comparing on key, but filter value not a RefValue"),vn(this.op!==Hr.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=pr.comparator(t.key,e.key);return this.matchesComparison(n)}var r=t.field(this.field);return void 0!==r&&this.matchesValue(r)},e.prototype.matchesValue=function(t){var e=this;return this.op===Hr.ARRAY_CONTAINS?t instanceof qr&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Hr.LESS_THAN:return t<0;case Hr.LESS_THAN_OR_EQUAL:return t<=0;case Hr.EQUAL:return 0===t;case Hr.GREATER_THAN:return 0<t;case Hr.GREATER_THAN_OR_EQUAL:return 0<=t;default:return gn("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Hr.EQUAL&&this.op!==Hr.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Gr),Xr=function(n){function e(t){var e=n.call(this)||this;return e.field=t,e}return a(e,n),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Gr),Jr=function(n){function e(t){var e=n.call(this)||this;return e.field=t,e}return a(e,n),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Gr),$r=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Zr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){vn(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())vn(o instanceof Pr,"Bound has a non-key value where the key path is being used."),n=pr.comparator(o.key,e.key);else{var s=e.field(i.field);vn(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===$r.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];return n.isEqual(r)}return!0},t}(),ti=function(){function t(t,e){this.field=t,void 0===e&&(e=$r.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?mr.compareByKey(t,e):mr.compareByField(this.field,t,e);switch(this.dir){case $r.ASCENDING:return n;case $r.DESCENDING:return-1*n;default:return gn("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ei=new ti(fr.keyField(),$r.ASCENDING),ni=new ti(fr.keyField(),$r.DESCENDING),ri=function(){function n(t){this.timestamp=t}return n.fromMicroseconds=function(t){var e=Math.floor(t/1e6);return new n(new ir(e,t%1e6*1e3))},n.fromTimestamp=function(t){return new n(t)},n.forDeletedDoc=function(){return n.MIN},n.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},n.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},n.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},n.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},n.prototype.toTimestamp=function(){return this.timestamp},n.MIN=new n(new ir(0,0)),n}();(jr=Wr||(Wr={}))[jr.Listen=0]="Listen",jr[jr.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",jr[jr.LimboResolution=2]="LimboResolution";var ii,oi,si=function(){function e(t,e,n,r,i,o){void 0===i&&(i=ri.MIN),void 0===o&&(o=wn()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},e}(),ai=function(){function o(t){this.comparator=t,this.data=new vr(this.comparator)}return o.fromMapKeys=function(t){var e=new o(t.comparator);return t.forEach(function(t){e=e.add(t)}),e},o.prototype.has=function(t){return null!==this.data.get(t)},o.prototype.first=function(){return this.data.minKey()},o.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(o.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),o.prototype.indexOf=function(t){return this.data.indexOf(t)},o.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},o.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},o.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},o.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},o.prototype.getIterator=function(){return new ui(this.data.getIterator())},o.prototype.getIteratorFrom=function(t){return new ui(this.data.getIteratorFrom(t))},o.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},o.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},o.prototype.isEmpty=function(){return this.data.isEmpty()},o.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},o.prototype.isEqual=function(t){if(!(t instanceof o))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},o.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},o.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},o.prototype.copy=function(t){var e=new o(this.comparator);return e.data=t,e},o}(),ui=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ci=function(){function n(t){this.fields=t}return n.fromSet=function(t){return new n(t)},n.fromArray=function(t){var e=new ai(fr.comparator);return t.forEach(function(t){return e=e.add(t)}),new n(e)},n.prototype.covers=function(e){var n=!1;return this.fields.forEach(function(t){t.isPrefixOf(e)&&(n=!0)}),n},n.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},n}(),hi=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),li=function(t,e){this.version=t,this.transformResults=e};(oi=ii||(ii={}))[oi.Set=0]="Set",oi[oi.Patch=1]="Patch",oi[oi.Transform=2]="Transform",oi[oi.Delete=3]="Delete";var fi=function(){function e(t,e){this.updateTime=t,this.exists=e,vn(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof mr&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof mr:(vn(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},e.NONE=new e,e}(),pi=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&vn(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof mr?t.version:ri.MIN},t}(),di=function(i){function e(t,e,n){var r=i.call(this)||this;return r.key=t,r.value=e,r.precondition=n,r.type=ii.Set,r}return a(e,i),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),vn(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new mr(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=pi.getPostMutationVersion(t);return new mr(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(pi),mi=function(o){function e(t,e,n,r){var i=o.call(this)||this;return i.key=t,i.data=e,i.fieldMask=n,i.precondition=r,i.type=ii.Patch,i}return a(e,o),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),vn(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new gr(this.key,e.version);var n=this.patchDocument(t);return new mr(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=pi.getPostMutationVersion(t),i=this.patchDocument(t);return new mr(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof mr?t.data:xr.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(n){var r=this;return this.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var e=r.data.field(t);n=void 0!==e?n.set(t,e):n.delete(t)}}),n},e}(pi),yi=function(r){function e(t,e){var n=r.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=ii.Transform,n.precondition=fi.exists(!0),n}return a(e,r),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),vn(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new gr(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new mr(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new mr(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Hn(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){vn(t instanceof mr,"Unknown MaybeDocument type "+t);var e=t;return vn(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];vn(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof mr&&(s=t.field(i.field)||null),n.push(o.applyToRemoteDocument(s,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],s=o.transform,a=null;e instanceof mr&&(a=e.field(o.field)||null),n.push(s.applyToLocalView(a,t))}return n},e.prototype.transformObject=function(t,e){vn(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},e}(pi),gi=function(r){function e(t,e){var n=r.call(this)||this;return n.key=t,n.precondition=e,n.type=ii.Delete,n}return a(e,r),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),vn(null==e.transformResults,"Transform results received by DeleteMutation."),new yr(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&vn(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new yr(this.key,ri.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(pi),vi=function(){function e(){}return e.prototype.applyToLocalView=function(t,e){return new _r(e,t)},e.prototype.applyToRemoteDocument=function(t,e){return e},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),bi=function(){function e(t){this.elements=t}return e.prototype.applyToLocalView=function(t,e){return this.apply(t)},e.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},e.prototype.apply=function(t){for(var n=Ei(t),e=function(e){n.find(function(t){return t.isEqual(e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++){e(i[r])}return new qr(n)},e.prototype.isEqual=function(t){return t instanceof e&&Hn(t.elements,this.elements)},e}(),wi=function(){function e(t){this.elements=t}return e.prototype.applyToLocalView=function(t,e){return this.apply(t)},e.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},e.prototype.apply=function(t){for(var n=Ei(t),e=function(e){n=n.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++){e(i[r])}return new qr(n)},e.prototype.isEqual=function(t){return t instanceof e&&Hn(t.elements,this.elements)},e}();function Ei(t){return t instanceof qr?t.internalValue.slice():[]}var Si,Ti,Ii=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Ci(t){switch(t){case En.OK:return gn("Treated status OK as error");case En.CANCELLED:case En.UNKNOWN:case En.DEADLINE_EXCEEDED:case En.RESOURCE_EXHAUSTED:case En.INTERNAL:case En.UNAVAILABLE:case En.UNAUTHENTICATED:return!1;case En.INVALID_ARGUMENT:case En.NOT_FOUND:case En.ALREADY_EXISTS:case En.PERMISSION_DENIED:case En.FAILED_PRECONDITION:case En.ABORTED:case En.OUT_OF_RANGE:case En.UNIMPLEMENTED:case En.DATA_LOSS:return!0;default:return gn("Unknown status code: "+t)}}function Di(t){if(void 0===t)return mn("GRPC error has no .code"),En.UNKNOWN;switch(t){case Si.OK:return En.OK;case Si.CANCELLED:return En.CANCELLED;case Si.UNKNOWN:return En.UNKNOWN;case Si.DEADLINE_EXCEEDED:return En.DEADLINE_EXCEEDED;case Si.RESOURCE_EXHAUSTED:return En.RESOURCE_EXHAUSTED;case Si.INTERNAL:return En.INTERNAL;case Si.UNAVAILABLE:return En.UNAVAILABLE;case Si.UNAUTHENTICATED:return En.UNAUTHENTICATED;case Si.INVALID_ARGUMENT:return En.INVALID_ARGUMENT;case Si.NOT_FOUND:return En.NOT_FOUND;case Si.ALREADY_EXISTS:return En.ALREADY_EXISTS;case Si.PERMISSION_DENIED:return En.PERMISSION_DENIED;case Si.FAILED_PRECONDITION:return En.FAILED_PRECONDITION;case Si.ABORTED:return En.ABORTED;case Si.OUT_OF_RANGE:return En.OUT_OF_RANGE;case Si.UNIMPLEMENTED:return En.UNIMPLEMENTED;case Si.DATA_LOSS:return En.DATA_LOSS;default:return gn("Unknown status code: "+t)}}(Ti=Si||(Si={}))[Ti.OK=0]="OK",Ti[Ti.CANCELLED=1]="CANCELLED",Ti[Ti.UNKNOWN=2]="UNKNOWN",Ti[Ti.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ti[Ti.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ti[Ti.NOT_FOUND=5]="NOT_FOUND",Ti[Ti.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ti[Ti.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ti[Ti.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ti[Ti.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ti[Ti.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ti[Ti.ABORTED=10]="ABORTED",Ti[Ti.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ti[Ti.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ti[Ti.INTERNAL=13]="INTERNAL",Ti[Ti.UNAVAILABLE=14]="UNAVAILABLE",Ti[Ti.DATA_LOSS=15]="DATA_LOSS";var Ni=new vr(pr.comparator);function Ai(){return Ni}function ki(){return Ai()}var Ri=new vr(pr.comparator);function Mi(){return Ri}var _i=new vr(pr.comparator);function Oi(){return _i}var Pi=new ai(pr.comparator);function Li(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Pi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var xi=new ai(Gn);function qi(){return xi}var Fi,Bi,Vi,Ui,Qi=function(){function o(n){this.comparator=n?function(t,e){return n(t,e)||pr.comparator(t.key,e.key)}:function(t,e){return pr.comparator(t.key,e.key)},this.keyedMap=Mi(),this.sortedSet=new vr(this.comparator)}return o.emptySet=function(t){return new o(t.comparator)},o.prototype.has=function(t){return null!=this.keyedMap.get(t)},o.prototype.get=function(t){return this.keyedMap.get(t)},o.prototype.first=function(){return this.sortedSet.minKey()},o.prototype.last=function(){return this.sortedSet.maxKey()},o.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},o.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(o.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),o.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},o.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},o.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},o.prototype.isEqual=function(t){if(!(t instanceof o))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},o.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},o.prototype.copy=function(t,e){var n=new o;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},o}();(Bi=Fi||(Fi={}))[Bi.Added=0]="Added",Bi[Bi.Removed=1]="Removed",Bi[Bi.Modified=2]="Modified",Bi[Bi.Metadata=3]="Metadata",(Ui=Vi||(Vi={}))[Ui.Local=0]="Local",Ui[Ui.Synced=1]="Synced";var Ki,Wi,ji=function(){function t(){this.changeMap=new vr(pr.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Fi.Added&&n.type===Fi.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Fi.Metadata&&n.type!==Fi.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Fi.Modified&&n.type===Fi.Modified?this.changeMap=this.changeMap.insert(e,{type:Fi.Modified,doc:t.doc}):t.type===Fi.Modified&&n.type===Fi.Added?this.changeMap=this.changeMap.insert(e,{type:Fi.Added,doc:t.doc}):t.type===Fi.Removed&&n.type===Fi.Added?this.changeMap=this.changeMap.remove(e):t.type===Fi.Removed&&n.type===Fi.Modified?this.changeMap=this.changeMap.insert(e,{type:Fi.Removed,doc:n.doc}):t.type===Fi.Added&&n.type===Fi.Removed?this.changeMap=this.changeMap.insert(e,{type:Fi.Modified,doc:t.doc}):gn("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var n=[];return this.changeMap.inorderTraversal(function(t,e){n.push(e)}),n},t}(),zi=function(){function o(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return o.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:Fi.Added,doc:t})}),new o(t,e,Qi.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),o.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},o}(),Gi=function(){function i(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return i.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n,r=((n={})[t]=Hi.createSynthesizedTargetChangeForCurrentChange(t,e),n);return new i(ri.MIN,r,qi(),Ai(),Li())},i}(),Hi=function(){function n(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return n.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new n(wn(),e,Li(),Li(),Li())},n}(),Yi=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Xi=function(t,e){this.targetId=t,this.existenceFilter=e};(Wi=Ki||(Ki={}))[Wi.NoChange=0]="NoChange",Wi[Wi.Added=1]="Added",Wi[Wi.Removed=2]="Removed",Wi[Wi.Current=3]="Current",Wi[Wi.Reset=4]="Reset";var Ji=function(t,e,n,r){void 0===n&&(n=wn()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},$i=function(){function t(){this.pendingResponses=0,this.documentChanges=eo(),this._resumeToken=wn(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){0<t.length&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var n=Li(),r=Li(),i=Li();return this.documentChanges.forEach(function(t,e){switch(e){case Fi.Added:n=n.add(t);break;case Fi.Modified:r=r.add(t);break;case Fi.Removed:i=i.add(t);break;default:gn("Encountered invalid change type: "+e)}}),new Hi(this._resumeToken,this._current,n,r,i)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=eo()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Zi=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Ai(),this.pendingDocumentTargetMapping=to(),this.pendingTargetResets=new ai(Gn)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof mr?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof yr&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.ensureTargetState(t);switch(n.state){case Ki.NoChange:r.isActiveTarget(t)&&e.updateResumeToken(n.resumeToken);break;case Ki.Added:e.recordTargetResponse(),e.isPending||e.clearPendingChanges(),e.updateResumeToken(n.resumeToken);break;case Ki.Removed:e.recordTargetResponse(),e.isPending||r.removeTarget(t),vn(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case Ki.Current:r.isActiveTarget(t)&&(e.markCurrent(),e.updateResumeToken(n.resumeToken));break;case Ki.Reset:r.isActiveTarget(t)&&(r.resetTarget(t),e.updateResumeToken(n.resumeToken));break;default:gn("Unknown target watch change state: "+n.state)}})},t.prototype.forEachTarget=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):Dn(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new pr(i.path);this.removeDocumentFromTarget(e,o,new yr(o,ri.forDeletedDoc()))}else vn(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(i){var o=this,s={};Dn(this.targetStates,function(t,e){var n=o.queryDataForActiveTarget(t);if(n){if(e.current&&n.query.isDocumentQuery()){var r=new pr(n.query.path);null!==o.pendingDocumentUpdates.get(r)||o.targetContainsDocument(t,r)||o.removeDocumentFromTarget(t,r,new yr(r,i))}e.hasPendingChanges&&(s[t]=e.toTargetChange(),e.clearPendingChanges())}});var r=Li();this.pendingDocumentTargetMapping.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){var e=o.queryDataForActiveTarget(t);return!e||e.purpose===Wr.LimboResolution||(n=!1)}),n&&(r=r.add(t))});var t=new Gi(i,s,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Ai(),this.pendingDocumentTargetMapping=to(),this.pendingTargetResets=new ai(Gn),t},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Fi.Modified:Fi.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Fi.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new $i),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new ai(Gn),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(e){var n=this;vn(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new $i,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(t){n.removeDocumentFromTarget(e,t,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function to(){return new vr(pr.comparator)}function eo(){return new vr(pr.comparator)}var no,ro,io=((no={})[$r.ASCENDING.name]="ASCENDING",no[$r.DESCENDING.name]="DESCENDING",no),oo=((ro={})[Hr.LESS_THAN.name]="LESS_THAN",ro[Hr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",ro[Hr.GREATER_THAN.name]="GREATER_THAN",ro[Hr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",ro[Hr.EQUAL.name]="EQUAL",ro[Hr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",ro),so=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(t,e){vn(!Qr(t),e+" is missing")}function uo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):gn("can't parse "+t)}var co=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?En.UNKNOWN:Di(t.code);return new Sn(e,t.message||"")},t.prototype.toInt32Value=function(t){return Qr(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Qr(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);vn(!!t,"Cannot deserialize null or undefined timestamp.");var e=uo(t.seconds||"0"),n=t.nanos||0;return new ir(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=so.exec(t);if(vn(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new ir(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(vn(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),er.fromBase64String(t)):(vn(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),er.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return vn(!!t,"Trying to deserialize version that isn't set"),ri.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=hr.fromString(t);return vn(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return vn(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),vn(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new pr(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?hr.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new hr(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new hr(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return vn(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Ir)return{nullValue:"NULL_VALUE"};if(t instanceof Cr)return{booleanValue:t.value()};if(t instanceof Ar)return{integerValue:""+t.value()};if(t instanceof kr){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Rr?{stringValue:t.value()}:t instanceof xr?{mapValue:this.toMapValue(t)}:t instanceof qr?{arrayValue:this.toArrayValue(t)}:t instanceof Mr?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Lr?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Or?{bytesValue:this.toBytes(t.value())}:t instanceof Pr?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:gn("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(ho(t,n,"nullValue"))return Ir.INSTANCE;if(ho(t,n,"booleanValue"))return Cr.of(t.booleanValue);if(ho(t,n,"integerValue"))return new Ar(uo(t.integerValue));if(ho(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return kr.NAN;if("Infinity"===t.doubleValue)return kr.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return kr.NEGATIVE_INFINITY}return new kr(t.doubleValue)}if(ho(t,n,"stringValue"))return new Rr(t.stringValue);if(ho(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(ho(t,n,"arrayValue")){ao(t.arrayValue,"arrayValue");var r=t.arrayValue.values||[];return new qr(r.map(function(t){return e.fromValue(t)}))}if(ho(t,n,"timestampValue"))return ao(t.timestampValue,"timestampValue"),new Mr(this.fromTimestamp(t.timestampValue));if(ho(t,n,"geoPointValue")){ao(t.geoPointValue,"geoPointValue");var i=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new Lr(new rr(i,o))}if(ho(t,n,"bytesValue")){ao(t.bytesValue,"bytesValue");var s=this.fromBlob(t.bytesValue);return new Or(s)}if(ho(t,n,"referenceValue")){ao(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),u=new ar(a.get(1),a.get(3)),c=new pr(this.extractLocalPathFromResourceName(a));return new Pr(u,c)}return gn("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return vn(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new mr(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var n=this,r={};return t.forEach(function(t,e){r[t]=n.toValue(e)}),r},t.prototype.fromFields=function(t){var n=this,e=t,r=xr.EMPTY;return Nn(e,function(t,e){r=r.set(new fr([t]),n.fromValue(e))}),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){vn(!!t.found,"Tried to deserialize a found document from a missing document."),ao(t.found.name,"doc.found.name"),ao(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new mr(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){vn(!!t.missing,"Tried to deserialize a missing document from a found document."),vn(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new yr(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return ho(t,e,"found")?this.fromFound(t):ho(t,e,"missing")?this.fromMissing(t):gn("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Ki.Added:return"ADD";case Ki.Current:return"CURRENT";case Ki.NoChange:return"NO_CHANGE";case Ki.Removed:return"REMOVE";case Ki.Reset:return"RESET";default:return gn("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Xi)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Yi){if(t.newDoc instanceof mr){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof yr){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ji){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return Si.OK;switch(t){case En.OK:return Si.OK;case En.CANCELLED:return Si.CANCELLED;case En.UNKNOWN:return Si.UNKNOWN;case En.DEADLINE_EXCEEDED:return Si.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return Si.RESOURCE_EXHAUSTED;case En.INTERNAL:return Si.INTERNAL;case En.UNAVAILABLE:return Si.UNAVAILABLE;case En.UNAUTHENTICATED:return Si.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return Si.INVALID_ARGUMENT;case En.NOT_FOUND:return Si.NOT_FOUND;case En.ALREADY_EXISTS:return Si.ALREADY_EXISTS;case En.PERMISSION_DENIED:return Si.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return Si.FAILED_PRECONDITION;case En.ABORTED:return Si.ABORTED;case En.OUT_OF_RANGE:return Si.OUT_OF_RANGE;case En.UNIMPLEMENTED:return Si.UNIMPLEMENTED;case En.DATA_LOSS:return Si.DATA_LOSS;default:return gn("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return gn("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(ho(t,n,"targetChange")){ao(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new Ji(r,i,o,a||null)}else if(ho(t,n,"documentChange")){ao(t.documentChange,"documentChange"),ao(t.documentChange.document,"documentChange.name"),ao(t.documentChange.document.name,"documentChange.document.name"),ao(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),h=this.fromVersion(u.document.updateTime),l=this.fromFields(u.document.fields||{}),f=new mr(c,h,l,{},u.document),p=u.targetIds||[],d=u.removedTargetIds||[];e=new Yi(p,d,f.key,f)}else if(ho(t,n,"documentDelete")){ao(t.documentDelete,"documentDelete"),ao(t.documentDelete.document,"documentDelete.document");var m=t.documentDelete;c=this.fromName(m.document),h=m.readTime?this.fromVersion(m.readTime):ri.forDeletedDoc(),f=new yr(c,h),d=m.removedTargetIds||[];e=new Yi([],d,f.key,f)}else if(ho(t,n,"documentRemove")){ao(t.documentRemove,"documentRemove"),ao(t.documentRemove.document,"documentRemove");var y=t.documentRemove;c=this.fromName(y.document),d=y.removedTargetIds||[];e=new Yi([],d,c,null)}else{if(!ho(t,n,"filter"))return gn("Unknown change type "+JSON.stringify(t));ao(t.filter,"filter"),ao(t.filter.targetId,"filter.targetId");var g=t.filter,v=g.count||0,b=new Ii(v),w=g.targetId;e=new Xi(w,b)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Ki.NoChange:"ADD"===t?Ki.Added:"REMOVE"===t?Ki.Removed:"CURRENT"===t?Ki.Current:"RESET"===t?Ki.Reset:gn("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!ho(t,t.response_type,"targetChange"))return ri.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?ri.MIN:e.readTime?this.fromVersion(e.readTime):ri.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof di)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof gi)e={delete:this.toName(t.key)};else if(t instanceof mi)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof yi))return gn("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):fi.NONE;if(t.update){ao(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new mi(r,i,o,n)}return new di(r,i,n)}if(t.delete){r=this.fromName(t.delete);return new gi(r,n)}if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return vn(!0===n.exists,'Transforms only support precondition "exists == true"'),new yi(r,s)}return gn("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return vn(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gn("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?fi.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?fi.exists(t.exists):fi.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new li(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&0<t.length?(vn(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof vi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof wi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw gn("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;if(ho(t,n,"setToServerValue"))vn("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=vi.instance;else if(ho(t,n,"appendMissingElements")){var i=t.appendMissingElements.values||[];r=new bi(i.map(function(t){return e.fromValue(t)}))}else if(ho(t,n,"removeAllFromArray")){i=t.removeAllFromArray.values||[];r=new wi(i.map(function(t){return e.fromValue(t)}))}else gn("Unknown transform proto: "+JSON.stringify(t));var o=fr.fromServerFormat(t.fieldPath);return new hi(o,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;vn(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return zr.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(hr.EMPTY_PATH);else{var n=t.path;vn(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;if(0<r){vn(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];e=e.child(i.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new zr(e,s,o,a,u,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Wr.Listen:return null;case Wr.ExistenceFilterMismatch:return"existence-filter-mismatch";case Wr.LimboResolution:return"limbo-document";default:return gn("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,0<t.resumeToken.length&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Yr?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):gn("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Zr(r,n)},t.prototype.toDirection=function(t){return io[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return $r.ASCENDING;case"DESCENDING":return $r.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return oo[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Hr.EQUAL;case"GREATER_THAN":return Hr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Hr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Hr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Hr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Hr.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return gn("Unspecified relation");default:return gn("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return fr.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new ti(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Yr?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:gn("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Yr(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Jr?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Xr?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:gn("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Jr(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Xr(n);case"OPERATOR_UNSPECIFIED":return gn("Unspecified filter");default:return gn("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return fr.fromServerFormat(t)});return ci.fromArray(e)},t}();function ho(t,e,n){return e===n||!e&&n in t}var lo=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){vn(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){vn(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){vn(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){vn(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){vn(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){vn(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),fo="Connection",po={BatchGetDocuments:"batchGet",Commit:"commit"},mo="gl-js/ fire/"+hn,yo=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=mo},t.prototype.invokeRPC=function(o,s,a){var u=this,c=this.makeUrl(o);return new Promise(function(n,r){var i=new nn;i.listenOnce(tn.COMPLETE,function(){try{switch(i.getLastErrorCode()){case Ze.NO_ERROR:var t=i.getResponseJson();dn(fo,"XHR received:",JSON.stringify(t)),n(t);break;case Ze.TIMEOUT:dn(fo,'RPC "'+o+'" timed out'),r(new Sn(En.DEADLINE_EXCEEDED,"Request time out"));break;case Ze.HTTP_ERROR:var e=i.getStatus();dn(fo,'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?r(new Sn(function(t){switch(t){case 200:return En.OK;case 400:return En.INVALID_ARGUMENT;case 401:return En.UNAUTHENTICATED;case 403:return En.PERMISSION_DENIED;case 404:return En.NOT_FOUND;case 409:return En.ABORTED;case 416:return En.OUT_OF_RANGE;case 429:return En.RESOURCE_EXHAUSTED;case 499:return En.CANCELLED;case 500:return En.UNKNOWN;case 501:return En.UNIMPLEMENTED;case 503:return En.UNAVAILABLE;case 504:return En.DEADLINE_EXCEEDED;default:return 200<=t&&t<300?En.OK:400<=t&&t<500?En.FAILED_PRECONDITION:500<=t&&t<600?En.INTERNAL:En.UNKNOWN}}(e),"Server responded with status "+i.getStatusText())):(dn(fo,'RPC "'+o+'" failed'),r(new Sn(En.UNAVAILABLE,"Connection failed.")));break;default:gn('RPC "'+o+'" failed with unanticipated webchannel error '+i.getLastErrorCode()+": "+i.getLastError()+", giving up.")}}finally{dn(fo,'RPC "'+o+'" completed.')}});var t=JSON.stringify(s);dn(fo,"XHR sending: ",c+" "+t);var e={"Content-Type":"text/plain"};u.modifyHeadersForRequest(e,a),i.send(c,"POST",t,e,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=$e(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");dn(fo,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),a=!1,u=!1,c=new lo({sendFn:function(t){u?dn(fo,"Not sending because WebChannel is closed:",t):(a||(dn(fo,"Opening WebChannel transport."),s.open(),a=!0),dn(fo,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),h=function(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(en.EventType.OPEN,function(){u||dn(fo,"WebChannel transport opened.")}),h(en.EventType.CLOSE,function(){u||(u=!0,dn(fo,"WebChannel transport closed"),c.callOnClose())}),h(en.EventType.ERROR,function(t){u||(u=!0,dn(fo,"WebChannel transport errored:",t),c.callOnClose(new Sn(En.UNAVAILABLE,"The operation could not be completed")))}),h(en.EventType.MESSAGE,function(t){if(!u){var e=t.data[0];vn(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){dn(fo,"WebChannel received error:",n);var r=n.status,i=function(t){var e=Si[t];if(void 0!==e)return Di(e)}(r),o=n.message;void 0===i&&(i=En.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),u=!0,c.callOnClose(new Sn(i,o)),s.close()}else dn(fo,"WebChannel received:",e),c.callOnMessage(e)}}),setTimeout(function(){c.callOnOpen()},0),c},t.prototype.makeUrl=function(t){var e=po[t];vn(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),go=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new yo(t))},t.prototype.newSerializer=function(t){return new co(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();bn.setPlatform(new go);var vo,bo,wo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),Eo=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};(bo=vo||(vo={})).All="all",bo.ListenStreamIdle="listen_stream_idle",bo.ListenStreamConnectionBackoff="listen_stream_connection_backoff",bo.WriteStreamIdle="write_stream_idle",bo.WriteStreamConnectionBackoff="write_stream_connection_backoff",bo.OnlineStateTimeout="online_state_timeout",bo.ClientMetadataRefresh="client_metadata_refresh",bo.LruGarbageCollection="lru_garbage_collection";var So=function(){function s(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return s.createAndSchedule=function(t,e,n,r,i){var o=new s(t,e,Date.now()+n,r,i);return o.start(n),o},s.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},s.prototype.skipDelay=function(){return this.handleDelayElapsed()},s.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Sn(En.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},s.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},s.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},s}(),To=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var n=this;this.verifyNotFailed();var e=this.tail.then(function(){return n.operationInProgress=!0,t().catch(function(t){n.failure=t,n.operationInProgress=!1;var e=t.stack||t.message||"";throw mn("INTERNAL UNHANDLED ERROR: ",e),e.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return n.operationInProgress=!1,t})});return this.tail=e},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),vn(0<=e,"Attempted to schedule an operation with a negative delay of "+e),vn(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=So.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&gn("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){vn(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(r){var i=this;return this.drain().then(function(){vn(r===vo.All||i.containsDelayedOperation(r),"Attempted to drain to missing operation "+r),i.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i.delayedOperations;t<e.length;t++){var n=e[t];if(n.skipDelay(),r!==vo.All&&n.timerId===r)break}return i.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);vn(0<=e,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),Io=" ",Co=" ",Do=" ",No=" ";function Ao(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=Ro(e)),e=ko(t.get(n),e);return Ro(e)}function ko(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Io+Do;break;case Io:n+=Io+No;break;default:n+=o}}return n}function Ro(t){return t+Io+Co}function Mo(t){var e=t.length;if(vn(2<=e,"Invalid path "+t),2===e)return vn(t.charAt(0)===Io&&t.charAt(1)===Co,"Non-empty path "+t+" had length 2"),hr.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(Io,o);switch((s<0||n<s)&&gn('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case Co:var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case Do:i+=t.substring(o,s),i+="\0";break;case No:i+=t.substring(o,s+1);break;default:gn('Invalid encoded resource path: "'+t+'"')}o=s+2}return new hr(r)}var _o,Oo,Po=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,vn(0<(this.mutations=n).length,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&vn(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;vn(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.applyToRemoteDocument(e,s)}}return e},t.prototype.applyToLocalView=function(t,e){e&&vn(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=Li(),e=0,n=this.mutations;e<n.length;e++){var r=n[e];t=t.add(r.key)}return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Hn(this.mutations,t.mutations)},t}(),Lo=function(){function a(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return a.from=function(t,e,n,r){vn(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=Oi(),o=t.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new a(t,e,n,r,i)},a}();(Oo=_o||(_o={}))[Oo.QueryCache=0]="QueryCache",Oo[Oo.SyncEngine=1]="SyncEngine";var xo=function(){function t(t,e){vn((1&(this.generatorId=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},t.prototype.after=function(t){return this.seek(t+2),this.next()},t.prototype.seek=function(t){vn((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(_o.QueryCache,2)},t.forSyncEngine=function(){return new t(_o.SyncEngine)},t}(),qo=function(){function s(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return s.prototype.catch=function(t){return this.next(void 0,t)},s.prototype.next=function(r,i){var o=this;return this.callbackAttached&&gn("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new s(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},s.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},s.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof s?e:s.resolve(e)}catch(t){return s.reject(t)}},s.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):s.resolve(e)},s.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):s.reject(e)},s.resolve=function(n){return new s(function(t,e){t(n)})},s.reject=function(n){return new s(function(t,e){e(n)})},s.waitFor=function(t){return new s(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},s.or=function(t){for(var n=s.resolve(!1),e=function(e){n=n.next(function(t){return t?s.resolve(t):e()})},r=0,i=t;r<i.length;r++){e(i[r])}return n},s.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)},s}(),Fo="SimpleDb",Bo=function(){function a(t){this.db=t}return a.openOrCreate=function(o,t,s){return vn(a.isAvailable(),"IndexedDB not supported in current environment."),dn(Fo,"Opening database:",o),new qo(function(n,r){var i=window.indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new a(e))},i.onblocked=function(){r(new Sn(En.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new Sn(En.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){dn(Fo,'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result,n=new Uo(i.transaction);s.createOrUpgrade(e,n,t.oldVersion,os).next(function(){dn(Fo,"Database upgrade to version "+os+" complete")})}}).toPromise()},a.delete=function(t){return dn(Fo,"Removing database:",t),Ko(window.indexedDB.deleteDatabase(t)).toPromise()},a.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/"))},a.getStore=function(t,e){return t.store(e)},a.prototype.runTransaction=function(t,e,n){var r=Uo.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),qo.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},a.prototype.close=function(){this.db.close()},a}(),Vo=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Ko(this.dbCursor.delete())},t}(),Uo=function(){function r(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new Eo,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return r.open=function(t,e,n){return new r(t.transaction(n,e))},Object.defineProperty(r.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),r.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(dn(Fo,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},r.prototype.store=function(t){var e=this.transaction.objectStore(t);return vn(!!e,"Object store not part of transaction: "+t),new Qo(e)},r}(),Qo=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){return Ko(void 0!==e?(dn(Fo,"PUT",this.store.name,t,e),this.store.put(e,t)):(dn(Fo,"PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},t.prototype.add=function(t){return dn(Fo,"ADD",this.store.name,t,t),Ko(this.store.add(t))},t.prototype.get=function(e){var n=this;return Ko(this.store.get(e)).next(function(t){return void 0===t&&(t=null),dn(Fo,"GET",n.store.name,e,t),t})},t.prototype.delete=function(t){return dn(Fo,"DELETE",this.store.name,t),Ko(this.store.delete(t))},t.prototype.count=function(){return dn(Fo,"COUNT",this.store.name),Ko(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){dn(Fo,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(r){var t=this.cursor({});return new qo(function(n,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,s){var a=[];return new qo(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new Vo(e),r=s(e.primaryKey,e.value,n);if(r instanceof qo){var i=r.catch(function(t){return n.done(),qo.reject(t)});a.push(i)}n.isDone?o():null===n.skipToKey?e.continue():e.continue(n.skipToKey)}else o()}}).next(function(){return qo.waitFor(a)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(vn(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ko(t){return new qo(function(n,e){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){e(t.target.error)}})}var Wo=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=xo.forQueryCache()}return t.prototype.allocateTargetId=function(e){var n=this;return this.retrieveMetadata(e).next(function(t){return t.highestTargetId=n.targetIdGenerator.after(t.highestTargetId),n.saveMetadata(e,t).next(function(){return t.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return ri.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return Go(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.retrieveMetadata(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.saveMetadata(e,t)})},t.prototype.addQueryData=function(e,n){var r=this;return this.saveQueryData(e,n).next(function(){return r.retrieveMetadata(e).next(function(t){return t.targetCount+=1,r.updateMetadataFromQueryData(n,t),r.saveMetadata(e,t)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return jo(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return vn(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},t.prototype.removeTargets=function(r,i,o){var s=this,a=0,u=[];return jo(r).iterate(function(t,e){var n=s.serializer.fromDbTarget(e);n.sequenceNumber<=i&&void 0===o[n.targetId]&&(a++,u.push(s.removeQueryData(r,n)))}).next(function(){return qo.waitFor(u)}).next(function(){return a})},t.prototype.forEachTarget=function(t,r){var i=this;return jo(t).iterate(function(t,e){var n=i.serializer.fromDbTarget(e);r(n)})},t.prototype.retrieveMetadata=function(t){return zo(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Us.getStore(n,vs.store)).put(vs.key,e);var n},t.prototype.saveQueryData=function(t,e){return jo(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),s=null;return jo(t).iterate({range:n,index:ys.queryTargetsIndexName},function(t,e,n){var r=o.serializer.fromDbTarget(e);i.isEqual(r.query)&&(s=r,n.done())}).next(function(){return s})},t.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],s=Ho(n);return t.forEach(function(t){var e=Ao(t.path);o.push(s.put(new gs(r,e))),o.push(i.referenceDelegate.addReference(n,t))}),qo.waitFor(o)},t.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=Ho(n);return qo.forEach(t,function(t){var e=Ao(t.path);return qo.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,t)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ho(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ho(t),o=Li();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=Mo(t[1]),i=new pr(r);o=o.add(i)}).next(function(){return o})},t.prototype.containsKey=function(t,e){var n,r=Ao(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return Ho(t).iterate({index:gs.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){var r=t[0];t[1];0!==r&&(o++,n.done())}).next(function(){return 0<o})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return jo(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function jo(t){return Us.getStore(t,ys.store)}function zo(t){return Bo.getStore(t,vs.store).get(vs.key).next(function(t){return vn(null!==t,"Missing metadata row."),t})}function Go(t){return zo(t).next(function(t){return t.highestListenSequenceNumber})}function Ho(t){return Us.getStore(t,gs.store)}var Yo=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(a){Nn(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},t.prototype.isEmpty=function(){return An(this.inner)},t}(),Xo=function(){function t(){this.changes=Ai(),this.documentSizes=new Yo(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?qo.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return vn(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Jo="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",$o=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=Bo.getStore(t,ws.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(0<e.length){for(var i=es(t),o=Li(),s=0,a=e;s<a.length;s++){var u=a[s],c=u.key,h=u.doc;r.push(i.put(rs(c),h)),o=o.add(c)}this.keepDocumentChangeLog&&r.push(ns(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return qo.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=es(t),r=rs(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return is(t)}):qo.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return es(t).get(rs(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return es(t).get(rs(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:is(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=ki();return this.forEachDbEntry(t,e,function(t,e){r=e?r.insert(t,n.serializer.fromDbRemoteDocument(e)):r.insert(t,null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=ki(),i=new vr(pr.comparator);return this.forEachDbEntry(t,e,function(t,e){i=e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i.insert(t,is(e))):(r=r.insert(t,null),i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,i){if(e.isEmpty())return qo.resolve();var n=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),s=o.getNext();return es(t).iterate({range:n},function(t,e,n){for(var r=pr.fromSegments(t);s&&pr.comparator(s,r)<0;)i(s,null),s=o.getNext();s&&s.isEqual(r)&&(i(s,e),s=o.hasNext()?o.getNext():null),s?n.skip(s.path.toArray()):n.done()}).next(function(){for(;s;)i(s,null),s=o.hasNext()?o.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,i){var o=this,s=Mi(),a=i.path.length+1,e=i.path.toArray(),n=IDBKeyRange.lowerBound(e);return es(t).iterate({range:n},function(t,e,n){if(t.length===a){var r=o.serializer.fromDbRemoteDocument(e);i.path.isPrefixOf(r.key.path)?r instanceof mr&&i.matches(r)&&(s=s.insert(r.key,r)):n.done()}}).next(function(){return s})},t.prototype.getNewDocumentChanges=function(e){var r=this;vn(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Li(),i=Ai(),t=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=ns(e);return s.iterate({range:t},function(t,e){if(o&&(o=!1,r._lastProcessedDocumentChangeId+1!==e.id))return r.synchronizeLastDocumentChangeId(s).next(function(){return qo.reject(new Sn(En.DATA_LOSS,Jo))});n=n.unionWith(r.serializer.fromDbResourcePaths(e.changes)),r._lastProcessedDocumentChangeId=e.id}).next(function(){var t=[];return n.forEach(function(n){t.push(r.getEntry(e,n).next(function(t){var e=t||new yr(n,ri.forDeletedDoc());i=i.insert(n,e)}))}),qo.waitFor(t)}).next(function(){return i})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return ns(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var r=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,e,n){r._lastProcessedDocumentChangeId=t,n.done()})},t.prototype.newChangeBuffer=function(){return new ts(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Zo(t).get(ms.key).next(function(t){return vn(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return Zo(t).put(ms.key,e)},t.prototype.updateSize=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.setMetadata(e,t)})},t}();function Zo(t){return Us.getStore(t,ms.store)}var ts=function(n){function t(t){var e=n.call(this)||this;return e.documentCache=t,e}return a(t,n),t.prototype.applyChanges=function(t){var o=this,e=this.assertChanges(),s=0,a=[];return e.forEach(function(t,e){var n=o.documentCache.serializer.toDbRemoteDocument(e),r=o.documentSizes.get(t);vn(void 0!==r,"Attempting to change document "+t.toString()+" without having read it first");var i=is(n);s+=i-r,a.push({key:t,doc:n})}),this.documentCache.addEntries(t,a,s)},t.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},t.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},t}(Xo);function es(t){return Us.getStore(t,ds.store)}function ns(t){return Us.getStore(t,ws.store)}function rs(t){return t.path.toArray()}function is(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw gn("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var os=7,ss=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,n,e,r){var i,o=this;vn(e<r&&0<=e&&r<=os,"Unexpected schema upgrade from v"+e+" to v{toVersion}."),e<1&&1<=r&&(t.createObjectStore(us.store),(i=t).createObjectStore(cs.store,{keyPath:cs.keyPath}),i.createObjectStore(hs.store,{keyPath:hs.keyPath,autoIncrement:!0}).createIndex(hs.userMutationsIndex,hs.userMutationsKeyPath,{unique:!0}),i.createObjectStore(ls.store),bs(t),t.createObjectStore(ds.store));var s,a=qo.resolve();return e<3&&3<=r&&(0!==e&&((s=t).deleteObjectStore(gs.store),s.deleteObjectStore(ys.store),s.deleteObjectStore(vs.store),bs(t)),a=a.next(function(){return t=n.store(vs.store),e=new vs(0,0,ri.MIN.toTimestamp(),0),t.put(vs.key,e);var t,e})),e<4&&4<=r&&(0!==e&&(a=a.next(function(){return i=t,(o=n).store(hs.store).loadAll().next(function(t){i.deleteObjectStore(hs.store);var e=i.createObjectStore(hs.store,{keyPath:hs.keyPath,autoIncrement:!0});e.createIndex(hs.userMutationsIndex,hs.userMutationsKeyPath,{unique:!0});var n=o.store(hs.store),r=t.map(function(t){return n.put(t)});return qo.waitFor(r)});var i,o})),a=a.next(function(){t.createObjectStore(Es.store,{keyPath:Es.keyPath}),t.createObjectStore(ws.store,{keyPath:"id",autoIncrement:!0})})),e<5&&5<=r&&(a=a.next(function(){return o.removeAcknowledgedMutations(n)})),e<6&&6<=r&&(a=a.next(function(){return t.createObjectStore(ms.store),o.addDocumentGlobal(n)})),e<7&&7<=r&&(a=a.next(function(){return o.ensureSequenceNumbers(n)})),a},t.prototype.addDocumentGlobal=function(e){var n=0;return e.store(ds.store).iterate(function(t,e){n+=is(e)}).next(function(){var t=new ms(n);return e.store(ms.store).put(ms.key,t)})},t.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(cs.store),e=r.store(hs.store);return t.loadAll().next(function(t){return qo.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.loadAll(hs.userMutationsIndex,t).next(function(t){return qo.forEach(t,function(t){vn(t.userId===n.userId,"Cannot process batch "+t.batchId+" from unexpected user");var e=i.serializer.fromDbMutationBatch(t);return Cs(r,n.userId,e).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var s=t.store(gs.store),e=t.store(ds.store);return Go(t).next(function(i){var o=[];return e.iterate(function(t,e){var n=new hr(t),r=[0,Ao(n)];o.push(s.get(r).next(function(t){return t?qo.resolve():(e=n,s.put(new gs(0,Ao(e),i)));var e}))}).next(function(){return qo.waitFor(o)})})},t}();var as=function(t,e){this.seconds=t,this.nanoseconds=e},us=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var cs=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),hs=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var ls=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ao(e)]},t.key=function(t,e,n){return[t,Ao(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var fs=function(t,e){this.path=t,this.readTime=e},ps=function(t,e){this.path=t,this.version=e},ds=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),ms=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var ys=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),gs=function(){function t(t,e,n){this.targetId=t,this.path=e,vn(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),vs=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}();function bs(t){t.createObjectStore(gs.store,{keyPath:gs.keyPath}).createIndex(gs.documentTargetsIndex,gs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ys.store,{keyPath:ys.keyPath}).createIndex(ys.queryTargetsIndexName,ys.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vs.store)}var ws=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}();var Es=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}();var Ss=[cs.store,hs.store,ls.store,ds.store,ys.store,us.store,vs.store,gs.store].concat([Es.store,ws.store]).concat([ms.store]),Ts=function(){function r(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return r.forUser=function(t,e,n){return vn(""!==t.uid,"UserID must not be an empty string."),new r(t.isAuthenticated()?t.uid:"",e,n)},r.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ns(t).iterate({index:hs.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},r.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Ds(n),ks(e).put(t)})},r.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},r.prototype.setLastStreamToken=function(e,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Ds(n),ks(e).put(t)})},r.prototype.addMutationBatch=function(t,u,c){var h=this,l=As(t),f=Ns(t);return f.add({}).next(function(t){vn("number"==typeof t,"Auto-generated key is not a number");var e=new Po(t,u,c),n=h.serializer.toDbMutationBatch(h.userId,e);h.documentKeysByBatchId[t]=e.keys();for(var r=[],i=0,o=c;i<o.length;i++){var s=o[i],a=ls.key(h.userId,s.key.path,t);r.push(f.put(n)),r.push(l.put(a,ls.PLACEHOLDER))}return qo.waitFor(r).next(function(){return e})})},r.prototype.lookupMutationBatch=function(t,e){var n=this;return Ns(t).get(e).next(function(t){return t?(vn(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},r.prototype.lookupMutationKeys=function(t,n){var r=this;return this.documentKeysByBatchId[n]?qo.resolve(this.documentKeysByBatchId[n]):this.lookupMutationBatch(t,n).next(function(t){if(t){var e=t.keys();return r.documentKeysByBatchId[n]=e}return null})},r.prototype.getNextMutationBatchAfterBatchId=function(n,o){var s=this;return this.getMutationQueueMetadata(n).next(function(t){var r=o+1,e=IDBKeyRange.lowerBound([s.userId,r]),i=null;return Ns(n).iterate({index:hs.userMutationsIndex,range:e},function(t,e,n){e.userId===s.userId&&(vn(e.batchId>=r,"Should have found mutation after "+r),i=s.serializer.fromDbMutationBatch(e)),n.done()}).next(function(){return i})})},r.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ns(t).loadAll(hs.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},r.prototype.getAllMutationBatchesAffectingDocumentKey=function(a,u){var c=this,t=ls.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return As(a).iterate({range:e},function(e,t,n){var r=e[0],i=e[1],o=e[2],s=Mo(i);if(r===c.userId&&u.path.isEqual(s))return Ns(a).get(o).next(function(t){if(!t)throw gn("Dangling document-mutation reference found: "+e+" which points to "+o);vn(t.userId===c.userId,"Unexpected user '"+t.userId+"' for mutation batch "+o),h.push(c.serializer.fromDbMutationBatch(t))});n.done()}).next(function(){return h})},r.prototype.getAllMutationBatchesAffectingDocumentKeys=function(r,t){var u=this,c=new ai(Gn),i=[];return t.forEach(function(a){var t=ls.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=As(r).iterate({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=Mo(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),qo.waitFor(i).next(function(){return u.lookupMutationBatches(r,c)})},r.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var a=this;vn(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var u=e.path,c=u.length+1,n=ls.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new ai(Gn);return As(t).iterate({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=Mo(i);r===a.userId&&u.isPrefixOf(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.lookupMutationBatches(t,h)})},r.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Ns(t).get(e).next(function(t){if(null===t)throw gn("Dangling document-mutation reference found, which points to "+e);vn(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),qo.waitFor(i).next(function(){return r})},r.prototype.removeMutationBatch=function(e,n){var r=this;return Cs(e.simpleDbTransaction,this.userId,n).next(function(t){return r.removeCachedMutationKeys(n.batchId),qo.forEach(t,function(t){return r.referenceDelegate.removeMutationReference(e,t)})})},r.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},r.prototype.performConsistencyCheck=function(n){var o=this;return this.checkEmpty(n).next(function(t){if(!t)return qo.resolve();var e=IDBKeyRange.lowerBound(ls.prefixForUser(o.userId)),i=[];return As(n).iterate({range:e},function(t,e,n){if(t[0]===o.userId){var r=Mo(t[1]);i.push(r)}else n.done()}).next(function(){vn(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},r.prototype.containsKey=function(t,e){return Is(t,this.userId,e)},r.prototype.getMutationQueueMetadata=function(t){var e=this;return ks(t).get(this.userId).next(function(t){return t||new cs(e.userId,-1,"")})},r}();function Is(t,o,e){var n=ls.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return As(t).iterate({range:r,keysOnly:!0},function(t,e,n){var r=t[0],i=t[1];t[2];r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function Cs(t,e,n){var r=t.store(hs.store),i=t.store(ls.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){vn(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=ls.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return qo.waitFor(o).next(function(){return c})}function Ds(t){return t instanceof Uint8Array?(vn("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Ns(t){return Us.getStore(t,hs.store)}function As(t){return Us.getStore(t,ls.store)}function ks(t){return Us.getStore(t,cs.store)}var Rs=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=pr.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new yr(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=pr.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new gr(e,n)}return gn("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof mr){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new ds(null,null,e,n)}if(t instanceof yr){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);n=t.hasCommittedMutations;return new ds(null,new fs(r,i),null,n)}if(t instanceof gr){r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);return new ds(new ps(r,i),null,null,!0)}return gn("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new as(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new ir(t.seconds,t.nanoseconds);return ri.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new hs(t,e.batchId,e.localWriteTime.toMillis(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=ir.fromMillis(t.localWriteTimeMs);return new Po(t.batchId,r,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(Ao(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Li(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new pr(Mo(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new si(e,t.targetId,Wr.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){vn(Wr.Listen===t.purpose,"Only queries with purpose "+Wr.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),n=t.resumeToken instanceof Uint8Array?(vn("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),t.resumeToken.toString()):t.resumeToken,new ys(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function Ms(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Gn(n,i);return 0===s?Gn(r,o):s}var _s=function(){function t(t){this.maxElements=t,this.buffer=new ai(Ms),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ms(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Os={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ps=function(){function e(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Ls=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){vn(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Ps.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;vn(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;dn("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(vo.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(Qs)})},t}(),xs=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return qo.resolve(wo.INVALID);var r=new _s(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(e,n){var r=this;return this.params.cacheSizeCollectionThreshold===Ps.COLLECTION_DISABLED?(dn("LruGarbageCollector","Garbage collection skipped; disabled"),qo.resolve(Os)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(dn("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Os):r.runGarbageCollection(e,n)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(e,n){var r,i,o,s,a,u,c,h,l=this;return s=Date.now(),this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>l.params.maximumSequenceNumbersToCollect?(dn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),l.params.maximumSequenceNumbersToCollect):t,a=Date.now(),l.nthSequenceNumber(e,i)}).next(function(t){return r=t,u=Date.now(),l.removeTargets(e,r,n)}).next(function(t){return o=t,c=Date.now(),l.removeOrphanedDocuments(e,r)}).next(function(t){(h=Date.now(),fn()<=an.DEBUG)&&dn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-s)+"ms\n\tDetermined least recently used "+i+" in "+(u-a)+"ms\n\tRemoved "+o+" targets in "+(c-u)+"ms\n\tRemoved "+t+" documents in "+(h-c)+"ms\nTotal Duration: "+(h-s)+"ms");return qo.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},t}(),qs="IndexedDbPersistence",Fs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bs="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Vs=function(r){function t(t,e){var n=r.call(this)||this;return n.simpleDbTransaction=t,n.currentSequenceNumber=e,n}return a(t,r),t}(function(){}),Us=function(){function c(t,e,n,r,i,o,s){if(this.persistenceKey=t,this.clientId=e,this.queue=r,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!c.isAvailable())throw new Sn(En.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new js(this,o),this.dbName=t+c.MAIN_DATABASE,this.serializer=new Rs(i),this.document=n.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new Wo(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new $o(this.serializer,this.allowTabSynchronization),!n.window||!n.window.localStorage)throw new Sn(En.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=n.window,this.webStorage=this.window.localStorage}return c.getStore=function(t,e){if(t instanceof Vs)return Bo.getStore(t.simpleDbTransaction,e);throw gn("IndexedDbPersistence must use instances of IndexedDbTransaction")},c.createIndexedDbPersistence=function(n,r,i,o,s,a){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,(e=new c(n,r,i,o,s,a)).start()];case 1:return t.sent(),[2,e]}})})},c.createMultiClientIndexedDbPersistence=function(n,r,i,o,s,a,u){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,(e=new c(n,r,i,o,s,a,u)).start()];case 1:return t.sent(),[2,e]}})})},c.prototype.start=function(){var n=this;return vn(!this.started,"IndexedDbPersistence double-started!"),vn(null!==this.window,"Expected 'window' to be defined"),Bo.openOrCreate(this.dbName,os,new ss(this.serializer)).then(function(t){return n.simpleDb=t,n.updateClientMetadataAndTryBecomePrimary()}).then(function(){return n.attachVisibilityHandler(),n.attachWindowUnloadHook(),n.scheduleClientMetadataAndPrimaryLeaseRefreshes(),n.startRemoteDocumentCache()}).then(function(){return n.simpleDb.runTransaction("readonly",[vs.store],function(t){return Go(t).next(function(t){var e=n.multiClientParams?n.multiClientParams.sequenceNumberSyncer:void 0;n.listenSequence=new wo(t,e)})})}).then(function(){n._started=!0}).catch(function(t){return n.simpleDb&&n.simpleDb.close(),Promise.reject(t)})},c.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",Ss,function(t){return e.remoteDocumentCache.start(t)})},c.prototype.setPrimaryStateListener=function(n){var t=this;return this.primaryStateListener=function(e){return h(t,void 0,void 0,function(){return p(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},c.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return h(e,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},c.prototype.updateClientMetadataAndTryBecomePrimary=function(){var r=this;return this.simpleDb.runTransaction("readwrite",Ss,function(n){return Ws(n).put(new Es(r.clientId,Date.now(),r.networkEnabled,r.inForeground,r.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(r.isPrimary)return r.verifyPrimaryLease(n).next(function(t){t||(r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}))})}).next(function(){return r.canActAsPrimary(n)}).next(function(t){var e=r.isPrimary;return r.isPrimary=t,e!==r.isPrimary&&r.queue.enqueueAndForget(function(){return r.primaryStateListener(r.isPrimary)}),e&&!r.isPrimary?r.releasePrimaryLeaseIfHeld(n):r.isPrimary?r.acquireOrExtendPrimaryLease(n):void 0})})},c.prototype.verifyPrimaryLease=function(t){var e=this;return Ks(t).get(us.key).next(function(t){return qo.resolve(e.isLocalClient(t))})},c.prototype.removeClientMetadata=function(t){return Ws(t).delete(this.clientId)},c.prototype.maybeGarbageCollectMultiClientState=function(){return h(this,void 0,void 0,function(){var r,i,o=this;return p(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),i=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(n){var e=c.getStore(n,Es.store);return e.loadAll().next(function(t){r=o.filterActiveClients(t,18e5),i=t.filter(function(t){return-1===r.indexOf(t)})}).next(function(){return qo.forEach(i,function(t){return e.delete(t.clientId)})}).next(function(){if(0<(r=r.filter(function(t){return t.clientId!==o.clientId})).length){var t=r.map(function(t){return t.lastProcessedDocumentChangeId||0}),e=Math.min.apply(Math,t);return o.remoteDocumentCache.removeDocumentChangesThroughChangeId(n,e)}})})]);case 1:t.sent(),i.forEach(function(t){o.window.localStorage.removeItem(o.zombiedClientLocalStorageKey(t.clientId))}),t.label=2;case 2:return[2]}})})},c.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(vo.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},c.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},c.prototype.canActAsPrimary=function(e){var i=this;return Ks(e).get(us.key).next(function(t){if(null!==t&&i.isWithinAge(t.leaseTimestampMs,5e3)&&!i.isClientZombied(t.ownerId)){if(i.isLocalClient(t)&&i.networkEnabled)return!0;if(!i.isLocalClient(t)){if(!t.allowTabSynchronization)throw new Sn(En.FAILED_PRECONDITION,Bs);return!1}}return!(!i.networkEnabled||!i.inForeground)||Ws(e).loadAll().next(function(t){return void 0===i.filterActiveClients(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&dn(qs,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},c.prototype.shutdown=function(n){return h(this,void 0,void 0,function(){var e=this;return p(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[us.store,Es.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),n?[4,Bo.delete(this.dbName)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},c.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},c.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[Es.store],function(t){return Ws(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(c.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),c.prototype.getMutationQueue=function(t){return vn(this.started,"Cannot initialize MutationQueue before persistence is started."),Ts.forUser(t,this.serializer,this.referenceDelegate)},c.prototype.getQueryCache=function(){return vn(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},c.prototype.getRemoteDocumentCache=function(){return vn(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},c.prototype.runTransaction=function(n,t,r){var i=this;return dn(qs,"Starting transaction:",n),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",Ss,function(e){return"readwrite-primary"===t?i.verifyPrimaryLease(e).next(function(t){if(!t)throw mn("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new Sn(En.FAILED_PRECONDITION,Fs);return r(new Vs(e,i.listenSequence.next()))}).next(function(t){return i.acquireOrExtendPrimaryLease(e).next(function(){return t})}):i.verifyAllowTabSynchronization(e).next(function(){return r(new Vs(e,i.listenSequence.next()))})})},c.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Ks(t).get(us.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new Sn(En.FAILED_PRECONDITION,Bs)})},c.prototype.acquireOrExtendPrimaryLease=function(t){var e=new us(this.clientId,this.allowTabSynchronization,Date.now());return Ks(t).put(us.key,e)},c.isAvailable=function(){return Bo.isAvailable()},c.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},c.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Ks(t);return n.get(us.key).next(function(t){return e.isLocalClient(t)?(dn(qs,"Releasing primary lease."),n.delete(us.key)):qo.resolve()})},c.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(n<t)||(mn("Detected an update time that is in the future: "+t+" > "+n),!1))},c.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},c.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(vn(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},c.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},c.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(vn("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},c.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return dn(qs,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return mn(qs,"Failed to get zombied client id.",t),!1}},c.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){mn("Failed to set zombie client id.",t)}},c.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},c.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},c.MAIN_DATABASE="main",c}();function Qs(n){return h(this,void 0,void 0,function(){return p(this,function(t){if((e=n).code!==En.FAILED_PRECONDITION||e.message!==Fs)throw n;var e;return dn(qs,"Unexpectedly lost primary lease"),[2]})})}function Ks(t){return t.store(us.store)}function Ws(t){return t.store(Es.store)}var js=function(){function t(t,e){this.db=t,this.garbageCollector=new xs(this,e)}return t.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(e){return n.next(function(t){return e+t})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,n){return this.forEachOrphanedDocument(t,function(t,e){return n(e)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return zs(t,e)},t.prototype.removeReference=function(t,e){return zs(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return zs(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?qo.resolve(!0):(r=e,i=!1,ks(n=t).iterateSerial(function(t){return Is(n,t,r).next(function(t){return t&&(i=!0),qo.resolve(!t)})}).next(function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(r,i){var o=this,s=0,a=0,u=[];return this.forEachOrphanedDocument(r,function(e,t){if(t<=i){var n=o.isPinned(r,e).next(function(t){if(!t)return s++,o.removeOrphanedDocument(r,e).next(function(t){a+=t})});u.push(n)}}).next(function(){return qo.waitFor(u)}).next(function(){return o.db.getRemoteDocumentCache().updateSize(r,-a)}).next(function(){return s})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return qo.waitFor([Ho(t).delete((n=e,[0,Ao(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return zs(t,e)},t.prototype.forEachOrphanedDocument=function(t,o){var s,e=Ho(t),a=wo.INVALID;return e.iterate({index:gs.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==wo.INVALID&&o(new pr(Mo(s)),a),a=i,s=r):a=wo.INVALID}).next(function(){a!==wo.INVALID&&o(new pr(Mo(s)),a)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function zs(t,e){return Ho(t).put((n=e,r=t.currentSequenceNumber,new gs(0,Ao(n.path),r)));var n,r}var Gs=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(e,n){var r=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.getDocumentInternal(e,n,t)})},t.prototype.getDocumentInternal=function(t,r,i){return this.remoteDocumentCache.getEntry(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++){t=n[e].applyToLocalView(r,t)}return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,i){var o=ki();return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++){e=r[n].applyToLocalView(t,e)}o=o.insert(t,e)}),o},t.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},t.prototype.getLocalViewOfDocuments=function(r,i){var o=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r,i).next(function(t){var e=o.applyLocalMutationsToDocuments(r,i,t),n=Ai();return e.forEach(function(t,e){e||(e=new yr(t,ri.forDeletedDoc())),n=n.insert(t,e)}),n})},t.prototype.getDocumentsMatchingQuery=function(t,e){return pr.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new pr(e)).next(function(t){var e=Mi();return t instanceof mr&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(e,h){var l,n=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,h).next(function(t){return l=t,n.mutationQueue.getAllMutationBatchesAffectingQuery(e,h)}).next(function(t){for(var e=0,n=t;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key;if(h.path.isImmediateParentOf(a.path)){var u=l.get(a),c=s.applyToLocalView(u,u,r.localWriteTime);l=c instanceof mr?l.insert(a,c):l.remove(a)}}}).next(function(){return l.forEach(function(t,e){h.matches(e)||(l=l.remove(t))}),l})},t}(),Hs=function(){function t(){this.refsByKey=new ai(Ys.compareByKey),this.refsByTarget=new ai(Ys.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ys(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Ys(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=pr.EMPTY,r=new Ys(n,t),i=new Ys(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=pr.EMPTY,n=new Ys(e,t),r=new Ys(e,t+1),i=Li();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ys(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ys=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return pr.comparator(t.key,e.key)||Gn(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Gn(t.targetOrBatchId,e.targetOrBatchId)||pr.comparator(t.key,e.key)},t}(),Xs=function(){function l(t,e){this.persistence=t,this.localViewReferences=new Hs,this.queryDataByTarget={},vn(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Gs(this.remoteDocuments,this.mutationQueue)}return l.prototype.handleUserChange=function(e){var y=this;return this.persistence.runTransaction("Handle user change","readonly",function(d){var m;return y.mutationQueue.getAllMutationBatches(d).next(function(t){return m=t,y.mutationQueue=y.persistence.getMutationQueue(e),y.localDocuments=new Gs(y.remoteDocuments,y.mutationQueue),y.mutationQueue.getAllMutationBatches(d)}).next(function(t){for(var e=[],n=[],r=Li(),i=0,o=m;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++){var c=u[a];r=r.add(c.key)}}for(var h=0,l=t;h<l.length;h++){s=l[h];n.push(s.batchId);for(var f=0,p=s.mutations;f<p.length;f++){c=p[f];r=r.add(c.key)}}return y.localDocuments.getDocuments(d,r).next(function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:n}})})})},l.prototype.localWrite=function(e){var i=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,t=ir.now();return i.mutationQueue.addMutationBatch(n,t,e).next(function(t){var e=(r=t).keys();return i.localDocuments.getDocuments(n,e)}).next(function(t){return{batchId:r.batchId,changes:t}})})},l.prototype.lookupMutationDocuments=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.mutationQueue.lookupMutationKeys(e,t).next(function(t){return t?n.localDocuments.getDocuments(e,t):qo.resolve(null)})})},l.prototype.acknowledgeBatch=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.remoteDocuments.newChangeBuffer();return i.mutationQueue.acknowledgeBatch(t,r.batch,r.streamToken).next(function(){return i.applyWriteToRemoteDocuments(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.mutationQueue.performConsistencyCheck(t)}).next(function(){return i.localDocuments.getDocuments(t,e)})})},l.prototype.rejectBatch=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.mutationQueue.lookupMutationBatch(e,t).next(function(t){return vn(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t)}).next(function(){return r.mutationQueue.performConsistencyCheck(e)}).next(function(){return r.localDocuments.getDocuments(e,n)})})},l.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},l.prototype.setLastStreamToken=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(t){return n.mutationQueue.setLastStreamToken(t,e)})},l.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},l.prototype.applyRemoteEvent=function(u){var c=this,h=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=[],a=Li();Dn(u.targetChanges,function(t,e){var n=c.queryDataByTarget[t];if(n){e.addedDocuments.forEach(function(t){a=a.add(t)}),e.modifiedDocuments.forEach(function(t){a=a.add(t)}),s.push(c.queryCache.removeMatchingKeys(o,e.removedDocuments,t).next(function(){return c.queryCache.addMatchingKeys(o,e.addedDocuments,t)}));var r=e.resumeToken;if(0<r.length){var i=n;n=n.copy({resumeToken:r,snapshotVersion:u.snapshotVersion}),c.queryDataByTarget[t]=n,l.shouldPersistQueryData(i,n,e)&&s.push(c.queryCache.updateQueryData(o,n))}}});var i=Ai(),n=Li();u.documentUpdates.forEach(function(t,e){n=n.add(t)}),s.push(h.getEntries(o,n).next(function(r){u.documentUpdates.forEach(function(t,e){var n=r.get(t);null==n||e.version.isEqual(ri.MIN)||a.has(e.key)&&!n.hasPendingWrites||0<=e.version.compareTo(n.version)?(h.addEntry(e),i=i.insert(t,e)):dn("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.resolvedLimboDocuments.has(t)&&s.push(c.persistence.referenceDelegate.updateLimboDocument(o,t))})}));var e=u.snapshotVersion;if(!e.isEqual(ri.MIN)){var t=c.queryCache.getLastRemoteSnapshotVersion(o).next(function(t){return vn(0<=e.compareTo(t),"Watch stream reverted to previous snapshot?? "+e+" < "+t),c.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,e)});s.push(t)}return qo.waitFor(s).next(function(){return h.apply(o)}).next(function(){return c.localDocuments.getLocalViewOfDocuments(o,i)})})},l.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size))},l.prototype.notifyLocalViewChanges=function(t){var n=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return qo.forEach(t,function(t){return n.localViewReferences.addReferences(t.addedKeys,t.targetId),n.localViewReferences.removeReferences(t.removedKeys,t.targetId),qo.forEach(t.removedKeys,function(t){return n.persistence.referenceDelegate.removeReference(e,t)})})})},l.prototype.nextMutationBatch=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)})},l.prototype.readDocument=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.localDocuments.getDocument(t,e)})},l.prototype.allocateQuery=function(r){var i=this;return this.persistence.runTransaction("Allocate query","readwrite",function(e){var n;return i.queryCache.getQueryData(e,r).next(function(t){return t?(n=t,qo.resolve()):i.queryCache.allocateTargetId(e).next(function(t){return n=new si(r,t,Wr.Listen,e.currentSequenceNumber),i.queryCache.addQueryData(e,n)})}).next(function(){return vn(!i.queryDataByTarget[n.targetId],"Tried to allocate an already allocated query: "+r),i.queryDataByTarget[n.targetId]=n})})},l.prototype.releaseQuery=function(o,s){var a=this,t=s?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",t,function(i){return a.queryCache.getQueryData(i,o).next(function(t){vn(null!=t,"Tried to release nonexistent query: "+o);var e=t.targetId,n=a.queryDataByTarget[e],r=a.localViewReferences.removeReferencesForId(e);return delete a.queryDataByTarget[e],s?qo.resolve():qo.forEach(r,function(t){return a.persistence.referenceDelegate.removeReference(i,t)}).next(function(){return a.persistence.referenceDelegate.removeTarget(i,n)})})})},l.prototype.executeQuery=function(e){var n=this;return this.persistence.runTransaction("Execute query","readonly",function(t){return n.localDocuments.getDocumentsMatchingQuery(t,e)})},l.prototype.remoteDocumentKeys=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(t){return n.queryCache.getMatchingKeysForTargetId(t,e)})},l.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},l.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},l.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},l.prototype.applyWriteToRemoteDocuments=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=qo.resolve();return n.forEach(function(r){a=a.next(function(){return o.getEntry(t,r)}).next(function(t){var e=t,n=i.docVersions.get(r);vn(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.compareTo(n)<0)&&((e=s.applyToRemoteDocument(r,e,i))?o.addEntry(e):vn(!t,"Mutation batch "+s+" applied to document "+t+" resulted in null"))})}),a.next(function(){return e.mutationQueue.removeMutationBatch(t,s)})},l.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.collect(t,n.queryDataByTarget)})},l.prototype.getQueryForTarget=function(e){var n=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(t){return n.queryCache.getQueryDataForTarget(t,e).next(function(t){return t?t.query:null})})},l.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},l.RESUME_TOKEN_MAX_AGE_MICROS=3e8,l}(),Js=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=wn(),this.batchesByDocumentKey=new ai(Ys.compareByKey)}return t.prototype.checkEmpty=function(t){return qo.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");vn(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return vn(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,qo.resolve()},t.prototype.getLastStreamToken=function(t){return qo.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,qo.resolve()},t.prototype.addMutationBatch=function(t,e,n){vn(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;(this.nextBatchId++,0<this.mutationQueue.length)&&vn(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new Po(r,e,n);this.mutationQueue.push(i);for(var o=0,s=n;o<s.length;o++){var a=s[o];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Ys(a.key,r))}return qo.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return qo.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return vn(null!=n,"Failed to find local mutation batch."),qo.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return qo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getAllMutationBatches=function(t){return qo.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,e=new Ys(n,0),i=new Ys(n,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([e,i],function(t){vn(n.isEqual(t.key),"Should only iterate over a single key's batches");var e=r.findMutationBatch(t.targetOrBatchId);vn(null!==e,"Batches in the index must exist in the main table"),o.push(e)}),qo.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var r=this,i=new ai(Gn);return e.forEach(function(e){var t=new Ys(e,0),n=new Ys(e,Number.POSITIVE_INFINITY);r.batchesByDocumentKey.forEachInRange([t,n],function(t){vn(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),i=i.add(t.targetOrBatchId)})}),qo.resolve(this.findMutationBatches(i))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;pr.isDocumentKey(i)||(i=i.child(""));var o=new Ys(new pr(i),0),s=new ai(Gn);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.targetOrBatchId)),!0)},o),qo.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.findMutationBatch(t);null!==e&&r.push(e)}),r},t.prototype.removeMutationBatch=function(n,r){var i=this;vn(0===this.indexOfExistingBatchId(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var o=this.batchesByDocumentKey;return qo.forEach(r.mutations,function(t){var e=new Ys(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.removeMutationReference(n,t.key)}).next(function(){i.batchesByDocumentKey=o})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Ys(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return qo.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&vn(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),qo.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return vn(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return vn(n.batchId===t,"If found batch must match"),n},t}(),$s=function(){function t(t){this.persistence=t,this.queries=new Yo(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=ri.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hs,this.targetCount=0,this.targetIdGenerator=xo.forQueryCache()}return t.prototype.getTargetCount=function(t){return qo.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,n){return this.queries.forEach(function(t,e){return n(e)}),qo.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return qo.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return qo.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,qo.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),qo.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return vn(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,qo.resolve()},t.prototype.updateQueryData=function(t,e){return vn(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),qo.resolve()},t.prototype.removeQueryData=function(t,e){return vn(0<this.targetCount,"Removing a target from an empty cache"),vn(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,qo.resolve()},t.prototype.removeTargets=function(n,r,i){var o=this,s=0,a=[];return this.queries.forEach(function(t,e){e.sequenceNumber<=r&&!i[e.targetId]&&(o.queries.delete(t),a.push(o.removeMatchingKeysForTargetId(n,e.targetId)),s++)}),qo.waitFor(a).next(function(){return s})},t.prototype.getQueryCount=function(t){return qo.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return qo.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return gn("Not yet implemented.")},t.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),qo.waitFor(i)},t.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),qo.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),qo.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return qo.resolve(n)},t.prototype.containsKey=function(t,e){return qo.resolve(this.references.containsKey(e))},t}();var Zs,ta,ea=function(){function t(t){this.sizer=t,this.docs=new vr(pr.comparator),this.newDocumentChanges=Li(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],s=o.maybeDocument.key;this.docs=this.docs.insert(s,o),this.newDocumentChanges=this.newDocumentChanges.add(s)}return this.size+=n,qo.resolve()},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,qo.resolve(n.size)):qo.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return qo.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return qo.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,r=ki();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),qo.resolve(r)},t.prototype.getSizedEntries=function(t,e){var n=this,r=ki(),i=new vr(pr.comparator);return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null),i=i.insert(t,e?e.size:0)}),qo.resolve({maybeDocuments:r,sizeMap:i})},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=Mi(),r=new pr(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.key,a=o.value.maybeDocument;if(!e.path.isPrefixOf(s.path))break;a instanceof mr&&e.matches(a)&&(n=n.insert(a.key,a))}return qo.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return qo.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var r=this,i=Ai();return this.newDocumentChanges.forEach(function(t){var e=r.docs.get(t),n=e?e.maybeDocument:new yr(t,ri.forDeletedDoc());i=i.insert(t,n)}),this.newDocumentChanges=Li(),qo.resolve(i)},t.prototype.newChangeBuffer=function(){return new na(this.sizer,this)},t.prototype.getSize=function(t){return qo.resolve(this.size)},t}(),na=function(r){function t(t,e){var n=r.call(this)||this;return n.sizer=t,n.documentCache=e,n}return a(t,r),t.prototype.applyChanges=function(t){var i=this,e=this.assertChanges(),o=0,s=[];return e.forEach(function(t,e){var n=i.documentSizes.get(t);vn(void 0!==n,"Attempting to change document "+t.toString()+" without having read it first");var r=i.sizer(e);o+=r-n,s.push({maybeDocument:e,size:r})}),this.documentCache.addEntries(t,s,o)},t.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},t.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},t}(Xo),ra=function(){function r(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new wo(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new $s(this);this.remoteDocumentCache=new ea(function(t){return n.referenceDelegate.documentSize(t)})}return r.createLruPersistence=function(t,e,n){return new r(t,function(t){return new sa(t,new Rs(e),n)})},r.createEagerPersistence=function(t){return new r(t,function(t){return new oa(t)})},r.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(r.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),r.prototype.getActiveClients=function(){return h(this,void 0,void 0,function(){return p(this,function(t){return[2,[this.clientId]]})})},r.prototype.setPrimaryStateListener=function(t){return t(!0)},r.prototype.setNetworkEnabled=function(t){},r.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Js(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},r.prototype.getQueryCache=function(){return this.queryCache},r.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},r.prototype.runTransaction=function(t,e,n){var r=this;dn("MemoryPersistence","Starting transaction:",t);var i=new ia(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},r.prototype.mutationQueuesContainKey=function(e,n){return qo.or((t=this.mutationQueues,r=[],Nn(t,function(t,e){return r.push(e)}),r).map(function(t){return function(){return t.containsKey(e,n)}}));var t,r},r}(),ia=function(t){this.currentSequenceNumber=t},oa=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),qo.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),qo.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),qo.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(n){var t=this,r=this.persistence.getRemoteDocumentCache();return qo.forEach(this.orphanedDocuments,function(e){return t.isReferenced(n,e).next(function(t){return t?qo.resolve():r.removeEntry(n,e).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return qo.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return qo.resolve(n.inMemoryPins.containsKey(e))}])},t}(),sa=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new Yo(function(t){return Ao(t.path)}),this.garbageCollector=new xs(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return qo.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(n,r){var i=this;return qo.forEach(this.orphanedSequenceNumbers,function(t,e){return i.isPinned(n,t,e).next(function(t){return t?qo.resolve():r(e)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(n,t){var r=this,i=0,o=this.persistence.getRemoteDocumentCache();return o.forEachDocumentKey(n,function(e){return r.isPinned(n,e,t).next(function(t){return t?qo.resolve():(i++,o.removeEntry(n,e).next())})}).next(function(){return i})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qo.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qo.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qo.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),qo.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gn("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return qo.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return qo.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return qo.resolve(void 0!==t&&n<t)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),aa=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&dn("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),ua="PersistentStream";(ta=Zs||(Zs={}))[ta.Initial=0]="Initial",ta[ta.Starting=1]="Starting",ta[ta.Open=2]="Open",ta[ta.Error=3]="Error",ta[ta.Backoff=4]="Backoff";var ca,ha,la,fa,pa=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Zs.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new aa(t,e,1e3,1.5,6e4)}return t.prototype.isStarted=function(){return this.state===Zs.Starting||this.state===Zs.Open||this.state===Zs.Backoff},t.prototype.isOpen=function(){return this.state===Zs.Open},t.prototype.start=function(){this.state!==Zs.Error?(vn(this.state===Zs.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Zs.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){vn(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Zs.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return h(this,void 0,void 0,function(){return p(this,function(t){return this.isOpen()?[2,this.close(Zs.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(e,n){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return vn(this.isStarted(),"Only started streams should be closed."),vn(e===Zs.Error||Qr(n),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Zs.Error?this.backoff.reset():n&&n.code===En.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===En.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(n)];case 1:return t.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var n=this;vn(this.state===Zs.Initial,"Must be in initial state to auth"),this.state=Zs.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),e=this.closeCount;this.credentialsProvider.getToken().then(function(t){n.closeCount===e&&n.startStream(t)},function(e){t(function(){var t=new Sn(En.UNKNOWN,"Fetching auth token failed: "+e.message);return n.handleStreamClose(t)})})},t.prototype.startStream=function(t){var e=this;vn(this.state===Zs.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return vn(e.state===Zs.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Zs.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;vn(this.state===Zs.Error,"Should only perform backoff when in Error state"),this.state=Zs.Backoff,this.backoff.backoffAndRun(function(){return h(t,void 0,void 0,function(){return p(this,function(t){return vn(this.state===Zs.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Zs.Initial,this.start(),vn(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return vn(this.isStarted(),"Can't handle server close on non-started stream"),dn(ua,"close with error: "+t),this.stream=null,this.close(Zs.Error,t)},t.prototype.getCloseGuardedDispatcher=function(e){var n=this;return function(t){n.queue.enqueueAndForget(function(){return n.closeCount===e?t():(dn(ua,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),da=function(s){function t(t,e,n,r,i){var o=s.call(this,t,vo.ListenStreamConnectionBackoff,vo.ListenStreamIdle,e,n,i)||this;return o.serializer=r,o}return a(t,s),t.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},t.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},t.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},t.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},t}(pa),ma=function(s){function t(t,e,n,r,i){var o=s.call(this,t,vo.WriteStreamConnectionBackoff,vo.WriteStreamIdle,e,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o}return a(t,s),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,s.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},t.prototype.onMessage=function(t){if(vn(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return vn(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){vn(this.isOpen(),"Writing handshake requires an opened stream"),vn(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},t.prototype.writeMutations=function(t){var e=this;vn(this.isOpen(),"Writing mutations requires an opened stream"),vn(this.handshakeComplete_,"Handshake must be complete before writing mutations"),vn(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},t}(pa),ya=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new ma(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new da(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(e){var i=this,t={database:this.serializer.encodedDatabaseId,documents:e.map(function(t){return i.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",t).then(function(t){var n=Ai();t.forEach(function(t){var e=i.serializer.fromMaybeDocument(t);n=n.insert(e.key,e)});var r=[];return e.forEach(function(t){var e=n.get(t);vn(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},t.prototype.invokeRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeRPC(e,n,t)}).catch(function(t){throw t.code===En.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeStreamingRPC(e,n,t)}).catch(function(t){throw t.code===En.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},t}(),ga=function(){function t(t){this.datastore=t,this.readVersions=Oi(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof mr)e=t.version;else{if(!(t instanceof yr))throw gn("Document in a transaction was a "+t.constructor.name);e=ri.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Sn(En.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):0<this.mutations.length?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof yr||t instanceof mr?e.recordVersion(t):gn("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new Sn(En.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?fi.updateTime(e):fi.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(ri.forDeletedDoc()))throw new Sn(En.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?fi.updateTime(e):fi.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new gi(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,ri.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}();(ha=ca||(ca={}))[ha.Unknown=0]="Unknown",ha[ha.Online=1]="Online",ha[ha.Offline=2]="Offline",(fa=la||(la={}))[fa.RemoteStore=0]="RemoteStore",fa[fa.SharedClientState=1]="SharedClientState";var va=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=ca.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(ca.Unknown),vn(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(vo.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,vn(t.state===ca.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(ca.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===ca.Online?(this.setAndBroadcast(ca.Unknown),vn(0===this.watchStreamFailures,"watchStreamFailures must be 0"),vn(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(ca.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===ca.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(mn(e),this.shouldWarnClientIsOffline=!1):dn("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),ba="RemoteStore",wa=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new va(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(ca.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ca.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),0<this.writePipeline.length&&(dn(ba,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return dn(ba,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ca.Unknown),[2]}})})},t.prototype.listen=function(t){vn(!In(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){vn(In(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),An(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(ca.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){vn(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Zi(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!An(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return h(this,void 0,void 0,function(){var n=this;return p(this,function(t){return Dn(this.listenTargets,function(t,e){n.sendWatchRequest(e)}),[2]})})},t.prototype.onWatchStreamClose=function(e){return h(this,void 0,void 0,function(){return p(this,function(t){return void 0===e&&vn(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(ca.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(n,r){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return this.onlineStateTracker.set(ca.Online),n instanceof Ji&&n.state===Ki.Removed&&n.cause?[2,this.handleTargetError(n)]:(n instanceof Yi?this.watchChangeAggregator.handleDocumentChange(n):n instanceof Xi?this.watchChangeAggregator.handleExistenceFilter(n):(vn(n instanceof Ji,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(n)),r.isEqual(ri.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return e=t.sent(),0<=r.compareTo(e)?[4,this.raiseWatchSnapshot(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(r){var i=this;vn(!r.isEqual(ri.MIN),"Can't raise event for unknown SnapshotVersion");var t=this.watchChangeAggregator.createRemoteEvent(r);return Dn(t.targetChanges,function(t,e){if(0<e.resumeToken.length){var n=i.listenTargets[t];n&&(i.listenTargets[t]=n.copy({resumeToken:e.resumeToken,snapshotVersion:r}))}}),t.targetMismatches.forEach(function(t){var e=i.listenTargets[t];if(e){i.listenTargets[t]=e.copy({resumeToken:wn()}),i.sendUnwatchRequest(t);var n=new si(e.query,t,Wr.ExistenceFilterMismatch,e.sequenceNumber);i.sendWatchRequest(n)}}),this.syncEngine.applyRemoteEvent(t)},t.prototype.handleTargetError=function(t){var n=this;vn(!!t.cause,"Handling target error without a cause");var r=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return h(n,void 0,void 0,function(){return p(this,function(t){return In(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,r)]):[2]})})})}),i},t.prototype.fillWritePipeline=function(){return h(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(n=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(n),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){vn(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},t.prototype.startWriteStream=function(){vn(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return h(this,void 0,void 0,function(){return p(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var r=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,e=r.writePipeline;t<e.length;t++){var n=e[t];r.writeStream.writeMutations(n.mutations)}}).catch(Qs)},t.prototype.onMutationResult=function(t,e){var n=this;vn(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Lo.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(n){return h(this,void 0,void 0,function(){var e=this;return p(this,function(t){return void 0===n&&vn(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),n&&0<this.writePipeline.length?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(n):this.handleHandshakeError(n)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(e){return h(this,void 0,void 0,function(){return p(this,function(t){return Ci(e.code)?(dn(ba,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=wn(),[2,this.localStore.setLastStreamToken(wn()).catch(Qs)]):[2]})})},t.prototype.handleWriteError=function(i){return h(this,void 0,void 0,function(){var n,r=this;return p(this,function(t){return Ci(e=i.code)&&e!==En.ABORTED?(n=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(n.batchId,i).then(function(){return r.fillWritePipeline()})]):[2];var e})})},t.prototype.createTransaction=function(){return new ga(this.datastore)},t.prototype.handleCredentialChange=function(){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(dn(ba,"RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(ca.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(e){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(ca.Unknown),t.label=4;case 4:return[2]}})})},t}(),Ea=function(){this.listeners=[]},Sa=function(){function t(t){this.syncEngine=t,this.queries=new Yo(function(t){return t.canonicalId()}),this.onlineState=ca.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new Ea,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(o){return h(this,void 0,void 0,function(){var e,n,r,i;return p(this,function(t){return e=o.query,n=!1,(r=this.queries.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.query,o=this.queries.get(i);if(o){for(var s=0,a=o.listeners;s<a.length;s++){a[s].onViewSnapshot(r)}o.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(i){this.onlineState=i,this.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++){r[n].applyOnlineStateChange(i)}})},t}(),Ta=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=ca.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(vn(0<t.docChanges.length||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Fi.Metadata&&e.push(i)}t=new zi(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(vn(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==ca.Offline;return this.options.waitForSyncWhenOnline&&n?(vn(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===ca.Offline},t.prototype.shouldRaiseEvent=function(t){if(0<t.docChanges.length)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){vn(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=zi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),Ia=function(){function a(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return a.fromSnapshot=function(t,e){for(var n=Li(),r=Li(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case Fi.Added:n=n.add(s.doc.key);break;case Fi.Removed:r=r.add(s.doc.key)}}return new a(t,n,r)},a}(),Ca=function(t){this.key=t},Da=function(t){this.key=t},Na=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Li(),this.mutatedKeys=Li(),this.documentSet=new Qi(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var a=this,u=e?e.changeSet:new ji,c=e?e.documentSet:this.documentSet,h=e?e.mutatedKeys:this.mutatedKeys,l=c,f=!1,p=this.query.hasLimit()&&c.size===this.query.limit?c.last():null;if(t.inorderTraversal(function(t,e){var n=c.get(t),r=e instanceof mr?e:null;r&&(vn(t.isEqual(r.key),"Mismatching keys found in document changes: "+t+" != "+r.key),r=a.query.matches(r)?r:null);var i=!!n&&a.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||a.mutatedKeys.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data.isEqual(r.data)?i!==o&&(u.track({type:Fi.Metadata,doc:r}),s=!0):a.shouldWaitForSyncedDocument(n,r)||(u.track({type:Fi.Modified,doc:r}),s=!0,p&&0<a.query.docComparator(r,p)&&(f=!0)):!n&&r?(u.track({type:Fi.Added,doc:r}),s=!0):n&&!r&&(u.track({type:Fi.Removed,doc:n}),s=!0,p&&(f=!0));s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.hasLimit())for(;l.size>this.query.limit;){var n=l.last();l=l.delete(n.key),h=h.delete(n.key),u.track({type:Fi.Removed,doc:n})}return vn(!f||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:l,changeSet:u,needsRefill:f,mutatedKeys:h}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var o=this;vn(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var i=t.changeSet.getChanges();i.sort(function(t,e){return n=t.type,r=e.type,(i=function(t){switch(t){case Fi.Added:return 1;case Fi.Modified:case Fi.Metadata:return 2;case Fi.Removed:return 0;default:return gn("Unknown ChangeType: "+t)}})(n)-i(r)||o.query.docComparator(t.doc,e.doc);var n,r,i}),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Vi.Synced:Vi.Local,u=a!==this.syncState;return this.syncState=a,0!==i.length||u?{snapshot:new zi(this.query,t.documentSet,r,i,t.mutatedKeys,a===Vi.Local,u,!1),limboChanges:s}:{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===ca.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new ji,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return vn(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var n=this.limboDocuments;this.limboDocuments=Li(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var r=[];return n.forEach(function(t){e.limboDocuments.has(t)||r.push(new Da(t))}),this.limboDocuments.forEach(function(t){n.has(t)||r.push(new Ca(t))}),r},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Li();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return zi.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Vi.Local)},t}();var Aa="SyncEngine",ka=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ra=function(t){this.key=t},Ma=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Yo(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new vr(pr.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hs,this.mutationUserCallbacks={},this.limboTargetIdGenerator=xo.forSyncEngine(),this.isPrimary=void 0,this.onlineState=ca.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){vn(null!==t,"SyncEngine listener cannot be null"),vn(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(s){return h(this,void 0,void 0,function(){var e,n,r,i,o;return p(this,function(t){switch(t.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(s))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(s)];case 2:return i=t.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=t.sent(),this.isPrimary&&this.remoteStore.listen(i),t.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(a,u){var c=this,h=a.query;return this.localStore.executeQuery(h).then(function(s){return c.localStore.remoteDocumentKeys(a.targetId).then(function(t){var e=new Na(h,t),n=e.computeDocChanges(s),r=Hi.createSynthesizedTargetChangeForCurrentChange(a.targetId,u&&c.onlineState!==ca.Offline),i=e.applyChanges(n,!0===c.isPrimary,r);vn(0===i.limboChanges.length,"View returned limbo docs before target ack from the server."),vn(!!i.snapshot,"applyChanges for new view should always return a snapshot");var o=new ka(h,a.targetId,e);return c.queryViewsByQuery.set(h,o),c.queryViewsByTarget[a.targetId]=o,i.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(i){var t=this;return this.localStore.executeQuery(i.query).then(function(r){return t.localStore.remoteDocumentKeys(i.targetId).then(function(n){return h(t,void 0,void 0,function(){var e;return p(this,function(t){return e=i.view.synchronizeWithPersistedState(r,n),this.isPrimary&&this.updateTrackedLimbos(i.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(r){return h(this,void 0,void 0,function(){var e,n=this;return p(this,function(t){switch(t.label){case 0:return this.assertSubscribed("unlisten()"),vn(!!(e=this.queryViewsByQuery.get(r)),"Trying to unlisten on query not found:"+r),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(r,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(Qs)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(r,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(e,n){var r=this;void 0===n&&(n=5),vn(0<=n,"Got negative number of retries for transaction.");var i=this.remoteStore.createTransaction();return function(){try{var t=e(i);return!Qr(t)&&t.catch&&t.then?t.catch(function(t){return Promise.reject(r.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(r.wrapUpdateFunctionError(t))}}().then(function(t){return i.commit().then(function(){return t}).catch(function(t){return 0===n?Promise.reject(t):r.runTransaction(e,n-1)})})},t.prototype.applyRemoteEvent=function(e){var r=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(e).then(function(t){return Nn(e.targetChanges,function(t,e){var n=r.limboResolutionsByTarget[t];n&&(vn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.addedDocuments.size?n.receivedDocument=!0:0<e.modifiedDocuments.size?vn(n.receivedDocument,"Received change for limbo target document without add."):0<e.removedDocuments.size&&(vn(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),r.emitNewSnapsAndNotifyLocalStore(t,e)}).catch(Qs)},t.prototype.applyOnlineStateChange=function(r,t){if(this.isPrimary&&t===la.RemoteStore||!this.isPrimary&&t===la.SharedClientState){var i=[];this.queryViewsByQuery.forEach(function(t,e){var n=e.view.applyOnlineStateChange(r);vn(0===n.limboChanges.length,"OnlineState should not affect limbo documents."),n.snapshot&&i.push(n.snapshot)}),this.syncEngineListener.onOnlineStateChange(r),this.syncEngineListener.onWatchChange(i),this.onlineState=r,this.isPrimary&&this.sharedClientState.setOnlineState(r)}},t.prototype.rejectListen=function(u,c){return h(this,void 0,void 0,function(){var e,n,r,i,o,s,a=this;return p(this,function(t){switch(t.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(u,"rejected",c),e=this.limboResolutionsByTarget[u],(n=e&&e.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(n),delete this.limboResolutionsByTarget[u],r=(r=new vr(pr.comparator)).insert(n,new yr(n,ri.forDeletedDoc())),i=Li().add(n),o=new Gi(ri.MIN,{},new ai(Gn),r,i),[2,this.applyRemoteEvent(o)]):[3,1];case 1:return vn(!!(s=this.queryViewsByTarget[u]),"Unknown targetId: "+u),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return a.removeAndCleanupQuery(s)}).catch(Qs)];case 2:t.sent(),this.syncEngineListener.onWatchError(s.query,c),t.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(n,r,i){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(n)];case 1:return null===(e=t.sent())?(dn(Aa,"Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.processUserCallback(n,i||null),this.localStore.removeCachedMutationBatchMetadata(n)):gn("Unknown batchState: "+r),t.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(e)];case 5:return t.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(Qs)},t.prototype.rejectFailedWrite=function(e,n){var r=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,n),this.localStore.rejectBatch(e).then(function(t){return r.sharedClientState.updateMutationState(e,"rejected",n),r.emitNewSnapsAndNotifyLocalStore(t)}).catch(Qs)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new vr(Gn)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(vn(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i instanceof Ca)this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i);else if(i instanceof Da){dn(Aa,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else gn("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){dn(Aa,"New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=zr.atPath(e.path);this.limboResolutionsByTarget[n]=new Ra(e),this.remoteStore.listen(new si(r,n,Wr.LimboResolution,wo.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(n,u){return h(this,void 0,void 0,function(){var o,s,e,a=this;return p(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.queryViewsByQuery.forEach(function(t,i){e.push(Promise.resolve().then(function(){var e=i.view.computeDocChanges(n);return e.needsRefill?a.localStore.executeQuery(i.query).then(function(t){return i.view.computeDocChanges(t,e)}):e}).then(function(t){var e=u&&u.targetChanges[i.targetId],n=i.view.applyChanges(t,!0===a.isPrimary,e);if(a.updateTrackedLimbos(i.targetId,n.limboChanges),n.snapshot){a.isPrimary&&a.sharedClientState.updateQueryState(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=Ia.fromSnapshot(i.targetId,n.snapshot);s.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.syncEngineListener.onWatchChange(o),[4,this.localStore.notifyLocalViewChanges(s)];case 2:return t.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){vn(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(r){return h(this,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(r),this.currentUser=r,e?[4,this.localStore.handleUserChange(r)]:[3,3];case 1:return n=t.sent(),this.sharedClientState.handleUserChange(r,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:t.sent(),t.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return t.sent(),[2]}})})},t.prototype.applyPrimaryState=function(c){return h(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return p(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return t.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==c||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),Dn(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?s.push(t):a=a.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,a]);case 4:return t.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return t.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var e=this;Dn(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new vr(pr.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),s=[],a=[],r=function(o){n=n.then(function(){return h(e,void 0,void 0,function(){var e,n,r,i;return p(this,function(t){switch(t.label){case 0:return(n=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return t.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=t.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(r=t.sent()).snapshot&&a.push(r.snapshot),[3,8];case 4:return vn(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 5:return vn(!!(i=t.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(i)];case 6:return e=t.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:t.sent(),t.label=8;case 8:return s.push(e),[2]}})})})},i=0,o=t;i<o.length;i++){r(o[i])}return n.then(function(){return e.syncEngineListener.onWatchChange(a),s})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(r,o,n){return h(this,void 0,void 0,function(){var e,i=this;return p(this,function(t){switch(t.label){case 0:if(this.isPrimary)return dn(Aa,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[r])return[3,5];switch(o){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return h(i,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return e=Gi.createSynthesizedRemoteEventForCurrentChange(r,"current"===o),[4,this.emitNewSnapsAndNotifyLocalStore(n,e)];case 1:return t.sent(),[2]}})})},function(r){return h(i,void 0,void 0,function(){var n;return p(this,function(t){switch(t.label){case 0:return(e=r).code!==En.DATA_LOSS||e.message!==Jo?[3,2]:(n=[],Dn(this.queryViewsByTarget,function(t){return n.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(n)]);case 1:return t.sent(),[3,3];case 2:throw r;case 3:return[2]}var e})})})];case 2:return e=this.queryViewsByTarget[r],this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(e.query,!0)];case 3:return t.sent(),this.syncEngineListener.onWatchError(e.query,n),[3,5];case 4:gn("Unexpected target state: "+o),t.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(l,f){return h(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h=this;return p(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[2];e=0,n=l,t.label=1;case 1:return e<n.length?(c=n[e],vn(!this.queryViewsByTarget[c],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(c)]):[3,6];case 2:return vn(!!(r=t.sent()),"Query data for active target "+c+" not found"),[4,this.localStore.allocateQuery(r)];case 3:return i=t.sent(),[4,this.initializeViewAndComputeSnapshot(i,!1)];case 4:t.sent(),this.remoteStore.listen(i),t.label=5;case 5:return e++,[3,1];case 6:o=function(e){var n;return p(this,function(t){switch(t.label){case 0:return(n=s.queryViewsByTarget[e])?[4,s.localStore.releaseQuery(n.query,!1).then(function(){h.remoteStore.unlisten(e),h.removeAndCleanupQuery(n)}).catch(Qs)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},s=this,a=0,u=f,t.label=7;case 7:return a<u.length?(c=u[a],[5,o(c)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Li().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Li()},t}(),_a=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Oa="SharedClientState",Pa="firestore_clients",La="firestore_mutations",xa="firestore_targets",qa=function(){function s(t,e,n,r){this.user=t,this.batchId=e,this.state=n,vn(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return s.fromWebStorageEntry=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Sn(r.error.code,r.error.message)),i?new s(t,e,r.state,o):(mn(Oa,"Failed to parse mutation state for ID '"+e+"': "+n),null)},s.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},s}(),Fa=function(){function o(t,e,n){this.targetId=t,this.state=e,vn(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return o.fromWebStorageEntry=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Sn(n.error.code,n.error.message)),r?new o(t,n.state,i):(mn(Oa,"Failed to parse target state for ID '"+t+"': "+e),null)},o.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),Ba=function(){function s(t,e){this.clientId=t,this.activeTargetIds=e}return s.fromWebStorageEntry=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=qi(),o=0;r&&o<n.activeTargetIds.length;++o)r=Kr(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new s(t,i):(mn(Oa,"Failed to parse client data for instance '"+t+"': "+e),null)},s}(),Va=function(){function n(t,e){this.clientId=t,this.onlineState=e}return n.fromWebStorageEntry=function(t){var e=JSON.parse(t);return"object"==typeof e&&void 0!==ca[e.onlineState]&&"string"==typeof e.clientId?new n(e.clientId,ca[e.onlineState]):(mn(Oa,"Failed to parse online state: "+t),null)},n}(),Ua=function(){function t(){this.activeTargetIds=qi()}return t.prototype.addQueryTarget=function(t){vn(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Qa=function(){function s(t,e,n,r,i){if(this.queue=t,this.platform=e,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!s.isAvailable(this.platform))throw new Sn(En.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new Ua,this.clientStateKeyRe=new RegExp("^"+Pa+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+La+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+xa+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}return s.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},s.prototype.start=function(){return h(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return p(this,function(t){switch(t.label){case 0:return vn(!this.started,"WebStorageSharedClientState already started"),vn(null!==this.syncEngine,"syncEngine property must be set before calling start()"),vn(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.localClientId&&(o=this.getItem(this.toWebStorageClientStateKey(i)))&&(s=Ba.fromWebStorageEntry(i,o))&&(this.activeClients[s.clientId]=s);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,h=this.earlyEvents;c<h.length;c++)l=h[c],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},s.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},s.prototype.getAllActiveQueryTargets=function(){var n=qi();return Nn(this.activeClients,function(t,e){n=n.unionWith(e.activeTargetIds)}),n},s.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},s.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},s.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},s.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Fa.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},s.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},s.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},s.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},s.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},s.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},s.prototype.setOnlineState=function(t){this.persistOnlineState(t)},s.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},s.prototype.getItem=function(t){var e=this.storage.getItem(t);return dn(Oa,"READ",t,e),e},s.prototype.setItem=function(t,e){dn(Oa,"SET",t,e),this.storage.setItem(t,e)},s.prototype.removeItem=function(t){dn(Oa,"REMOVE",t),this.storage.removeItem(t)},s.prototype.handleWebStorageEvent=function(a){var t=this;if(a.storageArea===this.storage){if(dn(Oa,"EVENT",a.key,a.newValue),a.key===this.localClientStorageKey)return void mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return h(t,void 0,void 0,function(){var e,n,r,i,o,s;return p(this,function(t){if(!this.started)return this.earlyEvents.push(a),[2];if(null===a.key)return[2];if(this.clientStateKeyRe.test(a.key)){if(null==a.newValue)return n=this.fromWebStorageClientStateKey(a.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(a.key,a.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(a.key)){if(null!==a.newValue&&(r=this.fromWebStorageMutationMetadata(a.key,a.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(a.key)){if(null!==a.newValue&&(i=this.fromWebStorageQueryTargetMetadata(a.key,a.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(a.key===this.onlineStateKey){if(null!==a.newValue&&(o=this.fromWebStorageOnlineState(a.newValue)))return[2,this.handleOnlineStateEvent(o)]}else a.key===this.sequenceNumberKey&&(vn(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(t){var e=wo.INVALID;if(null!=t)try{var n=JSON.parse(t);vn("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){mn(Oa,"Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==wo.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(s.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),s.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},s.prototype.persistMutationState=function(t,e,n){var r=new qa(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},s.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},s.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:ca[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},s.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Fa(t,e,n);this.setItem(r,i.toWebStorageJSON())},s.prototype.toWebStorageClientStateKey=function(t){return vn(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Pa+"_"+this.persistenceKey+"_"+t},s.prototype.toWebStorageQueryTargetMetadataKey=function(t){return xa+"_"+this.persistenceKey+"_"+t},s.prototype.toWebStorageMutationBatchKey=function(t){var e=La+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},s.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},s.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return vn(null!==n,"Cannot parse client state key '"+t+"'"),Ba.fromWebStorageEntry(n,e)},s.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);vn(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qa.fromWebStorageEntry(new _a(i),r,e)},s.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);vn(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Fa.fromWebStorageEntry(r,e)},s.prototype.fromWebStorageOnlineState=function(t){return Va.fromWebStorageEntry(t)},s.prototype.handleMutationBatchEvent=function(e){return h(this,void 0,void 0,function(){return p(this,function(t){return e.user.uid!==this.currentUser.uid?(dn(Oa,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},s.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},s.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(e){return h(n,void 0,void 0,function(){return p(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return h(n,void 0,void 0,function(){return p(this,function(t){return i.has(e)||s.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},s.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},s}();var Ka=function(){function t(){this.localState=new Ua,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Ua,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Wa="FirestoreClient",ja=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return Ps.withCacheSize(this.cacheSizeBytes)},t}(),za=function(){},Ga=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=zn.newId()}return t.prototype.start=function(t){var n=this,r=new Eo,i=new Eo,o=!1;return this.credentials.setChangeListener(function(e){o?n.asyncQueue.enqueueAndForget(function(){return n.handleCredentialChange(e)}):(o=!0,n.initializePersistence(t,i,e).then(function(t){return n.initializeRest(e,t)}).then(r.resolve,r.reject))}),this.asyncQueue.enqueueAndForget(function(){return r.promise}),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof ja?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof Sn?t.code===En.FAILED_PRECONDITION||t.code===En.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code)},t.prototype.startIndexedDbPersistence=function(r,i){var t=this,o=Us.buildStoragePrefix(this.databaseInfo),s=new co(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return h(t,void 0,void 0,function(){var e,n;return p(this,function(t){switch(t.label){case 0:if(i.experimentalTabSynchronization&&!Qa.isAvailable(this.platform))throw new Sn(En.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=i.lruParams(),i.experimentalTabSynchronization?(this.sharedClientState=new Qa(this.asyncQueue,this.platform,o,this.clientId,r),[4,Us.createMultiClientIndexedDbPersistence(o,this.clientId,this.platform,this.asyncQueue,s,n,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return e=t.sent(),[3,4];case 2:return this.sharedClientState=new Ka,[4,Us.createIndexedDbPersistence(o,this.clientId,this.platform,this.asyncQueue,s,n)];case 3:e=t.sent(),t.label=4;case 4:return[2,(this.persistence=e).referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=ra.createEagerPersistence(this.clientId),this.sharedClientState=new Ka,Promise.resolve(null)},t.prototype.initializeRest=function(a,u){var t=this;return dn(Wa,"Initializing. user=",a.uid),this.platform.loadConnection(this.databaseInfo).then(function(s){return h(t,void 0,void 0,function(){var e,n,r,i,o=this;return p(this,function(t){switch(t.label){case 0:return this.localStore=new Xs(this.persistence,a),u&&(this.lruScheduler=new Ls(u,this.asyncQueue,this.localStore)),e=this.platform.newSerializer(this.databaseInfo.databaseId),n=new ya(this.asyncQueue,s,this.credentials,e),r=function(t){return o.syncEngine.applyOnlineStateChange(t,la.RemoteStore)},i=function(t){return o.syncEngine.applyOnlineStateChange(t,la.SharedClientState)},this.remoteStore=new wa(this.localStore,n,this.asyncQueue,r),this.syncEngine=new Ma(this.localStore,this.remoteStore,this.sharedClientState,a),this.sharedClientState.onlineStateHandler=i,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Sa(this.syncEngine),[4,this.sharedClientState.start()];case 1:return t.sent(),[4,this.remoteStore.start()];case 2:return t.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return h(o,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return t.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),dn(Wa,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(e){var t=this;return this.asyncQueue.enqueue(function(){return h(t,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown(e&&e.purgePersistenceWithDataLoss)];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new Ta(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof mr)return t;if(t instanceof yr)return null;throw new Sn(En.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(i){var t=this;return this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(i)}).then(function(t){var e=Li(),n=new Na(i,e),r=n.computeDocChanges(t);return n.applyChanges(r,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new Eo;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return h(e,void 0,void 0,function(){return p(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Ha=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ya=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+jn(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(_n("FieldPath","string",n,t[n]),0===t[n].length)throw new Sn(En.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(t)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kn("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(fr.keyField().canonicalString()),e}(),Xa=new RegExp("[~\\*/\\[\\]]");var Ja=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}},$a=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){vn(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=t)(_a.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){vn(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Za=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var e=this;vn(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.tokenCounter,t=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(t).then(function(t){if(e.tokenCounter!==n)throw new Sn(En.ABORTED,"getToken aborted due to token change.");return t?(vn("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new Ja(t.accessToken,e.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){vn(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){vn(null!=this.tokenListener,"removeChangeListener() called twice"),vn(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return vn(null===t||"string"==typeof t,"Received invalid UID: "+t),new _a(t)},t}(),tu=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=_a.FIRST_PARTY,vn(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),eu=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,vn(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new tu(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(_a.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function nu(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t,["next","error","complete"])}var ru,iu,ou=function(){function t(t){this._methodName=t}return t.delete=function(){return su.instance},t.serverTimestamp=function(){return au.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Rn("FieldValue.arrayUnion",arguments,1),new uu(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Rn("FieldValue.arrayRemove",arguments,1),new cu(t)},t.prototype.isEqual=function(t){return this===t},t}(),su=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return a(e,t),e.instance=new e,e}(ou),au=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return a(e,t),e.instance=new e,e}(ou),uu=function(n){function t(t){var e=n.call(this,"FieldValue.arrayUnion")||this;return e._elements=t,e}return a(t,n),t}(ou),cu=function(n){function t(t){var e=n.call(this,"FieldValue.arrayRemove")||this;return e._elements=t,e}return a(t,n),t}(ou),hu=Tn(ou,"Use FieldValue.<field>() instead."),lu=/^__.*__$/,fu=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new mi(t,this.data,this.fieldMask,e)):n.push(new di(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new yi(t,this.fieldTransforms)),n},t}(),pu=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new mi(t,this.data,this.fieldMask,e)];return 0<this.fieldTransforms.length&&n.push(new yi(t,this.fieldTransforms)),n},t}();function du(t){switch(t){case ru.Set:case ru.MergeSet:case ru.Update:return!0;case ru.Argument:return!1;default:throw gn("Unexpected case for UserDataSource: "+t)}}(iu=ru||(ru={}))[iu.Set=0]="Set",iu[iu.Update=1]="Update",iu[iu.MergeSet=2]="MergeSet",iu[iu.Argument=3]="Argument";var mu=function(){function r(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return r.prototype.childContextForField=function(t){var e=null==this.path?null:this.path.child(t),n=new r(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(t),n},r.prototype.childContextForFieldPath=function(t){var e=null==this.path?null:this.path.child(t),n=new r(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},r.prototype.childContextForArray=function(t){return new r(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},r.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Sn(En.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},r.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},r.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},r.prototype.validatePathSegment=function(t){if(du(this.dataSource)&&lu.test(t))throw this.createError("Document fields cannot begin and end with __")},r}(),yu=function(t,e){this.databaseId=t,this.key=e},gu=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new mu(ru.Set,t,fr.EMPTY_PATH);bu("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new fu(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new mu(ru.MergeSet,t,fr.EMPTY_PATH);bu("Data must be an object, but it was:",r,e);var i,o,s=this.parseData(e,r);if(n){for(var a=new ai(fr.comparator),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof Ya)l=h._internalPath;else{if("string"!=typeof h)throw gn("Expected stringOrFieldPath to be a string or a FieldPath");l=Eu(t,h)}if(!r.contains(l))throw new Sn(En.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=ci.fromSet(a),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=ci.fromArray(r.fieldMask),o=r.fieldTransforms;return new fu(s,i,o)},t.prototype.parseUpdateData=function(o,t){var s=this,a=new mu(ru.Update,o,fr.EMPTY_PATH);bu("Data must be an object, but it was:",a,t);var u=new ai(fr.comparator),c=xr.EMPTY;Nn(t,function(t,e){var n=Eu(o,t),r=a.childContextForFieldPath(n);if((e=s.runPreConverter(e,r))instanceof su)u=u.add(n);else{var i=s.parseData(e,r);null!=i&&(u=u.add(n),c=c.set(n,i))}});var e=ci.fromSet(u);return new pu(c,e,a.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new mu(ru.Update,t,fr.EMPTY_PATH),o=[wu(t,e)],s=[n];if(r.length%2!=0)throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(wu(t,r[a])),s.push(r[a+1]);var u=new ai(fr.comparator),c=xr.EMPTY;for(a=0;a<o.length;++a){var h=o[a],l=i.childContextForFieldPath(h),f=this.runPreConverter(s[a],l);if(f instanceof su)u=u.add(h);else{var p=this.parseData(f,l);null!=p&&(u=u.add(h),c=c.set(h,p))}}var d=ci.fromSet(u);return new pu(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new mu(ru.Argument,t,fr.EMPTY_PATH),r=this.parseData(e,n);return vn(null!=r,"Parsed data should not be null."),vn(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Su(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(vu(t=this.runPreConverter(t,e)))return bu("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof ou)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,r){var i=this,o=new vr(Gn);return An(t)?r.path&&0<r.path.length&&r.fieldMask.push(r.path):Nn(t,function(t,e){var n=i.parseData(e,r.childContextForField(t));null!=n&&(o=o.insert(t,n))}),new xr(o)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=this.parseData(s,e.childContextForArray(r));null==a&&(a=Ir.INSTANCE),n.push(a),r++}return new qr(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!du(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof su){if(e.dataSource!==ru.MergeSet)throw e.dataSource===ru.Update?(vn(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof au)e.fieldTransforms.push(new hi(e.path,vi.instance));else if(t instanceof uu){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new bi(n);e.fieldTransforms.push(new hi(e.path,r))}else if(t instanceof cu){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new wi(n);e.fieldTransforms.push(new hi(e.path,i))}else gn("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Ir.INSTANCE;if("number"==typeof t)return Kr(t)?new Ar(t):new kr(t);if("boolean"==typeof t)return Cr.of(t);if("string"==typeof t)return new Rr(t);if(t instanceof Date)return new Mr(ir.fromDate(t));if(t instanceof ir)return new Mr(new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof rr)return new Lr(t);if(t instanceof er)return new Or(t);if(t instanceof yu)return new Pr(t.databaseId,t.key);throw e.createError("Unsupported field value: "+Vn(t))},t.prototype.parseArrayTransformElements=function(r,t){var i=this;return t.map(function(t,e){var n=new mu(ru.Argument,r,fr.EMPTY_PATH);return i.parseData(t,n.childContextForArray(e))})},t}();function vu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ir||t instanceof rr||t instanceof er||t instanceof yu||t instanceof ou)}function bu(t,e,n){if(!vu(n)||!Bn(n)){var r=Vn(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function wu(t,e){if(e instanceof Ya)return e._internalPath;if("string"==typeof e)return Eu(t,e);throw new Sn(En.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Eu(e,t){try{return function(e){if(0<=e.search(Xa))throw new Sn(En.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ya.bind.apply(Ya,[void 0].concat(e.split("."))))}catch(t){throw new Sn(En.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Su(t);throw new Sn(En.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Su(t){return t instanceof Error?t.message:t.toString()}var Tu=Ps.COLLECTION_DISABLED,Iu=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new Sn(En.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Pn("settings","non-empty string","host",t.host),this.host=t.host,Ln("settings","boolean","ssl",t.ssl),this.ssl=Cn(t.ssl,!0);if(Qn("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),Ln("settings","object","credentials",t.credentials),this.credentials=t.credentials,Ln("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?mn("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&mn("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Cn(t.timestampsInSnapshots,!0),Ln("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ps.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Tu&&t.cacheSizeBytes<Ps.MINIMUM_CACHE_SIZE_BYTES)throw new Sn(En.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ps.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes},t}(),Cu=function(){},Du=function(){function o(t){var n=this;this._queue=new To,this.INTERNAL={delete:function(e){return h(n,void 0,void 0,function(){return p(this,function(t){return this._firestoreClient?[2,this._firestoreClient.shutdown(e)]:[2]})})}};var e=new Cu;if("object"==typeof t.options){var r=t;e.firebaseApp=r,e.databaseId=o.databaseIdFromApp(r),e.persistenceKey=e.firebaseApp.name,e.credentials=new Za(r)}else{var i=t;if(!i.projectId)throw new Sn(En.INVALID_ARGUMENT,"Must provide projectId");e.databaseId=new ar(i.projectId,i.database),e.persistenceKey="[DEFAULT]",e.credentials=new $a}e.settings=new Iu({}),this._config=e,this._databaseId=e.databaseId}return o.prototype.settings=function(t){if(kn("Firestore.settings",arguments,1),_n("Firestore.settings","object",1,t),In(t,"persistence"))throw new Sn(En.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Iu(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new Sn(En.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._config.settings=e).credentials&&(this._config.credentials=function(t){if(!t)return new $a;switch(t.type){case"gapi":return new eu(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new Sn(En.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},o.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},o.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},o.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new Sn(En.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new ja(this._config.settings.cacheSizeBytes,void 0!==t&&Cn(t.experimentalTabSynchronization,!1)))},o.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new za),this._firestoreClient},o.prototype.configureClient=function(t){var r=this;vn(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),vn(!this._firestoreClient,"configureClient() called multiple times");var e=new or(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new gu(function(t){if(t instanceof ku){var e=r._config.databaseId,n=t.firestore._config.databaseId;if(!n.isEqual(e))throw new Sn(En.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database);return new yu(r._config.databaseId,t._key)}return t}),this._firestoreClient=new Ga(bn.getPlatform(),e,this._config.credentials,this._queue),this._firestoreClient.start(t)},o.databaseIdFromApp=function(t){var e=t.options;if(!In(e,"projectId"))throw new Sn(En.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new Sn(En.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ar(n)},Object.defineProperty(o.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Sn(En.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),o.prototype.collection=function(t){if(kn("Firestore.collection",arguments,1),_n("Firestore.collection","non-empty string",1,t),!t)throw new Sn(En.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Lu(hr.fromString(t),this)},o.prototype.doc=function(t){if(kn("Firestore.doc",arguments,1),_n("Firestore.doc","non-empty string",1,t),!t)throw new Sn(En.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),ku.forPath(hr.fromString(t),this)},o.prototype.runTransaction=function(e){var n=this;return kn("Firestore.runTransaction",arguments,1),_n("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(t){return e(new Nu(n,t))})},o.prototype.batch=function(){return this.ensureClientConfigured(),new Au(this)},Object.defineProperty(o,"logLevel",{get:function(){switch(fn()){case an.DEBUG:return"debug";case an.ERROR:return"error";case an.SILENT:return"silent";default:return gn("Unknown log level: "+fn())}},enumerable:!0,configurable:!0}),o.setLogLevel=function(t){switch(kn("Firestore.setLogLevel",arguments,1),_n("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":pn(an.DEBUG);break;case"error":pn(an.ERROR);break;case"silent":pn(an.SILENT);break;default:throw new Sn(En.INVALID_ARGUMENT,"Invalid log level: "+t)}},o.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},o}(),Nu=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var n=this;kn("Transaction.get",arguments,1);var r=Bu("Transaction.get",t,this._firestore);return this._transaction.lookup([r._key]).then(function(t){if(!t||1!==t.length)return gn("Mismatch in docs returned from document lookup.");var e=t[0];if(e instanceof yr)return new Mu(n._firestore,r._key,null,!1,!1);if(e instanceof mr)return new Mu(n._firestore,r._key,e,!1,!1);throw gn("BatchGetDocumentsRequest returned unexpected document type: "+e.constructor.name)})},t.prototype.set=function(t,e,n){Mn("Transaction.set",arguments,2,3);var r=Bu("Transaction.set",t,this._firestore),i=(n=xu("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof Ya?(Rn("Transaction.update",arguments,3),r=Bu("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(kn("Transaction.update",arguments,2),r=Bu("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){kn("Transaction.delete",arguments,1);var e=Bu("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Au=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){Mn("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Bu("WriteBatch.set",t,this._firestore),i=(n=xu("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,fi.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),i="string"==typeof e||e instanceof Ya?(Rn("WriteBatch.update",arguments,3),r=Bu("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(kn("WriteBatch.update",arguments,2),r=Bu("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,fi.exists(!0))),this},t.prototype.delete=function(t){kn("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Bu("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new gi(e._key,fi.NONE)),this},t.prototype.commit=function(){return h(this,void 0,void 0,function(){return p(this,function(t){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new Sn(En.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ku=function(){function n(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return n.forPath=function(t,e){if(t.length%2!=0)throw new Sn(En.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new n(new pr(t),e)},Object.defineProperty(n.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new Lu(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),n.prototype.collection=function(t){if(kn("DocumentReference.collection",arguments,1),_n("DocumentReference.collection","non-empty string",1,t),!t)throw new Sn(En.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=hr.fromString(t);return new Lu(this._key.path.child(e),this.firestore)},n.prototype.isEqual=function(t){if(!(t instanceof n))throw Kn("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},n.prototype.set=function(t,e){Mn("DocumentReference.set",arguments,1,2);var n=(e=xu("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,fi.NONE))},n.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof Ya?(Rn("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(kn("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,fi.exists(!0)))},n.prototype.delete=function(){return kn("DocumentReference.delete",arguments,0),this._firestoreClient.write([new gi(this._key,fi.NONE)])},n.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Mn("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||nu(t[i])||(Qn("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Ln("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=nu(t[i])?t[i]:(_n("DocumentReference.onSnapshot","function",i,t[i]),On("DocumentReference.onSnapshot","function",i+1,t[i+1]),On("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},n.prototype.onSnapshotInternal=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new Ha({next:function(t){if(n.next){vn(t.docs.size<=1,"Too many documents returned on a document query");var e=t.docs.get(r._key);n.next(new Mu(r.firestore,r._key,e,t.fromCache,t.hasPendingWrites))}},error:e}),o=this._firestoreClient.listen(zr.atPath(this._key.path),i,t);return function(){i.mute(),r._firestoreClient.unlisten(o)}},n.prototype.get=function(n){var r=this;return Mn("DocumentReference.get",arguments,0,1),Fu("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function(t){e(new Mu(r.firestore,r._key,t,!0,t instanceof mr&&t.hasLocalMutations))},t):r.getViaSnapshotListener(e,t,n)})},n.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new Sn(En.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new Sn(En.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},n}(),Ru=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Mu=function(){function e(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(t){return Mn("DocumentSnapshot.data",arguments,0,1),t=qu("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,Sr.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(t,e){if(Mn("DocumentSnapshot.get",arguments,1,2),e=qu("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(wu("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,Sr.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new ku(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Ru(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kn("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(t,n){var r=this,i={};return t.forEach(function(t,e){i[t]=r.convertValue(e,n)}),i},e.prototype.convertValue=function(t,e){if(t instanceof xr)return this.convertObject(t,e);if(t instanceof qr)return this.convertArray(t,e);if(t instanceof Pr){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||mn("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new ku(n,this._firestore)}return t.value(e)},e.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},e}(),_u=function(o){function t(t,e,n,r,i){return o.call(this,t,e,n,r,i)||this}return a(t,o),t.prototype.data=function(t){var e=o.prototype.data.call(this,t);return vn("object"==typeof e,"Document in a QueryDocumentSnapshot should exist"),e},t}(Mu),Ou=function(){function c(t,e){this._query=t,this.firestore=e}return c.prototype.where=function(t,e,n){var r;kn("Query.where",arguments,3),_n("Query.where","non-empty string",2,e),Un("Query.where",3,n);var i=wu("Query.where",t),o=Hr.fromString(e);if(i.isKeyField()){if(o===Hr.ARRAY_CONTAINS)throw new Sn(En.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof n){if(-1!==n.indexOf("/"))throw new Sn(En.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===n)throw new Sn(En.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new hr([n]));vn(s.length%2==0,"Path should be a document key"),r=new Pr(this.firestore._databaseId,new pr(s))}else{if(!(n instanceof ku))throw new Sn(En.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+Vn(n)+".");var a=n;r=new Pr(this.firestore._databaseId,a._key)}}else r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var u=Gr.create(i,o,r);return this.validateNewFilter(u),new c(this._query.addFilter(u),this.firestore)},c.prototype.orderBy=function(t,e){var n;if(Mn("Query.orderBy",arguments,1,2),On("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=$r.ASCENDING;else{if("desc"!==e)throw new Sn(En.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=$r.DESCENDING}if(null!==this._query.startAt)throw new Sn(En.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Sn(En.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=wu("Query.orderBy",t),i=new ti(r,n);return this.validateNewOrderBy(i),new c(this._query.addOrderBy(i),this.firestore)},c.prototype.limit=function(t){if(kn("Query.limit",arguments,1),_n("Query.limit","number",1,t),t<=0)throw new Sn(En.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new c(this._query.withLimit(t),this.firestore)},c.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Rn("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",t,e,!0);return new c(this._query.withStartAt(r),this.firestore)},c.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Rn("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",t,e,!1);return new c(this._query.withStartAt(r),this.firestore)},c.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Rn("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",t,e,!0);return new c(this._query.withEndAt(r),this.firestore)},c.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Rn("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",t,e,!1);return new c(this._query.withEndAt(r),this.firestore)},c.prototype.isEqual=function(t){if(!(t instanceof c))throw Kn("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},c.prototype.boundFromDocOrFields=function(t,e,n,r){if(Un(t,1,e),e instanceof Mu){if(0<n.length)throw new Sn(En.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Sn(En.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},c.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new Pr(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(a instanceof _r)throw new Sn(En.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===a){var u=s.field.canonicalString();throw new Sn(En.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Zr(r,n)},c.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new Sn(En.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new Sn(En.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(-1!==s.indexOf("/"))throw new Sn(En.INVALID_ARGUMENT,"Invalid query. Document ID '"+s+"' contains a slash in "+t+"()");var a=new pr(this._query.path.child(s));i.push(new Pr(this.firestore._databaseId,a))}else{var u=this.firestore._dataConverter.parseQueryValue(t,s);i.push(u)}}return new Zr(i,n)},c.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Mn("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||nu(t[i])||(Qn("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Ln("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=nu(t[i])?t[i]:(_n("Query.onSnapshot","function",i,t[i]),On("Query.onSnapshot","function",i+1,t[i+1]),On("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},c.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Ha({next:function(t){e.next&&e.next(new Pu(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},c.prototype.get=function(n){var r=this;return Mn("Query.get",arguments,0,1),Fu("Query.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function(t){e(new Pu(r.firestore,r._query,t))},t):r.getViaSnapshotListener(e,t,n)})},c.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new Sn(En.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},c.prototype.validateNewFilter=function(t){if(t instanceof Yr)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new Sn(En.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Hr.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new Sn(En.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},c.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},c.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new Sn(En.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},c}(),Pu=function(){function e(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ru(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,n){var r=this;Mn("QuerySnapshot.forEach",arguments,1,2),_n("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(t){e.call(n,r.convertToDocumentImpl(t))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Ou(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(t){t&&(Qn("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Ln("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new Sn(En.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,e,o){{if(o.oldDocs.isEmpty()){var n,r=0;return o.docChanges.map(function(t){var e=new _u(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key));return vn(t.type===Fi.Added,"Invalid event type for first snapshot"),vn(!n||o.query.docComparator(n,t.doc)<0,"Got added events in wrong order"),n=t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:r++}})}var s=o.oldDocs;return o.docChanges.filter(function(t){return e||t.type!==Fi.Metadata}).map(function(t){var e=new _u(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key)),n=-1,r=-1;return t.type!==Fi.Added&&(vn(0<=(n=s.indexOf(t.doc.key)),"Index for document not found"),s=s.delete(t.doc.key)),t.type!==Fi.Removed&&(s=s.add(t.doc),r=s.indexOf(t.doc.key)),{type:function(t){switch(t){case Fi.Added:return"added";case Fi.Modified:case Fi.Metadata:return"modified";case Fi.Removed:return"removed";default:return gn("Unknown change type: "+t)}}(t.type),doc:e,oldIndex:n,newIndex:r}})}}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Kn("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(t){return new _u(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},e}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Pu.prototype.docChanges,t,{get:function(){return function(){throw new Sn(En.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var Lu=function(r){function t(t,e){var n=r.call(this,zr.atPath(t),e)||this;if(t.length%2!=1)throw new Sn(En.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return n}return a(t,r),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new ku(new pr(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(t){if(Mn("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=zn.newId()),_n("CollectionReference.doc","non-empty string",1,t),""===t)throw new Sn(En.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=hr.fromString(t);return ku.forPath(this._query.path.child(e),this.firestore)},t.prototype.add=function(t){kn("CollectionReference.add",arguments,1),_n("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},t}(Ou);function xu(t,e){if(void 0===e)return{merge:!1};if(Qn(t,e,["merge","mergeFields"]),Ln(t,"boolean","merge",e.merge),xn(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof Ya}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Sn(En.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function qu(t,e){return void 0===e?{}:(Qn(t,e,["serverTimestamps"]),qn(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Fu(t,e){On(t,"object",1,e),e&&(Qn(t,e,["source"]),qn(t,0,"source",e.source,["default","server","cache"]))}function Bu(t,e,n){if(e instanceof ku){if(e.firestore!==n)throw new Sn(En.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Kn(t,"DocumentReference",1,e)}var Vu=Tn(Du,"Use firebase.firestore() instead."),Uu=Tn(Nu,"Use firebase.firestore().runTransaction() instead."),Qu=Tn(Au,"Use firebase.firestore().batch() instead."),Ku=Tn(ku,"Use firebase.firestore().doc() instead."),Wu=Tn(Mu),ju=Tn(_u),zu=Tn(Ou),Gu=Tn(Pu),Hu=Tn(Lu,"Use firebase.firestore().collection() instead."),Yu={Firestore:Vu,GeoPoint:rr,Timestamp:ir,Blob:nr,Transaction:Uu,WriteBatch:Qu,DocumentReference:Ku,DocumentSnapshot:Wu,Query:zu,QueryDocumentSnapshot:ju,QuerySnapshot:Gu,CollectionReference:Hu,FieldPath:Ya,FieldValue:hu,setLogLevel:Du.setLogLevel,CACHE_SIZE_UNLIMITED:Tu};function Xu(t){t.INTERNAL.registerService("firestore",function(t){return new Du(t)},function(t){vn(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Yu))}Xu(Ju)}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],t):t((e=e||self).firebase)}(this,function(Ce){"use strict";try{(function(){Ce=Ce&&Ce.hasOwnProperty("default")?Ce.default:Ce;var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function l(o,s,a,c){return new(a||(a=Promise))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((c=c.apply(o,s||[])).next())})}function b(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var s="FirebaseError",a=Error.captureStackTrace,c=function(e,t){if(this.code=e,this.message=t,a)a(this,u.prototype.create);else try{throw Error.apply(this,arguments)}catch(e){this.name=s,Object.defineProperty(this,"stack",{get:function(){return e.stack}})}};c.prototype=Object.create(Error.prototype),(c.prototype.constructor=c).prototype.name=s;var u=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,r){void 0===r&&(r={});var t,n=this.errors[e],i=this.service+"/"+e;t=void 0===n?"Error":n.replace(this.pattern,function(e,t){var n=r[t];return void 0!==n?n.toString():"<"+t+"?>"}),t=this.serviceName+": "+t+" ("+i+").";var o=new c(i,t);for(var s in r)r.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=r[s]);return o},e}();!function(n){function e(){var e=n.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var t=1;t<e.blockSize;++t)e.pad_[t]=0;return e.reset(),e}i(e,n),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){s=r<40?r<20?(o=h^c&(u^h),1518500249):(o=c^u^h,1859775393):r<60?(o=c&u|h&(c|u),2400959708):(o=c^u^h,3395469782);i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295;f=h,h=u,u=4294967295&(c<<30|c>>>2),c=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}(function(){this.blockSize=-1});function h(e,t){var n=new f(e,t);return n.subscribe.bind(n)}var e,f=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=d),void 0===r.error&&(r.error=d),void 0===r.complete&&(r.complete=d);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function d(){}var p,t,v,g,y="only-available-in-window",w="only-available-in-sw",m="should-be-overriden",k="bad-sender-id",_="incorrect-gcm-sender-id",S="permission-default",T="permission-blocked",P="unsupported-browser",M="notifications-blocked",D="failed-serviceworker-registration",C="sw-registration-expected",O="get-subscription-failed",I="invalid-saved-token",N="sw-reg-redundant",E="token-subscribe-failed",A="token-subscribe-no-token",K="token-subscribe-no-push-set",x="token-unsubscribe-failed",W="token-update-failed",F="token-update-no-token",V="use-sw-before-get-token",U="invalid-delete-token",j="delete-token-not-found",R="delete-scope-not-found",z="bg-handler-function-expected",L="no-window-client-to-msg",H="unable-to-resubscribe",B="no-fcm-token-for-resubscribe",q="failed-to-delete-token",G="no-sw-in-reg",$="bad-scope",Y="bad-vapid-key",J="bad-subscription",Q="bad-token",X="bad-push-set",Z="failed-delete-vapid-key",ee="invalid-public-vapid-key",te="use-public-key-before-get-token",ne="public-vapid-key-decryption-failed",re=((e={})[y]="This method is available in a Window context.",e[w]="This method is available in a service worker context.",e[m]="This method should be overriden by extended classes.",e[k]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",e[S]="The required permissions were not granted and dismissed instead.",e[T]="The required permissions were not granted and blocked instead.",e[P]="This browser doesn't support the API's required to use the firebase SDK.",e[M]="Notifications have been blocked.",e[D]="We are unable to register the default service worker. {$browserErrorMessage}",e[C]="A service worker registration was the expected input.",e[O]="There was an error when trying to get any existing Push Subscriptions.",e[I]="Unable to access details of the saved token.",e[N]="The service worker being used for push was made redundant.",e[E]="A problem occured while subscribing the user to FCM: {$message}",e[A]="FCM returned no token when subscribing the user to push.",e[K]="FCM returned an invalid response when getting an FCM token.",e[x]="A problem occured while unsubscribing the user from FCM: {$message}",e[W]="A problem occured while updating the user from FCM: {$message}",e[F]="FCM returned no token when updating the user to push.",e[V]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",e[U]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",e[j]="The deletion attempt for token could not be performed as the token was not found.",e[R]="The deletion attempt for service worker scope could not be performed as the scope was not found.",e[z]="The input to setBackgroundMessageHandler() must be a function.",e[L]="An attempt was made to message a non-existant window client.",e[H]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",e[B]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",e[q]="Unable to delete the currently saved token.",e[G]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",e[_]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",e[$]="The service worker scope must be a string with at least one character.",e[Y]="The public VAPID key is not a Uint8Array with 65 bytes.",e[J]="The subscription must be a valid PushSubscription.",e[Q]="The FCM Token used for storage / lookup was not a valid token string.",e[X]="The FCM push set used for storage / lookup was not not a valid push set string.",e[Z]="The VAPID key could not be deleted.",e[ee]="The public VAPID key must be a string.",e[ne]="The public VAPID key did not equal 65 bytes when decrypted.",e),ie=new u("messaging","Messaging",re),oe=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),se="https://fcm.googleapis.com";function ae(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function ce(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e}(t)))}function ue(e){return ce(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(t=p||(p={})).TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data",(g=v||(v={})).PUSH_MSG_RECEIVED="push-msg-received",g.NOTIFICATION_CLICKED="notification-clicked";var he=function(){function e(){}return e.prototype.getToken=function(u,h,f){return l(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c;return b(this,function(e){switch(e.label){case 0:t=ue(h.getKey("p256dh")),n=ue(h.getKey("auth")),r="authorized_entity="+u+"&endpoint="+h.endpoint+"&encryption_key="+t+"&encryption_auth="+n,ae(f.buffer,oe.buffer)||(i=ue(f),r+="&application_pub_key="+i),(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),s={method:"POST",headers:o,body:r},e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(se+"/fcm/connect/subscribe",s)];case 2:return[4,e.sent().json()];case 3:return a=e.sent(),[3,5];case 4:throw e.sent(),ie.create(E);case 5:if(a.error)throw c=a.error.message,ie.create(E,{message:c});if(!a.token)throw ie.create(A);if(!a.pushSet)throw ie.create(K);return[2,{token:a.token,pushSet:a.pushSet}]}})})},e.prototype.updateToken=function(u,h,f,d,p){return l(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c;return b(this,function(e){switch(e.label){case 0:t=ue(d.getKey("p256dh")),n=ue(d.getKey("auth")),r="push_set="+f+"&token="+h+"&authorized_entity="+u+"&endpoint="+d.endpoint+"&encryption_key="+t+"&encryption_auth="+n,ae(p.buffer,oe.buffer)||(i=ue(p),r+="&application_pub_key="+i),(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),s={method:"POST",headers:o,body:r},e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(se+"/fcm/connect/subscribe",s)];case 2:return[4,e.sent().json()];case 3:return a=e.sent(),[3,5];case 4:throw e.sent(),ie.create(W);case 5:if(a.error)throw c=a.error.message,ie.create(W,{message:c});if(!a.token)throw ie.create(F);return[2,a.token]}})})},e.prototype.deleteToken=function(s,a,c){return l(this,void 0,void 0,function(){var t,n,r,i,o;return b(this,function(e){switch(e.label){case 0:t="authorized_entity="+s+"&token="+a+"&pushSet="+c,(n=new Headers).append("Content-Type","application/x-www-form-urlencoded"),r={method:"POST",headers:n,body:t},e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(se+"/fcm/connect/unsubscribe",r)];case 2:return[4,e.sent().json()];case 3:if((i=e.sent()).error)throw o=i.error.message,ie.create(x,{message:o});return[3,5];case 4:throw e.sent(),ie.create(x);case 5:return[2]}})})},e}();function fe(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var de="undefined",pe="fcm_token_object_Store";function le(){var t=indexedDB.open(de);t.onerror=function(e){},t.onsuccess=function(e){!function(n){if(n.objectStoreNames.contains(pe)){var e=n.transaction(pe).objectStore(pe),r=new he,i=e.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var e=i.result;if(e){var t=e.value;r.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet),e.continue()}else n.close(),indexedDB.deleteDatabase(de)}}}(t.result)}}var be=function(){function e(){this.dbPromise=null}return e.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},e.prototype.getIndex=function(t,n){return this.createTransaction(function(e){return e.index(t).get(n)})},e.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},e.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},e.prototype.closeDatabase=function(){return l(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}})})},e.prototype.createTransaction=function(s,a){return void 0===a&&(a="readonly"),l(this,void 0,void 0,function(){var t,r,i,o;return b(this,function(e){switch(e.label){case 0:return[4,this.getDb()];case 1:return t=e.sent(),r=t.transaction(this.objectStoreName,a),i=r.objectStore(this.objectStoreName),[4,(n=s(i),new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}}))];case 2:return o=e.sent(),[2,new Promise(function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}})]}var n})})},e.prototype.getDb=function(){var r=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,t){var n=indexedDB.open(r.dbName,r.dbVersion);n.onsuccess=function(){e(n.result)},n.onerror=function(){r.dbPromise=null,t(n.error)},n.onupgradeneeded=function(e){return r.onDbUpgrade(n,e)}})),this.dbPromise},e}();var ve=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return i(e,t),e.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:le();case 2:var r,i=(r=e.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var e=i.result;if(e){var t=e.value,n=o({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=fe(t.vapidKey)),"string"==typeof t.auth&&(n.auth=fe(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=fe(t.p256dh).buffer),e.update(n),e.continue()}}}},e.prototype.getTokenDetailsFromToken=function(t){return l(this,void 0,void 0,function(){return b(this,function(e){if(!t)throw ie.create(Q);return ge({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},e.prototype.getTokenDetailsFromSWScope=function(t){return l(this,void 0,void 0,function(){return b(this,function(e){if(!t)throw ie.create($);return ge({swScope:t}),[2,this.get(t)]})})},e.prototype.saveTokenDetails=function(t){return l(this,void 0,void 0,function(){return b(this,function(e){if(!t.swScope)throw ie.create($);if(!t.vapidKey)throw ie.create(Y);if(!t.endpoint||!t.auth||!t.p256dh)throw ie.create(J);if(!t.fcmSenderId)throw ie.create(k);if(!t.fcmToken)throw ie.create(Q);if(!t.fcmPushSet)throw ie.create(X);return ge(t),[2,this.put(t)]})})},e.prototype.deleteToken=function(n){return l(this,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:return"string"!=typeof n||0===n.length?[2,Promise.reject(ie.create(U))]:[4,this.getTokenDetailsFromToken(n)];case 1:if(!(t=e.sent()))throw ie.create(j);return[4,this.delete(t.swScope)];case 2:return e.sent(),[2,t]}})})},e}(be);function ge(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw ie.create(Q);if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw ie.create($);if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw ie.create(Y);if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw ie.create(J);if(e.auth&&!(e.auth instanceof ArrayBuffer))throw ie.create(J);if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw ie.create(J);if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw ie.create(k);if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw ie.create(X)}var ye=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return i(e,t),e.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(n){return l(this,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:if("string"!=typeof n||0===n.length)throw ie.create($);return[4,this.get(n)];case 1:return[2,(t=e.sent())?t.vapidKey:void 0]}})})},e.prototype.saveVapidDetails=function(n,r){return l(this,void 0,void 0,function(){var t;return b(this,function(e){if("string"!=typeof n||0===n.length)throw ie.create($);if(null===r||65!==r.length)throw ie.create(Y);return t={swScope:n,vapidKey:r},[2,this.put(t)]})})},e.prototype.deleteVapidDetails=function(n){return l(this,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:return[4,this.getVapidFromSWScope(n)];case 1:if(!(t=e.sent()))throw ie.create(R);return[4,this.delete(n)];case 2:return e.sent(),[2,t]}})})},e}(be),we="messagingSenderId",me=function(){function e(e){var t=this;if(!e.options[we]||"string"!=typeof e.options[we])throw ie.create(k);this.messagingSenderId=e.options[we],this.tokenDetailsModel=new ve,this.vapidDetailsModel=new ye,this.iidModel=new he,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}return e.prototype.getToken=function(){return l(this,void 0,void 0,function(){var t,n,r,i,o;return b(this,function(e){switch(e.label){case 0:if("denied"===(t=this.getNotificationPermission_()))throw ie.create(M);return"granted"!==t?[2,null]:[4,this.getSWRegistration_()];case 1:return n=e.sent(),[4,this.getPublicVapidKey_()];case 2:return r=e.sent(),[4,this.getPushSubscription(n,r)];case 3:return i=e.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(n.scope)];case 4:return(o=e.sent())?[2,this.manageExistingToken(n,i,r,o)]:[2,this.getNewToken(n,i,r)]}})})},e.prototype.manageExistingToken=function(t,n,r,i){return l(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return function(e,t,n){if(!n.vapidKey||!ae(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=ae(e.getKey("auth"),n.auth),o=ae(e.getKey("p256dh"),n.p256dh);return r&&i&&o}(n,r,i)?Date.now()<i.createTime+6048e5?[2,i.fcmToken]:[2,this.updateToken(t,n,r,i)]:[4,this.deleteTokenFromDB(i.fcmToken)];case 1:return e.sent(),[2,this.getNewToken(t,n,r)]}})})},e.prototype.updateToken=function(i,o,s,a){return l(this,void 0,void 0,function(){var t,n,r;return b(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,a.fcmToken,a.fcmPushSet,o,s)];case 1:return t=e.sent(),n={swScope:i.scope,vapidKey:s,fcmSenderId:this.messagingSenderId,fcmToken:t,fcmPushSet:a.fcmPushSet,createTime:Date.now(),endpoint:o.endpoint,auth:o.getKey("auth"),p256dh:o.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(n)];case 2:return e.sent(),[4,this.vapidDetailsModel.saveVapidDetails(i.scope,s)];case 3:return e.sent(),[2,t];case 4:return r=e.sent(),[4,this.deleteToken(a.fcmToken)];case 5:throw e.sent(),r;case 6:return[2]}})})},e.prototype.getNewToken=function(r,i,o){return l(this,void 0,void 0,function(){var t,n;return b(this,function(e){switch(e.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,i,o)];case 1:return t=e.sent(),n={swScope:r.scope,vapidKey:o,fcmSenderId:this.messagingSenderId,fcmToken:t.token,fcmPushSet:t.pushSet,createTime:Date.now(),endpoint:i.endpoint,auth:i.getKey("auth"),p256dh:i.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(n)];case 2:return e.sent(),[4,this.vapidDetailsModel.saveVapidDetails(r.scope,o)];case 3:return e.sent(),[2,t.token]}})})},e.prototype.deleteToken=function(r){return l(this,void 0,void 0,function(){var t,n;return b(this,function(e){switch(e.label){case 0:return[4,this.deleteTokenFromDB(r)];case 1:return e.sent(),[4,this.getSWRegistration_()];case 2:return(t=e.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=e.sent())return[2,n.unsubscribe()];e.label=4;case 4:return[2,!0]}})})},e.prototype.deleteTokenFromDB=function(n){return l(this,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:return[4,this.tokenDetailsModel.deleteToken(n)];case 1:return t=e.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return e.sent(),[2]}})})},e.prototype.getPushSubscription=function(t,n){return t.pushManager.getSubscription().then(function(e){return e||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})})},e.prototype.requestPermission=function(){throw ie.create(y)},e.prototype.useServiceWorker=function(e){throw ie.create(y)},e.prototype.usePublicVapidKey=function(e){throw ie.create(y)},e.prototype.onMessage=function(e,t,n){throw ie.create(y)},e.prototype.onTokenRefresh=function(e,t,n){throw ie.create(y)},e.prototype.setBackgroundMessageHandler=function(e){throw ie.create(w)},e.prototype.delete=function(){return l(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}();var ke="FCM_MSG",_e=function(n){function e(e){var t=n.call(this,e)||this;return t.bgMessageHandler=null,self.addEventListener("push",function(e){t.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){t.onSubChange(e)}),self.addEventListener("notificationclick",function(e){t.onNotificationClick(e)}),t}return i(e,n),e.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},e.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},e.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},e.prototype.onPush_=function(a){return l(this,void 0,void 0,function(){var t,n,r,i,o,s;return b(this,function(e){switch(e.label){case 0:if(!a.data)return[2];try{t=a.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return e.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=e.sent(),o=n.actions,s=Notification.maxActions,o&&s&&o.length>s&&console.warn("This browser only supports "+s+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return e.sent(),[2];case 5:return[2]}})})},e.prototype.onSubChange_=function(e){return l(this,void 0,void 0,function(){var t,n,r,i;return b(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=e.sent(),[3,3];case 2:throw n=e.sent(),ie.create(H,{message:n});case 3:return e.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return e.sent(),[3,8];case 5:return r=e.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope)];case 6:if(!(i=e.sent()))throw r;return[4,this.deleteToken(i.fcmToken)];case 7:throw e.sent(),r;case 8:return[2]}})})},e.prototype.onNotificationClick_=function(o){return l(this,void 0,void 0,function(){var t,n,r,i;return b(this,function(e){switch(e.label){case 0:return o.notification&&o.notification.data&&o.notification.data[ke]?o.action?[2]:(o.stopImmediatePropagation(),o.notification.close(),(t=o.notification.data[ke]).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=e.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=e.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=e.sent(),e.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,i=Te(v.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},e.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=o({},e.notification);return n.data=o({},e.notification.data,((t={})[ke]=e,t)),n}},e.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw ie.create(z);this.bgMessageHandler=e},e.prototype.getWindowClient_=function(o){return l(this,void 0,void 0,function(){var t,n,r,i;return b(this,function(e){switch(e.label){case 0:return t=new URL(o,self.location.href).href,[4,Se()];case 1:for(n=e.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}})})},e.prototype.attemptToMessageClient_=function(t,n){return l(this,void 0,void 0,function(){return b(this,function(e){if(!t)throw ie.create(L);return t.postMessage(n),[2]})})},e.prototype.hasVisibleClients_=function(){return l(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return[4,Se()];case 1:return[2,e.sent().some(function(e){return"visible"===e.visibilityState})]}})})},e.prototype.sendMessageToWindowClients_=function(i){return l(this,void 0,void 0,function(){var t,n,r=this;return b(this,function(e){switch(e.label){case 0:return[4,Se()];case 1:return t=e.sent(),n=Te(v.PUSH_MSG_RECEIVED,i),[4,Promise.all(t.map(function(e){return r.attemptToMessageClient_(e,n)}))];case 2:return e.sent(),[2]}})})},e.prototype.getSWRegistration_=function(){return l(this,void 0,void 0,function(){return b(this,function(e){return[2,self.registration]})})},e.prototype.getPublicVapidKey_=function(){return l(this,void 0,void 0,function(){var t,n;return b(this,function(e){switch(e.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=e.sent()))throw ie.create(C);return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return null==(n=e.sent())?[2,oe]:[2,n]}})})},e}(me);function Se(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Te(e,t){var n;return(n={})[p.TYPE_OF_MSG]=e,n[p.DATA]=t,n}var Pe,Me=function(n){function e(e){var t=n.call(this,e)||this;return t.registrationToUse=null,t.publicVapidKeyToUse=null,t.manifestCheckPromise=null,t.messageObserver=null,t.tokenRefreshObserver=null,t.onMessageInternal=h(function(e){t.messageObserver=e}),t.onTokenRefreshInternal=h(function(e){t.tokenRefreshObserver=e}),t.setupSWMessageListener_(),t}return i(e,n),e.prototype.getToken=function(){return l(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return l(this,void 0,void 0,function(){var t,n;return b(this,function(e){switch(e.label){case 0:if(!(t=document.querySelector('link[rel="manifest"]')))return[2];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(t.href)];case 2:return[4,e.sent().json()];case 3:return n=e.sent(),[3,5];case 4:return e.sent(),[2];case 5:if(!n||!n.gcm_sender_id)return[2];if("103953800507"!==n.gcm_sender_id)throw ie.create(_);return[2]}})})}()),[4,this.manifestCheckPromise];case 1:return e.sent(),[2,n.prototype.getToken.call(this)]}})})},e.prototype.requestPermission=function(){return l(this,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?ie.create(T):ie.create(S)}})})},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw ie.create(C);if(null!=this.registrationToUse)throw ie.create(V);this.registrationToUse=e},e.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw ie.create(ee);if(null!=this.publicVapidKeyToUse)throw ie.create(te);var t=fe(e);if(65!==t.length)throw ie.create(ne);this.publicVapidKeyToUse=t},e.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},e.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},e.prototype.waitForRegistrationToActivate_=function(r){var i=r.installing||r.waiting||r.active;return new Promise(function(e,t){if(i)if("activated"!==i.state)if("redundant"!==i.state){var n=function(){if("activated"===i.state)e(r);else{if("redundant"!==i.state)return;t(ie.create(N))}i.removeEventListener("statechange",n)};i.addEventListener("statechange",n)}else t(ie.create(N));else e(r);else t(ie.create(G))})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(e){throw ie.create(D,{browserErrorMessage:e.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return(t.registrationToUse=e).update(),e})}))},e.prototype.getPublicVapidKey_=function(){return l(this,void 0,void 0,function(){return b(this,function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,oe]})})},e.prototype.setupSWMessageListener_=function(){var r=this;navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[p.TYPE_OF_MSG]){var t=e.data;switch(t[p.TYPE_OF_MSG]){case v.PUSH_MSG_RECEIVED:case v.NOTIFICATION_CLICKED:var n=t[p.DATA];r.messageObserver&&r.messageObserver.next(n)}}},!1)},e}(me);function De(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Pe={isSupported:De},Ce.INTERNAL.registerService("messaging",function(e){if(!De())throw ie.create(P);return self&&"ServiceWorkerGlobalScope"in self?new _e(e):new Me(e)},Pe)}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-messaging - be sure to load firebase-app.js first.")}});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],t):t((e=e||self).firebase)}(this,function(s){"use strict";try{(function(){s=s&&s.hasOwnProperty("default")?s.default:s;var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function t(i,a,u,s){return new(u||(u=Promise))(function(e,t){function n(e){try{o(s.next(e))}catch(e){t(e)}}function r(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,r)}o((s=s.apply(i,a||[])).next())})}function d(n,r){var o,i,a,e,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},y=function(o){function i(e,t,n){var r=o.call(this,t)||this;return Object.setPrototypeOf(r,i.prototype),r.code=e,r.details=n,r}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(i,o),i}(Error);var n=function(){function e(e){this.app=e}return e.prototype.getAuthToken=function(){return t(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getInstanceIdToken=function(){return t(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(t=e.sent())?[2,t]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getContext=function(){return t(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return[4,this.getAuthToken()];case 1:return t=e.sent(),[4,this.getInstanceIdToken()];case 2:return n=e.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();function o(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var i=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return o(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null===e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=parseFloat(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?o(e,function(e){return t.decode(e)}):e},e}();var e,a=function(){function e(e,t){void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new i,this.emulatorOrigin=null,this.contextProvider=new n(e)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+t+".cloudfunctions.net/"+e:this.emulatorOrigin+"/"+t+"/"+n+"/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(t,n){var r=this;return function(e){return r.call(t,e,n||{})}},e.prototype.postJSON=function(r,o,i){return t(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:i.append("Content-Type","application/json"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(o),headers:i})];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[2,{status:0,json:null}];case 4:n=null,e.label=5;case 5:return e.trys.push([5,7,,8]),[4,t.json()];case 6:return n=e.sent(),[3,8];case 7:return e.sent(),[3,8];case 8:return[2,{status:t.status,json:n}]}})})},e.prototype.call=function(l,f,p){return t(this,void 0,void 0,function(){var t,r,o,i,a,u,s,c;return d(this,function(e){switch(e.label){case 0:return t=this._url(l),f=this.serializer.encode(f),r={data:f},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(i=e.sent()).authToken&&o.append("Authorization","Bearer "+i.authToken),i.instanceIdToken&&o.append("Firebase-Instance-ID-Token",i.instanceIdToken),a=p.timeout||7e4,[4,Promise.race([this.postJSON(t,r,o),(n=a,new Promise(function(e,t){setTimeout(function(){t(new y("deadline-exceeded","deadline-exceeded"))},n)}))])];case 2:if(u=e.sent(),s=function(e,t,n){var r=function(e){if(200<=e&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),o=r,i=void 0;try{var a=t.error;if(a){var u=a.status;if("string"==typeof u){if(!h[u])return new y("internal","internal");r=h[u]}o=u;var s=a.message;"string"==typeof s&&(o=s),void 0!==(i=a.details)&&(i=n.decode(i))}}catch(e){}return"ok"===r?null:new y(r,o,i)}(u.status,u.json,this.serializer))throw s;if(!u.json)throw new y("internal","Response is not valid JSON object.");if(void 0===(c=u.json.data)&&(c=u.json.result),void 0===c)throw new y("internal","Response is missing data field.");return[2,{data:this.serializer.decode(c)}]}var n})})},e}();function u(e,t,n){return new a(e,n)}e={Functions:a},s.INTERNAL.registerService("functions",u,e,void 0,!0)}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-functions - be sure to load firebase-app.js first.")}});